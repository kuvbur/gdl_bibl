stdialogtitle=``
stbuilddate=``
stversion=``
steptar=`http://eptar.hu`
stcadsupport=``
stsupport=``
dim tabtitles[5]
tabtitles[1]=`Основные настройки`
tabtitles[2]=`Геометрия`
tabtitles[3]=`Расположение`
tabtitles[4]=`2D вид`
tabtitles[5]=`3D вид`
dim stgeneral[12]
stgeneral[1]=`ID`
stgeneral[2]=`Класс`
stgeneral[3]=`Диаметр`
stgeneral[4]=`Вес м.п.`
stgeneral[5]=``
stgeneral[6]=`Расположение`
stgeneral[7]=`Вид`
stgeneral[8]=`Редактировать на плене`
stgeneral[9]=`Показать на плане`
stgeneral[10]=`Floor Plan`
stgeneral[11]=`Отображать размеры`
stgeneral[12]=`Отображать сечение`
dim stgeometry[16]
stgeometry[1]=`Тип`
stgeometry[2]=`Stirrup Geometry`
stgeometry[3]=`Размер X`
stgeometry[4]=`Размер Y`
stgeometry[5]=`Диаметр`
stgeometry[6]=`Turnback 1.`
stgeometry[7]=`Turnback 2.`
stgeometry[8]=`Turnback Angle 1.`
stgeometry[9]=`Turnback Angle 2.`
stgeometry[10]=`Closed Stirrup`
stgeometry[11]=`No. of Point`
stgeometry[12]=`You can edit the geometry of stirrups with their hotspots in floor plan or 3D`
stgeometry[13]=``
stgeometry[14]=`Открытый`
stgeometry[15]=`Замкнутый`
stgeometry[16]=`Editable Hotspots`
dim stplacement[2]
stplacement[1]=`Placement\nBased On:`
stplacement[2]=`No. Stirrups`
dim stattributes[12]
stattributes[1]=`Show Text Label`
stattributes[2]=`Font Style`
stattributes[3]=`Font Height`
stattributes[4]=`Font Pen`
stattributes[5]=`Stirrup Representation`
stattributes[6]=`Custom Pen`
stattributes[7]=`Stirrup Line Type`
stattributes[8]=`Show Contour`
stattributes[9]=`Contour Pen`
stattributes[10]=`Contour Line Type`
stattributes[11]=`Show Dimensions`
stattributes[12]=`Only Sign Label`
dim stattr3d[8]
stattr3d[1]=`3D View Settings`
stattr3d[2]=`3D Detail Level`
stattr3d[3]=`Resolution`
stattr3d[4]=`Shadow`
stattr3d[5]=`Material`
stattr3d[6]=`Custom`
stattr3d[7]=`Show Contour`
stattr3d[8]=`Editable Hotspots`
dim gs_stui[]
dim gs_idui[]
dim gs_icoui[]
i=1
gs_stui[i]=tabtitles[1]:gs_idui[i]=100:gs_icoui[i]="":i=i+1
gs_stui[i]=tabtitles[2]:gs_idui[i]=200:gs_icoui[i]="":i=i+1
gs_stui[i]=tabtitles[3]:gs_idui[i]=300:gs_icoui[i]="":i=i+1
gs_stui[i]=tabtitles[4]:gs_idui[i]=800:gs_icoui[i]="":i=i+1
if not(bsectionelevationcontext) then
gs_stui[i]=tabtitles[5]:gs_idui[i]=900:gs_icoui[i]="":i=i+1
endif
idtab_settings=0
idtab_geometry=0
idtab_placement=0
idtab_2d=0
idtab_3d=0
dim tabids[]
dim tabnames[]
dim tabicons[]
actidx=1
for i=1 to vardim1(gs_idui)
if gs_idui[i]=100 then
tabids[actidx]=actidx
tabnames[actidx]=gs_stui[i]
tabicons[actidx]=gs_icoui[i]
idtab_settings=actidx
actidx=actidx+1
endif
if gs_idui[i]=200 then
tabids[actidx]=actidx
tabnames[actidx]=gs_stui[i]
tabicons[actidx]=gs_icoui[i]
idtab_geometry=actidx
actidx=actidx+1
endif
if gs_idui[i]=300 then
tabids[actidx]=actidx
tabnames[actidx]=gs_stui[i]
tabicons[actidx]=gs_icoui[i]
idtab_placement=actidx
actidx=actidx+1
endif
if gs_idui[i]=800 then
tabids[actidx]=actidx
tabnames[actidx]=gs_stui[i]
tabicons[actidx]=gs_icoui[i]
idtab_2d=actidx
actidx=actidx+1
endif
if gs_idui[i]=900 then
tabids[actidx]=actidx
tabnames[actidx]=gs_stui[i]
tabicons[actidx]=gs_icoui[i]
idtab_3d=actidx
actidx=actidx+1
endif
next i
lastpageid=actidx-1
ui_dialog stdialogtitle
ui_current_page gs_ui_current_page
ui_page gs_ui_current_page
call "ui_irontabcontrol" parameters controltype=1,
ntabs=lastpageid,
tabtitles=tabnames,
tabicons=tabicons,
drawbox=0
ystart=39
xhalf=222
xside=10
xoutfield=120
xcheckbox=100
xoutfieldtitle=150
xinfieldmat=200
youtfield=15
yinfield1=19
yinfieldline=24
ybutton=25
dy=25
if idtab_settings>0 then
ui_page idtab_settings
y=ystart
ui_outfield stgeneral[1],xside,y,xoutfield,youtfield
ui_infield "strIronID",xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1
ui_outfield stgeneral[2],xhalf+xside,y,xoutfield,youtfield
ui_infield "marka",xhalf+xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1
y=y+dy
ui_outfield stgeneral[3],xside,y,xoutfield,youtfield
ui_infield "diam_arm",xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1
ui_outfield stgeneral[4],xhalf+xside,y,xoutfield,youtfield
ui_infield "weight",xhalf+xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1
y=y+dy
y=y+dy-5
ui_separator xside,y+5,444-xside,y+5
ui_separator xside+80,y+5,xside+80,266
y=y+dy-10
ui_style 0,1
ui_outfield stgeneral[6],xside,y,78,youtfield
ui_style 0,0
ui_style 0,1
ui_outfield stgeneral[7],xside+90,y,80,youtfield
ui_style 0,0
y=y+dy-3
ui_infield{3} "bIronHorizontal",xside,y-2,48,48,
6,49,2,1,
40,40,35,35,
2,stposition[1],0,
2,stposition[1],1
y=y+50
ui_infield{3} "bIronVertical",xside,y-2,48,48,
6,49,2,1,
40,40,35,35,
1,stposition[2],0,
1,stposition[2],1
y=y+50
ui_outfield positio,xside,y,78,youtfield
if iposition=pos_ver then
if bsectionelevationcontext then
xsp=150
ysp=160
ui_infield{3} "bShowSection",xsp,ysp,39,46,
6,70,
2,1,
29,36,29,36,
1,stgeneral[12],0,
2,stgeneral[12],1 ui_tooltip stgeneral[12]
ui_infield{3} "bShowEditView",xsp+60,ysp,180,46,
6,72,
2,2,
170,36,170,36,
1,stgeneral[8],0,
2,stgeneral[8],1 ui_tooltip stgeneral[8]
ui_infield{3} "bShowDimText",xsp,ysp+70,150,youtfield,
7,"",
1,1,
1,1,1,1,
"",stgeneral[11],0,
"",stgeneral[11],1
else
xsp=180
ysp=155
ui_pict 71,xsp,ysp,170,29,1 ui_tooltip stgeneral[10]
ui_infield{3} "bShowEditView",xsp,ysp+40,39,46,
6,70,
2,1,
29,36,29,36,
1,stgeneral[8],0,
2,stgeneral[8],1 ui_tooltip stgeneral[8]
ui_infield{3} "bShowDimText",xsp+50,ysp+40+30,150,youtfield,
7,"",
1,1,
1,1,1,1,
"",stgeneral[11],0,
"",stgeneral[11],1
endif
else
xsp=240
ysp=225
if bsectionelevationcontext then
ui_infield{3} "bShowEditView",xsp-58,ysp-95,39,134,
6,74,
2,1,
29,124,29,124,
1,stgeneral[9],0,
2,stgeneral[9],1 ui_tooltip stgeneral[9]
ui_infield{3} "bShowSection",xsp-2,ysp-95,46,134,
6,75,
2,1,
36,124,36,124,
1,stgeneral[8],0,
2,stgeneral[8],1 ui_tooltip stgeneral[8]
else
ui_pict 73,xsp,ysp,29,36,1 ui_tooltip stgeneral[10]
ui_infield{3} "bShowEditView",xsp-58,ysp-95,39,134,
6,74,
2,1,
29,124,29,124,
1,stgeneral[9],0,
2,stgeneral[9],1 ui_tooltip stgeneral[9]
ui_infield{3} "bShowDimText",xsp+50,ysp+20,150,youtfield,
7,"",
1,1,
1,1,1,1,
"",stgeneral[11],0,
"",stgeneral[11],1
endif
endif
endif
if idtab_geometry>0 then
ui_page idtab_geometry
y=ystart
x2=150
x3=150
x4=250
x5=350
xinfield1=67
dy2=20
px=100
py=70
cx=px+2
cy=py+20
sx=cx+25
sy=2*cy+5
ui_style 0,1
ui_outfield stgeometry[1],xside,y,x2-xside-2,youtfield
ui_style 0,0
y=y+dy
ui_infield "stirrupSubType",xside,y,sx,sy,
1,50,18,2,
cx,cy,px,py,
1,ststirrupsubtype[1],
2,ststirrupsubtype[2],
3,ststirrupsubtype[3],
4,ststirrupsubtype[4],
5,ststirrupsubtype[5],
6,ststirrupsubtype[6],
7,ststirrupsubtype[7],
8,ststirrupsubtype[8],
9,ststirrupsubtype[9],
10,ststirrupsubtype[10],
11,ststirrupsubtype[11],
12,ststirrupsubtype[12]

y=ystart
ui_style 0,1
ui_outfield stgeometry[2],x2,y,xoutfield,youtfield
ui_style 0,0
y=y+dy
ui_pict 42,x3,y,39,50,1
ui_pict 43,x3+39,y+22,11,28,1
ui_infield "jointLength",x3+42,y,25,yinfield1
ui_outfield stgeometry[13],x3+70,y+3,25,youtfield
ui_pict 44,x4,y,20,50,1
ui_pict 45,x4+20,y+43,30,7,1
ui_infield "bendRadius",x4+22,y,25,yinfield1
ui_outfield stgeometry[13],x4+50,y+3,25,youtfield
ui_pict 47,x5,y,15,50,1
ui_pict 48,x5+15,y+40,25,10,1
ui_infield "rebarDist",x5+22,y,60,yinfield1
y=y+60
if benableclose then
ui_infield{3} "iClosedPolygon",x3,y,46,46,
2,46,2,1,
40,40,35,35,
1,stgeometry[14],0,
2,stgeometry[15],1
endif
if benablepolynum then
ui_outfield stgeometry[11],x4,y+5,x5-x4-2,youtfield
ui_infield "nStirrupPoint",x5,y+3,xinfield1,yinfield1
ui_infield{3} "bEnableEdit",x4,y+25,440-x4,yinfield1,
7,"",0,0,
0,0,0,0,
0,stgeometry[16],0,
0,stgeometry[16],1
iflag=4*not(benableedit)
ui_outfield stgeometry[12],x4,y+55,444-x4-xside,youtfield*4,iflag
endif
y=y+60
if benableang1|benableang2 then
ui_infield{3} "bStirrupBack1",x3,y-2,28,28,
6,40,2,1,
24,24,18,18,
1,stgeometry[6],0,
2,stgeometry[6],1 ui_tooltip stgeometry[6]
ui_infield "stirrupAng1",x3+34,y+4,55,yinfield1 ui_tooltip stgeometry[8]
y=y+32
ui_infield{3} "bStirrupBack2",x3,y-2,28,28,
6,41,2,1,
24,24,18,18,
1,stgeometry[7],0,
2,stgeometry[7],1 ui_tooltip stgeometry[7]
ui_infield "stirrupAng2",x3+34,y+4,55,yinfield1 ui_tooltip stgeometry[9]
endif
psx=250
psy=145
if(istirrupsubtype=type_stirrup_normal)|\
(istirrupsubtype=type_stirrup_type_2)|\
(istirrupsubtype=type_stirrup_type_5)|\
(istirrupsubtype=type_stirrup_type_6)|\
(istirrupsubtype=type_stirrup_type_7) then
psx=psx-12
psy=psy
picx=75
picy=80
if istirrupsubtype=type_stirrup_normal then pname=51
if istirrupsubtype=type_stirrup_type_2 then pname=52
if istirrupsubtype=type_stirrup_type_5 then pname=55
if istirrupsubtype=type_stirrup_type_6 then pname=56
if istirrupsubtype=type_stirrup_type_7 then pname=57
ui_pict pname,psx,psy,picx,picy,1
ui_infield "hoopX",psx+13,psy+picy+4,xinfield1,yinfield1 ui_tooltip stgeometry[3]
ui_infield "hoopY",psx+picx+2,psy+26,xinfield1,yinfield1 ui_tooltip stgeometry[4]
endif
if(istirrupsubtype=type_stirrup_type_3)|\
(istirrupsubtype=type_stirrup_type_4) then
psx=psx+4
psy=psy+10
picx=45
picy=70
if istirrupsubtype=type_stirrup_type_3 then pname=53
if istirrupsubtype=type_stirrup_type_4 then pname=54
ui_pict pname,psx,psy,picx,picy,1
ui_infield "hoopY",psx+picx+2,psy+26,xinfield1,yinfield1 ui_tooltip stgeometry[4]
endif
if(istirrupsubtype=type_stirrup_type_8)|\
(istirrupsubtype=type_stirrup_type_9) then
psx=psx
psy=psy+16
picx=100
picy=55
if istirrupsubtype=type_stirrup_type_8 then pname=58
if istirrupsubtype=type_stirrup_type_9 then pname=59
ui_pict pname,psx,psy,picx,picy,1
ui_infield "hoopX",psx+18,psy+picy+4,xinfield1,yinfield1 ui_tooltip stgeometry[3]
ui_infield "hoopY",psx+picx+2,psy+12,xinfield1,yinfield1 ui_tooltip stgeometry[4]
endif
if(istirrupsubtype=type_stirrup_type_10) then
psx=psx-5
psy=psy+6
picx=70
picy=65
pname=60
ui_pict pname,psx,psy,picx,picy,1
ui_infield "hoopX",psx+5,psy+picy+4,xinfield1,yinfield1 ui_tooltip stgeometry[3]
ui_infield "hoopY",psx+picx+2,psy+18,xinfield1,yinfield1 ui_tooltip stgeometry[4]
endif
if(istirrupsubtype=type_stirrup_circle) then
psx=psx-12
psy=psy+10
picx=80
picy=70
pname=61
ui_pict pname,psx,psy,picx,picy,1
ui_infield "hoopCircle",psx+picx+2,psy+26,xinfield1,yinfield1 ui_tooltip stgeometry[5]
endif
endif
if idtab_placement>0 then
ui_page idtab_placement
y=ystart+6
ui_style 0,1
ui_outfield stplacement[1],xside,y,100,youtfield*2
ui_style 0,0
ui_infield{3} "strEditType",xside*2+100,y+4,444-3*xside-100,yinfield1,
8,"",0,0,
0,0,0,0,
0,stedittypes[1],stedittypes[1],
0,stedittypes[2],stedittypes[2],
0,stedittypes[3],stedittypes[3]
y=y+dy+6
ui_separator xside,y+10,444-xside,y+10
y=y+dy+6
ui_style 0,1
ui_outfield stplacement[2],xside,y,xoutfield,youtfield
ui_style 0,0
ui_infield "n",xside+xoutfield+1,y,60,youtfield
ypic=y+dy*2+6
xpic=xside*2+100
picw=210
pich=62
ui_pict 32,xpic,ypic,picw,pich,1
ui_infield "distHoops",xpic+15,ypic+pich+3,65,yinfield1
ui_infield "fullLength",xpic+75,ypic-21,65,yinfield1
ui_infield "startDist",xpic-60,ypic-21,65,yinfield1
ui_infield "endDist",xpic+200,ypic-21,65,yinfield1
endif
if idtab_2d>0 then
ui_page idtab_2d
y=ystart
dy=26
call "ironLabel" parameters isigntype=isigntype,
uiy=y-4,
returned_parameters iflag
y=y+dy
ui_outfield stattributes[2],xside,y,xoutfield,youtfield,iflag
ui_infield "styleFont",xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1
ui_outfield stattributes[3],xhalf+xside,y,xoutfield,youtfield,iflag
ui_infield "heightFont",xhalf+xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1
y=y+dy
ui_infield{3} "bOnlySign",xside,y,xhalf-2*xside,youtfield,
7,"",
1,1,
1,1,1,1,
"",stattributes[12],0,
"",stattributes[12],1
ui_outfield stattributes[4],xhalf+xside,y,xoutfield,youtfield,iflag
ui_infield "penFont",xhalf+xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1
y=y+dy-2
ui_separator xside,y+5,444-xside,y+5
y=y+dy-2
ui_style 0,1
ui_outfield stattributes[5],xside,y,xoutfield+50,youtfield
ui_style 0,0
y=y+dy
ui_infield{3} "bCustom2D",xside,y,xoutfield,youtfield,
7,"",
1,1,
1,1,1,1,
"",stattributes[6],0,
"",stattributes[6],1
ui_infield "penIronStirrup",xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1
ui_outfield stattributes[7],xhalf+xside,y,xoutfield,youtfield
ui_infield "ltIron",xhalf+xside+xoutfield+1,y-6,xhalf-(xside*2+xoutfield+1),yinfieldline
y=y+dy-2
ui_separator xside,y+5,444-xside,y+5
y=y+dy-2
ui_style 0,1
ui_style 0,0
y=y+dy
y=y+dy
endif
if idtab_3d>0 then
ui_page idtab_3d
y=44
dy=28
ui_style 0,1
ui_outfield stattr3d[1],xside,y,xoutfield,youtfield
ui_style 0,0
y=y+dy
ui_outfield stattr3d[2],xside+5,y,xoutfield-5,youtfield
ui_infield{3} "iDetLevel3D",xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1,
8,"",0,0,
0,0,0,0,
0,stdetlevel[1],2,
0,stdetlevel[2],1,
0,stdetlevel[3],0
ui_infield{3} "bShow3DHotspots",xhalf+xside+1,y-2,200,yinfield1,
7,"",0,0,
0,0,0,0,
0,stattr3d[8],0,
0,stattr3d[8],1
y=y+dy
iflag=4*(idetlevel3d=0)
ui_outfield stattr3d[3],xside+5,y,xoutfield-5,youtfield,iflag
ui_infield "gs_resol",xside+xoutfield+1,y-2,xhalf-(xside*2+xoutfield+1),yinfield1
ui_infield{3} "gs_shadow",xhalf+xside+1,y-2,xcheckbox-2,yinfield1,
7,"",0,0,
0,0,0,0,
0,stattr3d[4],0,
0,stattr3d[4],1
y=y+dy-5
ui_separator xside,y+5,444-xside,y+5
y=y+dy-5
ui_style 0,1
ui_outfield stattr3d[5],xside,y,xoutfield,youtfield,iflag
ui_style 0,0
ui_infield{3} "bCustom3D",xside+xoutfield+1,y-2,xhalf-xoutfield-2,yinfield1,
7,"",0,0,
0,0,0,0,
0,stattr3d[6],0,
0,stattr3d[6],1
ui_infield "matStirrup",xhalf+xside+1,y-6,xinfieldmat,yinfieldline
ui_style 0,0
ui_separator xside,238,444-xside,238
ui_outfield stversion+stbuilddate,xside+5,248,xoutfield-5,16,4
ui_button ui_link,stsupport,xside+xoutfield+1,245,xhalf-(xside*2+xoutfield+1),18,0,stcadsupport
endif