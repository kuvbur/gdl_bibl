if shad then SHADOW ON,ON
if shad=0 then SHADOW OFF,OFF
os_c_z=R_zag+r_arm

if tirm then
	HOTSPOT 0, 0,0, unID, Rvn, 1: unID=unID+1
	HOTSPOT Rvn, 0,0, unID, Rvn, 2: unID=unID+1
	HOTSPOT 0, 0,0, unID, angle, 6,shag_x: unID=unID+1
	HOTSPOT Rvn, 0,0, unID, angle, 4+128+256,shag_x: unID=unID+1
	HOTSPOT Rvn*COS(angle), Rvn*SIN(angle),0, unID,angle, 5,shag_x: unID=unID+1
	HOTSPOT 0, 0,0, unID, angle_2, 6,dlin_x: unID=unID+1
	HOTSPOT Rvn, 0,0, unID, angle_2, 4+128+256,dlin_x: unID=unID+1
	HOTSPOT Rvn*COS(angle_2), Rvn*SIN(angle_2),0, unID,angle_2, 5,dlin_x: unID=unID+1
else
	HOTSPOT 0, 0,0, unID,dlin_x, 1+128: unID=unID+1
	HOTSPOT 0,dlin_x,0, unID, dlin_x, 2: unID=unID+1
	HOTSPOT 0, 0,0, unID,shag_x, 1+128: unID=unID+1
	HOTSPOT 0,shag_x,0, unID, shag_x, 2: unID=unID+1
endif

HOTSPOT 0, 0,0, unID, b_st, 1: unID=unID+1
HOTSPOT b_st, 0,0, unID, b_st, 2: unID=unID+1

HOTSPOT 0, 0,0, unID, R_zag, 1+128,D_zag: unID=unID+1
HOTSPOT -R_zag, 0,0, unID, R_zag, 2,D_zag: unID=unID+1

HOTSPOT -R_zag-2*r_arm, 0,0
HOTSPOT R_zag+r_arm*2+b_st, 0,0


HOTSPOT 0, 0,0, unID,shag_z, 1+128: unID=unID+1
HOTSPOT 0,0,shag_z, unID, shag_z, 2: unID=unID+1

HOTSPOT 0, 0,0, unID,dlin_z, 1+128: unID=unID+1
HOTSPOT 0,0,dlin_z, unID, dlin_z, 2: unID=unID+1

group "clnd"
	if sterzh then
		MODEL WIRE
		addz -os_c_z
		LIN_ 0,0,0,b_st,0,0
		addz os_c_z
		LIN_ 0,0,os_c_z,b_k,0,os_c_z
		LIN_ b_st,0,os_c_z,b_st-b_k,0,os_c_z
		rotx 90
		ARC os_c_z, 90, -90
		addx b_st
		ARC os_c_z, -90, 90
		del top
	else
		RESOL resT
		MODEL SOLID
		addz -os_c_z
		roty 90
			CYLIND b_st, r_arm
		addx -(R_zag+r_arm)*2
			CYLIND b_k, r_arm
		del 1
		roty 180
		addz -b_st
		addx (R_zag+r_arm)*2
			CYLIND b_k, r_arm
		del top
		RESOL resT
		MODEL SOLID
		addz (R_zag+r_arm)
		addx b_st
		roty 90
		ELBOW R_zag+r_arm,180,r_arm
		addz -b_st
		roty -180
		addx -(R_zag+r_arm)*2
		ELBOW R_zag+r_arm,180,r_arm
		BODY -1
	endif
endgroup

if GLOB_CONTEXT=6 or GLOB_CONTEXT=5  then
	PLACEGROUP "clnd"
else	
	if tirm then
		group "sterj_x_11"
			for i=0 to kol_vo_x
				rotz angle*i+90
				addy -Rvn-b_st
				rotz 90
				PLACEGROUP "clnd"
				del top
			next i
			if shag_x*kol_vo_x+min_shag<dlin_x then 
				rotz angle+90
				addy -Rvn-b_st
				rotz 90
				PLACEGROUP "clnd"
			endif
		endgroup
		
		group "sterj_x_22"
			for i=0 to kol_vo_x-1
				rotz angle*i+90+angle/2
				addy -Rvn-b_st
				rotz 90
				PLACEGROUP "clnd"
				del top
			next i
		endgroup
			del top
		for i=0 to kol_vo_z
			addz shag_z*i
			if FRA (i/2)=0 then
				PLACEGROUP "sterj_x_11"
			else
				PLACEGROUP "sterj_x_22"
			endif
			del top
		next i
		
		if shag_z*kol_vo_z+min_shag<dlin_z then 
			addz dlin_z
			PLACEGROUP "sterj_x_11"
		endif
	else
		group "sterj_x_1"
			for i=0 to kol_vo_x
				addy i*shag_x
				PLACEGROUP "clnd"
				del top
			next i
			if shag_x*kol_vo_x+min_shag<dlin_x then 
				addy dlin_x 
				PLACEGROUP "clnd"
			endif
		endgroup
		
		group "sterj_x_2"
			for i=0 to kol_vo_x-1
				addy shag_x/2
				addy i*shag_x
				PLACEGROUP "clnd"
				del top
			next i
		endgroup
		
		for i=0 to kol_vo_z
			addz shag_z*i
			if FRA (i/2)=0 then
				PLACEGROUP "sterj_x_1"
			else
				PLACEGROUP "sterj_x_2"
			endif
			del top
		next i
		
		if shag_z*kol_vo_z+min_shag<dlin_z then 
			addz dlin_z
			PLACEGROUP "sterj_x_1"
		endif
	endif
endif


