!------------------------
! Reinforcement
! 2012, Éptár Kft.
!------------------------
eps=0.0001
iron_type_rebar=1
iron_type_stirrup=2
iron_type_mesh=3
iron_type_concrete=90
pentype_class=1
pentype_diamater=2
ipen=1
imat=1
ipentype=pentype_class
_ipentype=1
success=libraryglobal( "eptarReinLibglobal","iPenType",_ipentype)
if success>0 then
ipentype=_ipentype
endif
if ipentype=pentype_diamater then
if bcustom2d&bcustom3d then
if irontype=iron_type_rebar then
ipen=penironrebar
imat=matrebar
else
if irontype=iron_type_stirrup then
ipen=penironstirrup
imat=matstirrup
else
if irontype=iron_type_mesh then
ipen=penironmesh
imat=matmesh
endif
endif
endif
else
dim ironpens[14][2]
dim ironmat[14][2]
dim irondiameter[14][2]
success=libraryglobal( "eptarReinLibglobal","ironDiameter",irondiameter)
success=libraryglobal( "eptarReinLibglobal","ironPens",ironpens)
success=libraryglobal( "eptarReinLibglobal","ironMat",ironmat)
if success>0 then
bfound=0
for i=1 to vardim1(irondiameter)
if abs(d-irondiameter[i][1])<eps then
ipen=ironpens[i][1]
imat=ironmat[i][1]
if irontype=iron_type_rebar then
if not(bcustom2d) then
ipen=ironpens[i][1]
parameters penironrebar=ipen
lock "penIronRebar"
else
ipen=penironrebar
endif
if not(bcustom3d) then
imat=ironmat[i][1]
parameters matrebar=imat
lock "matRebar"
else
imat=matrebar
endif
else
if irontype=iron_type_stirrup then
if not(bcustom2d) then
ipen=ironpens[i][1]
parameters penironstirrup=ipen
lock "penIronStirrup"
else
ipen=penironstirrup
endif
if not(bcustom3d) then
imat=ironmat[i][1]
parameters matstirrup=imat
lock "matStirrup"
else
imat=matstirrup
endif
else
if irontype=iron_type_mesh then
if not(bcustom2d) then
ipen=ironpens[i][1]
parameters penironmesh=ipen
lock "penIronMesh"
else
ipen=penironmesh
endif
if not(bcustom3d) then
imat=ironmat[i][1]
parameters matmesh=imat
lock "matMesh"
else
imat=matmesh
endif
endif
endif
endif
bfound=1
i=vardim1(irondiameter)
endif
next i
if not(bfound) then
if irontype=iron_type_rebar then
ipen=penironrebar
imat=matrebar
endif
if irontype=iron_type_stirrup then
ipen=penironstirrup
imat=matstirrup
endif
if irontype=iron_type_mesh then
ipen=penironmesh
imat=matmesh
endif
endif
endif
endif
else
if irontype=iron_type_stirrup then
if not(bcustom2d) then
penlist=1
pennolist=1
success=libraryglobal( "eptarReinLibglobal","stirrupPenList",penlist)
success=libraryglobal( "eptarReinLibglobal","stirrupPenNoList",pennolist)
if success>0 then
if bislisting then
ipen=penlist
else
ipen=pennolist
endif
parameters penironstirrup=ipen
lock "penIronStirrup"
endif
else
ipen=penironstirrup
endif
if not(bcustom3d) then
matlist=1
matnolist=1
success=libraryglobal( "eptarReinLibglobal","matListStirrup",matlist)
success=libraryglobal( "eptarReinLibglobal","matNoListStirrup",matnolist)
if success>0 then
if bislisting then
imat=matlist
else
imat=matnolist
endif
parameters matstirrup=imat
lock "matStirrup"
endif
else
imat=matstirrup
endif
endif
if irontype=iron_type_mesh then
if not(bcustom2d) then
penlist=1
pennolist=1
success=libraryglobal( "eptarReinLibglobal","meshPenList",penlist)
success=libraryglobal( "eptarReinLibglobal","meshPenNoList",pennolist)
if success>0 then
if bislisting then
ipen=penlist
else
ipen=pennolist
endif
parameters penironmesh=ipen
lock "penIronMesh"
endif
else
ipen=penironmesh
endif
if not(bcustom3d) then
matlist=1
matnolist=1
success=libraryglobal( "eptarReinLibglobal","matListMesh",matlist)
success=libraryglobal( "eptarReinLibglobal","matNoListMesh",matnolist)
if success>0 then
if bislisting then
imat=matlist
else
imat=matnolist
endif
parameters matmesh=imat
lock "matMesh"
endif
else
imat=matmesh
endif
endif
if irontype=iron_type_rebar then
if not(bcustom2d) then
penlist=1
pennolist=1
success=libraryglobal( "eptarReinLibglobal","rebarPenList",penlist)
success=libraryglobal( "eptarReinLibglobal","rebarPenNoList",pennolist)
if success>0 then
if bislisting then
ipen=penlist
else
ipen=pennolist
endif
parameters penironrebar=ipen
lock "penIronRebar"
endif
else
ipen=penironrebar
endif
if not(bcustom3d) then
matlist=1
matnolist=1
success=libraryglobal( "eptarReinLibglobal","matListRebar",matlist)
success=libraryglobal( "eptarReinLibglobal","matNoListRebar",matnolist)
if success>0 then
if bislisting then
imat=matlist
else
imat=matnolist
endif
parameters matrebar=imat
lock "matRebar"
endif
else
imat=matrebar
endif
endif
endif
