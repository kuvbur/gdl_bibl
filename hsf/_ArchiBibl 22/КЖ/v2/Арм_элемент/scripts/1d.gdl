if arm_inx<EPS then arm_inx=1unID_arm=arm_inx*100unID_el=arm_inx*5000EPS=0.0001n_trans = 0n = REQUEST ("Name_of_main", "", name)! -------- Типы отображения ------------SHOW_GOST = 1SHOW_LINE = 2SHOW_SOLID = 3! -------- Типы конструкций -------------TYPE_SLAB = 1TYPE_WALL = 2TYPE_BEAM = 3TYPE_COLUMN = 4! --------- Направления -----------------DIR_X = 1DIR_Y = 2DIR_Z = 3! --------- Форма стержня ---------------ARM_LIN_START = 0						!---- Начало линейных стержней ----	ARM_LIN	=	ARM_LIN_START + 1			!Простой прямой	ARM_LIN_P	=	ARM_LIN_START + 2		!С П-образным загибом	ARM_LIN_G	=	ARM_LIN_START + 3		!С Г-образным загибомARM_LIN_END = 19						!---- Конец линейных стержней ----ARM_KR_START = 20						!---- Начало поддерживающей/поперечной арматуры ----	ARM_KZ	=		ARM_KR_START + 1		!Каркас змейкой	ARM_KP3	=		ARM_KR_START + 2		!Каркас пространственный с 3 стержнями (козлик)	ARM_FROG =		ARM_KR_START + 3		!Лягушка	ARM_KP4	=		ARM_KR_START + 4		!Каркас пространственный	ARM_KSHP =		ARM_KR_START + 5		!Шпилька (стены)	ARM_KPR =		ARM_KR_START + 6		!П-шка (стены)ARM_KR_END = 29							!---- Конец поддерживающей/поперечной арматуры ----ARM_GNUT_START = 30						!---- Начало гнутых стержней ----	ARM_GNUT_P	=	ARM_GNUT_START + 1		!П-шкаARM_GNUT_END = 60						!---- Конец гнутых стержней ----if vardim1(coord_vin)<arm_inx or vardim1(coord_vin_s)<arm_inx then	dim tmp_arr[][5]	dim tmp_arr_s[][5]	for i=1 to arm_inx		for j=1 to 5			var = i*j			var_s = i*j/1000			if i<=vardim1(coord_vin) then var = coord_vin[i][j]			if i<=vardim1(coord_vin_s) then var_s = coord_vin_s[i][j]			tmp_arr[i][j] = var			tmp_arr_s[i][j] = var_s		next j	next i	coord_vin = tmp_arr	coord_vin_s = tmp_arr_s	PARAMETERS coord_vin = coord_vin, coord_vin_s = coord_vin_sendifif not(is_call) then	if arm_direction = DIR_X then 		arm_length = A		arm_array_1_length = B		arm_array_2_length = ZZYZX	endif	if arm_direction = DIR_Y then 		arm_length = B		arm_array_1_length = A		arm_array_2_length = ZZYZX	endif	if arm_direction = DIR_Z then 		arm_length = ZZYZX		arm_array_1_length = A		arm_array_2_length = B	endifendifss_x = arm_ss_x : ss_y = arm_ss_y : ss_z = arm_ss_zs_1 = arm_s_1 : s_2 = arm_s_2dict armd_t!!Общие параметры!armd_t.el[arm_inx].constr = arm_constr            !Тип конструкции!armd_t.el[arm_inx].dir = arm_direction               !Направление оси стержня!armd_t.el[arm_inx].length =             !Длина стержня в модели!armd_t.el[arm_inx].layer =             !Номер слоя!armd_t.el[arm_inx].form.type         !Тип формы стержня!!Отступ начала элемента!armd_t.el[arm_inx].offset.x = arm_offset_x!armd_t.el[arm_inx].offset.y = arm_offset_y!armd_t.el[arm_inx].offset.z = arm_offset_z!!Направление 1!!Если задано направление 2, но не задано направление 1 - копируем всё в 1!armd_t.el[arm_inx].array[1].dir         !Направление массива!armd_t.el[arm_inx].array[1].step        !Шаг массива!armd_t.el[arm_inx].array[1].step_offset !Смещение шага при наличии внторого направления (для шахматного порядка)!armd_t.el[arm_inx].array[1].offset      !Смещение начала массива!armd_t.el[arm_inx].array[1].length      !Длина массива!armd_t.el[arm_inx].array[1].step_start  !Шаг первого стержня!armd_t.el[arm_inx].array[1].step_end    !Шаг последнего стержня!armd_t.el[arm_inx].array[1].qty         !Количество стержней в направлении 1!!Направление 2 - массив стерней из направления 1!armd_t.el[arm_inx].array[2].dir         !Направление массива!armd_t.el[arm_inx].array[2].step        !Шаг массива!armd_t.el[arm_inx].array[2].offset      !Смещение начала массива!armd_t.el[arm_inx].array[2].length      !Длина массива!armd_t.el[arm_inx].array[2].step_start  !Шаг первого стержня!armd_t.el[arm_inx].array[2].step_end    !Шаг последнего стержня!armd_t.el[arm_inx].array[2].qty         !Количество стержней в направлении 2!!Спецификация!armd_t.el[arm_inx].spec.pos             !Позиция стержня!armd_t.el[arm_inx].spec.subpos          !Марка сборки!armd_t.el[arm_inx].spec.diam            !Диаметр!armd_t.el[arm_inx].spec.r               !Радиус!armd_t.el[arm_inx].spec.class           !Класс!armd_t.el[arm_inx].spec.length          !Длина в спецификацию!armd_t.el[arm_inx].spec.fon             !Выводить в п.м. (0/1)!armd_t.el[arm_inx].spec.plit            !Фоновое армирование (0/1)!armd_t.el[arm_inx].spec.gnut            !Гнутый элемент (0/1)!armd_t.el[arm_inx].spec.otm_elem        !Отметка начала элемента!armd_t.el[arm_inx].spec.gost            !ГОСТ!armd_t.el[arm_inx].spec.ves             !Масса элемента!armd_t.el[arm_inx].spec.ves_p           !Масса п.м. элемента!armd_t.el[arm_inx].spec.qty             !Количествоif not(is_call) then	arm_pos = arm_pos_arr[arm_inx]	subpos = subpos_arr[arm_inx]	arm_diam = arm_diam_arr[arm_inx]	arm_class = arm_class_arr[arm_inx]	arm_constr = arm_constr_arr[arm_inx]	arm_direction = arm_direction_arr[arm_inx]	arm_length = arm_length_arr[arm_inx]	arm_array_1_dir = arm_array_1_dir_arr[arm_inx]	arm_array_1_step = arm_array_1_step_arr[arm_inx][1]	arm_array_1_dir_chess = arm_array_1_step_arr[arm_inx][2]	arm_array_1_length = arm_array_1_length_arr[arm_inx]	arm_array_2_dir = arm_array_2_dir_arr[arm_inx]	arm_array_2_step = arm_array_2_step_arr[arm_inx][1]	arm_array_2_dir_chess = arm_array_2_step_arr[arm_inx][2]	arm_array_2_length = arm_array_2_length_arr[arm_inx]	arm_fon = arm_fon_arr[arm_inx]	arm_plit = arm_plit_arr[arm_inx]	arm_gnut = arm_gnut_arr[arm_inx]	arm_otm_elem = arm_otm_elem_arr[arm_inx]	ss_x = arm_startpoint[arm_inx][1]	ss_y = arm_startpoint[arm_inx][2]	ss_z = arm_startpoint[arm_inx][3]	s_1 = arm_startpoint[arm_inx][4]	s_2 = arm_startpoint[arm_inx][5]	arm_layer = arm_layer_arr[arm_inx]endif