EPS=0.00001unID=1 : unIDR=800 : unIDD=4000is = 1 : ie = 2ix = 1 : iy = 2 : iz = 3n = REQUEST ("Name_of_main", "", name)is_call = 0 : if name<>"" then is_call = 1dim pos_weld[2][3]!show = 0!success = LIBRARYGLOBAL ("Libraryflobals-km", "show_connect", show_connect)!if show_connect and upr then show = 1!if not(upr) then show = 1!if show then!	success = LIBRARYGLOBAL ("Libraryflobals-km", "show_izd", show_izd)!	success = LIBRARYGLOBAL ("Libraryflobals-km", "show_metall", show_metall)!	if type_spec = "Металл" and not(show_metall) then show = 0!	if type_spec = "Изделие" and not(show_izd) then show = 0!endif!success = LIBRARYGLOBAL ("Libraryflobals-km", "show_axsis", show_axsis)!axis = 0!IF show_axsis THEN !	axis = 1!else!	axis = 0!endif!success = LIBRARYGLOBAL ("Libraryflobals-km", "ignore_id", ignore_id)!success = LIBRARYGLOBAL ("Libraryflobals-km", "show_ingore", show_ingore)!show_spec = 0 : IF STRSTR (GLOB_ID, ignore_id, 1) > 0 or type_spec="Не специфицировать" THEN show_spec = 1!if not(show_ingore) and show_spec then show = 0!!show_el = 0 : call "Показ_по_группам" PARAMETERS ALL el_views=el_views RETURNED_PARAMETERS show_el!if (not(show_ingore) and show_spec) or not(show_el) then show = 0!success = LIBRARYGLOBAL ("Libraryflobals-km", "gs_detlevel_3D", gs_detlevel_3D)!success = LIBRARYGLOBAL ("Libraryflobals-km", "show_only_axsis", show_only_axsis)!!call "Показ_по_сборкам" PARAMETERS ALL subpos=subpos, pos=GLOB_ID RETURNED_PARAMETERS show_subpos, show_marker!if show=1 then show = show_subpos!!success = LIBRARYGLOBAL ("Libraryflobals-km", "show_list", show_list)!if show=1 then show = show_listif GLOB_SCRIPT_TYPE=2 or GLOB_SCRIPT_TYPE=3 then	success = LIBRARYGLOBAL ("Libraryflobals-km", "show_connect", show_connect)	show = 0	if show_connect and upr then show = 1	if not(upr) then show = 1	if show then		success = LIBRARYGLOBAL ("Libraryflobals-km", "show_list", show_list)		show = show_list	endif	if show then 		call "Показ_по_типам" PARAMETERS tip_konstr=tip_konstr RETURNED_PARAMETERS show_type		show = show_type	endif	if show then 		call "Показ_по_группам" PARAMETERS ALL el_views=el_views RETURNED_PARAMETERS show_el		show = show_el	endif	if show then 		call "Показ_по_сборкам" PARAMETERS ALL subpos=subpos, pos=GLOB_ID RETURNED_PARAMETERS show_subpos, show_marker		show = show_subpos	endif	if show then		success = LIBRARYGLOBAL ("Libraryflobals-km", "show_izd", show_izd)		success = LIBRARYGLOBAL ("Libraryflobals-km", "show_metall", show_metall)		if type_spec = "Металл" and not(show_metall) then show = 0		if type_spec = "Изделие" and not(show_izd) then show = 0	endif	if show then		success = LIBRARYGLOBAL ("Libraryflobals-km", "ignore_id", ignore_id)		success = LIBRARYGLOBAL ("Libraryflobals-km", "show_ingore", show_ingore)		show_spec = 0 : IF STRSTR (GLOB_ID, ignore_id, 1) > 0 or type_spec="Не специфицировать" THEN show_spec = 1		if not(show_ingore) and show_spec then show = 0	endifelse	show = 1endifif strlen(syst_name)>1 and (GLOB_SCRIPT_TYPE=2 or GLOB_SCRIPT_TYPE=3) then	success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_axis", show_axis)	success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_axis_and", show_axis_and)	success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_conventions", show_conventions)	success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_op", show_op)	call "Показ_систем" PARAMETERS All isMep=0, isEqp=1 RETURNED_PARAMETERS show_elelse	show_el = 1endifdim weld_side_[90]dim weld_side_coord_[90][2]if vardim1(weld_side)<>vardim1(kontur) then	parameters weld_side = weld_side_	parameters weld_side_coord = weld_side_coord_endifif not(show) then goto 20pen gs_cont_penroty ry!kontur[1][1] = 0!kontur[1][2] = 0kx = cos (ry)for i = 1 to n_t	gosub "change_3d"	if rx = 0 then gosub "change_2d"!	if kontur[i][1] = 0 and kontur[i][2] = 0 then gosub "new_tchk"next ikontur[n_t+1][1] = kontur[1][1]kontur[n_t+1][2] = kontur[1][2]s_plit_o = 0for i = 1 to n_t	x1 = kontur[i][1]	y1 = kontur[i][2]	x2 = kontur[i+1][1]	y2 = kontur[i+1][2]	s_tr = 0.5 * (x1 + x2) * (y1 - y2)	s_plit_o = s_plit_o  + s_trnext iif tip_f = "Специальный" then gosub "clean_buff"goto 20"change_3d":	rotx rx	rotz rz	HOTSPOT 0, kontur[i][2],0, unID, kontur[i][1], 1+128: unID=unID+1	HOTSPOT -1, kontur[i][2],0, unID, kontur[i][1], 3: unID=unID+1	HOTSPOT kontur[i][1], kontur[i][2],0, unID, kontur[i][1], 2: unID=unID+1	HOTSPOT kontur[i][1], 0,0, unID, kontur[i][2], 1+128: unID=unID+1	HOTSPOT kontur[i][1], -1,0, unID, kontur[i][2], 3: unID=unID+1	HOTSPOT kontur[i][1], kontur[i][2],0, unID, kontur[i][2], 2: unID=unID+1	HOTSPOT 0, kontur[i][2],ZZYZX, unID, kontur[i][1], 1+128: unID=unID+1	HOTSPOT -1, kontur[i][2],ZZYZX, unID, kontur[i][1], 3: unID=unID+1	HOTSPOT kontur[i][1], kontur[i][2],ZZYZX, unID, kontur[i][1], 2: unID=unID+1	HOTSPOT kontur[i][1], 0,ZZYZX, unID, kontur[i][2], 1+128: unID=unID+1	HOTSPOT kontur[i][1], kontur[i][2],ZZYZX, unID, kontur[i][2], 2: unID=unID+1	HOTSPOT kontur[i][1], -1,ZZYZX, unID, kontur[i][2], 3: unID=unID+1	HOTSPOT kontur[i][1], kontur[i][2],ZZYZX, unID, weld_side[i], 1+128: unID=unID+1	HOTSPOT kontur[i][1], kontur[i][2]+weld_side[i]*0.005,ZZYZX, unID, weld_side[i], 2: unID=unID+1	HOTSPOT kontur[i][1], kontur[i][2]-1,ZZYZX, unID, weld_side[i], 3: unID=unID+1	del 2return"change_2d":	HOTSPOT2 0, kontur[i][2], unID, kontur[i][1], 1+128: unID=unID+1	HOTSPOT2 -1, kontur[i][2], unID, kontur[i][1], 3: unID=unID+1	HOTSPOT2 kontur[i][1] * kx, kontur[i][2], unID, kontur[i][1], 2: unID=unID+1	HOTSPOT2 kontur[i][1] * kx, 0,unID, kontur[i][2], 1+128: unID=unID+1	HOTSPOT2 kontur[i][1] * kx, -1,unID, kontur[i][2], 3: unID=unID+1	HOTSPOT2 kontur[i][1] * kx, kontur[i][2],unID, kontur[i][2], 2: unID=unID+1return"new_tchk":	j=i-1 : if i=1 then j=n_t	kontur[i][1] = (kontur[i][1] + kontur[j][1])/2	kontur[i][2] = (kontur[i][2] + kontur[j][2])/2 return"clean_buff":	for i = 1 to NSP		g = get(1)	next ireturn20: