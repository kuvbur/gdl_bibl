! ==============================================================================
! Basin 02
! ==============================================================================
IF gs_detlevel_3D_m = 0 THEN END
pen gs_cont_pen
RESOL res
if bShowMEP then
!-----------3d---------------------
if show_el < EPS then end
IF gs_detlevel_3D_m < EPS THEN END
CALL "MEP_m_RequestSystemGlobals" PARAMETERS ALL one_ConID=0 returned_parameters gs_cont_pen, sMat, gs_InsMat, MEP_cline_pen, show_el

	conedit = 1
	IF iSuptyp = SEMI_PEDESTAL THEN conedit = 14

	IF useSysMat THEN
		gs_basin_mat	= sMat
		gs_tap_mat		= sMat
		gs_drain_mat	= sMat
		gs_con_mat		= sMat
	ENDIF

	if bWallMountedTap then
		ConEdit_1 = 12
		ConEdit_2 = 12
		corrMEPx = xTapPos
		corrMEPz = zTapPos

		add corrMEPx,0,corrMEPz
	else
		ConEdit_1 = 16
		ConEdit_2 = 16

		corrMEPx = 0
		corrMEPz = 0
	endif

	CALL "MEP_m_ConnectionsMEP_4" PARAMETERS SetProgram = SetProgram,
		ui_current_con = ui_current_con,
		MEP_NumberConnections = MEP_NumberConnections,
		MEP_NumConnectionData = gsEP_m_ConnectionsACL_4_Connections,
		gs_AddConnections = gs_AddConnections,
		cShow3D = 1,
		gs_ConMat = gs_con_mat,
		MEP_InsShow = 0,
		MEP_cline_show_3D = 0,
		gs_cont_pen = gs_cont_pen,
		ConPosX_1=ConPosX_1, ConPosY_1=ConPosY_1, ConPosZ_1=ConPosZ_1, ConLength_1=ConLength_1, ConEdit_1 = ConEdit_1,
		ConPosX_2=ConPosX_2, ConPosY_2=ConPosY_2, ConPosZ_2=ConPosZ_2, ConLength_2=ConLength_2, ConEdit_2 = ConEdit_2,
		ConPosX_3=ConPosX_3-corrMEPx, ConPosY_3=ConPosY_3, ConPosZ_3=ConPosZ_3-corrMEPz, ConLength_3=ConLength_3, ConEdit_3 = conedit, MEP_StrConnectionData = MEP_StrConnectionData


	if bWallmountedTap then del 1

ENDIF

! --- end of modifying to Shaft


! --- Hotspot Editing ---

unID=1
add 0, 0, h_top
hotspot	-a/2,0,  0,unID,a,1+256 : unID=unID+1
hotspot	-a/2-1,0,0,unID,a,3		: unID=unID+1
hotspot	a/2,0,   0,unID,a,2		: unID=unID+1

hotspot	0,0,0,unID,b,1+128 : unID=unID+1
hotspot	0,1,0,unID,b,3 : unID=unID+1
hotspot	0,-b,0,unID,b,2 : unID=unID+1
del 1

add -a/2, -b, 0
hotspot	0,b,0,unID,h_top,1+128 : unID=unID+1
hotspot	0,b,-1,unID,h_top,3 : unID=unID+1
hotspot	0,b,h_top,unID,h_top,2 : unID=unID+1

hotspot	a,b,0,unID,h_top,1+128 : unID=unID+1
hotspot	a,b,-1,unID,h_top,3 : unID=unID+1
hotspot	a,b,h_top,unID,h_top,2 : unID=unID+1

hotspot	a/2,b,0,unID,h_top,1+128 : unID=unID+1
hotspot	a/2,b,-1,unID,h_top,3 : unID=unID+1
hotspot	a/2,b,h_top,unID,h_top,2 : unID=unID+1

hotspot	a/2,0,0,unID,h_top,1+128 : unID=unID+1
hotspot	a/2,0,-1,unID,h_top,3 : unID=unID+1
hotspot	a/2,0,h_top,unID,h_top,2 : unID=unID+1
del 1


if GLOB_CONTEXT>20 and GLOB_CONTEXT<40 then gs_resol=4
if gs_detlevel_3D_m=1 then gs_resol=4
if gs_detlevel_3D_m=3 then gs_resol=3

pen gs_cont_pen
RESOL 2.5*gs_resol

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!! *** BASIN *** !!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

addz h_top-0.17
mulx a/0.46
muly b/0.33

IF GLOB_CONTEXT > 40 AND GLOB_CONTEXT < 50 THEN
	PRISM_ 19, 0.17,
		-0.229978, 0, 15,
		-0.229995, -0.168, 79,
		-0.2268041210992, -0.1976008875153, 79,
		-0.2173780945435, -0.2258417138705, 79,
		-0.2021500145299, -0.2514249081385, 79,
		-0.1818195600853, -0.2731750086424, 79,
		-0.1573208471697, -0.2900926714636, 79,
		-0.09694804928942, -0.3154326802409, 79,
		-0.03274613633989, -0.3283662445804, 79,
		0.03274613633989, -0.3283662445804, 79,
		0.09694804928942, -0.3154326802409, 79,
		0.1573208471697, -0.2900926714636, 79,
		0.1818195600853, -0.2731750086424, 79,
		0.2021500145299, -0.2514249081385, 79,
		0.2173780945435, -0.2258417138705, 79,
		0.2268041210992, -0.1976008875153, 79,
		0.229995, -0.168, 79,
		0.229978, 0, 15,
		-0.229978, 0, -1
ELSE
	if gs_detlevel_3D_m=1 then
		mulz 0.17/0.14
		roty -90
		add 0,-0.168,0.0911

		rotx 90
		MATERIAL gs_basin_mat
		REVOLVE  14,  61.5254,0,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     2,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     2,
				0.14,     0.0889,     2,
				0.102175,     0.084476,     1,
				0.056175,     0.063026,     1,
				0.025603,     0.028117,     1,
				0.02,    -0.0,     1
		del 2


		add 0,-0.168,-0.0911
		rotx 208.4746
		REVOLVE  14,  61.5254,0,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     2,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     2,
				0.14,     0.0889,     2,
				0.102175,     0.084476,     1,
				0.056175,     0.063026,     1,
				0.025603,     0.028117,     1,
				0.02,    -0.0,     1
		del 2

		RESOL 2.5*8

		rotx 151.5254
			REVOLVE 14, 56.9491,0,
				 0.0,     0.1911,     1,
				0.006162,     0.240377,     1,
				0.036627,     0.298179,     1,
				0.0581,     0.313215,     1,
				0.09,     0.329978,     2,
				0.105175,     0.326795,     1,
				0.119648,     0.314785,     1,
				0.124298,     0.307998,     1,
				0.14,     0.30,     2,
				0.14,     0.28,     2,
				0.102175,     0.275576,     1,
				0.056175,     0.254126,     1,
				0.025603,     0.219217,     1,
				0.02,     0.1911,     1
		del 2

		RESOL 2.5*gs_resol
		rotz 90
		roty -90
		add 0,0.0911,0.1344
			EXTRUDE  14,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     0,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0,
				0.102175,     0.084476,     1,
				0.056175,     0.063026,     1,
				0.025603,     0.028117,     1,
				0.02,    -0.0,     1
		muly -1
		addy 0.1822
			EXTRUDE  14,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     0,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0,
				0.102175,     0.084476,     1,
				0.056175,     0.063026,     1,
				0.025603,     0.028117,     1,
				0.02,    -0.0,     1
		del 5

		rotz 90
		roty -90
		add 0,0.0911,0
			EXTRUDE  9,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     0,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     0
		muly -1
		addy 0.1822
			EXTRUDE  9,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     0,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     0
		del 5

		RESOL 2.5*8
			POLY_ 6,
				-0.0911,0,1,
				0.0911,0,1,
				0.0911,-0.168,1,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,0,-1

		RESOL 2.5*gs_resol
		rotx 90
		mul 1.0001,1.0001,1
		POLY_      19,
				   -0.0911,     0.0,      1,
				   -0.140377,     0.006162,      1,
				   -0.198179,     0.036627,      1,
				   -0.213215,     0.0581,      1,
				   -0.229978,     0.09,      1,
				   -0.226795,     0.105175,      1,
				   -0.214785,     0.119648,      1,
				   -0.207998,     0.124298,      1,
				   -0.19998,     0.14,      1,
					0.19998,     0.14,      1,
					0.207998,     0.124298,      1,
					0.214785,     0.119648,      1,
					0.226795,     0.105175,      1,
					0.229978,     0.09,      1,
					0.213215,     0.0581,      1,
					0.198179,     0.036627,      1,
					0.140377,     0.006162,      1,
					0.0911,    -0.0,      1,
				   -0.0911,     0.0,     -1
		del 1
		del 1
		!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! inner part
		addz 0.02
		RESOL 2.5*8
			POLY_ 8,
				-0.0911,-0.134,0,
				0.0911,-0.134,0,
				0.0911,-0.168,0,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,-0.134,-1,

				0,-0.1519,901,
				0.0175,360,4001
		del 1

		RESOL 2.5*gs_resol
		MATERIAL gs_drain_mat
		add 0,-0.1519,0.021
			Cylind 0.001, 0.0175        !! Drain
		del 1

		RESOL 2.5*5
		MATERIAL gs_basin_mat
		addy  -0.03353757
		muly 0.0667/0.0889
		addz 0.14
			POLY_ 10,
			-0.20,-0.1344,0,
			-0.18,-0.1344,0,
			0,1,800,
			-0.0911,-0.0455,1000,
			0.0911,-0.0455,0,
			0.18,-0.1344,1000,
			0.20,-0.1344,0,
			0.20,0.0447,1,
			-0.20,0.0447,0,
			-0.20,-0.1344,-1

		del 3

		RESOL 2.5*gs_resol
		roty -90
		add 0,-0.1344,0.0911
		muly 0.0667/0.0889
		REVOLVE  5,  90,0,
					0.14,     0.0889,     0,
					0.102175,     0.084476,     1,
					0.056175,     0.063026,     1,
					0.025603,     0.028117,     1,
					0.02,    -0.0,     1
		del 2


		add 0,-0.1344,-0.0911
		rotx -90
		mulz 0.0667/0.0889
		REVOLVE  5,  90,0,
					0.14,     0.0889,     0,
					0.102175,     0.084476,     1,
					0.056175,     0.063026,     1,
					0.025603,     0.028117,     1,
					0.02,    -0.0,     1
		del 4

		roty -90
		add 0,-0.1344,-0.0911
		muly 0.0667/0.0889
		EXTRUDE  5,  0,0,0.1822,0,
					0.14,     0.0889,     0,
					0.102175,     0.084476,     1,
					0.056175,     0.063026,     1,
					0.025603,     0.028117,     1,
					0.02,    -0.0,     1
		del 3
		del 1
	ENDIF


	if gs_detlevel_3D_m=2 then
		mulz 0.17/0.14
		roty -90
		add 0,-0.168,0.0911

		rotx 90
		MATERIAL gs_basin_mat
		REVOLVE  38,  61.5254,0,
					0.0,    -0.0,     1,
					0.000246,     0.018342,     1,
					0.006162,     0.049277,     1,
					0.017359,     0.078715,     1,
					0.025429,     0.092238,     1,
					0.02817,     0.097,     1,
					0.036627,     0.107079,     1,
					0.046706,     0.115537,     1,
					0.0581,     0.122115,     1,
					0.070464,     0.126615,     1,
					0.083421,     0.1289,     1,
					0.09,     0.1289,     1,
					0.09,     0.138878,     2,
					0.092969,     0.138895,     1,
					0.099212,     0.137829,     1,
					0.105175,     0.135695,     1,
					0.110677,     0.132559,     1,
					0.115551,     0.128514,     1,
					0.119648,     0.123685,     1,
					0.121246,     0.120951,     1,
					0.122103,     0.119486,     1,
					0.124298,     0.116898,     1,
					0.12691,     0.114731,     1,
					0.129451,     0.113326,     1,
					0.137338,     0.109459,     1,
					0.14,     0.10888,     2,
					0.14,     0.0889,     2,
					0.127263,     0.0889,     1,
					0.102175,     0.084476,     1,
					0.078237,     0.075764,     1,
					0.056175,     0.063026,     1,
					0.043696,     0.052497,     1,
					0.039103,     0.048446,     1,
					0.031464,     0.038872,     1,
					0.025603,     0.028117,     1,
					0.021699,     0.016507,     1,
					0.01987,     0.004396,     1,
					0.02,    -0.0,     1
		del 2


		add 0,-0.168,-0.0911
		rotx 208.4746
		REVOLVE  38,  61.5254,0,
					0.0,    -0.0,     1,
					0.000246,     0.018342,     1,
					0.006162,     0.049277,     1,
					0.017359,     0.078715,     1,
					0.025429,     0.092238,     1,
					0.02817,     0.097,     1,
					0.036627,     0.107079,     1,
					0.046706,     0.115537,     1,
					0.0581,     0.122115,     1,
					0.070464,     0.126615,     1,
					0.083421,     0.1289,     1,
					0.09,     0.1289,     1,
					0.09,     0.138878,     2,
					0.092969,     0.138895,     1,
					0.099212,     0.137829,     1,
					0.105175,     0.135695,     1,
					0.110677,     0.132559,     1,
					0.115551,     0.128514,     1,
					0.119648,     0.123685,     1,
					0.121246,     0.120951,     1,
					0.122103,     0.119486,     1,
					0.124298,     0.116898,     1,
					0.12691,     0.114731,     1,
					0.129451,     0.113326,     1,
					0.137338,     0.109459,     1,
					0.14,     0.10888,     2,
					0.14,     0.0889,     2,
					0.127263,     0.0889,     1,
					0.102175,     0.084476,     1,
					0.078237,     0.075764,     1,
					0.056175,     0.063026,     1,
					0.043696,     0.052497,     1,
					0.039103,     0.048446,     1,
					0.031464,     0.038872,     1,
					0.025603,     0.028117,     1,
					0.021699,     0.016507,     1,
					0.01987,     0.004396,     1,
					0.02,    -0.0,     1
		del 2

		rotx 151.5254
			REVOLVE 38, 56.9491,0,
				 0.0,     0.1911,     1,
				0.000246,     0.209442,     1,
				0.006162,     0.240377,     1,
				0.017359,     0.269815,     1,
				0.025429,     0.283338,     1,
				0.02817,     0.2881,     1,
				0.036627,     0.298179,     1,
				0.046706,     0.306637,     1,
				0.0581,     0.313215,     1,
				0.070464,     0.317715,     1,
				0.083421,     0.32,     1,
				0.09,     0.32,     1,
				0.09,     0.329978,     2,
				0.092969,     0.329995,     1,
				0.099212,     0.328929,     1,
				0.105175,     0.326795,     1,
				0.110677,     0.323659,     1,
				0.115551,     0.319614,     1,
				0.119648,     0.314785,     1,
				0.121246,     0.312051,     1,
				0.122103,     0.310586,     1,
				0.124298,     0.307998,     1,
				0.12691,     0.305831,     1,
				0.129451,     0.304426,     1,
				0.137338,     0.300559,     1,
				0.14,     0.30,     2,
				0.14,     0.28,     2,
				0.127263,     0.28,     1,
				0.102175,     0.275576,     1,
				0.078237,     0.266864,     1,
				0.056175,     0.254126,     1,
				0.043696,     0.243597,     1,
				0.039103,     0.239546,     1,
				0.031464,     0.229972,     1,
				0.025603,     0.219217,     1,
				0.021699,     0.207607,     1,
				0.01987,     0.195496,     1,
				0.02,     0.1911,     1
		del 2

		rotz 90
		roty -90
		add 0,0.0911,0.1344
			EXTRUDE  38,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.000246,     0.018342,     1,
				0.006162,     0.049277,     1,
				0.017359,     0.078715,     1,
				0.025429,     0.092238,     1,
				0.02817,     0.097,     1,
				0.036627,     0.107079,     1,
				0.046706,     0.115537,     1,
				0.0581,     0.122115,     1,
				0.070464,     0.126615,     1,
				0.083421,     0.1289,     1,
				0.09,     0.1289,     1,
				0.09,     0.138878,     0,
				0.092969,     0.138895,     1,
				0.099212,     0.137829,     1,
				0.105175,     0.135695,     1,
				0.110677,     0.132559,     1,
				0.115551,     0.128514,     1,
				0.119648,     0.123685,     1,
				0.121246,     0.120951,     1,
				0.122103,     0.119486,     1,
				0.124298,     0.116898,     1,
				0.12691,     0.114731,     1,
				0.129451,     0.113326,     1,
				0.137338,     0.109459,     1,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0,
				0.127263,     0.0889,     1,
				0.102175,     0.084476,     1,
				0.078237,     0.075764,     1,
				0.056175,     0.063026,     1,
				0.043696,     0.052497,     1,
				0.039103,     0.048446,     1,
				0.031464,     0.038872,     1,
				0.025603,     0.028117,     1,
				0.021699,     0.016507,     1,
				0.01987,     0.004396,     1,
				0.02,    -0.0,     1
		muly -1
		addy 0.1822
			EXTRUDE  38,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.000246,     0.018342,     1,
				0.006162,     0.049277,     1,
				0.017359,     0.078715,     1,
				0.025429,     0.092238,     1,
				0.02817,     0.097,     1,
				0.036627,     0.107079,     1,
				0.046706,     0.115537,     1,
				0.0581,     0.122115,     1,
				0.070464,     0.126615,     1,
				0.083421,     0.1289,     1,
				0.09,     0.1289,     1,
				0.09,     0.138878,     0,
				0.092969,     0.138895,     1,
				0.099212,     0.137829,     1,
				0.105175,     0.135695,     1,
				0.110677,     0.132559,     1,
				0.115551,     0.128514,     1,
				0.119648,     0.123685,     1,
				0.121246,     0.120951,     1,
				0.122103,     0.119486,     1,
				0.124298,     0.116898,     1,
				0.12691,     0.114731,     1,
				0.129451,     0.113326,     1,
				0.137338,     0.109459,     1,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0,
				0.127263,     0.0889,     1,
				0.102175,     0.084476,     1,
				0.078237,     0.075764,     1,
				0.056175,     0.063026,     1,
				0.043696,     0.052497,     1,
				0.039103,     0.048446,     1,
				0.031464,     0.038872,     1,
				0.025603,     0.028117,     1,
				0.021699,     0.016507,     1,
				0.01987,     0.004396,     1,
				0.02,    -0.0,     1
		del 5

		rotz 90
		roty -90
		add 0,0.0911,0
			EXTRUDE  26,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.000246,     0.018342,     1,
				0.006162,     0.049277,     1,
				0.017359,     0.078715,     1,
				0.025429,     0.092238,     1,
				0.02817,     0.097,     1,
				0.036627,     0.107079,     1,
				0.046706,     0.115537,     1,
				0.0581,     0.122115,     1,
				0.070464,     0.126615,     1,
				0.083421,     0.1289,     1,
				0.09,     0.1289,     1,
				0.09,     0.138878,     0,
				0.092969,     0.138895,     1,
				0.099212,     0.137829,     1,
				0.105175,     0.135695,     1,
				0.110677,     0.132559,     1,
				0.115551,     0.128514,     1,
				0.119648,     0.123685,     1,
				0.121246,     0.120951,     1,
				0.122103,     0.119486,     1,
				0.124298,     0.116898,     1,
				0.12691,     0.114731,     1,
				0.129451,     0.113326,     1,
				0.137338,     0.109459,     1,
				0.14,     0.10888,     0
		muly -1
		addy 0.1822
			EXTRUDE  26,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.000246,     0.018342,     1,
				0.006162,     0.049277,     1,
				0.017359,     0.078715,     1,
				0.025429,     0.092238,     1,
				0.02817,     0.097,     1,
				0.036627,     0.107079,     1,
				0.046706,     0.115537,     1,
				0.0581,     0.122115,     1,
				0.070464,     0.126615,     1,
				0.083421,     0.1289,     1,
				0.09,     0.1289,     1,
				0.09,     0.138878,     0,
				0.092969,     0.138895,     1,
				0.099212,     0.137829,     1,
				0.105175,     0.135695,     1,
				0.110677,     0.132559,     1,
				0.115551,     0.128514,     1,
				0.119648,     0.123685,     1,
				0.121246,     0.120951,     1,
				0.122103,     0.119486,     1,
				0.124298,     0.116898,     1,
				0.12691,     0.114731,     1,
				0.129451,     0.113326,     1,
				0.137338,     0.109459,     1,
				0.14,     0.10888,     0
		del 5


			POLY_ 6,
				-0.0911,0,1,
				0.0911,0,1,
				0.0911,-0.168,1,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,0,-1

		rotx 90
		mul 1.0001,1.0001,1
		POLY_      53,
				   -0.0911,     0.0,      1,
				   -0.109442,     0.000246,      1,
				   -0.140377,     0.006162,      1,
				   -0.169815,     0.017359,      1,
				   -0.183338,     0.025429,      1,
				   -0.1881,     0.02817,      1,
				   -0.198179,     0.036627,      1,
				   -0.206637,     0.046706,      1,
				   -0.213215,     0.0581,      1,
				   -0.217715,     0.070464,      1,
				   -0.22,     0.083421,      1,
				   -0.22,     0.09,      1,
				   -0.229978,     0.09,      1,
				   -0.229995,     0.092969,      1,
				   -0.228929,     0.099212,      1,
				   -0.226795,     0.105175,      1,
				   -0.223659,     0.110677,      1,
				   -0.219614,     0.115551,      1,
				   -0.214785,     0.119648,      1,
				   -0.212051,     0.121246,      1,
				   -0.210586,     0.122103,      1,
				   -0.207998,     0.124298,      1,
				   -0.205831,     0.12691,      1,
				   -0.204426,     0.129451,      1,
				   -0.200559,     0.137338,      1,
				   -0.19998,     0.14,      1,
					0.19998,     0.14,      1,
					0.200559,     0.137338,      1,
					0.204426,     0.129451,      1,
					0.205831,     0.12691,      1,
					0.207998,     0.124298,      1,
					0.210586,     0.122103,      1,
					0.212051,     0.121246,      1,
					0.214785,     0.119648,      1,
					0.219614,     0.115551,      1,
					0.223659,     0.110677,      1,
					0.226795,     0.105175,      1,
					0.228929,     0.099212,      1,
					0.229995,     0.092969,      1,
					0.229978,     0.09,      1,
					0.22,     0.09,      1,
					0.22,     0.083421,      1,
					0.217715,     0.070464,      1,
					0.213215,     0.0581,      1,
					0.206637,     0.046706,      1,
					0.198179,     0.036627,      1,
					0.1881,     0.02817,      1,
					0.183338,     0.025429,      1,
					0.169815,     0.017359,      1,
					0.140377,     0.006162,      1,
					0.109442,     0.000246,      1,
					0.0911,    -0.0,      1,
				   -0.0911,     0.0,     -1
		del 1
		del 1
		!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! inner part
		addz 0.02
			POLY_ 8,
				-0.0911,-0.134,0,
				0.0911,-0.134,0,
				0.0911,-0.168,0,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,-0.134,-1,

				0,-0.1519,901,
				0.0175,360,4001
		del 1

		MATERIAL gs_drain_mat
		add 0,-0.1519,0.021
			Cylind 0.001, 0.0175        !! Drain
		del 1

		MATERIAL gs_basin_mat
		addy  -0.03353757
		muly 0.0667/0.0889
		addz 0.14
			POLY_ 10,
			-0.20,-0.1344,0,
			-0.18,-0.1344,0,
			0,1,800,
			-0.0911,-0.0455,1000,
			0.0911,-0.0455,0,
			0.18,-0.1344,1000,
			0.20,-0.1344,0,
			0.20,0.0447,1,
			-0.20,0.0447,0,
			-0.20,-0.1344,-1
		del 3

		roty -90
		add 0,-0.1344,0.0911
		muly 0.0667/0.0889
			REVOLVE  12,  90,0,
				0.14,     0.0889,     0,
				0.127263,     0.0889,     1,
				0.102175,     0.084476,     1,
				0.078237,     0.075764,     1,
				0.056175,     0.063026,     1,
				0.043696,     0.052497,     1,
				0.039103,     0.048446,     1,
				0.031464,     0.038872,     1,
				0.025603,     0.028117,     1,
				0.021699,     0.016507,     1,
				0.01987,     0.004396,     1,
				0.02,    -0.0,     1
		del 2


		add 0,-0.1344,-0.0911
		rotx -90
		mulz 0.0667/0.0889
		REVOLVE  12,  90,0,
					0.14,     0.0889,     0,
					0.127263,     0.0889,     1,
					0.102175,     0.084476,     1,
					0.078237,     0.075764,     1,
					0.056175,     0.063026,     1,
					0.043696,     0.052497,     1,
					0.039103,     0.048446,     1,
					0.031464,     0.038872,     1,
					0.025603,     0.028117,     1,
					0.021699,     0.016507,     1,
					0.01987,     0.004396,     1,
					0.02,    -0.0,     1
		del 4

		roty -90
		add 0,-0.1344,-0.0911
		muly 0.0667/0.0889
		EXTRUDE  12,  0,0,0.1822,0,
					0.14,     0.0889,     0,
					0.127263,     0.0889,     1,
					0.102175,     0.084476,     1,
					0.078237,     0.075764,     1,
					0.056175,     0.063026,     1,
					0.043696,     0.052497,     1,
					0.039103,     0.048446,     1,
					0.031464,     0.038872,     1,
					0.025603,     0.028117,     1,
					0.021699,     0.016507,     1,
					0.01987,     0.004396,     1,
					0.02,    -0.0,     1
		del 3
		del 1
	ENDIF


	if gs_detlevel_3D_m=3 then
		mulz 0.17/0.14
		roty -90
		add 0,-0.168,0.0911

		rotx 90
		MATERIAL gs_basin_mat
		REVOLVE  5,  61.5254,0,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     2,
				0.14,     0.10888,     2,
				0.14,     0.0889,     1
		del 2


		add 0,-0.168,-0.0911
		rotx 208.4746
		REVOLVE  5,  61.5254,0,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     2,
				0.14,     0.10888,     2,
				0.14,     0.0889,     1
		del 2

		RESOL 2.5*4
		rotx 151.5254
			REVOLVE 5, 56.9491,0,
				 0.0,     0.1911,     1,
				0.036627,     0.298179,     1,
				0.09,     0.329978,     2,
				0.14,     0.30,     2,
				0.14,     0.28,     1
		del 2

		RESOL 2.5*gs_resol
		rotz 90
		roty -90
		add 0,0.0911,0.1344
			EXTRUDE  5,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     0,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0
		muly -1
		addy 0.1822
			EXTRUDE  5,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     0,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0
		del 5

		rotz 90
		roty -90
		add 0,0.0911,0
			EXTRUDE  4,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     0,
				0.14,     0.10888,     0
		muly -1
		addy 0.1822
			EXTRUDE  4,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     0,
				0.14,     0.10888,     0
		del 5

		RESOL 2.5*4
			POLY_ 6,
				-0.0911,0,1,
				0.0911,0,1,
				0.0911,-0.168,1,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,0,-1

		RESOL 2.5*gs_resol
		rotx 90
		mul 1.0001,1.0001,1
		POLY_      9,
				   -0.0911,     0.0,      1,
				   -0.198179,     0.036627,      1,
				   -0.229978,     0.09,      1,
				   -0.19998,     0.14,      1,
					0.19998,     0.14,      1,
					0.229978,     0.09,      1,
					0.198179,     0.036627,      1,
					0.0911,    -0.0,      1,
				   -0.0911,     0.0,     -1
		del 1
		del 1

		RESOL 2.5*5
		MATERIAL gs_basin_mat
		addy  -0.03353757
		muly 0.0667/0.0889
		addz 0.14
			POLY_ 10,
			-0.20,-0.1344,0,
			-0.18,-0.1344,0,
			0,1,800,
			-0.0911,-0.0455,1000,
			0.0911,-0.0455,0,
			0.18,-0.1344,1000,
			0.20,-0.1344,0,
			0.20,0.0447,1,
			-0.20,0.0447,0,
			-0.20,-0.1344,-1

		del 3

		del 1
	ENDIF
ENDIF

del 3

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!! *** TAPS *** !!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

if gs_detlevel_3D_m <> 3 and gs_tap_type_m <> 0 then
	if bWallMountedTap then
		add 0, 0, tapHeight
	else
		add 0, yWallPos, h_top
	endif

	call "tapType_m" parameters all bShower 			= 0,
									yWallPos 			= yWallPos,
									bEnableTapEdit		= 1,
									bSinkTap			= 0,
									useOldSimpleTaps	= 0

	del 1
endif

resol 1.5*gs_resol

if iSuptyp = WALL_MOUNT then END
if iSuptyp = SEMI_PEDESTAL then goto 20
if iSuptyp = PEDESTAL then goto 30

20:
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!! *** Semi-Pedestal *** !!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

if gs_detlevel_3D_m=1 then RESOL 2.5*5
addz h_top-0.17-0.25
addz 0.25
addy -0.15
rotx -90
CUTPLANE
del 1
roty 180
Ellips 0.25,0.115
CUTEND
del 1
del 2

rotx 90
if gs_detlevel_3D_m=1 then
	PRISM_      8,      0.15,
			0.115,         0.25,      79,
			0.099592921,        0.125,      79,
			0.0575, 0.03349365,      79,
			0,            0,      79,
			-0.0575, 0.03349365,      79,
			-0.099592921,        0.125,      79,
			-0.115,         0.25,      79,
			0.115,         0.25,      -1
ELSE
	PRISM_      20,      0.15,
			0.115,     0.25,      15,
			0.113253,     0.206588,      79,
			0.108065,     0.164495,      79,
			0.099593,     0.125,      79,
			0.088095,     0.089303,      79,
			0.073921,     0.058489,      79,
			0.0575,     0.033494,      79,
			0.039332,     0.015077,      79,
			0.01997,     0.003798,      79,
			0.0,    -0.0,      79,
		   -0.01997,     0.003798,      79,
		   -0.039332,     0.015077,      79,
		   -0.0575,     0.033494,      79,
		   -0.073921,     0.058489,      79,
		   -0.088095,     0.089303,      79,
		   -0.099593,     0.125,      79,
		   -0.108065,     0.164495,      79,
		   -0.113253,     0.206588,      79,
		   -0.115,     0.25,      15,
			0.115,     0.25,     -1
ENDIF
del 1
del 1
END


30:
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!! *** Pedestal *** !!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


roty -90
addy -0.12
rotx 45
mulx (h_top-0.17)/0.65
material gs_basin_mat
if gs_detlevel_3D_m=1 then
	REVOLVE  6, 270,1+2+4+8+16+32,
			0.65,     0.081265,     0,
			0.024479,     0.081565,     1,
			0.020803,     0.084417,     1,
			0.018512,     0.090164,     1,
			0.013563,     0.093057,     1,
			0.0,     0.095,     0
endif

if gs_detlevel_3D_m=2 then
	REVOLVE  20, 270,1+2+4+8+16+32,
			0.65,     0.081265,     0,
			0.02656,     0.081265,     0,
			0.025636,     0.081302,     1,
			0.024479,     0.081565,     1,
			0.023386,     0.082024,     1,
			0.02239,     0.082667,     1,
			0.02152,     0.083473,     1,
			0.020803,     0.084417,     1,
			0.020261,     0.085472,     1,
			0.01991,     0.086605,     1,
			0.019836,     0.087193,     1,
			0.019699,     0.087835,     1,
			0.019208,     0.089052,     1,
			0.018512,     0.090164,     1,
			0.017634,     0.09114,     1,
			0.0166,     0.091947,     1,
			0.015441,     0.092563,     1,
			0.014193,     0.092969,     1,
			0.013563,     0.093057,     1,
			0.0,     0.095,     0
ENDIF

if gs_detlevel_3D_m=3 then
	REVOLVE  2, 270,1+2+4+8+16+32,
			0.65,     0.09,    0,
			0.0,     0.09,    0
endif
del 1
del 3
END
