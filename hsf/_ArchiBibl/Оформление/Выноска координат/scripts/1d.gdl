show_subpos = 1call "Показ_по_сборкам" PARAMETERS ALL subpos=titul, pos=GLOB_ID RETURNED_PARAMETERS show_subpos, show_markerif show_subpos = 0 then goto "mend"EPS = 0.00001inx_vin = 0hotspot2 0,0ch1 = open("text", "coords.txt", "separator='\t', mode=ro, LIBRARY")tit = "" : xx_ = 0 : yy_ = 0 : zz_ = 0 : aa_ = 0xx = 0 : yy = 0 : zz = 0 : aa = 0s_x = 0 : s_y = 0 : s_ang = 0if ch1>0 then	i = 2	1:	n = input (ch1, i, 1, tit, xx_, yy_, zz_, aa_)	if n <> -1 then		if vartype(tit) = 1 then tit = str("%.0", tit)		if vartype(xx_) = 2 then 			n1 = SPLIT (xx_, "%^n", xx)		else			xx = xx_ : n1 = 1		endif		if vartype(yy_) = 2 then			n2 = SPLIT (yy_, "%^n", yy)		else			yy = yy_ : n2 = 1		endif		if vartype(zz_) = 2 then			n3 = SPLIT (zz_, "%^n", zz)		else			zz = zz_ : n3 = 1		endif		if vartype(aa_) = 2 then			n4 = SPLIT (aa_, "%^n", aa)		else			aa = aa_ : n4 = 1		endif		if n1+n2+n3+n4 = 4 then			if tit = titul then				add_x = xx/1000				add_y = yy/1000				ang = aa				gosub "vin"			endif		endif		i = i + 1		goto 1	else		goto "close"	endifendif"close":close ch1if strlen(titul)<2 then gosub "vin"goto "mend""vin":	x = SYMB_POS_X	y = SYMB_POS_Y	ang_ = ang mod 360	if abs(ang_)>EPS then		x_ = x*cos(ang_) - y*sin(ang_)		y_ = x*sin(ang_) + y*cos(ang_)		x = x_		y = y_	endif	x = x + add_x	y = y + add_y	if type_ = "x/y" then		s_x = 1029547.3		s_y = 5308146.88		s_ang = -atn(21.01/21.41)		ang_ = s_ang mod 360		if abs(ang_)>EPS then			x_ = x*cos(ang_) - y*sin(ang_)			y_ = x*sin(ang_) + y*cos(ang_)			x = x_			y = y_		endif		x = x + s_x		y = -y + s_y		fstr_vin = "X=" + str("%.2m", x)		sstr_vin = "Y=" + str("%.2m", y)	endif	if type_ = "A/B" then		s_x = 1362317.7771/1000		s_y = 1677470.5720/1000		x = x + s_x		y = y + s_y		x = round_int(x*1000)/1000		y = round_int(y*1000)/1000		ny = ceil(y/100)-1		if ny>EPS then 			y = y - ny * 100		else			ny = 0		endif		ty = str("%.0",ny) + "А" + "+" + str("%.2m", y)				nx = ceil(x/100)-1		if nx>EPS then 			x = x - nx * 100		else			nx = 0		endif		tx = str("%.0",nx) + "Б" + "+" + str("%.2m", x)		sstr_vin = tx		fstr_vin  = ty	endif	inx_vin = inx_vin + 1	coord_vin[inx_vin][1] = 0	coord_vin[inx_vin][2] = 0	call "macro_vin" parameters all, fstr_vin = fstr_vin, sstr_vin = sstr_vin, use_hotspot = 0, inx_vin = inx_vinreturn"mend":