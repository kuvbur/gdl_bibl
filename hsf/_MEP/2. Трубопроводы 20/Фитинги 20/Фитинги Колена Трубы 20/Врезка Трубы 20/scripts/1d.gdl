!-----------Основной---------------------success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_axis", show_axis)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_axis_and", show_axis_and)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_isol", show_isol)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_conventions", show_conventions)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_size", show_size)success = LIBRARYGLOBAL ("Libraryflobals-mep", "gs_detlevel_2D_m",gs_detlevel_2D_m)success = LIBRARYGLOBAL ("Libraryflobals-mep", "gs_detlevel_3D_m", gs_detlevel_3D_m)call "Показ_систем" PARAMETERS All isMep=1, isEqp=0 RETURNED_PARAMETERS show_el, syst_namecall "common_param" PARAMETERS ALLEPS = 0.00001!max_angle = 360!min_angle = 0!dim ang[] : i=0!i=i+1 : ang[i] = 30!i=i+1 : ang[i] = 45!i=i+1 : ang[i] = 60!i=i+1 : ang[i] = 90!i=i+1 : ang[i] = 180!!dim sum_ang[][] : j=0!for i=1 to vardim1(ang)!	j = j + 1!	sum_ang[j][1] = ang[i]!next i!for i=1 to vardim1(ang)!	for k=1 to vardim1(ang)!		j = j + 1!		sum_ang[j][1] = ang[i]+ang[k]!		sum_ang[j][2] = ang[i]!		sum_ang[j][3] = ang[k]!	next k!next i!j = vardim1(ang)!for i=1 to vardim1(sum_ang)!	in_ang = 0!	for k=1 to vardim1(ang)!		if sum_ang[i][1]=ang[k] then!			in_ang = 1!			k = vardim1(ang)!		endif!	next k!	if in_ang = 0 and sum_ang[i][1]<max_angle and sum_ang[i][1]>min_angle then!		j=j+1!		ang[j]=sum_ang[i][1]!	endif!next iVALUES "MEP_BendAngle" range[0,180]CALL "MEP_m_Pipe_Bend_4" PARAMETERS  ALLIF useSysMat AND MEP_StrConnectionData[1][2] <> "0" THEN LOCK "gs_PipeMat", "gs_InsMat"IF MEP_StrConnectionData[1][2] = "0" THEN LOCK "useSysMat"						! ---------------------------- !						! --- Top and Bottom Level --- !						! ---------------------------- !z = MEP_Position[1][3] + MEP_Position[2][3]*(MEP_NumConnectionData[1][17]+(MEP_BendRadius*TAN(MEP_BendAngle/2)))PARAMETERS ac_toplevel 		= zPARAMETERS ac_bottomlevel 	= z