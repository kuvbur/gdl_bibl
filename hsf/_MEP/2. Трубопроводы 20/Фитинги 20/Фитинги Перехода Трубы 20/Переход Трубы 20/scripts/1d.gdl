!-----------Основной---------------------success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_axis", show_axis)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_axis_and", show_axis_and)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_isol", show_isol)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_conventions", show_conventions)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_size", show_size)success = LIBRARYGLOBAL ("Libraryflobals-mep", "gs_detlevel_2D_m",gs_detlevel_2D_m)success = LIBRARYGLOBAL ("Libraryflobals-mep", "gs_detlevel_3D_m", gs_detlevel_3D_m)call "Показ_систем" PARAMETERS All isMep=1 RETURNED_PARAMETERS show_el, syst_namecall "common_param" PARAMETERS ALLEPS = 0.00001!IF gs_detlevel_3D_m = -1 THEN!	gs_detlevel_3D_m = 2	! Detailed!	IF gs_detlevel_3D = `Откл.` THEN gs_detlevel_3D_m = 0!	IF gs_detlevel_3D = `Простой` THEN gs_detlevel_3D_m = 1!	PARAMETERS gs_detlevel_3D_m = gs_detlevel_3D_m!ENDIFconnectionStyleA	= gs_AddConnections[1][1]connectionStyleB	= gs_AddConnections[2][1]conWidthA = 0IF gs_AddConnections[1][1] > 1 THEN conWidthA = MEP_NumConnectionData[1][17]conWidthB = 0IF gs_AddConnections[2][1] > 1 THEN conWidthB = MEP_NumConnectionData[2][17]IF NOT(MEP_offset_y) AND NOT(MEP_offset_z) THEN	MEP_StraightLength_cal = (ABS(ConWidth_1/2-ConWidth_2/2))/TAN(MEP_TransformerAngle)	IF GLOB_MODPAR_NAME = "MEP_TransformerAngle" THEN		MEP_StraightLength = MEP_StraightLength_cal + conWidthA  + conWidthB		PARAMETERS MEP_StraightLength = MEP_StraightLength	ENDIF	IF GLOB_MODPAR_NAME = "MEP_StraightLength" OR ABS(MEP_StraightLength - conWidthA - conWidthB - MEP_StraightLength_cal) > EPS THEN		MEP_TransformerAngle = ATN((ABS(ConWidth_1/2-ConWidth_2/2))/(MEP_StraightLength - conWidthA - conWidthB))		PARAMETERS MEP_TransformerAngle = MEP_TransformerAngle	ENDIFENDIFIF useSysMat AND MEP_StrConnectionData[1][2] <> "0" THEN LOCK "gs_PipeMat", "gs_InsMat"IF MEP_StrConnectionData[1][2] = "0" THEN LOCK "useSysMat"CALL "MEP_m_Pipe_4" PARAMETERS ALL