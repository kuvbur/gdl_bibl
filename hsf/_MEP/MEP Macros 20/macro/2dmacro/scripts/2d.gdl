unposID=3000_pTM = GLOB_SCALE / 1000if show_conventions=0 then goto "end_conventions_2d"if GLOB_PREVIEW_MODE then goto "end_conventions_2d" CALL "MEP_m_RequestSystemGlobals" PARAMETERS ALL one_ConID=0 returned_parameters gs_cont_pen, gs_fill_type, gs_fill_pen, gs_back_pen, MEP_cline_type, MEP_cline_pen, show_elpen MEP_cline_pen_nTrans = 0dx = 8*_pTMttx = "dZx:" + str("%.0",dZx)ttx =ttx + " dZy:" + str("%.0",dZy)ttx =ttx + " dZz:" + str("%.0",dZz)show_flag = 1if type_symb = 1 then 	gosub "hots2d"	add2 dmacro_pos[4]*_pTM, dmacro_pos[5]*_pTM : _nTrans = _nTrans + 1	rot2 dmacro_rot[2] : _nTrans = _nTrans + 1	project2 3, 270, 2	show_flag = 0endifif not(show_flag) then goto "end_conventions_2d"IF ABS(dZz) > EPS THEN	ADD2 MEP_Position[1][1], MEP_Position[1][2] : _nTrans = _nTrans + 1	rot2 dirAngOnXYPlane+90 : _nTrans = _nTrans + 1	gosub "hots2d"	add2 dmacro_pos[4]*_pTM, dmacro_pos[5]*_pTM : _nTrans = _nTrans + 1	rot2 dmacro_rot[2] : _nTrans = _nTrans + 1	!------------- Решётка ----------------	if type_symb = 1 then 		a_tr = 4*_pTM		h = sqr(a_tr*a_tr - a_tr*a_tr/4)		line2 x_o-h/10,y_o-a_tr/2,x_o-h/10,y_o+a_tr/2		hotspot2 x_o-h/10,y_o-a_tr/2,	unposID : unposID = unposID + 1		hotspot2 x_o-h/10,y_o+a_tr/2,	unposID : unposID = unposID + 1		if type_sys<0 then 			add2 x_o-h/5,0 : _nTrans = _nTrans + 1		else			add2 -h-h/5,0 : _nTrans = _nTrans + 1		endif		line2 x_o,y_o-a_tr/2,x_o,y_o+a_tr/2		line2 x_o,y_o-a_tr/2,x_o+h*sgn(type_sys),y_o		line2 x_o,y_o+a_tr/2,x_o+h*sgn(type_sys),y_o		hotspot2 x_o,y_o-a_tr/2,	unposID : unposID = unposID + 1		hotspot2 x_o,y_o+a_tr/2,	unposID : unposID = unposID + 1		hotspot2 x_o+h*sgn(type_sys),y_o,	unposID : unposID = unposID + 1	endif	!------------- Заглушка ----------------	if type_symb = 2 then		a_tr = 4*_pTM!		line2 x_o-a_tr/2,y_o,x_o+a_tr/2,y_o		line2 x_o,y_o-a_tr/2,x_o,y_o+a_tr/2	endif	!------------- Клапан ----------------	if type_symb = 31 or type_symb = 32 or type_symb = 33 then		a_pr = 2.5*_pTM		b_pr = 1.5*_pTM		put -a_pr, -b_pr,1		put -a_pr, b_pr,1		put a_pr, b_pr,1		put a_pr, -b_pr,1		fill "Пусто"		if type_symb = 31 then			gs_back_pen = 19			line2 -a_pr, -b_pr, a_pr, b_pr			circle2 0,0,_pTM*0.2		endif		if type_symb = 32 then gs_back_pen = gs_cont_pen		if type_symb = 33 then			gs_back_pen = 19			POLY2_B NSP/3, 1+2+4,gs_cont_pen, gs_back_pen, GET(NSP)			put a_pr, b_pr,1			put 0, -b_pr,1			put -a_pr, -b_pr,1			put 0, b_pr,1			POLY2_B NSP/3, 1+2+4,gs_cont_pen, gs_cont_pen, GET(NSP)		endif		if NSP>EPS then POLY2_B NSP/3, 1+2+4,gs_cont_pen, gs_back_pen, GET(NSP)	endif	if _nTrans>EPS then del _nTranselse	gosub "hots2d"	add2 dmacro_pos[4]*_pTM, dmacro_pos[5]*_pTM : _nTrans = _nTrans + 1	rot2 dmacro_rot[2] : _nTrans = _nTrans + 1	project2 3, 270, 2endifgoto "end_conventions_2d""hots2d":	hotspot2 -2*_pTM, -2*_pTM: unposID = unposID + 1	hotspot2 2*_pTM, -2*_pTM: unposID = unposID + 1	hotspot2 2*_pTM, 2*_pTM: unposID = unposID + 1	hotspot2 -2*_pTM, 2*_pTM: unposID = unposID + 1	hotspot2 0, dmacro_pos[5]*_pTM, unposID, dmacro_pos[1], 1+128+1024, dmacro_pos[4] : unposID = unposID + 1	hotspot2 -1, dmacro_pos[5]*_pTM, unposID, dmacro_pos[1], 3 + 1024, dmacro_pos[4] : unposID = unposID + 1	hotspot2 dmacro_pos[4]*_pTM, dmacro_pos[5]*_pTM, unposID, dmacro_pos[1], 2 + 1024, dmacro_pos[4] : unposID = unposID + 1	hotspot2 dmacro_pos[4]*_pTM, 0, unposID, dmacro_pos[2], 1+128+1024, dmacro_pos[5] : unposID = unposID + 1	hotspot2 dmacro_pos[4]*_pTM, -1, unposID, dmacro_pos[2], 3 + 1024, dmacro_pos[5] : unposID = unposID + 1	hotspot2 dmacro_pos[4]*_pTM, dmacro_pos[5]*_pTM, unposID, dmacro_pos[2], 2 + 1024, dmacro_pos[5] : unposID = unposID + 1	add2 dmacro_pos[4]*_pTM, dmacro_pos[5]*_pTM	HOTSPOT2 0,	dx, unID,	dmacro_rot[2],	4+128 : unposID = unposID + 1	HOTSPOT2 0,	0,	unID,	dmacro_rot[2],	6 : unposID = unposID + 1	HOTSPOT2 -dx*sin(dmacro_rot[2])*0.6,	dx*cos(dmacro_rot[2])*0.6,	unID,	dmacro_rot[2], 5 : unposID = unposID + 1	rot2 dmacro_rot[2]	HOTSPOT2 dx,	0, unID,	dmacro_rot[1],	4+128 : unposID = unposID + 1	HOTSPOT2 0,	0,	unID,	dmacro_rot[1],	6 : unposID = unposID + 1	HOTSPOT2 dx*cos(dmacro_rot[1]),	dx*sin(dmacro_rot[1]),	unID,	dmacro_rot[1], 5 : unposID = unposID + 1	del 2return"end_conventions_2d":