!call "mep_get_material" parameters all mep_get_ma_name_in="" returned_parameters mep_get_ma_name, mep_get_ma_ro, mep_get_ma_groupMEP_UNKNOW = 0MEP_ST3 = 1MEP_AISI = 2MEP_09G2S = 3MEP_PVC = 4MEP_GSH = 5var_t="" : txt_var = "" : ConSystemID = ""dim syst_name_t[] : syst_name_t[1]=""n_sys=0if ConID<=0 then ConID = 1mep_fill_type = 0mep_get_ma_group = MEP_UNKNOWmep_get_ma_name = ""mep_get_ma_ro = 7850!!!!Вынести всё это в ПМВdim group_fill_inx[] : dim group_fill_name[] : dim group_fill_type[] : dim group_fill_ro[] : i=0!Спецтребованияi=i+1 : group_fill_inx[i] = 6001		group_fill_name[i] = "09Г2С" : group_fill_type[i] = MEP_09G2S : group_fill_ro[i] = 7850!Чёрная стальi=i+1 : group_fill_inx[i] = 6002		group_fill_name[i] = "ст. 3" : group_fill_type[i] = MEP_ST3 : group_fill_ro[i] = 7850i=i+1 : group_fill_inx[i] = 24		group_fill_name[i] = "ст. 3" : group_fill_type[i] = MEP_ST3 : group_fill_ro[i] = 7850!ПВХi=i+1 : group_fill_inx[i] = 6003		group_fill_name[i] = "ПВХ" : group_fill_type[i] = MEP_PVC : group_fill_ro[i] = 1420i=i+1 : group_fill_inx[i] = 597		group_fill_name[i] = "ПВХ" : group_fill_type[i] = MEP_PVC : group_fill_ro[i] = 1420i=i+1 : group_fill_inx[i] = 611		group_fill_name[i] = "ПВХ" : group_fill_type[i] = MEP_PVC : group_fill_ro[i] = 1420!Нержавейкаi=i+1 : group_fill_inx[i] = 6004		group_fill_name[i] = "AISI 304" : group_fill_type[i] = MEP_AISI : group_fill_ro[i] = 7850i=i+1 : group_fill_inx[i] = 595		group_fill_name[i] = "AISI 304" : group_fill_type[i] = MEP_AISI : group_fill_ro[i] = 7850!Гибкий шлангi=i+1 : group_fill_inx[i] = 6005		group_fill_name[i] = "ГШ" : group_fill_type[i] = MEP_GSH : group_fill_ro[i] = 1420i=i+1 : group_fill_inx[i] = 612		group_fill_name[i] = "ГШ" : group_fill_type[i] = MEP_GSH : group_fill_ro[i] = 1420if strlen(mep_get_ma_name_in)>1 then	gosub "get_group_by_name"else	gosub "get_name_by_fill"endifgoto "m_end""get_name_by_fill":	gosub "get_syst_id_by_data"	gosub "get_syst_fill"	if mep_fill_type > 0 then		flag_find=0		for i=1 to vardim1(group_fill_inx)			if mep_fill_type = group_fill_inx[i] then				mep_get_ma_group = group_fill_type[i]				mep_get_ma_name = group_fill_name[i]				mep_get_ma_ro = group_fill_ro[i]				flag_find = 1				i = vardim1(group_fill_inx)			endif		next i		if flag_find=0 then			mep_get_ma_group = MEP_ST3			mep_get_ma_name = "ст. 3"			mep_get_ma_ro = 7850		endif	endifreturn"get_group_by_name":	for i=1 to vardim1(group_fill_name)		if mep_get_ma_name_in = group_fill_name[i] then			mep_get_ma_group = group_fill_type[i]			mep_get_ma_name = group_fill_name[i]			mep_get_ma_ro = group_fill_ro[i]			flag_find = 1			i = vardim1(group_fill_name)		endif	next ireturn"get_syst_fill":	queryStr = "GetFillType (" + ConSystemID + ")"	gs_fill_type = 0	n = APPLICATION_QUERY ("MEPSystem", queryStr, mep_fill_type)return"get_syst_id_by_data":	ConSystemID = MEP_StrConnectionData[ConID][2]return"get_syst_id_by_name":	!!!!Добавить поиск ID системы по имениreturn"m_end":end mep_get_ma_name, mep_get_ma_ro, mep_get_ma_group