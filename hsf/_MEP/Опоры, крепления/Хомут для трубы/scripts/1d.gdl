EPS = 0.00001unIDD=1!-----------Основной---------------------success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_axis", show_axis)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_axis_and", show_axis_and)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_isol", show_isol)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_op", show_op)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_conventions", show_conventions)success = LIBRARYGLOBAL ("Libraryflobals-mep", "show_size", show_size)success = LIBRARYGLOBAL ("Libraryflobals-mep", "gs_detlevel_2D_m",gs_detlevel_2D_m)success = LIBRARYGLOBAL ("Libraryflobals-mep", "gs_detlevel_3D_m", gs_detlevel_3D_m)file_name = "Хомут_36-146-88"n = REQUEST ("Name_of_main", "", name)is_call = 0 : if name<>"" then is_call = 1if SetProgram = 0 then	call "Показ_систем" PARAMETERS All isMep=0, isEqp=1 RETURNED_PARAMETERS show_elelse	call "Показ_систем" PARAMETERS All isMep=1, isEqp=1 RETURNED_PARAMETERS show_el, syst_nameendifis_error = 0 : error_msg = ""if GLOB_PREVIEW_MODE = 0 then	otm_elem = SYMB_POS_Z	txt2 = ""	aaz = SYMB_POS_Z	if abs(aaz)<EPS then		az = "0.000"		znak1 = ""	 else		az = str("%.3m", abs(aaz))		if aaz < EPS then 			znak1 = "-"		else			znak1 = "+"		endif	endif	parameters otm_niz = znak1 + azendifflag_custom_dn = 1flag_custom = 1if homut_obozn = "ОСТ 36-146-88" then flag_custom = 0dim tDN[]ch1 = open("text", file_name, "separator='\t', mode=ro, LIBRARY")i = 2 : j = 1 : DN = 0 : DN1 = 0n = 1while n <> -1 and i<1000 do	n = input (ch1, i, 1, DN)	if vartype(DN)=1 then		DN = DN / 1000		if abs(DN1-DN)>EPS then			DN1 = DN			tDN[j] = DN			j = j + 1		endif	endif	i = i + 1endwhileclose ch1if is_call = 1 then	dZx = -MEP_Position[3][2]*MEP_Position[2][3]+MEP_Position[3][3]*MEP_Position[2][2]	dZy = -MEP_Position[3][3]*MEP_Position[2][1]+MEP_Position[3][1]*MEP_Position[2][3]	dZz = -MEP_Position[3][1]*MEP_Position[2][2]+MEP_Position[3][2]*MEP_Position[2][1]endifinx = 0for i=1 to vardim1(tDN)	if homut_dn = tDN[i] then		inx = i+1		i = vardim1(tDN)	endifnext iif inx > EPS then flag_custom_dn = 0if GLOB_MODPAR_NAME="homut_dn" or GLOB_MODPAR_NAME="homut_type" or GLOB_MODPAR_NAME="homut_obozn" or homut_ves<EPS or SetProgram then	if inx > EPS then		ch1 = open("text", file_name, "separator='\t', mode=ro, LIBRARY")		n = input (ch1, inx, 1, DN, r, e, d, l, l1, C, Lab, Lvg, Vab, Vvg)		if vartype(r)=1 then homut_r = r/1000		if vartype(e)=1 then homut_e = e/1000		if vartype(d)=1 then homut_d = d/1000		if vartype(l)=1 then homut_l = l/1000		if vartype(l1)=1 then homut_l1 = l1/1000		if vartype(C)=1 then homut_C = C/1000		if homut_type = "A" or homut_type = "Б" then			if vartype(Lab)=1 then homut_dlin = Lab/1000			if vartype(Vab)=1 then homut_ves = Vab		else			if vartype(Lvg)=1 then homut_dlin = Lvg/1000			if vartype(Vvg)=1 then homut_ves = Vvg		endif		close ch1	endifendifif homut_dlin<EPS or flag_custom_dn = 1 or flag_custom = 1 then	homut_dlin = 3.15*homut_dn/2+homut_l	if homut_type = "A" or homut_type = "Б" then		homut_dlin = homut_dlin + homut_l 	else		homut_dlin = homut_dlin + 5/1000	endif	homut_ves = homut_dlin * homut_d * homut_d * 3.15 / 4endifhomut_rhom = homut_d / 2homut_naen = "Хомут для трубы Дн" + str("%.0mm",homut_dn) + " с резьбой М" + str("%.0mm",homut_d) + ", L=" + str("%.0mm",homut_dlin) + "мм."if SetProgram = 0 then	naen = homut_naen	obozn = homut_obozn	ves = homut_vesendif