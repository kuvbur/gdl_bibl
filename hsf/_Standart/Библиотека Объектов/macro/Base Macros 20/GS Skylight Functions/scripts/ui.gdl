
! =============================================================================
! Tabpage System
! =============================================================================

idTab_LiningEdgeSettings	= 0
idTab_Representation    	= 0				!Every object use this
idTab_ListingSettings		= 0				!Every object use this

if iSkylightType <> DORMER_OX_EYE and iSkylightType <> DORMER_PITCHED and iSkylightType <> DORMER_SHED and iSkylightType <> SKYLIGHT_ROUND then
	idTab_LiningEdgeSettings	= 2
	idTab_Representation    	= 3
	idTab_ListingSettings		= 4
else
	idTab_Representation    	= 2
	idTab_ListingSettings		= 3
endif

if iSkylightType = SKYLIGHT_PIVOT_HUNG or iSkylightType = SKYLIGHT_TOP_HUNG or iSkylightType = SKYLIGHT_EXAMPLE then
	idTab_ListingSettings		= 5
endif

ui_current_page gs_ui_current_page



sep1x = 222	! Separator positions

iPageIDRoot =-1

pageStartY 	= 5

! ==============================================================================
!UI_PAGES
! ==============================================================================

if idTab_LiningEdgeSettings > 0 then
	ui_page idTab_LiningEdgeSettings, iPageIDRoot, `Облицовка и Углы Откосов`, "uiTab_SkylightEdge_flat(1)"
			gosub "liningPage"
endif

if idTab_Representation > 0 then
	ui_page idTab_Representation, iPageIDRoot, `Отображение`, "uiTab_2DRepr_flat(1)"
			gosub "representationPage"
endif

if idTab_ListingSettings > 0 then
	ui_page idTab_ListingSettings, iPageIDRoot, `Параметры Спецификаций`, "uiTab_Descriptions_flat(1)"
			gosub "listingPage"
endif

! auto-collection is not working because of additional comma in command line
file_dependence "uiTab_SkylightEdge_flat(1)"
file_dependence "uiTab_2DRepr_flat(1)"
file_dependence "uiTab_Descriptions_flat(1)"


! ==============================================================================
end
! ==============================================================================


! ==============================================================================
!Subroutines
! ==============================================================================

! ------------------------------------------------------------------------------
"liningPage":
! ------------------------------------------------------------------------------

	! Lining -------------------------------------------------------------------

		if bEnableLining then
			dy = 20

			x1 = 10
			x2 = x1 + 30
			cx = 80

			yCurrent = pageStartY + 2

			bFlag = not(gs_egde_cover)
			iFlag = 4 * bFlag

			ui_style 0,1
			ui_infield{3} "gs_egde_cover", x1, yCurrent, sep1x-10-x1, 18,
							7, "",
							2,
							1, 20, 20, 20, 20,
							0, `Облицовка`, 0,
							1, `Облицовка`, 1
			yCurrent = yCurrent + 30

			ui_style 0,0
			ui_outfield `Толщина Облицовки`, x1,		yCurrent,	sep1x-10-cx-x1-2,	18, iFlag		! Edge Cover Thickness
			ui_infield "gs_edge_cover_thk", sep1x-10-cx,		yCurrent,	cx,		20
			yCurrent = yCurrent + dy + 5

			ui_style 0,0

			if bFlag then
				ui_pict 4, x1 + 1, yCurrent-2, 12,17, 1		! ui_surface_lock_flat(1).png
			else
				ui_pict 3, x1 + 1, yCurrent-2, 12,17, 1		! ui_surface_flat(1).png
			endif
			ui_outfield `Покрытие`, 	x2,	yCurrent,		sep1x-10-x2,	15, iFlag		! Edge Cover Material
			ui_infield "gs_edge_mat",	x2,	yCurrent+16,	sep1x-10-x2,	26
			yCurrent = yCurrent + 48

			if bFlag then
				ui_pict 6, x1 - 3, yCurrent-6, 20, 20, 1		! ui_fill_type_lock_flat(1).png
			else
				ui_pict 5, x1 - 3, yCurrent-6, 20, 20, 1		! ui_fill_type_flat(1).png
			endif
			ui_outfield `Штриховка`, 						x2,	yCurrent,		sep1x-10-x2,		15, iFlag		! Edge Cover Fill
			ui_infield "gs_edge_cover_fill_type", 		x2,	yCurrent+16,	sep1x-10-x2,		26
			yCurrent = yCurrent + 48

			cx = 40
			if bFlag then
				ui_pict 8, x1, yCurrent - 1, 29, 16, 1		! ui_fill_pen_lock_flat(1).png
			else
				ui_pict 7, x1, yCurrent - 1, 29, 16, 1		! ui_fill_pen_flat(1).png
			endif
			ui_outfield `Перо`, 							x2,					yCurrent+3,	sep1x-10-cx-x2-1,	18, iFlag		! Edge Cover Pen
			ui_infield "gs_edge_cover_fill_pen_fg", 	sep1x-cx-10,		yCurrent,	cx,					22
			yCurrent = yCurrent + 28

			if bFlag then
				ui_pict 10, x1, yCurrent - 1, 29, 16, 1		! ui_fill_bg_pen_lock_flat(1).png
			else
				ui_pict 9, x1, yCurrent - 1, 29, 16, 1		! ui_fill_bg_pen_flat(1).png
			endif
			ui_outfield `Перо Фона`, 				x2,				yCurrent+3,	sep1x-10-cx-x2-1,	18, iFlag		! Edge Cover Background Pen
			ui_infield "gs_edge_cover_fill_pen_bg", 	sep1x-10-cx,	yCurrent,	cx,					22
		endif

	! Edge Types --------------------------------------------------------------

		dy = 20

		x1 = 20+sep1x
		x2 = x1+30
		x3 = 220+sep1x
		x5 = 440 - 80+sep1x
		x6 = 444 - x1+sep1x
		dy = 22

		px = 19
		py = 16
		cx = x3-x1-2
		cy = py + 4
		yCurrent = pageStartY + 2

		if bEnableEdgeTypesUpper then
			ui_style 0,0
			ui_outfield `Угол Верхнего Откоса`, x1,yCurrent,x3-x1-1, 15	!, flag	! Lower Edge Type
			ui_style 0,0
			yCurrent = yCurrent + dy

			ui_infield{3} "gs_edge_upper_type", x1,yCurrent-2, cx, 22,
				8, "ui_roof_edges_upp(1)",
				4, 4,
				0, 0, px, py,
				1,	stEdgeTypes[1],	stEdgeTypes[1],		! Vertical
				2,	stEdgeTypes[2],	stEdgeTypes[2],		! Perpendicular
				3,	stEdgeTypes[3],	stEdgeTypes[3],		! Horizontal
				4,	stEdgeTypes[4],	stEdgeTypes[4]		! Other

			yCurrent = yCurrent + 35
			ui_pict 1, x1, yCurrent, 28, 23, 1
			ui_infield "ac_edge_upper_angle", x2+2, yCurrent, x3-x2-5-2, dy
			yCurrent = yCurrent + 40
		else
			yCurrent = yCurrent + dy + 35 + 40
		endif

		if bEnableEdgeTypesLower then
			ui_style 0,0
			ui_outfield `Угол Нижнего Откоса`, x1,yCurrent,x3-x1-1, 15	!, flag	! Lower Edge Type
			ui_style 0,0
			yCurrent = yCurrent + dy

			ui_infield{3} "gs_edge_lower_type", x1,yCurrent-2, cx, 22,
				8, "ui_roof_edges_low(1)",
				4, 4,
				0, 0, px, py,
				1,	stEdgeTypes[1],	stEdgeTypes[1],		! Vertical
				2,	stEdgeTypes[2],	stEdgeTypes[2],		! Perpendicular
				3,	stEdgeTypes[3],	stEdgeTypes[3],		! Horizontal
				4,	stEdgeTypes[4],	stEdgeTypes[4]		! Other
			yCurrent = yCurrent + 35
			ui_pict 2, x1, yCurrent, 28, 23, 1
			ui_infield "ac_edge_lower_angle", x2+2, yCurrent, x3-x2-5-2, dy
		endif

	


return

! ------------------------------------------------------------------------------
"representationPage":
! ------------------------------------------------------------------------------

		ui_separator sep1x,pageStartY - 2, sep1x,pageStartY + 231

		x1 = 0
		x3 = sep1x - 15
		x4 = 70

		yCurrent = pageStartY + 2

		ui_style 0,1
		ui_outfield `Перо Контура Объекта`, x1, yCurrent, sep1x - x1 - 2, 15
		yCurrent = yCurrent + 30

		ui_pict "ui_pen_flat(1)", 140, yCurrent, 23, 17, 1
		ui_infield "gs_cont_pen", 170, yCurrent-2, x3-170, 20
		yCurrent = yCurrent + 30

		ui_outfield `Детализация по Проекции`, x1, yCurrent, sep1x - x1 - 2, 15
		yCurrent = yCurrent + 22

		ui_style 0,0
		ui_outfield `Виды Плана Этажа`, x1, yCurrent, sep1x - x1 - 2, 15
		yCurrent = yCurrent + 22

		ui_infield "gs_detlevel_2D", x4, yCurrent-2, x3 - x4, 20
		yCurrent = yCurrent + 22


		ui_outfield `Сечения и 3D-документы`, x1, yCurrent, sep1x - x1 - 2, 15
		yCurrent = yCurrent + 22

		ui_infield "gs_detlevel_SE", x4, yCurrent-2, x3 - x4, 20
		yCurrent = yCurrent + 22


		ui_outfield `3D-виды`, x1, yCurrent, sep1x - x1 - 2, 15
		yCurrent = yCurrent + 22

		ui_infield "gs_detlevel_3D", x4, yCurrent-2, x3 - x4, 20
		yCurrent = yCurrent + 22


		x1 = sep1x + 15
		x2 = x1 + 30
		x3 = 440
		x4 = x3 - 40

		yCurrent = pageStartY + 2

		ui_style 0,1
		ui_outfield `Штриховка 2D-символа`, x1, yCurrent, x3 - x1, 15
		yCurrent = yCurrent + 30

		ui_style 0,0

		ui_pict 5, x1 - 2, yCurrent - 6, 20, 20, 1		! ui_fill_type_flat(1).png
		ui_outfield `Тип Штриховки`, 	x2,	yCurrent,		x3-x2,	15
		ui_infield "gs_fill_type", 	x2,	yCurrent+16,	x3-x2,	26
		yCurrent = yCurrent + 48

		cx = 40
		ui_pict 7, x1, yCurrent - 1, 29, 16, 1		! ui_fill_pen_flat(1).png
		ui_outfield `Перо Штриховки`,		x2,		yCurrent+3, 	x3-cx-x2-1,	18
		ui_infield "gs_fill_pen",	x3-cx,	yCurrent, 		cx, 		22
		yCurrent = yCurrent + 27

		ui_pict 9, x1, yCurrent - 1, 29, 16, 1		! ui_fill_bg_pen_flat(1).png
		ui_outfield `Перо Фона Штриховки`,	x2,		yCurrent+3,	x3-cx-x2-1,	18
		ui_infield "gs_back_pen",			x3-cx,	yCurrent, 	cx, 		22
		yCurrent = yCurrent + 27

		ui_style 0,1
		ui_outfield `Прим.:`, x1, yCurrent, x3 - x1, 15
		yCurrent = yCurrent + 20

		ui_style 1,0
		ui_outfield `Реквизиты символа действуют только при активации Символического Показа на Плане Этажа Односкатных Крыш и их Световых Люков (страница Наследуемый Режим в Параметрах Проекта)`,
			x1, yCurrent, x3 - x1, 77


return

! ------------------------------------------------------------------------------
"listingPage":
! ------------------------------------------------------------------------------


		dim gs_UI_list[20]
			gs_UI_list[1]=`Цена`
			gs_UI_list[2]=`Производитель`
			gs_UI_list[3]=`Расположение`
			gs_UI_list[4]=`Аксессуары`
			gs_UI_list[5]=`Остекление`
			gs_UI_list[6]=`Тип Операции`
			gs_UI_list[7]=`Данные о Перемычке`
			gs_UI_list[8]=`Данные об Откосах`
			gs_UI_list[9]=`Деталь Отлива`
			gs_UI_list[10]=`Общая Площадь Остекления`
			gs_UI_list[11]=`Общий Периметр Остекления`
			gs_UI_list[12]=`U-значение`
			gs_UI_list[13]=`Огнестойкость`
			gs_UI_list[14]=`Шумозащита`
			gs_UI_list[15]=`Вентиляция`
			gs_UI_list[16]=`Пользовательское Значение 1`
			gs_UI_list[17]=`Пользовательское Значение 2`
			gs_UI_list[18]=`Пользовательское Значение 3`
			gs_UI_list[19]=`Пользовательское Значение 4`
			gs_UI_list[20]=`Пользовательское Значение 5`

		dx = 222

		ui_style 0,0
		ui_separator dx, pageStartY  - 2, dx, pageStartY + 231

		!****** 1. column

		dy = pageStartY + 10
		ui_outfield gs_UI_list[1], 10, dy, 120, 15
		ui_infield "gs_list_cost", 131, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[2], 10, dy, 120, 15
		ui_infield "gs_list_manufacturer", 131, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[3], 10, dy, 120, 15
		ui_infield "gs_list_location", 131, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[4], 10, dy, 120, 15
		ui_infield "gs_list_accessories", 131, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[5], 10, dy, 120, 15
		ui_infield "gs_list_glazing", 131, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[6], 10, dy, 120, 15
		ui_infield "gs_list_optype", 131, dy-5, 80, 20
		dy = dy + 18

		ui_separator 7, dy, dx-3, dy
		dy = dy + 9

		ui_outfield gs_UI_list[7], 10, dy, 120, 15
		ui_infield "gs_list_headdet", 131, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[8], 10, dy, 120, 15
		ui_infield "gs_list_jambdet", 131, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[9], 10, dy, 120, 15
		ui_infield "gs_list_silldet", 131, dy-5, 80, 20
		dy = dy + 18


		!****** 2. column

		dy = pageStartY + 10
		dx = dx + 10

		ui_outfield gs_UI_list[10], dx, dy, 120, 15
		ui_infield "gs_list_glassarea", dx+121, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[11], dx, dy, 120, 15
		ui_infield "gs_list_glassperimeter", dx+121, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[12], dx, dy, 120, 15
		ui_infield "gs_list_heattransfer", dx+121, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[13], dx, dy, 120, 15
		ui_infield "gs_list_firerating", dx+121, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[14], dx, dy, 120, 15
		ui_infield "gs_list_acousticrating", dx+121, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[15], dx, dy, 120, 15
		ui_infield "gs_list_ventilation", dx+121, dy-5, 80, 20
		dy = dy + 18

		ui_separator dx-3, dy, 444, dy
		dy = dy + 9

		ui_outfield gs_UI_list[16], dx, dy, 120, 15
		ui_infield "gs_list_custom1", dx+121, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[17], dx, dy, 120, 15
		ui_infield "gs_list_custom2", dx+121, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[18], dx, dy, 120, 15
		ui_infield "gs_list_custom3", dx+121, dy-5, 80, 20
		dy = dy + 21

		ui_outfield gs_UI_list[19], dx, dy, 120, 15
		ui_infield "gs_list_custom4", dx+121, dy-5, 80, 20
		dy = dy + 21

return



