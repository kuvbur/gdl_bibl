
! fa_gen_corncabinet
EPS=0.0001

alpha=ATN((b-rdepth_cab)/(a-ldepth_cab))

IF gs_count_type_m = 1 or gs_detlevel_3D_m = 1 Then
	IF left_cab>0 AND right_cab>0 THEN
		lx=ldepth_cab+front_cab
		ly=-front_cab*(TAN(45-alpha/2))
		rx=a+front_cab*(TAN(alpha/2))
		ry=b-rdepth_cab-front_cab
	ENDIF

	IF ABS(left_cab)<EPS AND right_cab>0 THEN
		lx=ldepth_cab+front_cab
		ly=0
		rx=a+front_cab*(1-1/(TAN(alpha)))
		ry=b-rdepth_cab-front_cab
	ENDIF

	IF left_cab>0 AND ABS(right_cab)<EPS THEN
		lx=ldepth_cab+front_cab
		ly=-front_cab*(1-1/(TAN(90-alpha)))
		rx=a
		ry=b-rdepth_cab-front_cab
	ENDIF

	IF ABS(left_cab)<EPS AND ABS(right_cab)<EPS THEN
		lx=ldepth_cab+front_cab
		ly=0
		rx=a
		ry=b-rdepth_cab-front_cab
	ENDIF
Else 								!IF gs_count_type_m = 2 Then
	rr=min (count_th*4/5, 0.02)

	IF left_cab>0 AND right_cab>0 THEN
		lx=ldepth_cab+(front_cab-rr)
		ly=-(front_cab-rr)*(TAN(45-alpha/2))
		rx=a+(front_cab-rr)*(TAN(alpha/2))
		ry=b-rdepth_cab-(front_cab-rr)
	ENDIF

	IF ABS(left_cab)<EPS AND right_cab>0 THEN
		lx=ldepth_cab+(front_cab-rr)
		ly=0
		rx=a+(front_cab-rr)*(1-1/(TAN(alpha)))
		ry=b-rdepth_cab-(front_cab-rr)
	ENDIF

	IF left_cab>0 AND ABS(right_cab)<EPS THEN
		lx=ldepth_cab+(front_cab-rr)
		ly=-(front_cab-rr)*(1-1/(TAN(90-alpha)))
		rx=a
		ry=b-rdepth_cab-(front_cab-rr)
	ENDIF

	IF ABS(left_cab)<EPS AND ABS(right_cab)<EPS THEN
		lx=ldepth_cab+(front_cab-rr)
		ly=0
		rx=a
		ry=b-rdepth_cab-(front_cab-rr)
	ENDIF
Endif
