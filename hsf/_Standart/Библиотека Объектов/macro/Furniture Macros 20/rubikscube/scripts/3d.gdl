
pen gs_cont_pen
material "coreMat"
add -1, -1, -1
block 3,3,3
del 1

add 0.5,0.5,0.5

UnID = 1
rotz 45
for i = 1 to 4
	sinang	= sqr(2)*1.6*sin(aLayer1)
	cosang	= sqr(2)*1.6*cos(aLayer1)
	hotspot 0,		0,		1,	UnID,aLayer1, 6		: UnID = UnID +1
	hotspot 0,		1.6,	1,	UnID,aLayer1, 4+128	: UnID = UnID +1
	hotspot 0,		0,		-2,	UnID,aLayer1, 7		: UnID = UnID +1
	hotspot sinang, cosang,	1,	UnID,aLayer1, 5		: UnID = UnID +1
	
	sinang	= sqr(2)*1.6*sin(aLayer2)
	cosang	= sqr(2)*1.6*cos(aLayer2)
	hotspot 0,		0,		0,	UnID,aLayer2, 6		: UnID = UnID +1
	hotspot 0,		1.6,	0,	UnID,aLayer2, 4+128	: UnID = UnID +1
	hotspot 0,		0,		-2,	UnID,aLayer2, 7		: UnID = UnID +1
	hotspot sinang, cosang,	0,	UnID,aLayer2, 5		: UnID = UnID +1

	sinang	= sqr(2)*1.6*sin(aLayer3)
	cosang	= sqr(2)*1.6*cos(aLayer3)
	hotspot 0,		0,		-1,	UnID,aLayer3, 6		: UnID = UnID +1
	hotspot 0,		1.6,	-1,	UnID,aLayer3, 4+128	: UnID = UnID +1
	hotspot 0,		0,		-2,	UnID,aLayer3, 7		: UnID = UnID +1
	hotspot sinang, cosang,	-1,	UnID,aLayer3, 5		: UnID = UnID +1

	rotz 90
next i
del 4
del 1

roty -90
rotz 45
for i = 1 to 4
	sinang	= sqr(2)*1.6*sin(aColumn1)
	cosang	= sqr(2)*1.6*cos(aColumn1)
	hotspot 0,		0,		1,	UnID,aColumn1, 6		: UnID = UnID +1
	hotspot 0,		1.6,	1,	UnID,aColumn1, 4+128	: UnID = UnID +1
	hotspot 0,		0,		-2,	UnID,aColumn1, 7		: UnID = UnID +1
	hotspot sinang,	cosang,	1,	UnID,aColumn1, 5		: UnID = UnID +1
	
	sinang	= sqr(2)*1.6*sin(aColumn2)
	cosang	= sqr(2)*1.6*cos(aColumn2)
	hotspot 0,		0,		0,	UnID,aColumn2, 6		: UnID = UnID +1
	hotspot 0,		1.6,	0,	UnID,aColumn2, 4+128	: UnID = UnID +1
	hotspot 0,		0,		-2,	UnID,aColumn2, 7		: UnID = UnID +1
	hotspot sinang, cosang,	0,	UnID,aColumn2, 5		: UnID = UnID +1

	sinang	= sqr(2)*1.6*sin(aColumn3)
	cosang	= sqr(2)*1.6*cos(aColumn3)
	hotspot 0,		0,		-1,	UnID,aColumn3, 6		: UnID = UnID +1
	hotspot 0,		1.6,	-1,	UnID,aColumn3, 4+128	: UnID = UnID +1
	hotspot 0,		0,		-2,	UnID,aColumn3, 7		: UnID = UnID +1
	hotspot sinang, cosang,	-1,	UnID,aColumn3, 5		: UnID = UnID +1

	rotz 90
next i
del 4
del 2

rotx -90
rotz 45
for i = 1 to 4
	sinang	= sqr(2)*1.6*sin(aRow1)
	cosang	= sqr(2)*1.6*cos(aRow1)
	hotspot 0,		0,		1,	UnID,aRow1, 6		: UnID = UnID +1
	hotspot 0,		1.6,	1,	UnID,aRow1, 4+128	: UnID = UnID +1
	hotspot 0,		0,		-2,	UnID,aRow1, 7		: UnID = UnID +1
	hotspot sinang, cosang,	1,	UnID,aRow1, 5		: UnID = UnID +1
	
	sinang	= sqr(2)*1.6*sin(aRow2)
	cosang	= sqr(2)*1.6*cos(aRow2)
	hotspot 0,		0,		0,	UnID,aRow2, 6		: UnID = UnID +1
	hotspot 0,		1.6,	0,	UnID,aRow2, 4+128	: UnID = UnID +1
	hotspot 0,		0,		-2,	UnID,aRow2, 7		: UnID = UnID +1
	hotspot sinang, cosang,	0,	UnID,aRow2, 5		: UnID = UnID +1

	sinang	= sqr(2)*1.6*sin(aRow3)
	cosang	= sqr(2)*1.6*cos(aRow3)
	hotspot 0,		0,		-1,	UnID,aRow3, 6		: UnID = UnID +1
	hotspot 0,		1.6,	-1,	UnID,aRow3, 4+128	: UnID = UnID +1
	hotspot 0,		0,		-2,	UnID,aRow3, 7		: UnID = UnID +1
	hotspot sinang, cosang,	-1,	UnID,aRow3, 5		: UnID = UnID +1

	rotz 90
next i
del 4
del 2

del 1

dim _curentTileMat[3][3]

for side = 1 to 6
	if side = 1 then
		add -0.95, -1.01, 1.05
		_curentTileMat = frontSide
	else
		if side = 2 then
			rotz 90
			add -0.95, -2.01, 1.05
			_curentTileMat = rightSide
		else
			if side = 3 then
				rotz 90+90
				add -1.95, -2.01, 1.05
				_curentTileMat = rearSide
			else
				if side = 4 then
					rotz 90+90+90
					add -1.95, -1.01, 1.05
					_curentTileMat = leftSide
				else
					if side = 5 then
						rotx 90
						add -0.95, -1.01, 0.05
						_curentTileMat = bottomSide
					else
						if side = 6 then
							rotx -90
							add -0.95, -2.01, 1.05
							_curentTileMat = topside
						endif
					endif
				endif
			endif
		endif
	endif

	gosub "drawtiles"
	del 1
	if  side > 1 then del 1
next side

end

"drawtiles":
	rotx 90
	for i = 1 to 3
		for j = 1 to 3
			if _curentTileMat[i][j] = TILEMAT_RED		then material "redTileMat"
			if _curentTileMat[i][j] = TILEMAT_YELLOW	then material "yellowTileMat"
			if _curentTileMat[i][j] = TILEMAT_ORANGE	then material "orangeTileMat"
			if _curentTileMat[i][j] = TILEMAT_WHITE		then material "whiteTileMat"
			if _curentTileMat[i][j] = TILEMAT_GREEN		then material "greenTileMat"
			if _curentTileMat[i][j] = TILEMAT_BLUE		then material "blueTileMat"
!			if i = 1 and j = 1 then sphere 0.2
			poly 4, 0,0,0.9,0,0.9,0.9,0,0.9
			addx 1
		next j
		del 3
		addy -1
	next i
	del 3
	del 1
return



