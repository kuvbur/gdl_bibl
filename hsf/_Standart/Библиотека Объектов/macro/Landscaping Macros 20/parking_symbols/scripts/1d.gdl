
EPS = 0.00001
!isymboltype
SYMBOL_WHEELCHAIR		= 1
SYMBOL_FAMILY			= 2
SYMBOL_EMPTY_DET		= 3
SYMBOL_EMPTY_SIMP		= 4
SYMBOL_WHEELCHAIR_BOUND	= 5

if GLOB_SCRIPT_TYPE = 2 then
	edgeStatus = 1
else
	edgeStatus = 15
endif

goto "master_end"

"wheelchair points":
	put	2		! x size
	put	2		! y size

!	Line2 0,0,0,B
!	Line2 0,0,A,0
!	Line2 0,B,A,B
!	Line2 A,0,A,B
!	hotspot2 0,B/2
!	hotspot2 A,B/2
!	hotspot2 A/2,B/2
!	hotspot2 A/2,B
!	hotspot2 A/2,0

	put 18					! nFistPolyPoints
	put	0.6070353689158, 1.732891464851,     edgeStatus, 
		0.7817228981386, 1.725140510847,    900, 
		0, 14.24601376772,   4000+edgeStatus, 
		0.6757973035294, 0.8749714033575,     edgeStatus, 
		1.287184637328, 0.8749714033575,     edgeStatus, 
		1.462904490885, 0.3840105395645,     edgeStatus, 
		1.765000314735, 0.4921336871344,     edgeStatus, 
		1.73130261722, 0.5862849759318,     edgeStatus, 
		1.523358082168, 0.5118595258766,     edgeStatus, 
		1.357605662183, 0.9749714033575,     edgeStatus, 
		0.7681030288826, 0.9749714033575,     edgeStatus, 
		0.749055091657, 1.212626256551,     edgeStatus, 
		1.104225318676, 1.212626256551,     edgeStatus, 
		1.104225318676, 1.312626256551,     edgeStatus, 
		0.7410401334226, 1.312626256551,     edgeStatus, 
		0.7211236627582, 1.561117516041,     edgeStatus, 
		0.7817228981386, 1.725140510847,    900, 
		0, 287.7364697899,   4000+edgeStatus


	put 7					! nFistPolyPoint
	put	1.290841442341, 0.5679981183041,     edgeStatus, 
		0.8200929270423, 0.6850933298269,    900, 
		0, -223.3250827935,   4000+edgeStatus, 
		0.5491321374023, 1.203662854626,     edgeStatus, 
		0.8200929270423, 0.6850933298269,    900, 
		0, 215.7409570171,   4000+edgeStatus, 
		1.290841442341, 0.5679981183041,     edgeStatus
return

"wheelchair_bound points":
	put	1.53		! x size
	put	1.80		! y size

	put 7					! nFistPolyPoint
	put	1.107930595714, 0.3224619357587,     edgeStatus, 
		1.055841757076, 0.467998030254,     edgeStatus, 
		0.5850932417768, 0.5850932417768,    900, 
		0, -223.3250827935,   4000+edgeStatus, 
		0.3141324521369, 1.103662766576,     edgeStatus, 
		0.5850932417768, 0.5850932417768,    900, 
		0, 215.7409570171,   4000+edgeStatus


	put 16					! nFistPolyPoint
	put	0.3720356836503, 1.632891376801,     edgeStatus, 
		0.4407976182639, 0.7749713153074,     edgeStatus, 
		1.052184952063, 0.7749713153074,     edgeStatus, 
		1.22790480562, 0.2840104515145,     edgeStatus, 
		1.530000629469, 0.3921335990844,     edgeStatus, 
		1.496302931954, 0.4862848878818,     edgeStatus, 
		1.288358396902, 0.4118594378265,     edgeStatus, 
		1.122605976918, 0.8749713153074,     edgeStatus, 
		0.5331033436171, 0.8749713153074,     edgeStatus, 
		0.5140554063916, 1.112626168501,     edgeStatus, 
		0.869225633411, 1.112626168501,     edgeStatus, 
		0.869225633411, 1.212626168501,     edgeStatus, 
		0.5060404481571, 1.212626168501,     edgeStatus, 
		0.4861239774928, 1.461117427991,     edgeStatus, 
		0.5467232128731, 1.625140422797,    900, 
		0, 287.7364697899,   4000+edgeStatus
return

"family points":
	put	3.079158810136		! x size
	put	2.009757855857		! y size

	put 67
	put     1.191964099111, 0.7264873022976,     edgeStatus, 
			1.245016612534, 1.209221041614,     edgeStatus, 
			1.36426006571, 0.8259493404152,     edgeStatus, 
			1.436262042769, 0.8259493404152,     edgeStatus, 
			1.557330251134, 1.213869980183,     edgeStatus, 
			1.500045794254, 0.6926290758349,     edgeStatus, 
			1.610471998854, 0.6926290758349,     edgeStatus, 
			1.617672561504, -0.002082795283572,     edgeStatus, 
			1.724861797403, -0.002082795283572,     edgeStatus, 
			1.724861797403, 0.6926290758349,     edgeStatus, 
			1.761608578313, 0.6926290758349,     edgeStatus, 
			1.761608578313, -0.002082795283572,     edgeStatus, 
			1.873184700079, -0.002082795283572,     edgeStatus, 
			1.880278541659, 0.6926290758349,     edgeStatus, 
			1.989366275098, 0.6926290758349,     edgeStatus, 
			1.937350932001, 1.210856012614,     edgeStatus, 
			2.054665904748, 0.826895043218,     edgeStatus, 
			2.098796148752, 0.8423793393597,     edgeStatus, 
			2.237671991154, 0.714136865348,     edgeStatus, 
			2.403775391488, 0.2953868040465,     edgeStatus, 
			2.403775391488, 0.2721603598339,     edgeStatus, 
			2.370063461436, 0.1994564698619,     edgeStatus, 
			2.348737448704, 0.09894768913537,    900, 
					   0, 181.493549975,   4000+edgeStatus, 
			2.367436513928, -0.002082795283572,     edgeStatus, 
			2.348737448704, 0.09894768913537,    900, 
					   0, 136.8126020694,   4000+edgeStatus, 
			2.439236959201, 0.2591914335707,     edgeStatus, 
			2.730619205253, 0.2591914335707,     edgeStatus, 
			2.730619205253, 0.1993374759759,     edgeStatus, 
			2.752498522434, 0.09894768913537,    900, 
					   0, 157.2191722188,   4000+edgeStatus, 
			2.771197587658, -0.002082795283572,     edgeStatus, 
			2.752498522434, 0.09894768913537,    900, 
					   0, 158.0197890705,   4000+edgeStatus, 
			2.772972962608, 0.2721603598339,     edgeStatus, 
			2.137665794483, 0.8587103227213,     edgeStatus, 
			1.976421272388, 1.38529761083,     edgeStatus, 
			1.510861200621, 1.38529761083,     edgeStatus, 
			1.399831104211, 1.028107660448,     edgeStatus, 
			1.292640935453, 1.38529761083,     edgeStatus, 
			0.8218368234141, 1.38529761083,     edgeStatus, 
			0.67545769932, 0.8810375685132,     edgeStatus, 
			0.4769000782167, 0.8442010867701,     edgeStatus, 
			0.1983803382075, 0.8442010867701,     edgeStatus, 
					 0.1, 0.5221537085672,     edgeStatus, 
			0.1534577994963, 0.5036882433395,     edgeStatus, 
			0.2277984291991, 0.7368537129725,     edgeStatus, 
			0.2628522491364, 0.468661640767,     edgeStatus, 
			0.2628522491364, 0.001622168920778,     edgeStatus, 
			0.3287852168949, 0.001622168920778,     edgeStatus, 
			0.3287852168949, 0.4251719132497,     edgeStatus, 
			0.3500028047385, 0.4251719132497,     edgeStatus, 
			0.3500028047385, 0.001622168920778,     edgeStatus, 
			0.4215002379441, 0.001622168920778,     edgeStatus, 
			0.4264708070768, 0.4639280014765,     edgeStatus, 
			0.4576326548558, 0.7630136339333,     edgeStatus, 
			0.7515480398393, 0.8259493404152,     edgeStatus, 
			0.8713321551759, 1.210334896775,     edgeStatus, 
			0.9308141952024, 0.7264873022976,     edgeStatus, 
			0.9308141952024, -0.002082795283571,     edgeStatus, 
			1.040461404117, -0.002082795283571,     edgeStatus, 
			1.040461404117, 0.6926290758349,     edgeStatus, 
			1.07014150219, 0.6926290758349,     edgeStatus, 
			1.07014150219, -0.002082795283572,     edgeStatus, 
			1.184130739064, -0.002082795283571,     edgeStatus, 
			1.191964099111, 0.7264873022976,     edgeStatus

	put 5
	put     0.4423196301951, 1.011872034727,     edgeStatus, 
			0.3391211894911, 1.011872034727,    900, 
					   0,          180,   4000+edgeStatus, 
			0.3391211894911, 1.011872034727,    900, 
					   0,          180,   4000+edgeStatus

	put 5
	put     1.231223511236, 1.62054595645,     edgeStatus, 
			1.061445431368, 1.62054595645,    900, 
					   0,          180,   4000+edgeStatus, 
			1.061445431368, 1.62054595645,    900, 
					   0,          180,   4000+edgeStatus

	put 5
	put     1.934393890137, 1.62054595645,     edgeStatus, 
			1.764615810269, 1.62054595645,    900, 
					   0,          180,   4000+edgeStatus, 
			1.764615810269, 1.62054595645,    900, 
					   0,          180,   4000+edgeStatus

	put 5
	put     2.559392756576, 0.7942362311146,     edgeStatus, 
			2.456194315872, 0.7942362311146,    900, 
					   0,          180,   4000+edgeStatus, 
			2.456194315872, 0.7942362311146,    900, 
					   0,          180,   4000+edgeStatus

	put 5
	put     2.979168171945, 0.2552804719884,     edgeStatus, 
			2.780333458068, 0.4435194678267,     edgeStatus, 
			2.694604466668, 0.4435194678267,     edgeStatus, 
			2.940426462998, 0.2165387630417,     edgeStatus, 
			2.979168171945, 0.2552804719884,     edgeStatus
return

"simple empty points":
	_innerA = A - lineWidth
	_innerB = B - lineWidth

	put	A ! x size
	put	B ! y size

	put 10					! nFistPolyPoints

	put 	0, 0, edgeStatus,
			A, 0, edgeStatus,
			A, B, edgeStatus,
			0, B, edgeStatus,
			0, 0, -1

	put 	lineWidth, lineWidth, edgeStatus,
			_innerA, lineWidth, edgeStatus,
			_innerA, _innerB, edgeStatus,
			lineWidth, _innerB, edgeStatus,
			lineWidth, lineWidth, -1
return

"detailed empty points":
	_innerA			= A - 2 * lineWidth
	_innerB			= B - 2 * lineWidth
	_widthonLine	= sqr(2) * lineWidth
	_segmentNum		= int((_innerA + _innerB) / _widthonLine) + 1

	dim rightPoints[][]
	dim leftPoints[][]

	for i = 1 to _segmentNum
		rightPoints[i][1]	= 0
		rightPoints[i][2]	= 0
		leftPoints[i][1]	= 0
		leftPoints[i][2]	= 0
	next i 

	rightPoints[1][1]	= lineWidth + EPS
	rightPoints[1][2]	= lineWidth + EPS
	leftPoints[1][1]	= lineWidth + EPS
	leftPoints[1][2]	= lineWidth + EPS
	_side				= 1
	_rightCornerPoint	= -1
	_leftCornerPoint	= -1

	for i = 2 to _segmentNum
		if _side = 1 then
			if (rightPoints[i-1][1] + _widthonLine) - (_innerA + lineWidth) < 0 | \
				abs((rightPoints[i-1][1] + _widthonLine) -_innerA) < EPS then 
				rightPoints[i][1] = rightPoints[i-1][1] + _widthonLine
				rightPoints[i][2] = lineWidth
			else
				_side = 2
				_rightCornerPoint = i
				rightPoints[i][1] = _innerA + lineWidth
				rightPoints[i][2] = _widthonLine - (_innerA - rightPoints[i-1][1])
			endif
		else
			rightPoints[i][1] = _innerA + lineWidth
			rightPoints[i][2] = rightPoints[i-1][2] +  _widthonLine
		endif
	next i

	_side				= 1
	for i = 2 to _segmentNum
		if _side = 1 then
			if (leftPoints[i-1][2] + _widthonLine) - (_innerB + lineWidth) < 0 | \
				abs((leftPoints[i-1][2] + _widthonLine) - (_innerB + lineWidth)) < EPS then 
				leftPoints[i][2] = leftPoints[i-1][2] + _widthonLine
				leftPoints[i][1] = lineWidth
			else
				_side = 2
				_leftCornerPoint = i
				leftPoints[i][1] = _widthonLine - (_innerB - leftPoints[i-1][2])
				leftPoints[i][2] = _innerB + lineWidth
			endif
		else
			leftPoints[i][1] = leftPoints[i-1][1] +  _widthonLine
			leftPoints[i][2] = _innerB + lineWidth
		endif
	next i

	if abs(rightPoints[i-1][1] - leftPoints[i-1][1]) > EPS & \
		abs(rightPoints[i-1][2] - leftPoints[i-1][2]) > EPS then
		rightPoints[i][1]	= _innerA + lineWidth
		rightPoints[i][2]	= _innerB + lineWidth - EPS
		leftPoints[i][1]	= _innerA + lineWidth - EPS
		leftPoints[i][2]	= _innerB + lineWidth 
	endif

	put	A ! x size
	put	B ! y size

	_CornerPointNum = 0
	for i = 2 to vardim1(rightPoints) step 2
		if i = _rightCornerPoint then _CornerPointNum = _CornerPointNum + 1
		if i = _leftCornerPoint then _CornerPointNum = _CornerPointNum + 1
	next i

	put 5*(int(vardim1(rightPoints)/2)+1) + _CornerPointNum	! nFistPolyPoints

	put 	0, 0, edgeStatus,
			A, 0, edgeStatus,
			A, B, edgeStatus,
			0, B, edgeStatus,
			0, 0, -1

	for i = 2 to vardim1(rightPoints) step 2
		put	rightPoints[i-1][1],rightPoints[i-1][2], edgeStatus
			if i = _rightCornerPoint then
				put A - lineWidth, lineWidth, edgeStatus
			endif
		put rightPoints[i][1],rightPoints[i][2], edgeStatus,
			leftPoints[i][1],leftPoints[i][2], edgeStatus
			if i = _leftCornerPoint then
				put lineWidth, B-lineWidth, edgeStatus
			endif
		put leftPoints[i-1][1],leftPoints[i-1][2], edgeStatus,
			rightPoints[i-1][1],rightPoints[i-1][2], -1
	next i

!	for i = 1 to vardim1(rightPoints)
!!		line2 rightPoints[i][1],rightPoints[i][2],leftPoints[i][1],leftPoints[i][2]
!		circle2 rightPoints[i][1],rightPoints[i][2], 0.01
!		text2 rightPoints[i][1],rightPoints[i][2], i
!	next i
return


"master_end":
