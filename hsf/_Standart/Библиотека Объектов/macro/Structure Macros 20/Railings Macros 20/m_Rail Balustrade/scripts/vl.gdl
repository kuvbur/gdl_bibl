
! GENERAL PARAMETERS
values "gs_detlevel_3D_m" 2,1,0		! Detailed, Simple, Off

! GENERAL RAIL GEOMETRY PARAMETERS
values "ptyp_m" 1,2,3				! Straight, Curve Length and Radius, Angle and Radius


IF ptyp_m<>1 OR ABS(ani)<EPS  THEN
	VALUES "rom_m" 1
	VALUES "rmm_m" 1
ELSE
	VALUES "rom_m"  1,2
	IF rom_m=2 then
		VALUES "rmm_m" 2
	ELSE
		VALUES "rmm_m" 1,2
	ENDIF
ENDIF


VALUES "a" lra
VALUES "zzyzx" ds+hr

IF ptyp_m<>1 then
	VALUES "b" fth
	lock "a","b","zzyzx"
ELSE
	IF GLOB_MODPAR_NAME = "B" THEN PARAMETERS fth=B
	IF GLOB_MODPAR_NAME = "fth" THEN PARAMETERS B=fth
	lock "a","zzyzx"
ENDIF

IF ptyp_m<>1 OR rom_m<>1 THEN
	LOCK "gs_AngleL"
	LOCK "gs_AngleR"
ENDIF

if ptyp_m=1 then	!ptyp=Straight
	hideparameter "ab"
	hideparameter "rb"
	hideparameter "res"
endif

if ptyp_m=2 then	!ptyp=Curve Length and Radius
	if abs(rb)>EPS then
		parameters ab=(lra*180)/(rb*pi)
		lock "ab"
	endif
endif

if ptyp_m=3 then	!ptyp=Angle and Radius
	parameters lra=(rb*pi*ab)/180
	lock "lra"
endif

if gs_cont_pen=0 then parameters gs_cont_pen=2
if gs_fill_pen=0 then parameters gs_fill_pen=91

VALUES "lra" range(2*fsw,)
VALUES "lrah" range(2*fsw,)
VALUES "hr" range(ftw+fbw,)
VALUES "B" range(0,)
VALUES "ani" range(-90, 0), range (0, 90)
VALUES "fth" range(0,)
VALUES "fsw" range(0,lra/2-0.01]
VALUES "fswPerp" range(0,(lra/2-0.01)/cos(ani)]
VALUES "ftw" range(0,hr-fbw-0.01]
VALUES "ftwPerp" range(0,(hr-fbw-0.01)/cos(ani)]
VALUES "fbw" range(0,hr-ftw-0.01]
VALUES "fbwPerp" range(0,(hr-ftw-0.01)/cos(ani)]
VALUES "bw" range(0,)
VALUES "bth" range(0,)
VALUES "abdist" range[0,)
!VALUES "gs_AngleL" 	range[1,179]
!VALUES "gs_AngleR" 	range[1,179]
VALUES "gs_AngleL" 	range(0,180)
VALUES "gs_AngleR" 	range(0,180)
VALUES "res" range[3,)
VALUES "rescs" RANGE[3,)

if gs_frameStyle_m = 1 and gs_balusterStyle_m = 1 then
	lock			"rescs"
	hideparameter	"rescs"
endif

IF ABS(ani)<EPS THEN
	VALUES "ab" RANGE ((2*fsw*180)/(rb*pi),360]
	LOCK "rom_m","rmm_m"
ELSE
	VALUES "ab" RANGE ((2*fsw*180)/(rb*pi),)
ENDIF

! Distance from Slab/Stair
if GLOB_MODPAR_NAME = "dsPerp" then
	ds = dsPerp * cos(ani)
	parameters ds = ds
else
	dsPerp = ds / cos(ani)
	parameters dsPerp = dsPerp
endif

! Height of Railing
if GLOB_MODPAR_NAME = "hrPerp" then
	hr = hrPerp * cos(ani)
	parameters hr = hr
else
	hrPerp = hr / cos(ani)
	parameters hrPerp = hrPerp
endif

! Frame Width Bottom
if GLOB_MODPAR_NAME = "fbwPerp" then
	fbw = fbwPerp * cos(ani)
	parameters fbw = fbw
else
	fbwPerp = fbw / cos(ani)
	parameters fbwPerp = fbwPerp
endif

! Frame Width Top
if GLOB_MODPAR_NAME = "ftwPerp" then
	ftw = ftwPerp * cos(ani)
	parameters ftw = ftw
else
	ftwPerp = ftw / cos(ani)
	parameters ftwPerp = ftwPerp
endif

! Frame Width Side
if GLOB_MODPAR_NAME = "fswPerp" then
	fsw = fswPerp * cos(ani)
	parameters fsw = fsw
else
	fswPerp = fsw / cos(ani)
	parameters fswPerp = fswPerp
endif
