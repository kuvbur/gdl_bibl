
! -----------
! For testing
! -----------

if 0 then
	pen 2
	!fill 25
	poly2   4, 1+2+4,
			ac_whole_poly[1][1], ac_whole_poly[1][2],
			ac_whole_poly[1][3], ac_whole_poly[1][4],
			ac_whole_poly[1][5], ac_whole_poly[1][6],
			ac_whole_poly[1][7], ac_whole_poly[1][8]

			hotspot2 ac_whole_poly[1][1], ac_whole_poly[1][2], 1
			hotspot2 ac_whole_poly[1][3], ac_whole_poly[1][4], 2
			hotspot2 ac_whole_poly[1][5], ac_whole_poly[1][6], 3
			hotspot2 ac_whole_poly[1][7], ac_whole_poly[1][8], 4

	pen 8
	fill 64
	poly2   4, 1+2+4,
			whole_loc_poly[1][1], whole_loc_poly[1][2],
			whole_loc_poly[1][3], whole_loc_poly[1][4],
			whole_loc_poly[1][5], whole_loc_poly[1][6],
			whole_loc_poly[1][7], whole_loc_poly[1][8]

			hotspot2 whole_loc_poly[1][1], whole_loc_poly[1][2], 1
			hotspot2 whole_loc_poly[1][3], whole_loc_poly[1][4], 2
			hotspot2 whole_loc_poly[1][5], whole_loc_poly[1][6], 3
			hotspot2 whole_loc_poly[1][7], whole_loc_poly[1][8], 4
endif

! -------------
! Making the 2D
! -------------

pen gs_cont_pen
for i=1 to vardim1(ac_coords)
	hotspot2 ac_coords[i][2],ac_coords[i][3]

	mask=1
	if ac_coords[i][1]>1 1/2" then mask=-1

	put ac_coords[i][2], ac_coords[i][3], mask
next i
if gs_detlevel_2D=`Простой` then
	pen gs_cont_pen
	fill gs_fill_type
	poly2_b{2} vardim1(ac_coords), 1+2+4+8+64, gs_fill_pen, gs_back_pen, 0, 0, 0,
			get(3*vardim1(ac_coords))
else
	gosub 100

	pen gs_cont_pen
	fill rooftype
	poly2_b{2} vardim1(ac_coords), 1+2+4+8+64, gs_fill_pen, gs_back_pen, 0, 0, 0,
			get(3*vardim1(ac_coords))
endif

end

100:
gamma=0
file_dependence "RA_Rounded"
DEFINE SYMBOL_FILL	`Скругленная Черепица`  129, 129,  66,  60,  24,  24,  36, 195,
	0.3,     0,     0, 0.300139,      gamma,
	tile_width/0.15, tile_space*cos(ac_pitch)/0.15,
	"RA_Rounded"

file_dependence "RA_Normal"
DEFINE SYMBOL_FILL	`Обычная Черепица`    8,  28,  42,  73, 255,  74,  44,  24,
	0.3,     0,     0, 0.300139,      gamma,
	tile_width/0.15, tile_space*cos(ac_pitch)/0.15,
	"RA_Normal"

file_dependence "RA_Italian"
DEFINE SYMBOL_FILL	`Итальянская Черепица`   72,  72,  72, 204, 132, 132, 135, 252,
			0.29,     0,     0, 0.222,      gamma,
			1,     1,
			"RA_Italian"

define filla `Стоячий Фальц`  81, 162,  69, 138,  21,  42,  84, 168,
			seam_space, 1, gamma, 4,
			1, 0, 90, 1/20, 0, 0,
			1, 0, 90, 0, 0, 0,
			1, 0, 90, -1/20, 0, 0,
			1/(seam_rib+1), 0, 90, 1/(seam_rib+1), 1, 0

define filla `Волнистый Лист`	 81, 162,  69, 138,  21,  42,  84, 168,
			wawe_l, 1, gamma, 1,
			1, 0, 90, 0, 0, 0

define filla `Профилированный Лист`	 81, 162,  69, 138,  21,  42,  84, 168,
			wawe_l, 1, gamma, 4,
			1, 0, 90, 0, 0, 0,
			1, 0, 90, 1/3, 0, 0,
			1, 0, 90, 1/2, 0, 0,
			1, 0, 90, 5/6, 0, 0
return
