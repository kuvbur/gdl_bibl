

	! ======================================================================
	! Lamp Bulb Surface
	! ======================================================================
	
	DIM	tmp_C4D_ChCol_Color[3]
		tmp_C4D_ChCol_Color[1] = 0.7843137254902
		tmp_C4D_ChCol_Color[2] = 0.7843137254902
		tmp_C4D_ChCol_Color[3] = 0.8039215686275
	DIM	tmp_C4D_ShNoise_Color1_1[3]
		tmp_C4D_ShNoise_Color1_1[1] = 0
		tmp_C4D_ShNoise_Color1_1[2] = 0
		tmp_C4D_ShNoise_Color1_1[3] = 0
	DIM	tmp_C4D_ShNoise_Color2_1[3]
		tmp_C4D_ShNoise_Color2_1[1] = 1
		tmp_C4D_ShNoise_Color2_1[2] = 1
		tmp_C4D_ShNoise_Color2_1[3] = 1
	DIM	tmp_C4D_ShNoise_RelativeScale_1[3]
		tmp_C4D_ShNoise_RelativeScale_1[1] = 1
		tmp_C4D_ShNoise_RelativeScale_1[2] = 1
		tmp_C4D_ShNoise_RelativeScale_1[3] = 1
	DIM	tmp_C4D_ChLum_Color[3]
		tmp_C4D_ChLum_Color[1] = 1
		tmp_C4D_ChLum_Color[2] = 1
		tmp_C4D_ChLum_Color[3] = 1
	DIM	tmp_C4D_ChTra_Color[3]
		tmp_C4D_ChTra_Color[1] = 0.9411764705882
		tmp_C4D_ChTra_Color[2] = 0.9411764705882
		tmp_C4D_ChTra_Color[3] = 0.9411764705882
	DIM	tmp_C4D_ChTra_AbsorptionColor[3]
		tmp_C4D_ChTra_AbsorptionColor[1] = 1
		tmp_C4D_ChTra_AbsorptionColor[2] = 1
		tmp_C4D_ChTra_AbsorptionColor[3] = 1
	DIM	tmp_C4D_ChRef_Color[3]
		tmp_C4D_ChRef_Color[1] = 1
		tmp_C4D_ChRef_Color[2] = 1
		tmp_C4D_ChRef_Color[3] = 1
	DIM	tmp_C4D_ChEnv_Color[3]
		tmp_C4D_ChEnv_Color[1] = 1
		tmp_C4D_ChEnv_Color[2] = 1
		tmp_C4D_ChEnv_Color[3] = 1
	DIM	tmp_C4D_ChFog_Color[3]
		tmp_C4D_ChFog_Color[1] = 1
		tmp_C4D_ChFog_Color[2] = 1
		tmp_C4D_ChFog_Color[3] = 1
	DIM	tmp_C4D_ChAlp_Color[3]
		tmp_C4D_ChAlp_Color[1] = 1
		tmp_C4D_ChAlp_Color[2] = 1
		tmp_C4D_ChAlp_Color[3] = 1
	DIM	tmp_C4D_ChAlp_Delta[3]
		tmp_C4D_ChAlp_Delta[1] = 0.1
		tmp_C4D_ChAlp_Delta[2] = 0.1
		tmp_C4D_ChAlp_Delta[3] = 0.1
	DIM	tmp_C4D_ChSpe_Color[3]
		tmp_C4D_ChSpe_Color[1] = 1
		tmp_C4D_ChSpe_Color[2] = 1
		tmp_C4D_ChSpe_Color[3] = 1
	DIM	tmp_C4D_ChGlo_Color[3]
		tmp_C4D_ChGlo_Color[1] = 1
		tmp_C4D_ChGlo_Color[2] = 1
		tmp_C4D_ChGlo_Color[3] = 1
	DIM	tmp_C4D_GKRGB_Color_3[3]
		tmp_C4D_GKRGB_Color_3[1] = 0
		tmp_C4D_GKRGB_Color_3[2] = 0
		tmp_C4D_GKRGB_Color_3[3] = 0
	DIM	tmp_C4D_GKRGB_Color_4[3]
		tmp_C4D_GKRGB_Color_4[1] = 1
		tmp_C4D_GKRGB_Color_4[2] = 1
		tmp_C4D_GKRGB_Color_4[3] = 1
	
	define material	"builtInMatLampBulb" 0,
		0.941176, 0.968627, 0.952941,
		0.8, 0.1, 1, 0.88,
		79.52, 0.04,
		1, 1, 1,
		0, 0, 0, 0,
	ADDITIONAL_DATA		C4D_VER_MAIN= 1,
	C4D_VER_SUB						= 0,
	C4D_ChCol_State					= 1,
	C4D_ChCol_Color					= tmp_C4D_ChCol_Color,
	C4D_ChCol_Brightness			= 1,
	C4D_ChCol_MixMode				= "Normal",
	C4D_ChCol_MixStrength			= 1,
	C4D_ChDif_State					= 0,
	C4D_ChDif_Brightness			= 1,
	C4D_ChDif_Luminance				= 1,
	C4D_ChDif_Specular				= 1,
	C4D_ChDif_Reflection			= 1,
	C4D_ChDif_Texture				= "1",
	C4D_ShNoise_BlendMode_1			= "Normal",
	C4D_ShNoise_BlendStre_1			= 1,
	C4D_ShNoise_BlurOffset_1		= 0,
	C4D_ShNoise_BlurScale_1			= 0,
	C4D_ShNoise_Color1_1			= tmp_C4D_ShNoise_Color1_1,
	C4D_ShNoise_Color2_1			= tmp_C4D_ShNoise_Color2_1,
	C4D_ShNoise_Seed_1				= 665,
	C4D_ShNoise_Noise_1				= "Turbulence",
	C4D_ShNoise_Octaves_1			= 5,
	C4D_ShNoise_Space_1				= "Texture",
	C4D_ShNoise_GlobalScale_1		= 0.01,
	C4D_ShNoise_RelativeScale_1		= tmp_C4D_ShNoise_RelativeScale_1,
	C4D_ShNoise_Absolute_1			= 0,
	C4D_ShNoise_Cycles_1			= 0,
	C4D_ShNoise_LowClip_1			= 0,
	C4D_ShNoise_HighClip_1			= 1,
	C4D_ShNoise_Brightness_1		= 0,
	C4D_ShNoise_Contrast_1			= 0,
	C4D_ChDif_MixMode				= "Normal",
	C4D_ChDif_MixStrength			= 0.1,
	C4D_ChLum_State					= 0,
	C4D_ChLum_Color					= tmp_C4D_ChLum_Color,
	C4D_ChLum_Brightness			= 1,
	C4D_ChLum_MixMode				= "Normal",
	C4D_ChLum_MixStrength			= 1,
	C4D_ChTra_State					= 1,
	C4D_ChTra_Color					= tmp_C4D_ChTra_Color,
	C4D_ChTra_Brightness			= 0.95,
	C4D_ChTra_Refraction			= 1,
	C4D_ChTra_InternalReflections	= 1,
	C4D_ChTra_ExitReflection		= 0,
	C4D_ChTra_FresnelReflectivity	= 0.5,
	C4D_ChTra_Additive				= 0,
	C4D_ChTra_MixMode				= "Normal",
	C4D_ChTra_MixStrength			= 1,
	C4D_ChTra_AbsorptionColor		= tmp_C4D_ChTra_AbsorptionColor,
	C4D_ChTra_AbsorptionDistance	= 100,
	C4D_ChTra_Blurriness			= 0,
	C4D_ChTra_MinSamples			= 10,
	C4D_ChTra_MaxSamples			= 80,
	C4D_ChTra_Accuracy				= 0.5,
	C4D_ChRef_State					= 1,
	C4D_ChRef_Color					= tmp_C4D_ChRef_Color,
	C4D_ChRef_Brightness			= 0.1,
	C4D_ChRef_Additive				= 1,
	C4D_ChRef_MixMode				= "Normal",
	C4D_ChRef_MixStrength			= 1,
	C4D_ChRef_Blurriness			= 0,
	C4D_ChRef_MinSamples			= 5,
	C4D_ChRef_MaxSamples			= 128,
	C4D_ChRef_Accuracy				= 0.5,
	C4D_ChEnv_State					= 0,
	C4D_ChEnv_Color					= tmp_C4D_ChEnv_Color,
	C4D_ChEnv_Brightness			= 1,
	C4D_ChEnv_MixMode				= "Normal",
	C4D_ChEnv_MixStrength			= 1,
	C4D_ChEnv_TilesX				= 1,
	C4D_ChEnv_TilesY				= 1,
	C4D_ChEnv_Exclusive				= 0,
	C4D_ChFog_State					= 0,
	C4D_ChFog_Color					= tmp_C4D_ChFog_Color,
	C4D_ChFog_Brightness			= 1,
	C4D_ChFog_Distance				= 10,
	C4D_ChBum_State					= 0,
	C4D_ChBum_Strength				= 1,
	C4D_ChBum_MipFalloff			= 1,
	C4D_ChNor_State					= 0,
	C4D_ChNor_Strength				= 1,
	C4D_ChNor_Method				= "Tangent",
	C4D_ChNor_FlipX					= 0,
	C4D_ChNor_FlipY					= 0,
	C4D_ChNor_FlipZ					= 0,
	C4D_ChNor_SwapYZ				= 0,
	C4D_ChAlp_State					= 0,
	C4D_ChAlp_Color					= tmp_C4D_ChAlp_Color,
	C4D_ChAlp_Delta					= tmp_C4D_ChAlp_Delta,
	C4D_ChAlp_Invert				= 0,
	C4D_ChAlp_Soft					= 1,
	C4D_ChAlp_ImageAlpha			= 0,
	C4D_ChAlp_PreMultiplied			= 0,
	C4D_ChSpe_State					= 1,
	C4D_ChSpe_Color					= tmp_C4D_ChSpe_Color,
	C4D_ChSpe_Brightness			= 1,
	C4D_ChSpe_MixMode				= "Normal",
	C4D_ChSpe_MixStrength			= 1,
	C4D_ChSpe_Mode					= "Plastic",
	C4D_ChSpe_Width					= 0.45,
	C4D_ChSpe_Height				= 0.5,
	C4D_ChSpe_Falloff				= -0.05,
	C4D_ChSpe_InnerWidth			= 0,
	C4D_ChGlo_State					= 0,
	C4D_ChGlo_Color					= tmp_C4D_ChGlo_Color,
	C4D_ChGlo_Brightness			= 1,
	C4D_ChGlo_InnerStrength			= 1,
	C4D_ChGlo_OuterStrength			= 5,
	C4D_ChGlo_Radius				= 10,
	C4D_ChGlo_Random				= 0,
	C4D_ChGlo_Frequency				= 1,
	C4D_ChGlo_UseMatColor			= 1,
	C4D_ChDis_State					= 0,
	C4D_ChDis_Strength				= 1,
	C4D_ChDis_Height				= 0.5,
	C4D_ChDis_Type					= "IntensityCentered",
	C4D_ChDis_SubDivision			= 0,
	C4D_ChDis_Level					= 4,
	C4D_ChDis_RoundGeometry			= 0,
	C4D_ChDis_RoundContour			= 1,
	C4D_ChDis_MapRounded			= 1,
	C4D_ChDis_MapResult				= 0,
	C4D_ChDis_KeepEdges				= 0,
	C4D_ChDis_BestDistribution		= 1,
	C4D_ChGra_State					= 0,
	C4D_ChGra_Color					= "2",
	C4D_GradientRGB_Interpol_2		= "SmoothKnot",
	C4D_GradientRGB_Knots_2			= "3,4",
	C4D_GKRGB_Color_3				= tmp_C4D_GKRGB_Color_3,
	C4D_GKRGB_Intensity_3			= 1,
	C4D_GKRGB_Position_3			= 0,
	C4D_GKRGB_Bias_3				= 0.5,
	C4D_GKRGB_Color_4				= tmp_C4D_GKRGB_Color_4,
	C4D_GKRGB_Intensity_4			= 1,
	C4D_GKRGB_Position_4			= 1,
	C4D_GKRGB_Bias_4				= 0.5,
	C4D_ChGra_MixStrength			= 0.5,
	C4D_ChGra_Density				= 1,
	C4D_ChGra_Length				= 0.1,
	C4D_ChGra_Width					= 0.005,
	C4D_ChGra_Crinkle				= 0.1,
	C4D_ChGra_Bend					= 0.6,
	C4D_ChGra_Wetness				= 0.05,
	C4D_ChIll_GenerateGI			= 1,
	C4D_ChIll_GenGIStrength			= 1,
	C4D_ChIll_GenGISaturat			= 1,
	C4D_ChIll_ReceiveGI				= 1,
	C4D_ChIll_RecGIStrength			= 1,
	C4D_ChIll_RecGISaturat			= 1,
	C4D_ChIll_GIPortal				= 0,
	C4D_ChIll_GILight				= 0,
	C4D_ChIll_GenerateCaustics		= 1,
	C4D_ChIll_GenCausticsStrength	= 1,
	C4D_ChIll_ReceiveCaustics		= 1,
	C4D_ChIll_RecCausticsStrength	= 1,
	C4D_ChIll_Radius				= 0.1,
	C4D_ChIll_CausticsSamples		= 100,
	C4D_ChIll_Model					= "Blinn",
	C4D_ChIll_DiffuseFalloff		= 0,
	C4D_ChIll_DiffuseLevel			= 1,
	C4D_ChIll_Roughness				= 0.5
	
	
if gs_detlevel_3D_m=0 then end
If gs_detlevel_3D_m=1 then gs_resol = 8

if GLOB_CONTEXT > 20 & GLOB_CONTEXT < 40 then gs_resol = 12

if not(gs_shadow) then shadow off

rotx rotAngleX

if (iShadeType = 12) & bMigrationPos then add2 A2, B2

! ==============================================================================
!	Hotspot Editing
! ==============================================================================

unID=1

hotspot	0,0,0,unID : unID = unID + 1

if iShadeType = 11 then
	unID=unID+3

	for i=1 to 2
		hotspot	0,0,0,unID,A2,1+128 : unID = unID + 1
		hotspot	-1,0,0,unID,A2,3 : unID = unID + 1
		hotspot	A2,0,0,unID,A2,2 : unID = unID + 1
		rotz 180
	next i
	del 2
else
	if iShadeType = 1 then
		hotspot	0,	0,	-zzyzx,	unID	: unID = unID + 3
	else
		if iShadeType = 12 then
			hotspot	0,	0,	-mountHeight,	unID,	lampHeight,	1+128	: unID = unID + 1
			hotspot	0,	0,	1,				unID,	lampHeight,	3		: unID = unID + 1
			hotspot	0,	0,	-zzyzx,			unID,	lampHeight,	2		: unID = unID + 1
		else 
			hotspot	0,	0,	0,		unID,	zzyzx,	1+128	: unID = unID + 1
			hotspot	0,	0,	1,		unID,	zzyzx,	3		: unID = unID + 1
			hotspot	0,	0,	-zzyzx,	unID,	zzyzx,	2		: unID = unID + 1
		endif
	endif

	if iShadeType = 12 then
		hotspot A2,		0,		-ZZYZX, unID, B2, 1+128,	lampDepth : unID = unID + 1
		hotspot A2,		B2,		-ZZYZX, unID, B2, 2,		lampDepth : unID = unID + 1
		hotspot A2,		-1,		-ZZYZX, unID, B2, 3,		lampDepth : unID = unID + 1

		hotspot 0,		B2,		-ZZYZX, unID, A2, 1+128,	lampWidth : unID = unID + 1
		hotspot A2,		B2,		-ZZYZX, unID, A2, 2,		lampWidth : unID = unID + 1
		hotspot -1,		B2,		-ZZYZX, unID, A2, 3,		lampWidth : unID = unID + 1

		hotspot -A2,	0,		-ZZYZX, unID, B2, 1+128,	lampDepth : unID = unID + 1
		hotspot -A2,	B2,		-ZZYZX, unID, B2, 2,		lampDepth : unID = unID + 1
		hotspot -A2,	-1,		-ZZYZX, unID, B2, 3,		lampDepth : unID = unID + 1

		hotspot 0,		B2,		-ZZYZX, unID, A2, 1+128,	lampWidth : unID = unID + 1
		hotspot -A2,	B2,		-ZZYZX, unID, A2, 2,		lampWidth : unID = unID + 1
		hotspot 1,		B2,		-ZZYZX, unID, A2, 3,		lampWidth : unID = unID + 1

		hotspot A2,		0,		-ZZYZX, unID, B2, 1+128,	lampDepth : unID = unID + 1
		hotspot A2,		-B2,	-ZZYZX, unID, B2, 2,		lampDepth : unID = unID + 1
		hotspot A2,		1,		-ZZYZX, unID, B2, 3,		lampDepth : unID = unID + 1

		hotspot 0,		-B2,	-ZZYZX, unID, A2, 1+128,	lampWidth : unID = unID + 1
		hotspot A2,		-B2,	-ZZYZX, unID, A2, 2,		lampWidth : unID = unID + 1
		hotspot -1,		-B2,	-ZZYZX, unID, A2, 3,		lampWidth : unID = unID + 1

		hotspot -A2,	0,		-ZZYZX, unID, B2, 1+128,	lampDepth : unID = unID + 1
		hotspot -A2,	-B2,	-ZZYZX, unID, B2, 2,		lampDepth : unID = unID + 1
		hotspot -A2,	1,		-ZZYZX, unID, B2, 3,		lampDepth : unID = unID + 1

		hotspot 0,		-B2,	-ZZYZX, unID, A2, 1+128,	lampWidth : unID = unID + 1
		hotspot -A2,	-B2,	-ZZYZX, unID, A2, 2,		lampWidth : unID = unID + 1
		hotspot 1,		-B2,	-ZZYZX, unID, A2, 3,		lampWidth : unID = unID + 1

		hotspot mountW2,	0,			0, unID, mountD2, 1+128,	mountDepth : unID = unID + 1
		hotspot mountW2,	mountD2,	0, unID, mountD2, 2,		mountDepth : unID = unID + 1
		hotspot mountW2,	-1,			0, unID, mountD2, 3,		mountDepth : unID = unID + 1

		hotspot 0,			mountD2,	0, unID, mountW2, 1+128,	mountWidth : unID = unID + 1
		hotspot mountW2,	mountD2,	0, unID, mountW2, 2,		mountWidth : unID = unID + 1
		hotspot -1,			mountD2,	0, unID, mountW2, 3,		mountWidth : unID = unID + 1

		hotspot -mountW2,	0,			0, unID, mountD2, 1+128,	mountDepth : unID = unID + 1
		hotspot -mountW2,	mountD2,	0, unID, mountD2, 2,		mountDepth : unID = unID + 1
		hotspot -mountW2,	-1,			0, unID, mountD2, 3,		mountDepth : unID = unID + 1

		hotspot 0,			mountD2,	0, unID, mountW2, 1+128,	mountWidth : unID = unID + 1
		hotspot -mountW2,	mountD2,	0, unID, mountW2, 2,		mountWidth : unID = unID + 1
		hotspot 1,			mountD2,	0, unID, mountW2, 3,		mountWidth : unID = unID + 1

		hotspot mountW2,	0,			0, unID, mountD2, 1+128,	mountDepth : unID = unID + 1
		hotspot mountW2,	-mountD2,	0, unID, mountD2, 2,		mountDepth : unID = unID + 1
		hotspot mountW2,	1,			0, unID, mountD2, 3,		mountDepth : unID = unID + 1

		hotspot 0,			-mountD2,	0, unID, mountW2, 1+128,	mountWidth : unID = unID + 1
		hotspot mountW2,	-mountD2,	0, unID, mountW2, 2,		mountWidth : unID = unID + 1
		hotspot -1,			-mountD2,	0, unID, mountW2, 3,		mountWidth : unID = unID + 1

		hotspot -mountW2,	0,			0, unID, mountD2, 1+128,	mountDepth : unID = unID + 1
		hotspot -mountW2,	-mountD2,	0, unID, mountD2, 2,		mountDepth : unID = unID + 1
		hotspot -mountW2,	1,			0, unID, mountD2, 3,		mountDepth : unID = unID + 1

		hotspot 0,			-mountD2,	0, unID, mountW2, 1+128,	mountWidth : unID = unID + 1
		hotspot -mountW2,	-mountD2,	0, unID, mountW2, 2,		mountWidth : unID = unID + 1
		hotspot 1,			-mountD2,	0, unID, mountW2, 3,		mountWidth : unID = unID + 1

		hotspot	0,			0,			0,				unID,	mountHeight,	1+128	: unID = unID + 1
		hotspot	0,			0,			-mountHeight,	unID,	mountHeight,	2		: unID = unID + 1
		hotspot	0,			0,			1,				unID,	mountHeight,	3		: unID = unID + 1
	else
		for i=1 to 4
			addz -ZZYZX * (iShadeType = 7)

			hotspot	0,	0,	0,	unID,	A2,	1+128	: unID = unID + 1
			hotspot	-1,	0,	0,	unID,	A2,	3		: unID = unID + 1
			hotspot	A2,	0,	0,	unID,	A2,	2		: unID = unID + 1

			del 1
			rotz 90
		next i
		del 4
	endif
endif


! ==============================================================================
!	Shadow Qualtity Groups
! ==============================================================================

if iShadeType = 3 | iShadeType = 12 then
	_iShadowQualityGroupType	= 3
else
	_iShadowQualityGroupType	= 2
endif


! ==============================================================================
!	Shade 3D
! ==============================================================================

if iShadeType = 1 then
	gosub "SHADE_1"
endif
if iShadeType = 2 then
	gosub "SHADE_2"
endif
if iShadeType = 3 then
	gosub "SHADE_3"
endif
if iShadeType = 4 then
	gosub "SHADE_4"
endif
if iShadeType = 5 then
	gosub "SHADE_5"
endif
if iShadeType = 6 then
	gosub "SHADE_6"
endif
if iShadeType = 7 then
	gosub "SHADE_7"
endif
if iShadeType = 8 then
	gosub "SHADE_8"
endif
if iShadeType = 9 then
	gosub "SHADE_9"
endif
if iShadeType = 10 then
	gosub "SHADE_10"
endif
if iShadeType = 11 then
	gosub "SHADE_11"
endif
if iShadeType = 12 then
	gosub "SHADE_12"
endif


if iShadeType = 11 then
	for i=1 to 2
		hotspot 0,	0,	0,	unID,	B2,	1+128 	: unID = unID + 1
		hotspot 0,	-1,	0,	unID,	B2,	3 		: unID = unID + 1
		hotspot 0,	B2,	0,	unID,	B2,	2 		: unID = unID + 1
		rotz 180
	next i
	del 2
endif

if (iShadeType = 12) & bMigrationPos then del 1

! ==============================================================================


end

! ==============================================================================
!	Shade Type 1
! ==============================================================================

"SHADE_1":

	pen gs_cont_pen
	material matFrame
	resol gs_resol

	mulz -1

	cylind 0.04, 0.085

	material matLamp

	addz 0.0125 + A2
	sphere A2
	del 2

	if bLight then 
		addz -0.07
		gosub "C4D_lightOMNI"
		del 1	
	endif

return


! ==============================================================================
!	Shade Type 2
! ==============================================================================

"SHADE_2":

	pen gs_cont_pen
	resol gs_resol
	material matFrame

	hb=zzyzx/3      !Base height
	bd=(hb-1/4")/2

	rotz -90
	roty -90
	revolve 10,360,1+2,
		 0,a/2-1/2",0,
		-3/16",a/2-1/2",0,
		-1/4",a/2-9/16",0,
		-1/4",a/2-11/16",0,
		-5/16",a/2-3/4",0,
		-1/4"-bd+1/16",a/2-3/4",0,
		-1/4"-bd,a/2-13/16",0,
		-1/4"-bd,a/2-15/16",0,
		-1/4"-bd-1/16",a/2-1",0,
		-hb,a/2-1",0
	del 2

	material matLamp

	addz -hb
	rotz -90
	roty -90
	mulx (zzyzx-hb)/0.08

	revolve 15, 360, 2,
		-0.0000,  a/2-0.0290, 1,
		-0.0004,  a/2-0.0290+0.0097, 1,
		-0.0036,  a/2-0.0290+0.0188, 1,
		-0.0100,  a/2-0.0290+0.0260, 1,
		-0.0162,  a/2-0.0290+0.0288, 1,
		-0.0190,  a/2, 1,
		-0.0283,  a/2-0.0290+0.0262, 1,
		-0.0368,  a/2-0.0290+0.0215, 1,
		-0.0444,  a/2-0.0290+0.0155, 1,
		-0.0509,  a/2-0.0290+0.0083, 1,
		-0.0563,  a/2-0.0290, 1,
		-0.0606,  a/2-0.0290-0.0084, 1,
		-0.0640,  a/2-0.0290-0.0175, 1,
		-0.0665,  a/2-0.0290-0.0267, 1,
		-0.0800,  0.001, 1
	del 4

	if bLight then 
		addz -hb - 0.03
		gosub "C4D_lightOMNI"
		del 1	
	endif

return


! ==============================================================================
!	Shade Type 3
! ==============================================================================

"SHADE_3":

	pen gs_cont_pen
	resol gs_resol
	material matFrame

	hb=zzyzx/2      !Base height
	shadeheight = zzyzx - hb

	if gs_detlevel_3D_m=2 then
		for i = 1 to 4
			add a/2 - 0.0165, 0, -hb-0.005
			cylind 0.005, 0.005
			del 1
			rotz 90
		next i
		del 4
	endif

	roty -90
	revolve 4,360,1+2,
		 0,	a/2,0,
		-hb/2,	a/2,	0,
		-hb/2,	a/2-0.01,	0,
		-hb,	a/2-0.01,	0
	del 1

	material matLamp

	addz -hb
	roty -90

	mul shadeheight/0.05833333333333*0.66/0.789, a/0.33, a/0.33
	addx -0.01138026878427
	revolve 16, 360, 0,
			 0.01138026878427, 	0.1373099392565,    1,
			 0, 				0.11458292629,    	900,
			 0, 				26.59884798931,   	4001,
			 0,         		0.14,      			1,
			 0, 				0.11458292629,    	900,
			 0, 				26.59884798931,   	4001,
			-0.01138026878427, 	0.1373099392565,    1,
			 0.006560974361986, 0.1011676379033,    900,
			 0, 				19.31151154783,   	4001,
			-0.0223232002213, 	0.1293431345516,    1,
			 0.04432862837405, 	0.06670532744836,   900,
			 0, 				22.54929555119,   	4001,
			-0.04124789556922, 	0.09899494936612,   1,
			 0.2370033247881, 	0,    				900,
			 0, 				19.58430938155,   	4001,
			-0.05833333333333, 	0,      			1
	del 2

	del 2

	if bLight then 
		addz -hb - 0.02
		gosub "C4D_lightOMNI"
		del 1	
	endif

return



! ==============================================================================
!	Shade Type 4
! ==============================================================================

"SHADE_4":

	innersize_factor = 0.95
	pen gs_cont_pen
	resol max(gs_resol/4, 3)
	material matFrame

	if gs_detlevel_3D_m = 2 then
		for i = 1 to 4
			add -a/0.28*0.1373099392565, 0.007/2, -0.01138026878427*zzyzx/0.05833333333333
			rotx 90
			mul 1.3, 1.3, 1
			prism_ 12, 0.007,
				0.004836692691626, -0.008752508429403,      15,
						   0,            0,      15,
				0.005623745785298,            0,      15,
				0.005623745785298,        0.005,      15,
				0,        0.005,      79,
				0, 0,    900,
						   0, 118.9253232818,   4000,
				-0.004376254214702, -0.002418346345813,      79,
				-0.001957907868889, -0.006794600560514,      79,
				0.002418346345813, -0.004376254214702,    900,
						   0,           90,   4000,
				0.004836692691626, -0.008752508429403,      15
			del 3
			rotz 90
		next i
		del 4
	endif

	material matLamp

	resol gs_resol

	roty -90
	mul zzyzx/0.05833333333333, a/0.28, a/0.28

	revolve 11, 360, 0,
		-0.01138026878427, innersize_factor*0.1373099392565,      1,
		-0.01138026878427, 0.1373099392565,      1,
		0.006560974361986, 0.1011676379033,    900,
				   0, 19.31151154783,   4001,
		-0.0223232002213, 0.1293431345516,      1,
		0.04432862837405, 0.06670532744836,    900,
				   0, 22.54929555119,   4001,
		-0.04124789556922, 0.09899494936612,      1,
		0.2370033247881, 0,    900,
				   0, 19.58430938155,   4001,
		-0.05833333333333, 0,      1

	mul innersize_factor, innersize_factor, innersize_factor
	revolve 10, 360, 0,
		-0.01138026878427, 0.1373099392565,      1,
		0.006560974361986, 0.1011676379033,    900,
				   0, 19.31151154783,   4001,
		-0.0223232002213, 0.1293431345516,      1,
		0.04432862837405, 0.06670532744836,    900,
				   0, 22.54929555119,   4001,
		-0.04124789556922, 0.09899494936612,      1,
		0.2370033247881, 0,    900,
				   0, 19.58430938155,   4001,
		-0.05833333333333, 0,      1
	del 1

	del 2

	if bLight then 
		addz -0.03
		gosub "C4D_lightOMNI"
		del 1	
	endif

return



! ==============================================================================
!	Shade Type 5
! ==============================================================================

"SHADE_5":

	shader_r = a*1.8
	shader_thk = 0.01
	diffh = shader_r - sqr(shader_r*shader_r - a/2*a/2)
	diffR = shader_r - shader_r*(cos(360/gs_resol/2))

	pen gs_cont_pen

	resol max(gs_resol/4, 3)
	material matFrame

	if gs_detlevel_3D_m = 2 then
		for i = 1 to 4
			add -a/2, 0.007/2, -zzyzx+diffh+shader_thk+diffR
			rotx 90
			mul 1.3, 1.3, 1
			prism_ 13, 0.007,
				0.004836692691626, -0.008752508429403,      15,
					0, -0.007, 15,
						   0,            0,      15,
				0.005623745785298,            0,      15,
				0.005623745785298,        0.005,      15,
				0,        0.005,      79,
				0, 0,    900,
						   0, 118.9253232818,   4000,
				-0.004376254214702, -0.002418346345813,      79,
				-0.001957907868889, -0.006794600560514,      79,
				0.002418346345813, -0.004376254214702,    900,
						   0,           90,   4000,
				0.004836692691626, -0.008752508429403,      15
			del 3
			rotz 90
		next i
		del 4
	endif

	material matLamp

	resol gs_resol

	addz -zzyzx+shader_r
	group "brick"
		add -a/2, -a/2, -3*a
		brick a, a, 3*a
		del 1
	endgroup

	group "outside"
		sphere shader_r
	endgroup

	group "inside"
		sphere shader_r-shader_thk
	endgroup

	result_1 = subgroup ("outside", "inside")
	result_2 = isectgroup (result_1, "brick")

	placegroup result_2

	del 1

	_cornerHeight = shader_r - shader_thk - sqr((shader_r - shader_thk)^2 - (A^2 / 4))

	if bLight then 
		addz min(-0.005, -ZZYZX + _cornerHeight + 0.02)
		gosub "C4D_lightAREA"
		del 1	
	endif

return


! ==============================================================================
!	Shade Type 6
! ==============================================================================

"SHADE_6":

	toruswidth = (ZZYZX - 0.02) * 2

	pen gs_cont_pen
	resol gs_resol

	material matLamp

	roty 90

	revolve 6, 360, 0,
		0, 				 A/2, 				1,
		0.02, 			 A/2, 				1,
		toruswidth/2, 	-180, 				2000,
		0.02, 			 A/2 - toruswidth, 	1,
		0, 				 A/2 - toruswidth, 	1,
		0, 				 A/2, 				1

	del 1

	if bLight then 
		addz -ZZYZX/3
		for i = 1 to 4
			rotz (i-1) * 90
			addx A/2 - toruswidth * A / 0.6
			gosub "C4D_lightOMNI"
			del 2
		next i
		gosub "C4D_FakeFalloff"
		del 1	
	endif

return




! ==============================================================================
!	Shade Type 7
! ==============================================================================

"SHADE_7":

	shadethk = 0.003
	hb = 0.025
	rbase = 0.05
	shadeheight = zzyzx - hb

	pen gs_cont_pen
	resol max(gs_resol/2, 3)
	material matShadeOut

	roty -90
	revolve 4,360,1+2,
		 0,	rbase ,0,
		-hb/2,	rbase ,	0,
		-hb/2,	rbase -0.007,	0,
		-hb,	rbase -0.01,	0
	del 1


	addz -zzyzx
	mulz shadeheight/(a/2)
	roty -90

	resol gs_resol
	revolve 4, 360, 0,
		0,		a/2 - shadethk,     1,
		0,		a/2,     1,
		0,		0,     900,
		0,	 -90,      4001

	material matShadeIn

	revolve 3, 360, 0,
		0,		a/2 - shadethk,     1,
		0,		0,     900,
		0,	 -90,      4001


	del 3

	if bLight then
		addz -0.055
		gosub "C4D_lightOMNI"
		del 1	
	endif

return



! ==============================================================================
!	Shade Type 8
! ==============================================================================

"SHADE_8":

	shadethk = 0.003
	hb = 0.05
	rbase = a/2-shadethk
	shadeheight = zzyzx - hb

	pen gs_cont_pen

	if gs_detlevel_3D_m=2 then
		resol max(gs_resol/4, 3)
		material matFrame
		for i = 1 to 4
			add rbase, 0, -hb/2
			roty 90
			cylind 0.005, 0.005
			del 2
			rotz 90
		next i
		del 4
	endif

	resol gs_resol

	addz -hb
	cylind hb, rbase
	del 1

	material matLamp

	addz -zzyzx
	roty -90
	revolve 5, 360, 0,
		0,		a/2 - shadethk,     1,
		0,		a/2,     1,
		shadeheight ,	a/2,     1,
		shadeheight ,	a/2 - shadethk,     1,
		0,		a/2 - shadethk,     1
	del 2

	if bLight then 
		addz -ZZYZX + shadeheight/2
		gosub "C4D_lightOMNI"
		del 1	
	endif

return



! ==============================================================================
!	Shade Type 9
! ==============================================================================

"SHADE_9":

	basethk = 0.003
	hb = zzyzx

	pen gs_cont_pen
	resol gs_resol
	material matFrame

	addz -zzyzx
	prism_ 10, hb,
		-a/2, -a/2, 15,
		 a/2, -a/2, 15,
		 a/2,  a/2, 15,
		-a/2,  a/2, 15,
		-a/2, -a/2, -1,

		-a/2 + basethk, -a/2 + basethk, 15,
		 a/2 - basethk, -a/2 + basethk, 15,
		 a/2 - basethk,  a/2 - basethk, 15,
		-a/2 + basethk,  a/2 - basethk, 15,
		-a/2 + basethk, -a/2 + basethk, -1
	del 1

	if not(bLight) then
		material matGlass

		addz -zzyzx-0.003
		prism_ 5, 0.005,
			-a/2 + basethk, -a/2 + basethk, 15,
			 a/2 - basethk, -a/2 + basethk, 15,
			 a/2 - basethk,  a/2 - basethk, 15,
			-a/2 + basethk,  a/2 - basethk, 15,
			-a/2 + basethk, -a/2 + basethk, -1
		del 1
	else
		addz -ZZYZX
		gosub "C4D_lightAREA"
		del 1	
	endif

return


! ==============================================================================
!	Shade Type 10
! ==============================================================================

"SHADE_10":

	basethk = 0.01
	shadeheight = zzyzx - 0.02
	innersize_factor = 0.6

	pen gs_cont_pen

	if gs_detlevel_3D_m=2 then
		resol max(gs_resol/4, 3)
		material matFrame
		for i = 1 to 4
			add a/2*innersize_factor + 0.01, a/2*innersize_factor + 0.01, -1.1*zzyzx
			cylind 1.1*zzyzx, 0.005
			del 1
			rotz 90
		next i
		del 4
	endif


	resol gs_resol
	material matGlassOther

	addz -zzyzx
	for i = 1 to 2
		prism_ 5, basethk,
			-a/2, -a/2, 15,
			 a/2, -a/2, 15,
			 a/2,  a/2, 15,
			-a/2,  a/2, 15,
			-a/2, -a/2, -1
		addz shadeheight - basethk
	next i
	del 2
	del 1

	if not(bLight) then
		material matGlass

		addz -zzyzx	+ basethk
		prism_ 5, shadeheight - 2*basethk,
			-a/2*innersize_factor, -a/2*innersize_factor, 15,
			 a/2*innersize_factor, -a/2*innersize_factor, 15,
			 a/2*innersize_factor,  a/2*innersize_factor, 15,
			-a/2*innersize_factor,  a/2*innersize_factor, 15,
			-a/2*innersize_factor, -a/2*innersize_factor, -1
		del 1
	else
		addz -ZZYZX + shadeheight/2
		gosub "C4D_lightAREA"
		del 1	
	endif


return



! ==============================================================================
!	Shade Type 11
! ==============================================================================

"SHADE_11":

	pen gs_cont_pen
	material matGlassOther
	resol gs_resol

	addy b/2
	rotx 90

	mulx a/0.2
	for i = 1 to 2
		addy -0.02
		prism_ 11,b,
			0.1,-0.01,79,
			0.09,-0.01,79,
			0.09,-0.03,979,
			0.02,45,4079,
			0,0.02,979,
			0,-0.08,3072,
			0,-0.06,77,
			0.085,-0.025,3079,
			0.09,-0.03,979,
			0.02,-60,4079,
			0.1,-0.007,79
		del 1
		mulx -1
	next i
	del 2

	material matFrame
	rotx 90
	prism_ 9,0.001,
		-0.08,0,79,
		0.08,0,79,
		0.1,0.02,1079,
		0.1,b-0.02,79,
		0.08,b,1079,
		-0.08,b,79,
		-0.1,b-0.02,1079,
		-0.1,0.02,79,
		-0.08,0,1079
	del 1

	del 1


	rotx 90
	addz 0.001
	resol 6
	if gs_detlevel_3D_m = 2 then
		prism_ 2,0.03,
			a/2-0.01,0.01,979,
			0.003,360,4079

		prism_ 2,0.03,
			-a/2+0.01,0.01,979,
			0.003,360,4079

		prism_ 2,0.03,
			a/2-0.01,b-0.01,979,
			0.003,360,4079

		prism_ 2,0.03,
			-a/2+0.01,b-0.01,979,
			0.003,360,4079
	endif
	del 2

	addy -0.001
	resol gs_resol

	material matFrame

	prism_ 4, 0.025,
		0.02,0,79,
		0,-0.015,979,
		0,-0.025,3079,
		-0.02,0,3079

	addz b - 0.025
	prism_ 4, 0.025,
		0.02,0,79,
		0,-0.015,979,
		0,-0.025,3079,
		-0.02,0,3079
	del 1

	material "builtInMatLampBulb"

	addz 0.025
	prism_ 7, B - 0.05,
		0.02,	0,		79,
		0,		-0.015,	979,
		0,		-0.025,	3079,
		-0.02,	0,		3079,
		-0.018,	0,		79,
		0,		-0.025,	3079,
		0.018,	0,		3079
	del 2

	del 2

	if bLight then
		rotz 90
		addz -0.02
		gosub "C4D_lightAREA"
		del 2
	endif

return


! ==============================================================================
!	Shade Type 12
! ==============================================================================

"SHADE_12":

	pen gs_cont_pen
	resol gs_resol

	mulz -1
	add -mountWidth/2, -mountDepth/2, 0

	material matFrame

	block mountWidth, mountDepth, mountHeight

	add (mountWidth - lampWidth) / 2, (mountDepth - lampDepth) / 2, mountHeight

	if not(bLight) then
		material matGlass

		block lampWidth, lampDepth, lampHeight
	else
		add lampWidth/2, lampDepth/2, lampHeight/2
		gosub "C4D_lightAREA"
		del 1
	endif

	del 3

return


! ==============================================================================
"C4D_lightOMNI":
! ==============================================================================

	if iShadeType = 6 then
		unIDfactor = i
		_bIllumination = 0
	else
		unIDfactor = 0
		_bIllumination = bShowIllumination3D
	endif

	lightUnID = 1000 + unIDfactor * 500

	! ======================================================================
	! Non Visible Omni Light
	! ======================================================================

	call	"lightMacro_m" parameters		gs_light_switch						= gs_light_switch,
											gs_color_red						= gs_color_red,
											gs_color_green						= gs_color_green,
											gs_color_blue						= gs_color_blue,
											gs_light_intensity						= gs_light_intensity,
											iColorPreset			= iColorPreset,
											iLightGroupType			= LIGHTGROUP_BUILTIN_OMNI,
											iC4dDetAreaShape		= AREASHAPE_SPHERE,
											c4dDetAreaX				= 0.03,
											c4dDetAreaY				= 0.03,
											c4dDetAreaZ				= 0.03,
											bGenShadow				= bGenShadow,
											iShadowQuality			= iShadowQuality,
											iShadowQualityGroupType	= _iShadowQualityGroupType,
											iC4dGenVisibility		= 1,
											bDetShowFalloff 		= 1,
											iFalloffType			= FALLOFFTYPE_OMNI,
											c4dDetRadius			= c4dDetRadius,
											c4dPhoPhotometric		= c4dPhoPhotometric,
											iC4dPhoUnit				= iC4dPhoUnit,
											photoIntensityLumen		= photoIntensityLumen,
											photoIntensityCandela	= photoIntensityCandela,
											bShowIllumination3D		= _bIllumination,
											gs_resol				= gs_resol,
											gs_cont_pen				= gs_cont_pen,
											penIllumination			= penIllumination,
											lightUnID				= lightUnID

return


! ==============================================================================
"C4D_lightAREA":
! ==============================================================================

	_c4dDetSamples		= 16
	_c4dDetAddGrain		= 0

	if iShadeType = 5 then
		_areaShapeType = AREASHAPE_RECT
		_areaX = A * (2/3)
		_areaY = B * (2/3)
		_areaZ = 0.03
	endif

	if iShadeType = 9 then
		_areaShapeType = AREASHAPE_RECT
		_areaX = A - 2 * basethk
		_areaY = A - 2 * basethk
		_areaZ = 0.03
	endif

	if iShadeType = 10 then
		_areaShapeType = AREASHAPE_CUBE
		_areaX = A * innersize_factor
		_areaY = A * innersize_factor
		_areaZ = shadeheight - 2 * basethk
	endif

	if iShadeType = 11 then
		_areaShapeType = AREASHAPE_PCYLIND
		_areaX = B - 0.05
		_areaY = 0.03
		_areaZ = 0.03
	endif

	if iShadeType = 12 then
		_areaShapeType = AREASHAPE_CUBE
		_areaX = lampWidth
		_areaY = lampDepth
		_areaZ = lampHeight
		_c4dDetSamples		= 40
		_c4dDetAddGrain		= 1
	endif

	lightUnID = 1000

	! ======================================================================
	! Non Visible Area Light
	! ======================================================================

	call	"lightMacro_m" parameters		gs_light_switch						= gs_light_switch,
											gs_color_red						= gs_color_red,
											gs_color_green						= gs_color_green,
											gs_color_blue						= gs_color_blue,
											gs_light_intensity						= gs_light_intensity,
											iColorPreset			= iColorPreset,
											iLightGroupType			= LIGHTGROUP_BUILTIN_NONVIS_AREA,
											iC4dDetAreaShape		= _areaShapeType,
											c4dDetAreaX				= _areaX,
											c4dDetAreaY				= _areaY,
											c4dDetAreaZ				= _areaZ,
											bGenShadow				= bGenShadow,
											iShadowQuality			= iShadowQuality,
											iShadowQualityGroupType	= _iShadowQualityGroupType,
											iC4dGenVisibility		= 1,
											bDetShowFalloff 		= 1,
											iFalloffType			= FALLOFFTYPE_OMNI,
											c4dDetRadius			= c4dDetRadius,
											c4dDetSamples			= _c4dDetSamples,
											c4dDetAddGrain			= _c4dDetAddGrain,
											c4dDetFalloffAngle		= 0,
											c4dPhoPhotometric		= c4dPhoPhotometric,
											iC4dPhoUnit				= iC4dPhoUnit,
											photoIntensityLumen		= photoIntensityLumen,
											photoIntensityCandela	= photoIntensityCandela,
											bShowIllumination3D		= bShowIllumination3D,
											gs_resol				= gs_resol,
											gs_cont_pen				= gs_cont_pen,
											penIllumination			= penIllumination,
											lightUnID				= lightUnID

	if iShadeType = 9 | iShadeType = 10 | iShadeType = 12 then
		! ======================================================================
		! Visible Area Light
		! ======================================================================

		call	"lightMacro_m" parameters		gs_light_switch		= gs_light_switch,
												gs_color_red		= gs_color_red,
												gs_color_green		= gs_color_green,
												gs_color_blue		= gs_color_blue,
												gs_light_intensity	= 400,
												iLightGroupType		= LIGHTGROUP_BUILTIN_VIS_AREA,
												iC4dDetAreaShape	= _areaShapeType,
												c4dDetAreaX			= _areaX,
												c4dDetAreaY			= _areaY,
												c4dDetAreaZ			= _areaZ,
												bGenShadow			= 1,
												iShadowQuality		= iShadowQuality,
												iShadowQualityGroupType	= _iShadowQualityGroupType,
												iC4dGenVisibility	= 1,
												bDetShowFalloff 	= 1,
												c4dDetRadius		= 0,
												c4dDetFalloffAngle	= 0,
												gs_resol			= gs_resol,
												gs_cont_pen			= gs_cont_pen,
												bShowIllumination3D	= 0
	endif

return

! ==============================================================================
"C4D_FakeFalloff":
! ==============================================================================

	call "lightMacro_m" parameters		iLightGroupType		= LIGHTGROUP_BUILTIN_FALLOFF,
										iFalloffType		= FALLOFFTYPE_OMNI,
										c4dDetAreaX			= 0.1,
										c4dDetAreaY			= 0.1,
										c4dDetRadius		= c4dDetRadius,
										c4dDetFalloffAngle	= 0,
										c4dPhoPhotometric	= c4dPhoPhotometric,
										bShowIllumination3D	= bShowIllumination3D,
										penIllumination		= penIllumination,
										iModelType			= 1,
										gs_resol			= gs_resol,
										lightUnID			= unID + 1000
return

