
! Street Lamp 05

If gs_detlevel_3D_m=0 Then End
If gs_detlevel_3D_m=1 Then gs_resol=6

if GLOB_CONTEXT > 20 & GLOB_CONTEXT < 40 then gs_resol = 12

if not(gs_shadow) then shadow off


!!---- Geometry Hotspot Editing
unID=1

hotspot	0,0,0,unID,ZZYZX,1+256 : unID=unID+1
hotspot	0,0,-1,unID,ZZYZX,3 : unID=unID+1
hotspot	0,0,ZZYZX,unID,ZZYZX,2 : unID=unID+1

addz zzyzx-0.07
for i=1 to 4
	hotspot 0,0,0,unID,A2,1+128,A : unID=unID+1
	hotspot -1,0,0,unID,A2,3,A : unID=unID+1
	hotspot A2,0,0,unID,A2,2,A : unID=unID+1
	rotz 90
next i
del 5


!!---- Geometry ----!!

pen gs_cont_pen
material matPost
resol gs_resol

roty -90
revolve	4, 360, 1+2,
		0.00, pw/2+0.02, 2,
		1.00, pw/2+0.02, 2,
		1.02, pw/2, 2,
		zzyzx-0.445, pw/2, 2
del 1

addz zzyzx-0.445
roty -90


revolve 12, 360, 1+2,
		0.000, pw/2, 2,
		0.005, pw/2+0.005, 2,
		0.060, pw/2+0.005, 2,
		0.067, pw/2+0.030, 2,
		0.080, pw/2+0.030, 2,
		0.080, pw/2+0.070, 2,
		0.100, pw/2+0.070, 2,
		0.100, pw/2+0.030, 2,
		0.110, pw/2+0.030, 2,
		0.150, pw/2-0.010, 2,
		0.182, pw/2-0.003, 2,
		0.221, pw/2-0.003, 2


revolve 2, 360, 0,
		0.210, pw/2+0.072, 2,
		0.295, pw/2+0.072, 2


If gs_detlevel_3D_m=2 Then
	resol 10
	material matLamp
	revolve 4, 360, 0,
			0.221, pw/2-0.006, 1,
			0.225, pw/2-0.006, 1,
			0.260, 0, 901,
			0.400, 0.001, 3001
	resol gs_resol
EndIf

material matPost

addx 0.355
revolve 10, 360, 1+2,
		0.000, pw/2-0.003, 2,
		0.025, pw/2+0.035, 2,
		0.030, pw/2+0.035, 2,
		0.030, A2, 0,
		0.042, A2, 0,
		0.052, pw/2+0.078, 1,
		0.054, pw/2+0.073, 0,
		0.073, pw/2+0.070, 1,
		0.077, pw/2+0.068, 1,
		0.080, pw/2+0.065, 1
del 1

If gs_light_switch Then

	addx 0.445-0.19

	lightUnID = 1000

	! ======================================================================
	! Non Visible Omni Light
	! ======================================================================

	call	"lightMacro_m" parameters		gs_light_switch						= gs_light_switch,
												gs_color_red						= gs_color_red,
												gs_color_green						= gs_color_green,
												gs_color_blue						= gs_color_blue,
												gs_light_intensity						= gs_light_intensity,
												iColorPreset			= iColorPreset,
												iLightGroupType			= LIGHTGROUP_BUILTIN_OMNI,
												iC4dDetAreaShape		= AREASHAPE_SPHERE,
												c4dDetAreaX				= 0.03,
												c4dDetAreaY				= 0.03,
												c4dDetAreaZ				= 0.03,
												bGenShadow				= bGenShadow,
												iShadowQuality			= iShadowQuality,
												iShadowQualityGroupType	= 3,
												iC4dGenVisibility		= 1,
												bDetShowFalloff 		= 1,
												iFalloffType			= FALLOFFTYPE_OMNI,
												c4dDetRadius			= c4dDetRadius,
												c4dPhoPhotometric		= c4dPhoPhotometric,
												iC4dPhoUnit				= iC4dPhoUnit,
												photoIntensityLumen		= photoIntensityLumen,
												photoIntensityCandela	= photoIntensityCandela,
												bShowIllumination3D		= bShowIllumination3D,
												gs_resol				= gs_resol,
												gs_cont_pen				= gs_cont_pen,
												penIllumination			= penIllumination,
												lightUnID				= lightUnID

	del 1
EndIf

material matLamp

revolve 5, 360, 0,
		0.100, pw/2+0.043, 1,
		0.100, pw/2+0.039, 1,
		0.385, pw/2+0.039, 1,
		0.385, pw/2+0.043, 1,
		0.100, pw/2+0.043, 1

del 1
material matPost

resol 6
addz 0.10
for i=1 to 3
	addx 0.085
	cylind 0.285, 0.007
	addz 0.285+0.05
	cylind 0.01, 0.007
	del 2
	rotz 120
next i
del 5
