
call "FM_types" parameters all

parameters A = 0.74
parameters B = 1.215
parameters ZZYZX = 1.335
lock "A", "B", "ZZYZX"

values "gs_detlevel_3D" stDetail
values "iDetLevel3d" 2, 0
if GLOB_MODPAR_NAME = "gs_detlevel_3D" then
	if gs_detlevel_3D = stDetail[1]	then iDetLevel3d = 2
	if gs_detlevel_3D = stDetail[2]	then iDetLevel3d = 0
	parameters iDetLevel3d = iDetLevel3d
else
	if iDetLevel3d = 2 then	gs_detlevel_3D = stDetail[1]
	if iDetLevel3d = 0 then	gs_detlevel_3D = stDetail[2]
	parameters gs_detlevel_3D = gs_detlevel_3D
endif

values{2} "iWMSymbViewType" 	VIEWTYPE_FRONT, stViewType[1],
							VIEWTYPE_SIDE, stViewType[2],
							VIEWTYPE_TOP, stViewType[3]

values{2} "iGender"	   	GENDER_MALE, stGender[1],
						GENDER_FEMALE, stGender[2]
   
values{2} "iDet2D" 	DETLEVEL_2D_CONTOUR, `Контур`,
					DETLEVEL_2D_DETAILED, `Детальный`

if bDetailed then
	LOCK "gs_fill_pen"
else
	LOCK "gs_detailed_fill_pen"
endif

values{2} "iShowMinSpace" 	MINIMALSPACE_ALWAYS, stMinimalSpace[1],
	                       MINIMALSPACE_NEVER, stMinimalSpace[2],
    	                       MINIMALSPACE_BYMVO, stMinimalSpace[3]

if iShowMinSpace = MINIMALSPACE_NEVER then
	lock	"iMinSpaceFrontView",
		"iMinSpaceSideView",
		"iMinSpaceTopView"
	hideparameter	"iMinSpaceFrontView",
				"iMinSpaceSideView",
				"iMinSpaceTopView"

	lock "gs_minimal_space_width", "gs_minimal_space_length"
	hideparameter  "gs_minimal_space_width", "gs_minimal_space_length"
endif

if iWMSymbViewType = VIEWTYPE_FRONT then	! Front View
	values{2} "iMinSpaceFrontView" 	MINSPACEVIEW_CLEARFLOORSPACE, `Свободное пространство этажа`,
									MINSPACEVIEW_PARALLEL, `Параллельное приближение`,
									MINSPACEVIEW_MINCLEAR1, `Мин. свободная ширина одинарная`,
									MINSPACEVIEW_MINCLEAR2, `Мин. свободная ширина двойная`,
									MINSPACEVIEW_CLEARFORWARD, `Свободное пространство этажа для приближения к алькову спереди`,
									MINSPACEVIEW_ADDFORWARD, `Доп. маневрирование для приближения к алькову спереди`
else
	lock	"iMinSpaceFrontView"
	hideparameter	"iMinSpaceFrontView"
endif

if iWMSymbViewType = VIEWTYPE_SIDE then	! Side View
	values{2} "iMinSpaceSideView" 	MINSPACEVIEW_CLEARFLOORSPACE, `Свободное пространство этажа`,
								MINSPACEVIEW_FORWARD, `Приближение спереди`,
								MINSPACEVIEW_CLEARPARALLEL, `Свободное пространство этажа для параллельного приближения к алькову`,
								MINSPACEVIEW_ADDPARALLEL, `Доп. маневрирование для параллельного приближения к алькову`,
								MINSPACEVIEW_REACHDIST, `Досягаемое расстояние`
else
	lock	"iMinSpaceSideView"
	hideparameter	"iMinSpaceSideView"
endif

if iWMSymbViewType = VIEWTYPE_TOP then	! Top View
	values{2} "iMinSpaceTopView" 	MINSPACEVIEW_CLEARFLOORSPACE, `Свободное пространство этажа`,
								MINSPACEVIEW_FORWARD, `Приближение спереди`,
								MINSPACEVIEW_PARALLEL, `Параллельное приближение`,
								MINSPACEVIEW_MINCLEAR1, `Мин. свободная ширина одинарная`,
								MINSPACEVIEW_MINCLEAR2, `Мин. свободная ширина двойная`,
								MINSPACEVIEW_CLEARFORWARD, `Свободное пространство этажа для приближения к алькову спереди`,
								MINSPACEVIEW_CLEARPARALLEL, `Свободное пространство этажа для параллельного приближения к алькову`,
								MINSPACEVIEW_ADDFORWARD, `Доп. маневрирование для приближения к алькову спереди`,
								MINSPACEVIEW_ADDPARALLEL, `Доп. маневрирование для параллельного приближения к алькову`,
								MINSPACEVIEW_TURNING, `Пространство для Поворота Кресла-Коляски`,
								MINSPACEVIEW_TSHAPED, `T-образное пространство для поворота на 180°`
else
	lock	"iMinSpaceTopView"
	hideparameter	"iMinSpaceTopView"
endif

! =============================================================================
! Defaults
! =============================================================================

if	(iWMSymbViewType = VIEWTYPE_FRONT & GLOB_MODPAR_NAME = "iMinSpaceFrontView") | \
	(iWMSymbViewType = VIEWTYPE_SIDE & GLOB_MODPAR_NAME = "iMinSpaceSideView")  | \
	(iWMSymbViewType = VIEWTYPE_TOP & GLOB_MODPAR_NAME = "iMinSpaceTopView") then

	if	_iMinSpaceType = MINSPACEVIEW_CLEARFLOORSPACE | \	! Clear Floor Space
		_iMinSpaceType = MINSPACEVIEW_FORWARD | \	! Forward Approach
		_iMinSpaceType = MINSPACEVIEW_PARALLEL then	! Parallel Approach
		if bUseMetricDefaults then
			parameters	gs_minimal_space_width	= 0.760,
						gs_minimal_space_length	= 1.220
		else
			parameters	gs_minimal_space_width	= 30",
						gs_minimal_space_length	= 48"
		endif
	endif
	if _iMinSpaceType = MINSPACEVIEW_MINCLEAR1 then	! Minimum Clear Width Single
		if bUseMetricDefaults then
			parameters	gs_minimal_space_width	= 0.915
		else
			parameters	gs_minimal_space_width	= 36"
		endif
	endif
	if _iMinSpaceType = MINSPACEVIEW_MINCLEAR2 then	! Minimum Clear Width Two
		if bUseMetricDefaults then
			parameters	gs_minimal_space_width	= 1.525
		else
			parameters	gs_minimal_space_width	= 60"
		endif
	endif
	if _iMinSpaceType = MINSPACEVIEW_CLEARFORWARD then	! Clear Floor Space in Alcoves Forward Approach
		if bUseMetricDefaults then
			parameters	gs_minimal_space_width	= 0.760,
						gs_minimal_space_length	= 1.220,
						gs_minimal_space_depth	= 0.610
		else
			parameters	gs_minimal_space_width	= 30",
						gs_minimal_space_length	= 48",
						gs_minimal_space_depth	= 24"
		endif
	endif
	if _iMinSpaceType = MINSPACEVIEW_CLEARPARALLEL then	! Clear Floor Space in Alcoves Parallel Approach
		if bUseMetricDefaults then
			parameters	gs_minimal_space_width	= 0.760,
						gs_minimal_space_length	= 1.220,
						gs_minimal_space_depth	= 0.380
		else
			parameters	gs_minimal_space_width	= 30",
						gs_minimal_space_length	= 48",
						gs_minimal_space_depth	= 15"
		endif
	endif
	if _iMinSpaceType = MINSPACEVIEW_ADDFORWARD then	! Additional Maneuvering for Alcoves Forward Approach
		if bUseMetricDefaults then
			parameters	gs_minimal_space_width		= 0.760,
						gs_minimal_space_add_width	= 0.150,
						gs_minimal_space_length		= 1.220
		else
			parameters	gs_minimal_space_width		= 30",
						gs_minimal_space_add_width	= 6",
						gs_minimal_space_length		= 48"
		endif
	endif
	if _iMinSpaceType = MINSPACEVIEW_ADDPARALLEL then	! Additional Maneuvering for Alcoves Parallel Approach
		if bUseMetricDefaults then
			parameters	gs_minimal_space_width		= 0.760,
						gs_minimal_space_length		= 1.220,
						gs_minimal_space_add_length	= 0.305
		else
			parameters	gs_minimal_space_width		= 30",
						gs_minimal_space_length		= 48",
						gs_minimal_space_add_length	= 12"
		endif
	endif
	if _iMinSpaceType = MINSPACEVIEW_TURNING then	! Wheelchair Turning Space
		if bUseMetricDefaults then
			parameters	gs_minimal_space_diameter	= 1.525
		else
			parameters	gs_minimal_space_diameter	= 60"
		endif
	endif
	if _iMinSpaceType = MINSPACEVIEW_TSHAPED then	! T-Shaped Space for 180° Turns
		if bUseMetricDefaults then
			parameters	gs_minimal_space_width		= 0.915,
						gs_minimal_space_add_width	= 0.305,
						gs_minimal_space_length		= 0.915,
						gs_minimal_space_add_length	= 0.610
		else
			parameters	gs_minimal_space_width		= 36",
						gs_minimal_space_add_width	= 12",
						gs_minimal_space_length		= 36",
						gs_minimal_space_add_length	= 24"
		endif
	endif
	if _iMinSpaceType = MINSPACEVIEW_REACHDIST then	! Reach Distance
		if bUseMetricDefaults then
			parameters	gs_minimal_space_r1	= 0.620,
						gs_minimal_space_r2	= 0.750
		else
			parameters	gs_minimal_space_r1	= 25",
						gs_minimal_space_r1	= 30"
		endif
	endif
endif

if	_iMinSpaceType = MINSPACEVIEW_TURNING | \	! Wheelchair Turning Space
	_iMinSpaceType = MINSPACEVIEW_REACHDIST then	! Reach Distance
	lock "gs_minimal_space_width"
	hideparameter "gs_minimal_space_width"
endif
if	_iMinSpaceType = MINSPACEVIEW_MINCLEAR1 | \	! Minimum Clear Width Single
	_iMinSpaceType = MINSPACEVIEW_MINCLEAR2 | \	! Minimum Clear Width Two
	_iMinSpaceType = MINSPACEVIEW_CLEARFORWARD | \	! Wheelchair Turning Space
	_iMinSpaceType = MINSPACEVIEW_REACHDIST then	! Reach Distance
	lock "gs_minimal_space_length"
	hideparameter "gs_minimal_space_length"
endif
if	_iMinSpaceType <> MINSPACEVIEW_CLEARFORWARD & \	! Clear Floor Space in Alcoves Forward Approach
	_iMinSpaceType <> MINSPACEVIEW_CLEARPARALLEL then	! Clear Floor Space in Alcoves Parallel Approach
	lock "gs_minimal_space_depth"
	hideparameter "gs_minimal_space_depth"
endif
if	_iMinSpaceType <> MINSPACEVIEW_ADDFORWARD & \	! Additional Maneuvering for Alcoves Forward Approach
	_iMinSpaceType <> MINSPACEVIEW_TSHAPED then	! T-Shaped Space for 180° Turns
	lock "gs_minimal_space_add_width"
	hideparameter "gs_minimal_space_add_width"
endif
if	_iMinSpaceType <> MINSPACEVIEW_ADDPARALLEL & \	! Additional Maneuvering for Alcoves Parallel Approach
	_iMinSpaceType <> MINSPACEVIEW_TSHAPED then	! T-Shaped Space for 180° Turns
	lock "gs_minimal_space_add_length"
	hideparameter "gs_minimal_space_add_length"
endif
if	_iMinSpaceType <> MINSPACEVIEW_TURNING then	! Wheelchair Turning Space
	lock "gs_minimal_space_diameter"
	hideparameter "gs_minimal_space_diameter"
endif
if	_iMinSpaceType <> MINSPACEVIEW_REACHDIST then	! Reach Distance
	lock "gs_minimal_space_r1", "gs_minimal_space_r2"
	hideparameter "gs_minimal_space_r1", "gs_minimal_space_r2"
endif

values "gs_minimal_space_r1" range(0,]
values "gs_minimal_space_r2" range(0,]

! =============================================================================
! UI
! =============================================================================

values "gs_ui_current_page" 1, 2, 3

