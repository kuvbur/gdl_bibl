
pen gs_cont_pen

gamma = 180-ASN((rr*SIN(90-beta))/(rr-profileWidth))
etab = 180-gamma-(90-beta)

gamma = 180-ASN((rr*SIN(90-alpha))/(rr-profileWidth))
etaa = 180-gamma-(90-alpha)

bb = ((rr-profileWidth)*SIN(etaa))/COS(alpha)


fill gs_fill_type
if abs(malpha-360) < EPS then
	poly2_b 4, 2+64,gs_fill_pen,gs_back_pen,
			0, -rr, 901,
			rr, 360, 4001,
			0, -rr, 901,
			rr-profileWidth, 360, 4001

	line_type 1
	poly2_ 2, 1,
			0, -rr, 901,
			rr, 360, 4001

	line_type gs_line_type
	poly2_ 2, 1,
			0, -rr, 901,
			rr-profileWidth, 360, 4001
else
	poly2_b 7, 2+64,gs_fill_pen,gs_back_pen,
			0, 0, 1,
			0, -rr, 901,
			rr, -malpha, 4001,
			(rr-profileWidth)*SIN(malpha-etaa), -(rr-(rr-profileWidth)*COS(malpha-etaa)), 1,
			0, -rr, 901,
			rr-profileWidth, malpha-etab-etaa, 4001,
			0, 0, -1

	line_type 1
	poly2_ 7, 1,
		0, 0, 1,
		0, -rr, 900,
		rr, -malpha, 4000,
		(rr-profileWidth)*SIN(malpha-etaa), -(rr-(rr-profileWidth)*COS(malpha-etaa)), 0,
		0, -rr, 900,
		rr-profileWidth, malpha-etab-etaa, 4000,
		0, 0, 1

	line_type gs_line_type
	poly2_ 7, 1,
		0, 0, 0,
		0, -rr, 901,
		rr, -malpha, 4001,
		(rr-profileWidth)*SIN(malpha-etaa), -(rr-(rr-profileWidth)*COS(malpha-etaa)), 1,
		0, -rr, 901,
		rr-profileWidth, malpha-etab-etaa, 4001,
		0, 0, 1
endif

unID = 1
!! Angle of Molding
	hotspot2 0, -rr, unID, malpha, 6+512: unID = unID + 1
	hotspot2 0, 0, unID, malpha, 4+256: unID = unID + 1
	hotspot2 rr*SIN(malpha), -rr+rr*COS(malpha), unID, malpha, 5: unID = unID + 1

!! Connected Angles
	hotspot2 0, 0, unID, beta, 6+512: unID = unID + 1
	hotspot2 ABS((rr-profileWidth)*SIN(etab))*(abs(beta-90) > EPS) + profileWidth * (abs(beta-90) < EPS), 0,  unID, beta, 4+128: unID = unID + 1
	hotspot2 (rr-profileWidth)*SIN(etab), -(rr-(rr-profileWidth)*COS(etab)), unID, beta, 5: unID = unID + 1

	hotspot2 rr*SIN(malpha), -(rr-rr*COS(malpha)), unID, alpha, 6: unID = unID + 1
	hotspot2 rr*SIN(malpha)-(ABS((rr-profileWidth)*SIN(etaa)))*COS(malpha) * (abs(alpha-90) > EPS) - profileWidth*COS(malpha) * (abs(alpha-90) < EPS), \
			-(rr-rr*COS(malpha))+(ABS((rr-profileWidth)*SIN(etaa)))*SIN(malpha) * (abs(alpha-90) > EPS) + profileWidth*SIN(malpha) * (abs(alpha-90) < EPS), unID, alpha, 4+128: unID = unID + 1
	hotspot2 (rr-profileWidth)*SIN(malpha-etaa), -(rr-(rr-profileWidth)*COS(malpha-etaa)), unID, alpha, 5: unID = unID + 1

!! Radius Editing
	add2 0,-rr
	rot2 90-malpha/2
	hotspot2 0, 0, unID, rr, 1+256 : unID = unID + 1
	hotspot2 -1, 0,  unID, rr, 3 : unID = unID + 1
	hotspot2 rr, 0,  unID, rr, 2 : unID = unID + 1
	del 2

