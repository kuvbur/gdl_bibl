
!! Movable Wall.gsm

if gs_detlevel_3D_m = DETLEVEL_OFF then end

IF gs_shadow=0 THEN SHADOW OFF
IF gs_shadow=1 THEN SHADOW ON

pen gs_cont_pen

!!---- Hotspot Editing
unID=1

hotspot 0,0,0,unID,a,1+256 : unID=unID+1
hotspot -1,0,0,unID,a,3 : unID=unID+1
hotspot a,0,0,unID,a,2 : unID=unID+1

hotspot 0,0,zzyzx,unID,a,1+256 : unID=unID+1
hotspot -1,0,zzyzx,unID,a,3 : unID=unID+1
hotspot a,0,zzyzx,unID,a,2 : unID=unID+1

hotspot 0,0,0,unID,zzyzx,1+256 : unID=unID+1
hotspot 0,0,-1,unID,zzyzx,3 : unID=unID+1
hotspot 0,0,zzyzx,unID,zzyzx,2 : unID=unID+1

hotspot a,0,0,unID,zzyzx,1+256 : unID=unID+1
hotspot a,0,-1,unID,zzyzx,3 : unID=unID+1
hotspot a,0,zzyzx,unID,zzyzx,2 : unID=unID+1
!!---- Hotspot Editing

material rmat
addy -0.03
addz zzyzx
block a,0.06,0.03
del 2

material pmat
if iPanelPosition = POS_PARKED			then goto 10
if iPanelPosition = POS_PARTLYCLOSED	then goto 20
if iPanelPosition = POS_CLOSED 			then goto 30

10:
	rotz 90
	addy -pt
	addx -pw/2
	for t=1 to np
		block pw,pt,zzyzx
		addy -pt-0.03
	next t
end

20:
	muly -1
	rotz 90
	addy -pt
	addx -pw/2

	nn=np-3
	if nn<1 then nn=1
	for t=1 to nn
		block pw,pt,zzyzx
		addy -pt-0.03
	next t

	if np>=2 then
		addy pt-pt*cos(30)
		addx pw*(1-cos(30))/2
		addx -pt*sin(30)/2
		rotz -30
		block pw,pt,zzyzx
		del 3
	endif

	if np>=3 then
		addy -pw*sin(30)-pt*cos(45)-0.03
		addx pw*(1-cos(45))/2
		addx -pt*sin(45)/2
		rotz -45
		block pw,pt,zzyzx
		del 3
	endif

	if np>=4 then
		addy -pw*sin(45)-pt*cos(60)-0.03
		addx pw*(1-cos(60))/2
		addx -pt*sin(60)/2
		rotz -60
		block pw,pt,zzyzx
		del 3
	endif

	if np<2 then al=0
	if np>=2 then al=30
	if np>=3 then al=45
	if np>=4 then al=60
end

30:
	addy -pt/2
	for t=1 to np
		block pw-0.01,pt,zzyzx
		addx pw
	next t
end

