
hideparameter all "A", "B", "ZZYZX"

call "FM_types" parameters all

values{2} "gs_detlevel_3D_m" 	DLEV3D_DETAILED, `Детальный`,
								DLEV3D_OFF, `Откл.`

values{2} "iQuoinStyle" 	QUOINSTYLE_DOBFACE1,	`Две Поверхности 1`,
							QUOINSTYLE_DOBFACE2,	`Две Поверхности 2`,
							QUOINSTYLE_DOBBOARD,	`Две Поверхности 3`,
							QUOINSTYLE_SINGLEFACE1,	`Одна Поверхность 1`,
							QUOINSTYLE_SINGLEFACE2,	`Одна Поверхность 2`,
							QUOINSTYLE_SINGLEBOARD,	`Одна Поверхность 3`

values "thc" range (0, )
values "wfc" range (0, )
values "wfc_board" range (0, )
values "wsc" range (0, )
values "wsc_board" range (0, )
values "hfc" range (0, )
values "hsc" range (0, )
values "spc" range [0, )
values "mfh" range [0, )

if	iQuoinStyle = QUOINSTYLE_DOBFACE1 | \
	iQuoinStyle = QUOINSTYLE_DOBFACE2 then 		mincang2 = atn(thc / min(wfc, wsc))
if	iQuoinStyle = QUOINSTYLE_DOBBOARD then		mincang2 = atn(thc / min(wfc_board, wsc_board))

if	iQuoinStyle = QUOINSTYLE_SINGLEFACE1 | \
	iQuoinStyle = QUOINSTYLE_SINGLEFACE2 then 	mincang2 = atn(thc / wfc)
if	iQuoinStyle = QUOINSTYLE_SINGLEBOARD then 	mincang2 = atn(thc / wfc_board)


values "cang" range (0, 360 - 2 * mincang2]
values "cend" range (0, 180 - mincang2]
values "cang2" range [mincang2, 180)

if iQuoinStyle = QUOINSTYLE_SINGLEFACE1 | iQuoinStyle = QUOINSTYLE_SINGLEFACE2 | iQuoinStyle = QUOINSTYLE_SINGLEBOARD then
	lock "cang"
	parameters cang = 2* cend
	cang = 2 * cend
else
	lock "cend"
endif

if iQuoinStyle = QUOINSTYLE_SINGLEFACE1 or iQuoinStyle = QUOINSTYLE_DOBFACE1 or iQuoinStyle = QUOINSTYLE_DOBBOARD or iQuoinStyle = QUOINSTYLE_SINGLEBOARD then
	lock "spc"
endif

if iQuoinStyle = QUOINSTYLE_SINGLEFACE2 then
	lock "wsc"
endif

if iQuoinStyle = QUOINSTYLE_SINGLEBOARD then
	lock "wsc_board"
endif

if iQuoinStyle = QUOINSTYLE_SINGLEFACE2 or iQuoinStyle = QUOINSTYLE_DOBFACE2 or iQuoinStyle = QUOINSTYLE_SINGLEBOARD then
	lock "hsc"
endif

if iQuoinStyle = QUOINSTYLE_SINGLEFACE2 or iQuoinStyle = QUOINSTYLE_DOBFACE2 or iQuoinStyle = QUOINSTYLE_DOBBOARD or iQuoinStyle = QUOINSTYLE_SINGLEBOARD then
	lock "mfh", "gs_mortar_mat"
endif

if iQuoinStyle = QUOINSTYLE_SINGLEBOARD or iQuoinStyle = QUOINSTYLE_DOBBOARD then
	lock "wfc", "wsc", "gs_brick_mat"
else
	lock "wfc_board", "wsc_board", "gs_board_mat"
endif

if	iQuoinStyle = QUOINSTYLE_SINGLEBOARD | iQuoinStyle = QUOINSTYLE_DOBBOARD then
	a = wfc_board
else
	a = wfc
endif

b = thc
parameters a = a, b = b
lock "a", "b"

if gs_cont_pen= 0 then parameters gs_cont_pen=2
if gs_fill_pen=0 then parameters gs_fill_pen=91

if GLOB_MODPAR_NAME="cang" then
	cang2 = 180 - cang / 2
	cend = cang / 2
	parameters	cang2 = cang2,
				cend = cend
endif
if GLOB_MODPAR_NAME="cend" then
	cang2 = 180 - cang / 2
	cang = 2 * cend
	parameters	cang2 = cang2,
				cang = cang
endif
if GLOB_MODPAR_NAME="cang2" then
	cang = 2 * (180 - cang2)
	cend = 180 - cang2
	parameters	cang = cang,
				cend = cend
endif

parameters	ac_bottomlevel = 0,
			ac_toplevel = ZZYZX
