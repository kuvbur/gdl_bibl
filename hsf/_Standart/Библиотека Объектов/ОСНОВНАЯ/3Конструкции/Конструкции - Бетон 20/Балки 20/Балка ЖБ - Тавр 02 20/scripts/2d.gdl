
Unid=1
hLineID = 1000

! --- Length

HOTSPOT2 0, 0, unID, A, 1+256 : unID=unID+1
HOTSPOT2 -1, 0, unID, A, 3 : unID=unID+1
HOTSPOT2 A, 0, unID, A, 2 : unID=unID+1

! --- Length/2

HOTSPOT2 A/2,0,unID : unID=unID+1

Unid=10
! --- Width
if ABS(angy)<EPS AND only_axis=0 then		!! angy=0

	! --- Width (Bottom)
	HOTSPOT2 A,0,unID,B2,1+128, itee_w1 : unID=unID+1
	HOTSPOT2 A,-b2,unID,B2,2, itee_w1 : unID=unID+1
	HOTSPOT2 A,1,unID,B2,3, itee_w1 : unID=unID+1

	HOTSPOT2 A,0,unID,B2,1+128, itee_w1 : unID=unID+1
	HOTSPOT2 A,b2,unID,B2,2, itee_w1 : unID=unID+1
	HOTSPOT2 A,-1,unID,B2,3, itee_w1 : unID=unID+1

	HOTSPOT2 0,0,unID,B2,1+128, itee_w1 : unID=unID+1
	HOTSPOT2 0,-b2,unID,B2,2, itee_w1 : unID=unID+1
	HOTSPOT2 0,1,unID,B2,3, itee_w1 : unID=unID+1

	HOTSPOT2 0,0,unID,B2,1+128, itee_w1 : unID=unID+1
	HOTSPOT2 0,b2,unID,B2,2, itee_w1 : unID=unID+1
	HOTSPOT2 0,-1,unID,B2,3, itee_w1 : unID=unID+1

	! --- Width (Top)
	HOTSPOT2 A,0,unID,w22,1+128, itee_w2 : unID=unID+1
	HOTSPOT2 A,-w22,unID,w22,2, itee_w2 : unID=unID+1
	HOTSPOT2 A,1,unID,w22,3, itee_w2 : unID=unID+1

	HOTSPOT2 A,0,unID,w22,1+128, itee_w2 : unID=unID+1
	HOTSPOT2 A,w22,unID,w22,2, itee_w2 : unID=unID+1
	HOTSPOT2 A,-1,unID,w22,3, itee_w2 : unID=unID+1

	HOTSPOT2 0,0,unID,w22,1+128, itee_w2 : unID=unID+1
	HOTSPOT2 0,-w22,unID,w22,2, itee_w2 : unID=unID+1
	HOTSPOT2 0,1,unID,w22,3, itee_w2 : unID=unID+1

	HOTSPOT2 0,0,unID,w22,1+128, itee_w2 : unID=unID+1
	HOTSPOT2 0,w22,unID,w22,2, itee_w2 : unID=unID+1
	HOTSPOT2 0,-1,unID,w22,3, itee_w2 : unID=unID+1

endif

PEN gs_cont_pen
FILL gs_fill_type


if angy<0 then
	angy=ABS(angy)
	MUL2 1, -1
endif


if only_axis=0 then
	 pp0=-((b-w2)/2)*COS(angy)+h1*SIN(angy)
	 pp=MAX(0, pp0)
	POLY2_B 5, 1+2+4+64, gs_fill_pen, gs_back_pen,
		0, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp, 1,
		0, (b/2)*COS(angy), 1,
		a, (b/2)*COS(angy), 1,
		a, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp, 1,
		0, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp, -1

	HOTSPOT2 0, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp
	HOTSPOT2 A, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp
	HOTSPOT2 0, (b/2)*COS(angy)
	HOTSPOT2 A, (b/2)*COS(angy)

	HOTSPOT2 0, -(b/2)*COS(angy)
	HOTSPOT2 a, -(b/2)*COS(angy)


	if iDet2D = DETLEVEL_2D_DETAILED then
		HOTLINE2 0, -b/2*COS(angy), a, -b/2*COS(angy), hLineID : hLineID = hLineID + 1
		HOTLINE2 0, b/2*COS(angy), a, b/2*COS(angy), hLineID : hLineID = hLineID + 1
		if pp0<0 then
			LINE2 0, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp0, a, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp0
			LINE2 0, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp0+w2*COS(angy), a, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp0+w2*COS(angy)
			LINE2 0, (b/2)*COS(angy)-(zzyzx-h1)*SIN(angy), a, (b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)
			LINE2 0, (b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-((b-w2)/2)*COS(angy), a, (b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-((b-w2)/2)*COS(angy)
			LINE_TYPE DetailLineType
			LINE2 0, -(b/2)*COS(angy), a, -(b/2)*COS(angy)
			LINE2 0, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)+((b-w2)/2)*COS(angy), a, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)+((b-w2)/2)*COS(angy)
			LINE_TYPE 1
		endif
		if pp0>0 then
			LINE2 0, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp0+w2*COS(angy), a, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-pp0+w2*COS(angy)
			LINE2 0, (b/2)*COS(angy)-(zzyzx-h1)*SIN(angy), a, (b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)
			LINE2 0, (b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-((b-w2)/2)*COS(angy), a, (b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)-((b-w2)/2)*COS(angy)
			LINE_TYPE DetailLineType
			LINE2 0, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy), a, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)
			LINE2 0, -(b/2)*COS(angy), a, -(b/2)*COS(angy)
			LINE2 0, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)+((b-w2)/2)*COS(angy), a, -(b/2)*COS(angy)-(zzyzx-h1)*SIN(angy)+((b-w2)/2)*COS(angy)
			LINE_TYPE 1
		endif
	endif
endif

if showsect AND only_axis=0 then
	LINE_TYPE 1
	HOTSPOT2 0, 0, unID, pos_2Dx, 1+128 : unID=unID+1
	HOTSPOT2 0, -1', unID, pos_2Dx, 3 : unID=unID+1
	HOTSPOT2 pos_2Dx, 0, unID, pos_2Dx, 2 : unID=unID+1
	ADD2 pos_2Dx, 0
	ROT2 90+angy
	FILL cross_fill
	POLY2_ NSP/3, 7,
		GET (NSP)
	DEL 2
endif

if axis then
	PEN axis_pen
	LINE_TYPE axis_line_type
	HOTLINE2 0, 0, a, 0, hLineID : hLineID = hLineID + 1
	LINE2 0, 0, a, 0
endif

if angy<0 then
	DEL 1
endif

END
