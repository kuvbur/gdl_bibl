
!iObjectCode
PRE_BEAM_RECT_1 = 5


rrr = request("Working_length_unit", "", w_units_form)
bMetricDimension = strstr(w_units_form, "m")             ! m, cm, mm

! const values for parameter: gs_detlevel_3D_m
DLEV3D_OFF      = 0
DLEV3D_SIMPLE   = 1
DLEV3D_DETAILED = 2


! const values for parameter: iDet2D
DETLEVEL_2D_SIMPLE   = 1
DETLEVEL_2D_DETAILED = 2


! const values for parameter: iHoleContour2D
HOLECONTOUR2D_OFF = 1
HOLECONTOUR2D_ON  = 2

EPS = 0.0001

dim stBeamType[3]
	stBeamType[1] = `Прямой`
	stBeamType[2] = `Наклон с Одной Стороны`
	stBeamType[3] = `Наклон с Двух Сторон`

BEAM_STRAIGHT = 1
BEAM_INCLINED = 2
BEAM_INCLINED_2WAY = 3

dim stHoleShape[2]
	stHoleShape[1] = `Прямоугольный`
	stHoleShape[2] = `Круглая`

HOLE_RECTANGULAR = 1
HOLE_CIRCULAR 	 = 2

!!Change distance between ds holes!!
IF GLOB_MODPAR_NAME = "hnum" THEN
	FOR i=1 TO hnum
			PARAMETERS gs_hole_pos[i]=(i)*(a/hnum)
	NEXT i
ENDIF


if iBeamType <> BEAM_STRAIGHT then hideparameter "rbeam_w1", "rbeam_w2"

IF iBeamType = BEAM_INCLINED | iBeamType = BEAM_INCLINED_2WAY THEN
	HIDEPARAMETER "angy"
	angy= 0
	VALUES "b" RANGE [0.05, )
	VALUES "zzyzx" RANGE [0.05, )
	VALUES "zzyzx2" RANGE [0.05, )
ELSE
	HIDEPARAMETER "zzyzx2"

	VALUES "rbeam_w1" RANGE (0, )
	VALUES "rbeam_w2" RANGE (0, )
	VALUES "w12" RANGE (0, )
	VALUES "w22" RANGE (0, )
	LOCK "b"
ENDIF


! *** Cross-section Data ***
IF iBeamType = BEAM_STRAIGHT THEN PUT zzyzx, rbeam_w1, rbeam_w2


IF NSP>0 THEN
	zz= GET (1)
	w1= GET (1)
	w2= GET (1)
	zzyzx= zz
	PARAMETERS zzyzx=zz
	PARAMETERS b=w1
	b= MAX (w1, w2)
	PUT 2
	PUT -w1/2+0.001, 0, 1,
		-w2/2+0.001, zz, 1
ENDIF

IF iBeamType = BEAM_STRAIGHT THEN GOSUB 0
GOTO 1

0:
! *** Contour mirroring ***
DIM xy[][3]

IF NSP>0 THEN
	nn= GET (1)
	FOR w=1 TO nn
		xx= GET (1)
		yy= GET (1)
		msk= GET (1)
		PUT xx, yy, msk
		xy[w][1]= -xx
		xy[w][2]= yy
		xy[w][3]= msk
	NEXT w

	FOR w=nn TO 1 STEP -1
		PUT xy[w][1], xy[w][2], xy[w][3]
	NEXT w
ENDIF

RETURN

1:

