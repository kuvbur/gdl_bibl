
IF gs_detlevel_3D_m = DLEV3D_OFF THEN END
if not(gs_shadow) then shadow off


pen gs_cont_pen
resol gs_resol

ROTx angy

Unid=1

! --- Length ---

HOTSPOT 0, 0, ZZYZX, unID, A, 1+256 : unID=unID+1
HOTSPOT -1, 0, ZZYZX, unID, A, 3 : unID=unID+1
HOTSPOT A, 0, ZZYZX, unID, A, 2 : unID=unID+1


! --- Width (Top) ---
HOTSPOT A-ExtLeft,0,ZZYZX-HgtTop,unID,B2,1+128, B : unID=unID+1
HOTSPOT A-ExtLeft,-B2,ZZYZX-HgtTop,unID,B2,2, B : unID=unID+1
HOTSPOT A-ExtLeft,1,ZZYZX-HgtTop,unID,B2,3, B : unID=unID+1

HOTSPOT A-ExtLeft,0,ZZYZX-HgtTop,unID,B2,1+128, B : unID=unID+1
HOTSPOT A-ExtLeft,B2,ZZYZX-HgtTop,unID,B2,2, B : unID=unID+1
HOTSPOT A-ExtLeft,-1,ZZYZX-HgtTop,unID,B2,3, B : unID=unID+1

HOTSPOT ExtRight,0,ZZYZX-HgtTop,unID,B2,1+128, B : unID=unID+1
HOTSPOT ExtRight,-B2,ZZYZX-HgtTop,unID,B2,2, B : unID=unID+1
HOTSPOT ExtRight,1,ZZYZX-HgtTop,unID,B2,3, B : unID=unID+1

HOTSPOT ExtRight,0,ZZYZX-HgtTop,unID,B2,1+128, B : unID=unID+1
HOTSPOT ExtRight,B2,ZZYZX-HgtTop,unID,B2,2, B : unID=unID+1
HOTSPOT ExtRight,-1,ZZYZX-HgtTop,unID,B2,3, B : unID=unID+1


ADDy B/2

! --- Extension (Right) ---

HOTSPOT 0, 0, 0, unID, ExtRight, 1+128 : unID=unID+1
HOTSPOT -1, 0, 0, unID, ExtRight, 3 : unID=unID+1
HOTSPOT ExtRight, 0, 0, unID, ExtRight, 2 : unID=unID+1

HOTSPOT 0, -B, 0, unID, ExtRight, 1+128 : unID=unID+1
HOTSPOT -1, -B, 0, unID, ExtRight, 3 : unID=unID+1
HOTSPOT ExtRight, -B, 0, unID, ExtRight, 2 : unID=unID+1

! --- Extension (Left) ---

HOTSPOT A, -B, 0, unID, ExtLeft, 1+128 : unID=unID+1
HOTSPOT A+1, -B, 0, unID, ExtLeft, 3 : unID=unID+1
HOTSPOT A-ExtLeft, -B, 0, unID, ExtLeft, 2 : unID=unID+1

HOTSPOT A, 0, 0, unID, ExtLeft, 1+128 : unID=unID+1
HOTSPOT A+1, 0, 0, unID, ExtLeft, 3 : unID=unID+1
HOTSPOT A-ExtLeft, 0, 0, unID, ExtLeft, 2 : unID=unID+1

! --- Total Height ---

HOTSPOT 0, 0, 0, unID, ZZYZX, 1+128 : unID=unID+1
HOTSPOT  0, 0,-1, unID, ZZYZX, 3 : unID=unID+1
HOTSPOT  0, 0,ZZYZX, unID, ZZYZX, 2 : unID=unID+1

HOTSPOT 0, -B, 0, unID, ZZYZX, 1+128 : unID=unID+1
HOTSPOT  0, -B,-1, unID, ZZYZX, 3 : unID=unID+1
HOTSPOT  0, -B,ZZYZX, unID, ZZYZX, 2 : unID=unID+1

HOTSPOT A, 0, 0, unID, ZZYZX, 1+128 : unID=unID+1
HOTSPOT  A, 0,-1, unID, ZZYZX, 3 : unID=unID+1
HOTSPOT  A, 0,ZZYZX, unID, ZZYZX, 2 : unID=unID+1

HOTSPOT A, -B, 0, unID, ZZYZX, 1+128 : unID=unID+1
HOTSPOT  A, -B,-1, unID, ZZYZX, 3 : unID=unID+1
HOTSPOT  A, -B,ZZYZX, unID, ZZYZX, 2 : unID=unID+1

! --- Top Height ---

HOTSPOT 0, 0, ZZYZX, unID, HgtTop, 1+128 : unID=unID+1
HOTSPOT  0, 0,ZZYZX+1, unID, HgtTop, 3 : unID=unID+1
HOTSPOT  0, 0,ZZYZX-HgtTop, unID, HgtTop, 2 : unID=unID+1

HOTSPOT 0, -B, ZZYZX, unID, HgtTop, 1+128 : unID=unID+1
HOTSPOT  0, -B,ZZYZX+1, unID, HgtTop, 3 : unID=unID+1
HOTSPOT  0, -B,ZZYZX-HgtTop, unID, HgtTop, 2 : unID=unID+1

HOTSPOT A, 0, ZZYZX, unID, HgtTop, 1+128 : unID=unID+1
HOTSPOT  A, 0,ZZYZX+1, unID, HgtTop, 3 : unID=unID+1
HOTSPOT  A, 0,ZZYZX-HgtTop, unID, HgtTop, 2 : unID=unID+1

HOTSPOT A, -B, ZZYZX, unID, HgtTop, 1+128 : unID=unID+1
HOTSPOT  A, -B,ZZYZX+1, unID, HgtTop, 3 : unID=unID+1
HOTSPOT  A, -B,ZZYZX-HgtTop, unID, HgtTop, 2 : unID=unID+1

ROTx 90
MATERIAL gs_rbeam_mat

roty 90
if Shape=1 then
	if gs_shap_m = HOLE_RECTANGULAR then
		gosub 100
	endif

	if gs_shap_m = HOLE_CIRCULAR then
		gosub 200
	endif
	del 1
endif
del 1
PRISM_ 9,B,
		ExtRight,0,15,
		A-ExtLeft,0,15,
		A-ExtLeft,ZZYZX-HgtTop,15,
		A,ZZYZX-HgtTop,15,
		A,ZZYZX,15,
		0,ZZYZX,15,
		0,ZZYZX-HgtTop,15,
		ExtRight,ZZYZX-HgtTop,15,
		ExtRight,0,-1

if Shape=1 then
	for i=1 to hnum
		cutend
	next i
endif

DEL 2
DEL 1
END

100:

	addy pos
	addz ExtRight
	roty 90
	for i=1 to hnum
		HOTSPOT 0,	0,	0,					unID,	gs_hole_pos[i],	1+128	:unID=unID+1 !!base
		HOTSPOT 1,	0,	0,					unID,	gs_hole_pos[i],	3		:unID=unID+1 !!lgth ref
		HOTSPOT -gs_hole_pos[i],	0,	0,	unID,	gs_hole_pos[i],	2		:unID=unID+1 !!lgth mov
		addx -gs_hole_pos[i]-rectw/2
		cutpolya 4, 2, 0,
			0,0,15,
			rectw,0,15,
			rectw,recth,15,
			0,recth,15
		del 1
	next i
	del 2
return

200:

	addy pos
	addz ExtRight
	roty 90
	for i=1 to hnum
		HOTSPOT 0,	0,	0,								unID,	gs_hole_pos[i],	1+128	:unID=unID+1 !!base
		HOTSPOT 1,	0,	0,								unID,	gs_hole_pos[i],	3		:unID=unID+1 !!lgth ref
		HOTSPOT -gs_hole_pos[i],	0,	0,	unID,	gs_hole_pos[i],	2		:unID=unID+1 !!lgth mov
		addx -gs_hole_pos[i]
		addy cdia/2
		cutpolya 2, 2, 0,
			0,0,979,
			cdia/2,360,4079
		del 2
	next i
	del 2
return

