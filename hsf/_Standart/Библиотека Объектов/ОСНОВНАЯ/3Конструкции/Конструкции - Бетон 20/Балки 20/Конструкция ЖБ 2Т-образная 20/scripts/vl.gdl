
hideparameter all "A", "B", "Zzyzx" 

call "FM_types" parameters all

if GLOB_MODPAR_NAME = "bTopping" then
	if not(bTopping) then
		parameters dtee_top_th = 0
		lock "dtee_top_th"
	else
		parameters dtee_top_th = 0.030
	endif
endif

values{2} "gs_detlevel_3D_m" 	DLEV3D_DETAILED, `Детальный`,
								DLEV3D_OFF, `Откл.`

values{2} "iDet2D" 	DETLEVEL_2D_DETAILED, `Детальный`,
					DETLEVEL_2D_SIMPLE, `Простой`

VALUES "a" RANGE (0.3, )
VALUES "b" RANGE [dtee_th2*2+0.1, )
VALUES "dtee_th" RANGE [0.05, b/4]
VALUES "dtee_th2" RANGE [0.05, b/4]
VALUES "dtee_thhalf" RANGE [0.05/2, b/8]
VALUES "dtee_th2half" RANGE [0.05/2, b/8]
VALUES "dtee_h2" RANGE [0.02, b/6]
VALUES "dtee_h3" RANGE [0.02, ZZYZX-0.1)
VALUES "zzyzx" RANGE [MAX (0.15, dtee_h3+dtee_h2+(b/2-dtee_th/2-dtee_h2)/14), )

VALUES "pos_2Dx" RANGE (zzyzx, a)

VALUES "dtee_top_th" RANGE [0,)

if GLOB_MODPAR_NAME ="dtee_thhalf" then
	dtee_th = dtee_thhalf * 2
	parameters dtee_th = dtee_th
else
	dtee_thhalf = dtee_th / 2
	parameters dtee_thhalf = dtee_thhalf
endif

if GLOB_MODPAR_NAME ="dtee_th2half" then
	dtee_th2 = dtee_th2half * 2
	parameters dtee_th2 = dtee_th2
else
	dtee_th2half = dtee_th2 / 2
	parameters dtee_th2half = dtee_th2half
endif


if LibraryLangCode = "USA" then
	VALUES "dtee_sectype" "8TTxx",
		"8DTxx",
		"10TTxx",
		"10DTxx",
		"12DTxx",
		"Custom"

	if dtee_sectype="8TTxx" then
		VALUES "dtee_type" "8TT24"
	endif

	if dtee_sectype="8DTxx" then
		VALUES "dtee_type" "8DT20", "8DT24",
			"8DT25", "8DT26", "8DT32", "8DT33", "8DT34"
	endif

	if dtee_sectype="10TTxx" then
		VALUES "dtee_type" "10TT18", "10TT24",
			"10TT28", "10TT32", "10TT40"
	endif

	if dtee_sectype="10DTxx" then
		VALUES "dtee_type"  "10DT16", "10DT24",
			"10DT28", "10DT32", "10DT36",
			"10DT20", "10DT21",
			"10DT25", "10DT26"
	endif

	if dtee_sectype="12DTxx" then
		VALUES "dtee_type"  "12DT32", "12DT34"
	endif

	if dtee_sectype="Custom" then
		lock "dtee_type"
	endif

	if GLOB_MODPAR_NAME = "dtee_type" or GLOB_MODPAR_NAME = "dtee_sectype" then
		if dtee_sectype="8TTxx" then
			if dtee_type="8TT24" then zzyzx = 24"
			b = 8'
			dtee_th = 4.5"
			dtee_th2 = 6.5"
			dtee_h2 = 2"
			dtee_h3 = 2"
			parameters zzyzx = zzyzx, b = b, dtee_th = dtee_th, \
						dtee_th2 = dtee_th2, dtee_h2 = dtee_h2, \
						dtee_h3 = dtee_h3
		endif

		if dtee_sectype="8DTxx" then
			b = 8'
			dtee_h2 = 1"
			if dtee_type="8DT20" then
				zzyzx = 20"
				dtee_th = 3.25"
				dtee_th2 = 5.25"
				dtee_h3 = 1 7/8"
			endif
			if dtee_type="8DT24" then
				zzyzx = 24"
				dtee_th = 3.75"
				dtee_th2 = 5.75"
				dtee_h3 = 2"
			endif
			if dtee_type="8DT25" then
				zzyzx = 25"
				dtee_th = 3.75"
				dtee_th2 = 5.75"
				dtee_h3 = 3"
			endif
			if dtee_type="8DT26" then
				zzyzx = 26"
				dtee_th = 3.75"
				dtee_th2 = 5.75"
				dtee_h3 = 4"
			endif
			if dtee_type="8DT32" then
				zzyzx = 32"
				dtee_th = 4.25"
				dtee_th2 = 7.75"
				dtee_h3 = 2"
			endif
			if dtee_type="8DT33" then
				zzyzx = 33"
				dtee_th = 4.25"
				dtee_th2 = 7.75"
				dtee_h3 = 3"
			endif
			if dtee_type="8DT34" then
				zzyzx = 34"
				dtee_th = 4.25"
				dtee_th2 = 7.75"
				dtee_h3 = 4"
			endif
			parameters zzyzx = zzyzx, b = b, dtee_th = dtee_th, \
						dtee_th2 = dtee_th2, dtee_h2 = dtee_h2, \
						dtee_h3 = dtee_h3
		endif

		if dtee_sectype="10TTxx" then
			b = 10'
			dtee_h3 = 2"
			if dtee_type="10TT18" then
				zzyzx = 18"
				dtee_th = 5.75"
				dtee_th2 = 7.25"
				dtee_h2 = 2"
			endif
			if dtee_type="10TT24" then
				zzyzx = 24"
				dtee_th = 5.75"
				dtee_th2 = 7.25"
				dtee_h2 = 3"
			endif
			if dtee_type="10TT28" then
				zzyzx = 28"
				dtee_th = 5 7/16"
				dtee_th2 = 7.5"
				dtee_h2 = 3"
			endif
			if dtee_type="10TT32" then
				zzyzx = 32"
				dtee_th = 5 1/8"
				dtee_th2 = 7.5"
				dtee_h2 = 3"
			endif
			if dtee_type="10TT40" then
				zzyzx = 40"
				dtee_th = 4.5"
				dtee_th2 = 7.5"
				dtee_h2 = 3"
			endif
			parameters zzyzx = zzyzx, b = b, dtee_th = dtee_th, \
						dtee_th2 = dtee_th2, dtee_h2 = dtee_h2, \
						dtee_h3 = dtee_h3
		endif

		if dtee_sectype="10DTxx" then
			b = 10'
			dtee_h2 = 2"

			if dtee_type="10DT16" then
				zzyzx = 16"
				dtee_th = 5"
				dtee_th2 = 6.5"
				dtee_h3 = 2.25"
			endif
			if dtee_type="10DT24" then
				zzyzx =  24"
				dtee_th = 4.5"
				dtee_th2 = 6.5"
				dtee_h3 = 2.5"
				endif
			if dtee_type="10DT28" then
				zzyzx =  28"
				dtee_th = 5.5"
				dtee_th2 = 7.5"
				dtee_h3 = 2.5"
			endif
			if dtee_type="10DT32" then
				zzyzx =  32"
				dtee_th = 5.5"
				dtee_th2 = 7.5"
				dtee_h3 = 2.5"
			endif
			if dtee_type="10DT36" then
				zzyzx =  36"
				dtee_th = 4.75"
				dtee_th2 = 7.5"
				dtee_h3 = 2.5"
			endif
			if dtee_type="10DT20" then
				zzyzx =  20"
				dtee_th = 3.25"
				dtee_th2 = 5.25"
				dtee_h3 = 1 7/8"
			endif
			if dtee_type="10DT21" then
				zzyzx =  21"
				dtee_th = 3.25"
				dtee_th2 = 5.25"
				dtee_h3 = 2 7/8"
			endif
			if dtee_type="10DT25" then
				zzyzx =  25"
				dtee_th = 4"
				dtee_th2 = 6"
				dtee_h3 = 2"
			endif
			if dtee_type="10DT26" then
				zzyzx =  26"
				dtee_th = 4"
				dtee_th2 = 6"
				dtee_h3 = 2"
			endif
			parameters zzyzx = zzyzx, b = b, dtee_th = dtee_th, \
						dtee_th2 = dtee_th2, dtee_h2 = dtee_h2, \
						dtee_h3 = dtee_h3
		endif

		if dtee_sectype="12DTxx" then
			b = 12'
			dtee_th = 4.75"
			dtee_th2 = 7.75"
			dtee_h2 = 2"

			if dtee_type="12DT32" then
				zzyzx = 32"
				dtee_h3 = 2"
			endif
			if dtee_type="12DT34" then
				zzyzx = 34"
				dtee_h3 = 4"
			endif
			parameters zzyzx = zzyzx, b = b, dtee_th = dtee_th, \
						dtee_th2 = dtee_th2, dtee_h2 = dtee_h2, \
						dtee_h3 = dtee_h3
		endif
	endif

	! set back to custom if main parameters are changed
	if dtee_sectype <> "Custom" then
		if GLOB_MODPAR_NAME = "ZZYZX" or GLOB_MODPAR_NAME = "B" or \
			GLOB_MODPAR_NAME = "dtee_th" or GLOB_MODPAR_NAME = "dtee_th2" or\
			GLOB_MODPAR_NAME = "dtee_h2" or GLOB_MODPAR_NAME = "dtee_h3" then
			dtee_sectype = "Custom"
			parameters dtee_sectype = dtee_sectype
		endif
	endif
else
	hideparameter "dtee_sectype", "dtee_type"
endif

if not(axis) then
	parameters only_axis=0
	lock "only_axis", "axis_line_type", "axis_pen"
endif
if not(showsect) then
	lock "cross_fill"
endif
if axis and only_axis then
	lock	"gs_fill_type",
				"gs_fill_pen",
				"gs_back_pen",
				"showsect",
				"cross_fill",
				"iDet2D",
				"DetailLineType",
				"gs_cont_pen"
endif

if iDet2D = DETLEVEL_2D_SIMPLE then
	lock "DetailLineType"
endif

FOR w=1 TO NSP/3
	PUT GET (2)
	qq= GET (1)
NEXT w
IF NSP>0 THEN
	PUT 1
	PUT GET (NSP-1)
ENDIF

IF gs_cont_pen = 0 then parameters gs_cont_pen=10
IF gs_fill_pen = 0 then parameters gs_fill_pen=19

es_length=a
es_surface = b*dtee_h3 + 2*(dtee_h2^2+dtee_h2*dtee_th2) + 2*(zzyzx-dtee_h3-dtee_h2)*(dtee_th+dtee_th2)/2
es_volume = es_surface*es_length
PARAMETERS es_length=es_length,
		   es_surface = es_surface,
		   es_volume = es_volume

CALL "Precast_quantity_calc" parameters A = A,
	bMetricDimension = bMetricDimension,
	es_density		= es_density,
	es_density_us	= es_density_us,
	es_volume		= es_volume,
	es_surface		= es_surface
