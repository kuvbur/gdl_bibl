
IF gs_detlevel_3D_m = DLEV3D_OFF THEN END

MATERIAL gs_column_mat
PEN gs_cont_pen

if not(gs_shadow) then shadow off

!===============================================================================
! 3D HOTSPOTs
!===============================================================================
UnID=1

! HEIGHT

hotspot 0,0,0,unID, ZZYZX,1+256 : unID=unID+1
hotspot 0,0,-1,unID, ZZYZX,3 : unID=unID+1
hotspot 0,0,ZZYZX,unID, ZZYZX,2 : unID=unID+1

! X Dimension, Y Dimension/ Height=0
unID=10

hotspot a/2,0,0,unID,B2,1+128, B : unID=unID+1
hotspot a/2,b2,0,unID,B2,2, B : unID=unID+1
hotspot a/2,-1,0,unID,B2,3, B : unID=unID+1

hotspot -a/2,0,0, unID,B2,1+128, B : unID=unID+1
hotspot -a/2,b2,0, unID,B2,2, B : unID=unID+1
hotspot -a/2,-1,0, unID,B2,3, B : unID=unID+1

hotspot 0,b2,0, unID,A2,1+128, A : unID=unID+1
hotspot a2,b2,0, unID,A2,2, A : unID=unID+1
hotspot -1,b2,0, unID,A2,3, A : unID=unID+1

hotspot 0,b2,0, unID,A2,1+128, A : unID=unID+1
hotspot -a2,b2,0, unID,A2,2, A : unID=unID+1
hotspot 1,b2,0, unID,A2,3, A : unID=unID+1

hotspot a/2,0,0, unID,B2,1+128, B : unID=unID+1
hotspot a/2,-b2,0, unID,B2,2, B : unID=unID+1
hotspot a/2,1,0, unID,B2,3, B : unID=unID+1

hotspot -a/2,0,0, unID,B2,1+128, B : unID=unID+1
hotspot -a/2,-b2,0, unID,B2,2, B : unID=unID+1
hotspot -a/2,1,0, unID,B2,3, B : unID=unID+1

hotspot 0,-b2,0, unID,A2,1+128, A : unID=unID+1
hotspot a2,-b2,0, unID,A2,2, A : unID=unID+1
hotspot -1,-b2,0, unID,A2,3, A : unID=unID+1

hotspot 0,-b2,0, unID,A2,1+128, A : unID=unID+1
hotspot -a2,-b2,0, unID,A2,2, A : unID=unID+1
hotspot 1,-b2,0, unID,A2,3, A : unID=unID+1

! X Dimension, Y Dimension/ Height=ZZYZX

hotspot a/2,0,ZZYZX,unID,B2,1+128, B : unID=unID+1
hotspot a/2,b2,ZZYZX,unID,B2,2, B : unID=unID+1
hotspot a/2,-1,ZZYZX,unID,B2,3, B : unID=unID+1

hotspot -a/2,0,ZZYZX, unID,B2,1+128, B : unID=unID+1
hotspot -a/2,b2,ZZYZX, unID,B2,2, B : unID=unID+1
hotspot -a/2,-1,ZZYZX, unID,B2,3, B : unID=unID+1

hotspot 0,b2,ZZYZX, unID,A2,1+128, A : unID=unID+1
hotspot a2,b2,ZZYZX, unID,A2,2, A : unID=unID+1
hotspot -1,b2,ZZYZX, unID,A2,3, A : unID=unID+1

hotspot 0,b2,ZZYZX, unID,A2,1+128, A : unID=unID+1
hotspot -a2,b2,ZZYZX, unID,A2,2, A : unID=unID+1
hotspot 1,b2,ZZYZX, unID,A2,3, A : unID=unID+1

hotspot a/2,0,ZZYZX, unID,B2,1+128, B : unID=unID+1
hotspot a/2,-b2,ZZYZX, unID,B2,2, B : unID=unID+1
hotspot a/2,1,ZZYZX, unID,B2,3, B : unID=unID+1

hotspot -a/2,0,ZZYZX, unID,B2,1+128, B : unID=unID+1
hotspot -a/2,-b2,ZZYZX, unID,B2,2, B : unID=unID+1
hotspot -a/2,1,ZZYZX, unID,B2,3, B : unID=unID+1

hotspot 0,-b2,ZZYZX, unID,A2,1+128, A : unID=unID+1
hotspot a2,-b2,ZZYZX, unID,A2,2, A : unID=unID+1
hotspot -1,-b2,ZZYZX, unID,A2,3, A : unID=unID+1

hotspot 0,-b2,ZZYZX, unID,A2,1+128, A : unID=unID+1
hotspot -a2,-b2,ZZYZX, unID,A2,2, A : unID=unID+1
hotspot 1,-b2,ZZYZX, unID,A2,3, A : unID=unID+1

! End 3D HOTSPOTs


ROTx 90
addz -B/2

PUT		 a/2, 0, 15
IF NumOfBracket_1<>0 THEN
	FOR I=1 TO NumOfBracket_1
		PUT		a/2,    elevation[I][1]-b/2-bh, 15,
				a/2+bl, elevation[I][1]-b/2-(bh-bl*TAN(ba)), 15,
				a/2+bl, elevation[I][1]-b/2, 15,
				a/2,    elevation[I][1]-b/2, 15
	NEXT I
ENDIF
PUT		 a/2, zzyzx, 15,
		-a/2, zzyzx, 15
IF NumOfBracket_3<>0 THEN
	FOR I=1 TO NumOfBracket_3
		PUT		-a/2,    elevation[NumOfBracket_3-I+1][3]-b/2, 15,
				-a/2-bl, elevation[NumOfBracket_3-I+1][3]-b/2, 15,
				-a/2-bl, elevation[NumOfBracket_3-I+1][3]-b/2-(bh-bl*TAN(ba)), 15,
				-a/2,    elevation[NumOfBracket_3-I+1][3]-b/2-bh, 15
	NEXT I
ENDIF
PUT		-a/2, 0, 15,
		 a/2, 0, -1

PRISM_ NSP/3, B, GET(NSP)

del 1

IF NumOfBracket_2<>0 THEN
	ROTy 90
	FOR I=1 TO NumOfBracket_2
		II=2
		GOSUB 10
	NEXT I
	del 1
ENDIF
IF NumOfBracket_4<>0 THEN
	ROTy 270
	FOR I=1 TO NumOfBracket_4
		II=4
		GOSUB 10
	NEXT I
	del 1
ENDIF


!Hotspots of Brackets:

addy -b/2

unID=100
IF NumOfBracket_1<>0 THEN
	FOR I=1 TO NumOfBracket_1
		hotspot b/2, 0,  0, unID, 		 		elevation[I][1], 1+128   : unID=unID+1
		hotspot b/2, elevation[I][1], 0, unID,  elevation[I][1], 2       : unID=unID+1
		hotspot b/2, -1, 0, unID, 		 		elevation[I][1], 3       : unID=unID+1
	NEXT I
ENDIF
IF NumOfBracket_3<>0 THEN
	FOR I=1 TO NumOfBracket_3
		hotspot -b/2, 0,  0, unID, 				 elevation[I][3], 1+128   : unID=unID+1
		hotspot -b/2, elevation[I][3], 0, unID,  elevation[I][3], 2      : unID=unID+1
		hotspot -b/2, -1, 0, unID, 				 elevation[I][3], 3       : unID=unID+1
	NEXT I
ENDIF
IF NumOfBracket_2<>0 THEN
	FOR I=1 TO NumOfBracket_2
		hotspot 0, 0,  -a/2, unID, 				elevation[I][2], 1+128   : unID=unID+1
		hotspot 0, elevation[I][2], -a/2, unID, elevation[I][2], 2      : unID=unID+1
		hotspot 0, -1, -a/2, unID, 		 		elevation[I][2], 3       : unID=unID+1
	NEXT I
ENDIF
IF NumOfBracket_4<>0 THEN
	FOR I=1 TO NumOfBracket_4
		hotspot 0, 0,  a/2, unID, 		 		elevation[I][4], 1+128   : unID=unID+1
		hotspot 0, elevation[I][4], a/2, unID,  elevation[I][4], 2       : unID=unID+1
		hotspot 0, -1, a/2, unID, 		 		elevation[I][4], 3       : unID=unID+1
	NEXT I
ENDIF
del 1

END


10:
	addz -a/2
	ADDy elevation[I][II]
	ADDy -a/2
	ADDx b/2

	PRISM_ 5, a,
			0, 0, 15,
			bl, 0, 15,
			bl, -(bh-bl*TAN(ba)), 15,
			0, -bh, 15,
			0, 0, -1
	DEL 4

	RETURN

"hotspot":
	unID=1000

	hotspot 0, elevation[I][II], a/2, unID,  elevation[I][II], 2 : unID=unID+1
	hotspot 0, 0,  a/2, unID, 				 elevation[I][II], 1+128 : unID=unID+1
	hotspot 0, -1, a/2, unID, 				 elevation[I][II], 3 : unID=unID+1

	return

