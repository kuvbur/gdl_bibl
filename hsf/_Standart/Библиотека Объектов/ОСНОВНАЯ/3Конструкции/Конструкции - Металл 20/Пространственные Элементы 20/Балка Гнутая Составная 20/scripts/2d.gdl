
!! Web Beam Curved.gsm

pen gs_cont_pen

xLaenge             = A !PARAM X-Dimension
yQuerschnittsbreite = B !PARAM Y-Dimension
zQuerschnittshoehe  = C !PARAM Querschnittshohe
dMaterial           = D !PARAM Materialstarke [mm]
zAufsetzhoehe1      = E !PARAM Auflagehohe 1
zAufsetzhoehe2      = F !PARAM Auflagehohe 2
zScheitelhoehe      = G !PARAM Scheitelhohe
dAbstand            = I !PARAM Ungefahrer Loch-Abstand
dToleranz           = J !PARAM Toleranz (kleiner = runder)
bFusspunktstrich    = K !PARAM Grundriss mit FuAzpunktstrichss
nLinientyp          = gs_line_type !PARAM Linientyp fALr Grundriss

yQuerschnittsbreiteHalb = 0.5 * yQuerschnittsbreite

! Wir wollen mit zAufsetzhoehe1 = Null rechnen.

zAufsetzhoehe2 = zAufsetzhoehe2 - zAufsetzhoehe1
zScheitelhoehe = zScheitelhoehe - zAufsetzhoehe1
zAufsetzhoehe1 = 0

! AbkALrzungen fALr die Formeln:

a = xLaenge
g = zAufsetzhoehe2
h = zScheitelhoehe - zQuerschnittshoehe

! Der Kreis:

if abs(g)<EPS then

  ! Die Bogenenden liegen auf gleicher Hohe:

  x = a/2

else

  if g > 0 then
	x = a*h/g - sqr(h*h - a*a*h/g - g*h + a*a*h*h/g/g)
  else
	x = a*h/g + sqr(h*h - a*a*h/g - g*h + a*a*h*h/g/g)
  endif

endif

y = (h*h - x*x)/2/h
r = h - y

! Der Radialvektor am linken Bogenende:

x1 = -x
y1 = -y

l = sqr(x1*x1 + y1*y1)

x1 = x1/l
y1 = y1/l

! Der Radialvektor am rechten Bogenende:

x2 = a - x
y2 = g - y

l = sqr(x2*x2 + y2*y2)

x2 = x2/l
y2 = y2/l


if abs(zAufsetzhoehe2)<EPS then
  bFusspunktstrich = 0
endif

if bFusspunktstrich then
  if zAufsetzhoehe2 > 0 then
	line2 0, 0,   0.50, 0
  else
	line2 xLaenge, 0,   xLaenge - 0.50, 0
  endif
endif

line_type nLinientyp

xLinks = zQuerschnittshoehe * x1
xRechts = xLaenge + zQuerschnittshoehe * x2

pen gs_cont_pen
fill gs_fill_type

poly2_b 5, 1+2+64, gs_fill_pen, gs_back_pen,
		xLinks, -yQuerschnittsbreiteHalb, 1,
		xRechts, -yQuerschnittsbreiteHalb, 1,
		xRechts, yQuerschnittsbreiteHalb, 1,
		xLinks, yQuerschnittsbreiteHalb, 1,
		xLinks, -yQuerschnittsbreiteHalb, -1

line2 0, -yQuerschnittsbreiteHalb,   0, yQuerschnittsbreiteHalb
line2 xLaenge, -yQuerschnittsbreiteHalb, xLaenge, yQuerschnittsbreiteHalb

!!---- Hotspot Editing
unID=1

hotspot2 0,0,unID,a,1+256 : unID=unID+1
hotspot2 -1,0,unID,a,3 : unID=unID+1
hotspot2 a,0,unID,a,2 : unID=unID+1

hotspot2 0,0,unID,B2,1+128,B : unID=unID+1
hotspot2 0,-1,unID,B2,3,B : unID=unID+1
hotspot2 0,B2,unID,B2,2,B : unID=unID+1

hotspot2 0,0,unID,B2,1+128,B : unID=unID+1
hotspot2 0,1,unID,B2,3,B : unID=unID+1
hotspot2 0,-B2,unID,B2,2,B : unID=unID+1

hotspot2 A,0,unID,B2,1+128,B : unID=unID+1
hotspot2 A,-1,unID,B2,3,B : unID=unID+1
hotspot2 A,B2,unID,B2,2,B : unID=unID+1

hotspot2 A,0,unID,B2,1+128,B : unID=unID+1
hotspot2 A,1,unID,B2,3,B : unID=unID+1
hotspot2 A,-B2,unID,B2,2,B : unID=unID+1

hotspot2 A/2,0,unID : unID=unID+1

hotspot2 xLinks, -B2,unID : unID=unID+1
hotspot2 xRechts, -B2,unID : unID=unID+1
hotspot2 xLinks, B2,unID : unID=unID+1
hotspot2 xRechts, B2,unID : unID=unID+1

!!---- Hotspot Editing


