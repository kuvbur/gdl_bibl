
hideparameter all "A", "B", "Zzyzx"  

if GLOB_UI_BUTTON_ID = 1 then
	gs_ui_current_page = 2
	parameters gs_ui_current_page = gs_ui_current_page
endif

call "FM_types" parameters all

dim stDetLevel3d[3]
	stDetLevel3d[1] = `Детальный`
	stDetLevel3d[2] = `Простой`
	stDetLevel3d[3] = `Откл.`

values "gs_detlevel_3D" stDetLevel3d
values "gs_detlevel_3D_m" 2, 1, 0

if GLOB_MODPAR_NAME = "gs_detlevel_3D" then
	gs_detlevel_3D_m = 2
	if gs_detlevel_3D = stDetLevel3d[2] then gs_detlevel_3D_m = 1
	if gs_detlevel_3D = stDetLevel3d[3] then gs_detlevel_3D_m = 0
	parameters gs_detlevel_3D_m = gs_detlevel_3D_m
else
	gs_detlevel_3D = stDetLevel3d[1]
	if gs_detlevel_3D_m = 1 then gs_detlevel_3D = stDetLevel3d[2]
	if gs_detlevel_3D_m = 0 then gs_detlevel_3D = stDetLevel3d[3]
	parameters gs_detlevel_3D = gs_detlevel_3D
endif
dim stDetLevel2d[2]
	stDetLevel2d[1] = `Детальный`
	stDetLevel2d[2] = `Простой`

values "gs_detlevel_2D" stDetLevel2d
values "gs_detlevel_2D_m" 2, 1

if GLOB_MODPAR_NAME = "gs_detlevel_2D" then
	gs_detlevel_2D_m = 2
	if gs_detlevel_2D = stDetLevel2d[2] then gs_detlevel_2D_m = 1
	parameters gs_detlevel_2D_m = gs_detlevel_2D_m
else
	gs_detlevel_2D = stDetLevel2d[1]
	if gs_detlevel_2D_m = 1 then gs_detlevel_2D = stDetLevel2d[2]
	parameters gs_detlevel_2D = gs_detlevel_2D
endif


VALUES "rot_p" RANGE [-90, 90)
VALUES "ang" RANGE [0, 89), RANGE [300, 360]



IF numofbeam<9 THEN
	FOR I=numofbeam TO 8
		bstring="b"+STR(I, 1, 0)+"p"
		HIDEPARAMETER bstring
	NEXT I
ENDIF
IF numofbeam<9 THEN
	FOR I=numofbeam TO 8
		hstring="h"+STR(I, 1, 0)
		HIDEPARAMETER hstring
	NEXT I
ENDIF



IF numofbeam>1 THEN VALUES "b1p"  RANGE (0,   b2p*(numofbeam>2)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=2))
IF numofbeam=1 THEN VALUES "b1p"  btotal
VALUES "b2p"  RANGE (b1p, b3p*(numofbeam>3)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=3))
VALUES "b3p"  RANGE (b2p, b4p*(numofbeam>4)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=4))
VALUES "b4p"  RANGE (b3p, b5p*(numofbeam>5)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=5))
VALUES "b5p"  RANGE (b4p, b6p*(numofbeam>6)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=6))
VALUES "b6p"  RANGE (b5p, b7p*(numofbeam>7)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=7))
VALUES "b7p"  RANGE (b6p, b8p*(numofbeam>8)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=8))
VALUES "b8p"  RANGE (b7p, btotal-he*SIN(rot_p)-dp)

VALUES "hs" RANGE (2*dp, ]
VALUES "h1" RANGE (2*dp, ]
VALUES "h2" RANGE (2*dp, ]
VALUES "h3" RANGE (2*dp, ]
VALUES "h4" RANGE (2*dp, ]
VALUES "h5" RANGE (2*dp, ]
VALUES "h6" RANGE (2*dp, ]
VALUES "h7" RANGE (2*dp, ]
VALUES "h8" RANGE (2*dp, ]
VALUES "he" RANGE (2*dp, ]


VALUES "ap" RANGE (dw, ]
VALUES "dp" RANGE (0, MIN(hs/2,h1/2,h2/2,h3/2,h4/2,h5/2,h6/2,h7/2,h8/2,he/2))
VALUES "dw" RANGE (0, ]


IF axis=0 THEN
	PARAMETERS only_axis=0
	HIDEPARAMETER "only_axis", "axis_line_type", "axis_pen"
ENDIF

IF only_axis=1 THEN
	HIDEPARAMETER "gs_fill_type", "gs_fill_pen", "gs_back_pen", "gs_detlevel_2D", "DetailLineType"
ENDIF

IF gs_detlevel_2D_m = 1 THEN LOCK "DetailLineType"

IF GLOB_MODPAR_NAME ="B" THEN PARAMETERS B2=B/2
IF GLOB_MODPAR_NAME ="B2" THEN PARAMETERS B=B2*2

IF gs_cont_pen=0 then parameters gs_cont_pen=90
IF gs_fill_pen=0 then parameters gs_fill_pen=19
IF axis_pen=0 then parameters axis_pen=69
