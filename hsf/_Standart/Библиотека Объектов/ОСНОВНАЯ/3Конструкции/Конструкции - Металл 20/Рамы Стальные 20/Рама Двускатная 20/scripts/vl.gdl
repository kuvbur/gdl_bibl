
hideparameter all "A", "B", "Zzyzx"  

if GLOB_UI_BUTTON_ID = 1 then
	gs_ui_current_page = 2
	parameters gs_ui_current_page = gs_ui_current_page
endif

call "FM_types" parameters all

dim stDetLevel3d[3]
	stDetLevel3d[1] = `Детальный`
	stDetLevel3d[2] = `Простой`
	stDetLevel3d[3] = `Откл.`

values "gs_detlevel_3D" stDetLevel3d
values "gs_detlevel_3D_m" 2, 1, 0

if GLOB_MODPAR_NAME = "gs_detlevel_3D" then
	gs_detlevel_3D_m = 2
	if gs_detlevel_3D = stDetLevel3d[2] then gs_detlevel_3D_m = 1
	if gs_detlevel_3D = stDetLevel3d[3] then gs_detlevel_3D_m = 0
	parameters gs_detlevel_3D_m = gs_detlevel_3D_m
else
	gs_detlevel_3D = stDetLevel3d[1]
	if gs_detlevel_3D_m = 1 then gs_detlevel_3D = stDetLevel3d[2]
	if gs_detlevel_3D_m = 0 then gs_detlevel_3D = stDetLevel3d[3]
	parameters gs_detlevel_3D = gs_detlevel_3D
endif

VALUES "gs_detlevel_2D" `Зависит от Масштаба`, `1:50`, `1:100`, `1:200`, `Только Ось`
VALUES "gs_detlevel_2D_m" DETLEVEL_2D_SCALE_SENSITIVE, DETLEVEL_2D_1_50, DETLEVEL_2D_1_100, DETLEVEL_2D_1_200, DETLEVEL_2D_AXIS_ONLY

if GLOB_MODPAR_NAME = "gs_detlevel_2D" then
	gs_detlevel_2D_m = DETLEVEL_2D_SCALE_SENSITIVE
	if gs_detlevel_2D = `1:50`		then gs_detlevel_2D_m = DETLEVEL_2D_1_50
	if gs_detlevel_2D = `1:100`		then gs_detlevel_2D_m = DETLEVEL_2D_1_100
	if gs_detlevel_2D = `1:200`		then gs_detlevel_2D_m = DETLEVEL_2D_1_200
	if gs_detlevel_2D = `Только Ось` then gs_detlevel_2D_m = DETLEVEL_2D_AXIS_ONLY
	parameters gs_detlevel_2D_m = gs_detlevel_2D_m
else
	gs_detlevel_2D = `Зависит от Масштаба`
	if gs_detlevel_2D_m = DETLEVEL_2D_1_50		then gs_detlevel_2D = `1:50`
	if gs_detlevel_2D_m = DETLEVEL_2D_1_100		then gs_detlevel_2D = `1:100`
	if gs_detlevel_2D_m = DETLEVEL_2D_1_200		then gs_detlevel_2D = `1:200`
	if gs_detlevel_2D_m = DETLEVEL_2D_AXIS_ONLY	then gs_detlevel_2D = `Только Ось`
	parameters gs_detlevel_2D = gs_detlevel_2D
endif

VALUES "floorPlanDisplayType" `Сечение и Низ`, `Сечение и Верх`, `Символический`, `Только Контуры`, `Вся Проекция`
VALUES "iFloorPlanDisplayType" DISPLAY_OVERHEAD_PROJ, DISPLAY_PROJECTED, DISPLAY_SYMBOLIC, DISPLAY_OUTLINES, DISPLAY_OVERHEAD_ALL

if GLOB_MODPAR_NAME = "floorPlanDisplayType" then
	iFloorPlanDisplayType = DISPLAY_OVERHEAD_PROJ
	if floorPlanDisplayType = `Сечение и Низ`		then iFloorPlanDisplayType = DISPLAY_PROJECTED
	if floorPlanDisplayType = `Символический`		then iFloorPlanDisplayType = DISPLAY_SYMBOLIC
	if floorPlanDisplayType = `Только Контуры`	then iFloorPlanDisplayType = DISPLAY_OUTLINES
	if floorPlanDisplayType = `Вся Проекция`	then iFloorPlanDisplayType = DISPLAY_OVERHEAD_ALL
	parameters iFloorPlanDisplayType = iFloorPlanDisplayType
else
	floorPlanDisplayType = `Сечение и Верх`
	if iFloorPlanDisplayType = DISPLAY_PROJECTED		then floorPlanDisplayType = `Сечение и Низ`
	if iFloorPlanDisplayType = DISPLAY_SYMBOLIC			then floorPlanDisplayType = `Символический`
	if iFloorPlanDisplayType = DISPLAY_OUTLINES	then floorPlanDisplayType = `Только Контуры`
	if iFloorPlanDisplayType = DISPLAY_OVERHEAD_ALL		then floorPlanDisplayType = `Вся Проекция`
	parameters floorPlanDisplayType = floorPlanDisplayType
endif

if iFloorPlanDisplayType = DISPLAY_OUTLINES then
	hideparameter "cut_pen"
endif
if iFloorPlanDisplayType = DISPLAY_OVERHEAD_ALL then
	hideparameter "cut_pen", "contour_line_type"
endif

VALUES "Fill_method" `Штриховка Сечения`,`Штриховка Поверхности`,`Откл.`
VALUES "iFill_method" FILL_METHOD_CUT_FILL, FILL_METHOD_COVER_FILL, FILL_METHOD_OFF

if GLOB_MODPAR_NAME = "fill_method" then
	iFill_method = FILL_METHOD_CUT_FILL
	if fill_method = `Штриховка Поверхности`	then iFill_method = FILL_METHOD_COVER_FILL
	if fill_method = `Откл.`			then iFill_method = FILL_METHOD_OFF
	parameters iFill_method = iFill_method
else
	Fill_method = `Штриховка Сечения`
	if iFill_method = FILL_METHOD_COVER_FILL	then fill_method = `Штриховка Поверхности`
	if iFill_method = FILL_METHOD_OFF			then fill_method = `Откл.`
	parameters fill_method = fill_method
endif

if iFill_method = FILL_METHOD_CUT_FILL then
	gs_fill_type = cut_fill_type
	gs_fill_pen = cut_fill_pen
	gs_back_pen = cut_bg_pen
	parameters 	gs_fill_type =	gs_fill_type, gs_fill_pen = gs_fill_pen, gs_back_pen = gs_back_pen
	HIDEPARAMETER "back_fill_type", "back_fill_pen", "back_bg_pen"
else
	gs_fill_type = back_fill_type
	gs_fill_pen = back_fill_pen
	gs_back_pen = back_bg_pen
	parameters 	gs_fill_type =	gs_fill_type,  gs_fill_pen = gs_fill_pen, gs_back_pen = gs_back_pen
	HIDEPARAMETER "cut_fill_type", "cut_fill_pen", "cut_bg_pen"
endif

VALUES "rot_p" RANGE [-90, 90)
VALUES "ang" RANGE [0, 89), 360


IF numofbeam<9 THEN
	FOR I=numofbeam TO 8
		bstring="b"+STR(I, 1, 0)+"p"
		HIDEPARAMETER bstring
	NEXT I
ENDIF
IF numofbeam<9 THEN
	FOR I=numofbeam TO 8
		hstring="h"+STR(I, 1, 0)
		HIDEPARAMETER hstring
	NEXT I
ENDIF


IF numofbeam>1 THEN VALUES "b1p"  RANGE (0,   b2p*(numofbeam>2)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=2))
IF numofbeam=1 THEN VALUES "b1p"  btotal
VALUES "b2p"  RANGE (b1p, b3p*(numofbeam>3)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=3))
VALUES "b3p"  RANGE (b2p, b4p*(numofbeam>4)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=4))
VALUES "b4p"  RANGE (b3p, b5p*(numofbeam>5)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=5))
VALUES "b5p"  RANGE (b4p, b6p*(numofbeam>6)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=6))
VALUES "b6p"  RANGE (b5p, b7p*(numofbeam>7)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=7))
VALUES "b7p"  RANGE (b6p, b8p*(numofbeam>8)+(btotal-he*SIN(rot_p)-dp)*(numofbeam=8))
VALUES "b8p"  RANGE (b7p, btotal-he*SIN(rot_p)-dp)

VALUES "hs" RANGE (2*dp, eh-2*dp]
VALUES "h1" RANGE (2*dp, ]
VALUES "h2" RANGE (2*dp, ]
VALUES "h3" RANGE (2*dp, ]
VALUES "h4" RANGE (2*dp, ]
VALUES "h5" RANGE (2*dp, ]
VALUES "h6" RANGE (2*dp, ]
VALUES "h7" RANGE (2*dp, ]
VALUES "h8" RANGE (2*dp, ]

VALUES "h1c" RANGE (2*dp, ]
VALUES "h2c" RANGE [0.06, A/2)

VALUES "ap" RANGE (dw, ]
VALUES "dp" RANGE (0, MIN(hs/2,h1/2,h2/2,h3/2,h4/2,h5/2,h6/2,h7/2,h8/2,he/2))
VALUES "dw" RANGE (0, ]
VALUES "eh" RANGE (2*dp, rh]
VALUES "rh" RANGE [eh, ]
VALUES "ZZYZX" RANGE [eh, ]
VALUES "ehm" RANGE [0, MIN(h2c*TAN(rot_p), hs-dp/COS(rot_p))]

if gs_detlevel_2D_m = DETLEVEL_2D_AXIS_ONLY then
	axis = 1
	parameters axis = axis
	HIDEPARAMETER "axis", "fill_method", "gs_fill_type", "gs_fill_pen", "gs_back_pen", "back_fill_type", "cut_fill_type", "cut_fill_pen", "cut_bg_pen", "back_fill_pen", "back_bg_pen"
endif

if axis = 0 THEN
	PARAMETERS only_axis = 0
	HIDEPARAMETER "only_axis", "axis_line_type", "axis_pen"
endif

if iFill_method = FILL_METHOD_OFF then
	HIDEPARAMETER "gs_fill_type", "gs_fill_pen", "gs_back_pen", "back_fill_type", "cut_fill_type", "back_fill_pen", "back_bg_pen"
endif

IF gs_detlevel_2D=`Простой` THEN LOCK "DetailLineType"

If GLOB_MODPAR_NAME = "rh" then
	PARAMETERS ZZYZX = rh
	ZZYZX = ZZYZX
else
	If GLOB_MODPAR_NAME = "ZZYZX" then
		PARAMETERS rh = ZZYZX
		rh = rh
	endif
endif

IF GLOB_MODPAR_NAME ="B" THEN PARAMETERS B2=B/2
IF GLOB_MODPAR_NAME ="B2" THEN PARAMETERS B=B2*2

IF gs_cont_pen=0 then parameters gs_cont_pen=90
IF gs_fill_pen=0 then parameters gs_fill_pen=10
IF axis_pen=0 then parameters axis_pen=69

parameters ac_bottomlevel = 0
parameters ac_toplevel = ZZYZX


if gs_detlevel_2D_m = DETLEVEL_2D_AXIS_ONLY then
	hideparameter "floorPlanDisplayType", "cut_pen", "gs_cont_pen", "contour_line_type", "overhead_Line_Type"
endif


