
hideparameter all "A", "B", "ZZYZX"

call "FM_types" parameters all


! ==============================================================================
! 2D Display Options
! ==============================================================================

values "gs_symb_display_option" stDisplayOptions
values "gs_symb_show_projection_to" stProjectionTypes

if AC_symb_display_option = 3 | AC_symb_display_option = 5 then
	hideparameter "gs_use_3D_view_attributes"
	lock "gs_use_3D_view_attributes"
endif

if gs_use_3D_view_attributes then
	hideparameter "AC_uncut_pen"
	lock "AC_uncut_pen"
endif

if AC_symb_display_option = 3 | AC_symb_display_option = 4 | AC_symb_display_option = 5 then
	hideparameter "gs_symb_show_projection_to"
	lock "gs_symb_show_projection_to"
endif

if AC_symb_display_option = 3 | AC_symb_display_option = 5 then
	hideparameter "AC_cut_linetype", "AC_uncut_pen"
	lock "AC_cut_linetype", "AC_uncut_pen"
endif

if AC_symb_display_option = 1 | AC_symb_display_option = 3 | AC_symb_display_option = 4 then
	hideparameter "AC_overhead_linetype", "AC_overhead_pen"
	lock "AC_overhead_linetype", "AC_overhead_pen"
endif

if AC_symb_display_option = 4 then
	hideparameter "AC_cut_linetype"
	lock "AC_cut_linetype"
endif

if AC_symb_display_option = 5 then
	hideparameter "gs_fill_type", "gs_fill_pen", "gs_back_pen"
	lock "gs_fill_type", "gs_fill_pen", "gs_back_pen"
endif

! ==============================================================================


if AC_symb_display_option <> 3 then
	hideparameter "kont"
	lock "kont"
endif

if GLOB_MODPAR_NAME = "B" then
	parameters gs_struc_length=B/cos(neig)
	parameters zzyzx=B*tan(neig)
endif
if GLOB_MODPAR_NAME = "ZZYZX" then
	parameters gs_struc_length=sqr(B^2+zzyzx^2)
	parameters neig=atn(zzyzx/B)
	Parameters B2=SQR(ZZYZX^2+B^2)
endif
if GLOB_MODPAR_NAME = "neig" then
	parameters zzyzx=tan(neig)*B
	parameters gs_struc_length=B/cos(neig)
endif
if GLOB_MODPAR_NAME = "gs_struc_length" then
	parameters B=gs_struc_length*cos(neig)
	parameters zzyzx=gs_struc_length*sin(neig)
endif

values{2} "gs_detlevel_3D_m" 	DLEV3D_DETAILED, `Детальный`,
								DLEV3D_OFF, `Откл.`

if gs_cont_pen = 0 then parameters gs_cont_pen=2
if gs_fill_pen = 0 then parameters gs_fill_pen=91


values "neig" RANGE [0,89]

if neig >= 89 & neig <= 270/2 then neig = 89
if neig > 270/2 & neig <= 360 then neig = 0

values "schneid1" range[atn(B/(a+(B/tan(schneid2)))),180)
values "schneid2" range(0,180-(atn(B/(a-(B/tan(schneid1)))))]

values "v" range(0,)
values "h" range(0,)
values "dist" range(0,)

if GLOB_MODPAR_NAME = "B" then parameters B2=B/cos(neig)
if GLOB_MODPAR_NAME = "B2" then
	parameters B=B2*cos(neig)
	parameters ZZYZX=SQR(B2^2-B^2)
endif
if GLOB_MODPAR_NAME = "neig" Then parameters B2=B/cos(neig)

if not(kont) then lock "gs_axis_line"

! ==============================================================================
! for GER listing
! ==============================================================================

rm_ProfileWidth		= v
rm_ProfileHeight	= h
LumberSize			= A
parameters	rm_ProfileWidth		= rm_ProfileWidth,
			rm_ProfileHeight	= rm_ProfileHeight,
			LumberSize			= LumberSize

bb=b/cos(neig)
j=int(bb/dist)+1

parameters LumberSize_all = LumberSize*j, Lumber_qty = j
