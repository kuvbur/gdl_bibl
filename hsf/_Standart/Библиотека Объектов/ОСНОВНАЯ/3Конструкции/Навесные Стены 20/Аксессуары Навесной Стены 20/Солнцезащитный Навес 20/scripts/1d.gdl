
eps = 0.00001

LOUVER_ENDS = 1
LOUVER_BY_NUM = 2
LOUVER_BY_DIST = 3

noFrame = 0
if not(bEndFrame) and not(gs_rod) then noFrame = 1
if noFrame = 1 then
	freeLength = AC_width - AC_height/2 - AC_height
else
	freeLength = AC_width - not(gs_rod)*bEndFrame * gs_arm_thickness - gs_rod * (gs_rod_radius+AC_Height/2) - AC_height
endif
maxLamelleDist = freeLength

bFromEnd = -1			!for old version

goto "MasterEnd"

"GetLouverMethod":

	if iLouverMethod = LOUVER_BY_NUM then
		numLamelles = gs_lamelles
		if numLamelles > 0 then
			maxLamelleDist = freeLength / (numLamelles-noFrame*0.5)
		endif
	endif
	if iLouverMethod = LOUVER_BY_DIST then
		maxLamelleDist = gs_lamelles_axis_dist
		numLamelles = int((freeLength - noFrame*maxLamelleDist/2) / gs_lamelles_axis_dist) + 1*noFrame
	endif
	if iLouverMethod = LOUVER_ENDS then
		numLamelles = gs_lamelles
		if numLamelles < 3 and numLamelles > 0 then
			maxLamelleDist = (AC_width -  gs_rod * (gs_rod_radius + AC_height/2) - AC_height * 2)
		endif
		if numLamelles > 2 then
			maxLamelleDist = (AC_width -  gs_rod * (gs_rod_radius + AC_height/2) - AC_height * 2) / (numLamelles-1)
		endif
		bFromEnd = 1
	endif
return

"MasterEnd":
