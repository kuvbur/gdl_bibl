
![#COMPATIBILITY] - START

if iLeafType = -1 then
	bDefaultElem = (GLOB_INTGUID = "" | GLOB_INTGUID = "{00000000-0000-0000-0000-000000000000}")

	if bDefaultElem then
		iLeafType = 1
	else
		gosub "LeafCompatibility"
	endif
	parameters iLeafType = iLeafType
endif

![#COMPATIBILITY] - END

call "FM_types" parameters all

values "gs_updirection" 0, 90, 180, 270

values "gs_detlevel_2d" `по ПМВ`, `Зависит от Масштаба`, `1:50`, `1:100`, `1:200`, `Откл.`
values "gs_detlevel_2d_m" 1, 0, 50, 100, 200, -1

if GLOB_MODPAR_NAME = "gs_detlevel_2d" then
	gs_detlevel_2d_m = 1
	if gs_detlevel_2d = `Откл.` 				then gs_detlevel_2d_m = 0
	if gs_detlevel_2d = `Зависит от Масштаба` 	then gs_detlevel_2d_m = -1
	if gs_detlevel_2d = `1:50` 				then gs_detlevel_2d_m = 50
	if gs_detlevel_2d = `1:100` 			then gs_detlevel_2d_m = 100
	if gs_detlevel_2d = `1:200` 			then gs_detlevel_2d_m = 200
	parameters gs_detlevel_2d_m = gs_detlevel_2d_m
else
	gs_detlevel_2d = `по ПМВ`
	if gs_detlevel_2d_m = 0 then gs_detlevel_2d = `Откл.`
	if gs_detlevel_2d_m = -1  then gs_detlevel_2d = `Зависит от Масштаба`
	if gs_detlevel_2d_m = 50  then gs_detlevel_2d = `1:50`
	if gs_detlevel_2d_m = 100 then gs_detlevel_2d = `1:100`
	if gs_detlevel_2d_m = 200 then gs_detlevel_2d = `1:200`
	parameters gs_detlevel_2d = gs_detlevel_2d
endif

values "gs_detlevel_3D" `Детальный`, `Простой`, `Откл.`
values "gs_detlevel_3d_m" 2, 1, 0

if GLOB_MODPAR_NAME = "gs_detlevel_3D" then
	if gs_detlevel_3D = `Откл.` 		then gs_detlevel_3d_m = 0
	if gs_detlevel_3D = `Простой` 	then gs_detlevel_3d_m = 1
	if gs_detlevel_3D = `Детальный` 	then gs_detlevel_3d_m = 2
	parameters gs_detlevel_3d_m = gs_detlevel_3d_m
else
	if gs_detlevel_3d_m = 0 then gs_detlevel_3D = `Откл.`
	if gs_detlevel_3d_m = 1  then gs_detlevel_3D = `Простой`
	if gs_detlevel_3d_m = 2  then gs_detlevel_3D = `Детальный`
	parameters gs_detlevel_3D = gs_detlevel_3D
endif


!values "panelType" `Glazed Frame`,`Glass`
!values "iPanelType" 1, 2

values "gs_leaf_type" `Остекленная Рама`,`Стекло`
values "iLeafType" 1, 2

if GLOB_MODPAR_NAME = "gs_leaf_type" then
	if gs_leaf_type = `Остекленная Рама` then iLeafType = 1
	if gs_leaf_type = `Стекло` then iLeafType = 2
	parameters iLeafType = iLeafType
else
	if iLeafType = 1 then gs_leaf_type= `Остекленная Рама`
	if iLeafType = 2 then gs_leaf_type= `Стекло`
	parameters gs_leaf_type= gs_leaf_type
endif

if GLOB_MODPAR_NAME = "gs_leaf_type" or GLOB_MODPAR_NAME = "iLeafType" then
	if iLeafType = 1 then
		sashThk = 0.055
		matSash = 47
	endif
	if iLeafType = 2 then
		sashThk = 0.016
		matSash = 29
	endif
	parameters sashThk = sashThk
	parameters matSash = matSash
endif

values "gs_SashText_typ" `Угловое Соединение`, `Соединение Встык`
values "gs_SashText_typ_m" 1, 2

if GLOB_MODPAR_NAME = "gs_SashText_typ" then
	if gs_SashText_typ = `Угловое Соединение` then gs_SashText_typ_m = 1
	if gs_SashText_typ = `Соединение Встык` then gs_SashText_typ_m = 2
	parameters gs_SashText_typ_m = gs_SashText_typ_m
else
	if gs_SashText_typ_m = 1 then gs_SashText_typ = `Угловое Соединение`
	if gs_SashText_typ_m = 2 then gs_SashText_typ = `Соединение Встык`
	parameters gs_SashText_typ = gs_SashText_typ
endif

if iLeafType = 2 then
	lock "sashWidth"
	hideparameter "sashWidth"
endif

call "ui_cw_panel" parameters all iPanelType = PANEL_DOOR_REVOLVING

! --- Parameters for listing ---------------------------------------------------

parameters ac_openingDir = 0

parameters ac_thickness = sashThk

parameters ac_width = rightSide_X - leftSide_X
parameters ac_nominalWidth = ac_width

parameters ac_height = upperSide_Y - downSide_Y
parameters ac_nominalHeight = ac_height


!**************** Swedish list parameter control **********************
if gs_SWE_listParams_contr > 0 then
	call "SWE_ListParameters_control" parameters gs_SWE_listParams_contr = gs_SWE_listParams_contr,
			swe_list_d1				= swe_list_d1
endif



! --- Forced values ---------------------------------------------------

parameters ac_originIsFrameCenter = 0
parameters ac_aSizeIsWithClamp = 1
