
pen gs_cont_pen
unID = 1

if bMigrationRotZ then
	add2 0,-waveHeight/2
	mul2 -1,-1
	rot2 90
endif


!=============================================================================
! Hotspot Editing
!=============================================================================

hotspot2 0,	0, 			unID, width, 1+256 	: unID=unID+1
hotspot2 0,	-0.001, 	unID, width, 3+128	: unID=unID+1
hotspot2 0,	width, 		unID, width, 2		: unID=unID+1

if abs(rotation-90) < eps or abs(rotation+90) < eps then
	hotspot2 -A2,	0, 		unID, width, 1+256		: unID=unID+1
	hotspot2 -A2,	-0.001, unID, width, 3+128		: unID=unID+1
	hotspot2 -A2,	width,  unID, width, 2			: unID=unID+1
else
	hotspot2 A2,	0, 		unID, width, 1+256		: unID=unID+1
	hotspot2 A2,	-0.001, unID, width, 3+128		: unID=unID+1
	hotspot2 A2,	width, 	unID, width, 2			: unID=unID+1
endif


!=============================================================================
! 2D Symbol
!=============================================================================

set fill gs_fill_type
line_type gs_line_type

if abs(abs(rotation)-90)>eps then
	!--- Make Length stretchable
	hotspot2 0, 		0, unID, A2, 1+256	: unID=unID+1
	hotspot2 -0.001, 	0, unID, A2, 3+128	: unID=unID+1
	hotspot2 A2, 		0, unID, A2, 2		: unID=unID+1

	hotspot2 0, 		width, unID, A2, 1+256	: unID=unID+1
	hotspot2 -0.001, 	width, unID, A2, 3+128	: unID=unID+1
	hotspot2 A2, 		width, unID, A2, 2		: unID=unID+1

	line2 0,B/2,0.1,B/2

	if gs_detlevel_2D_m = DETLEVEL_2D_CONTOUR or gs_detlevel_2D_m = DETLEVEL_2D_SIMPLE then		! --- Contour and Simple 2D
		if angCut1 < EPS then cut_width_1 = EPS
		if angCut2 < EPS then cut_width_2 = EPS
		if angCut3 < EPS then cut_width_3 = EPS
		if angCut4 < EPS then cut_width_4 = EPS

		poly2_b 9, 1+2+4+64, gs_fill_pen, gs_back_pen,
				0,												cut_width_4,			1,
				0,												B-cut_width_3,			1,
				cut_width_3*tan(angCut3) * cos(rotation),		B,						1,
				A2-cut_width_1*tan(angCut1) * cos(rotation),	B,						1,
				A2,												B-cut_width_1,			1,
				A2,												cut_width_2,			1,
				A2-cut_width_2*tan(angCut2) * cos(rotation),	0,						1,
				cut_width_4*tan(angCut4) * cos(rotation),		0,						1,
				0,												cut_width_4,			-1

		if gs_detlevel_2D_m = DETLEVEL_2D_SIMPLE then
			if GLOB_SCALE < 201 then
				waveStep = waveLength*4
				if GLOB_SCALE < 101 then waveStep = waveLength*2
				if GLOB_SCALE < 51 	then waveStep = waveLength

				line_type wave_line_type
				sumw = 0
				for sumw=0 to B step waveStep
					if sumw>0 and sumw<B then
						line2 0, sumw, A2, sumw
					endif
				next sumw
			endif
		endif
	else											! --- Detailed 2D

		if bMigrationRotZ and GLOB_CONTEXT = 22 then
			rot2 90
			add2 0,waveHeight/2
		endif

		pen gs_fill_pen
		line_type gs_line_type
		set fill gs_fill_type
		project2{3} 3, 270, 3+32, 15, gs_back_pen, 0, 0, 90 parameters gs_detlevel_3D_m = DETLEVEL_3D_SIMPLE, gs_resol = 12, bSimple3DProjection = 1

		pen gs_cont_pen
		project2{3} 3, 270, 2+32, 15, gs_back_pen, 0, 0, 90 parameters gs_detlevel_3D_m = DETLEVEL_3D_SIMPLE, gs_resol = 12, bSimple3DProjection = 1

		if bMigrationRotZ and GLOB_CONTEXT = 22 then
			del 2
		endif

		if iProfiles = 5 then
			waveStep = waveLength

			line_type wave_line_type
			sumw = 0
			for sumw=0 to B step waveStep
				if sumw>0 and sumw<B then
					line2 0, sumw, A2, sumw
				endif
			next sumw
		endif
	endif

else												! --- Vertical Sheet
	line_type gs_line_type
	set fill gs_fill_type

	if bMigrationRotZ and GLOB_CONTEXT = 22 then
		rot2 -270
		add2 0,waveHeight/2
	endif

	if gs_detlevel_2D_m = DETLEVEL_2D_CONTOUR or gs_detlevel_2D_m = DETLEVEL_2D_SIMPLE then		! --- Contour and Simple 2D
		project2{3} 3, 270, 32+3, 1+2+4+8, gs_back_pen, 0, 0, 90 parameters gs_detlevel_3D_m = DETLEVEL_3D_SIMPLE, gs_resol = 12, bSimple3DProjection = 1
	else
		project2{3} 3, 270, 32+3, 1+2+4+8, gs_back_pen, 0, 0, 90 parameters gs_detlevel_3D_m = DETLEVEL_3D_DETAILED, gs_resol = 36
	endif

	if bMigrationRotZ and GLOB_CONTEXT = 22 then
		del 2
	endif

endif

if bMigrationRotZ then del 3


end




