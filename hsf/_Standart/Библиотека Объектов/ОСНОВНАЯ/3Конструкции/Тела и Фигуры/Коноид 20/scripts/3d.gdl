
if gs_detlevel_3D_m = DLEV3D_OFF then End
if gs_detlevel_3D_m = DLEV3D_SIMPLE then gs_resol = 18

if gs_shadow then
	shadow on
else
	shadow off
endif

if GLOB_CONTEXT<20 or GLOB_CONTEXT>40 then
	resol gs_resol
else
	resol 12
endif

pen gs_cont_pen
material gs_prim_mat

rotx angle_1
roty angle_2

!!----------------!!
!! Length Editing !!
!!----------------!!

unID=1
hotspot 0,0,0,unID,b,1+256 : unID=unID+1
hotspot 0,-1,0,unID,b,3 : unID=unID+1
hotspot 0,b,0,unID,b,2 : unID=unID+1

!!---------------!!
!! Angle Editing !!
!!---------------!!

hotspot 0,0,0,unID,cone_angle,6 : unID=unID+1
hotspot -radius_1+cone_thk_1/2,0,0,unID,cone_angle,4+128 : unID=unID+1
hotspot 0,1,0,unID,cone_angle,7 : unID=unID+1
hotspot (radius_1-cone_thk_1/2)*cos(180-cone_angle),0,(radius_1-cone_thk_1/2)*sin(cone_angle),unID,cone_angle,5 : unID=unID+1

hotspot 0,b,0,unID,cone_angle,6 : unID=unID+1
hotspot -radius_2+cone_thk_2/2,b,0,unID,cone_angle,4+128 : unID=unID+1
hotspot 0,b+1,0,unID,cone_angle,7 : unID=unID+1
hotspot (radius_2-cone_thk_2/2)*cos(180-cone_angle),b,(radius_2-cone_thk_2/2)*sin(cone_angle),unID,cone_angle,5 : unID=unID+1

!!----------------------!!
!! Start Radius Editing !!
!!----------------------!!

hotspot 0,0,0,unID,radius_1,1+128 : unID=unID+1
hotspot 1,0,0,unID,radius_1,3 : unID=unID+1
hotspot -radius_1,0,0,unID,radius_1,2 : unID=unID+1

roty cone_angle/2
hotspot 0,0,0,unID,radius_1,1+128 : unID=unID+1
hotspot 1,0,0,unID,radius_1,3 : unID=unID+1
hotspot -radius_1,0,0,unID,radius_1,2 : unID=unID+1

roty cone_angle/2
hotspot 0,0,0,unID,radius_1,1+128 : unID=unID+1
hotspot 1,0,0,unID,radius_1,3 : unID=unID+1
hotspot -radius_1,0,0,unID,radius_1,2 : unID=unID+1
del 2

!!--------------------!!
!! End Radius Editing !!
!!--------------------!!

hotspot 0,b,0,unID,radius_2,1+128 : unID=unID+1
hotspot 1,b,0,unID,radius_2,3 : unID=unID+1
hotspot -radius_2,b,0,unID,radius_2,2 : unID=unID+1

roty cone_angle/2
hotspot 0,b,0,unID,radius_2,1+128 : unID=unID+1
hotspot 1,b,0,unID,radius_2,3 : unID=unID+1
hotspot -radius_2,b,0,unID,radius_2,2 : unID=unID+1

roty cone_angle/2
hotspot 0,b,0,unID,radius_2,1+128 : unID=unID+1
hotspot 1,b,0,unID,radius_2,3 : unID=unID+1
hotspot -radius_2,b,0,unID,radius_2,2 : unID=unID+1
del 2

!!--------------------------!!
!! Conoid Thickness Editing !!
!!--------------------------!!

hotspot -radius_1,0,0,unID,cone_thk_1,1+128 : unID=unID+1
hotspot -radius_1-1,0,0,unID,cone_thk_1,3 : unID=unID+1
hotspot -radius_1+cone_thk_1,0,0,unID,cone_thk_1,2 : unID=unID+1

hotspot -radius_2,b,0,unID,cone_thk_2,1+128 : unID=unID+1
hotspot -radius_2-1,b,0,unID,cone_thk_2,3 : unID=unID+1
hotspot -radius_2+cone_thk_2,b,0,unID,cone_thk_2,2 : unID=unID+1

roty cone_angle/2
hotspot -radius_1,0,0,unID,cone_thk_1,1+128 : unID=unID+1
hotspot -radius_1-1,0,0,unID,cone_thk_1,3 : unID=unID+1
hotspot -radius_1+cone_thk_1,0,0,unID,cone_thk_1,2 : unID=unID+1

hotspot -radius_2,b,0,unID,cone_thk_2,1+128 : unID=unID+1
hotspot -radius_2-1,b,0,unID,cone_thk_2,3 : unID=unID+1
hotspot -radius_2+cone_thk_2,b,0,unID,cone_thk_2,2 : unID=unID+1

roty cone_angle/2
hotspot -radius_1,0,0,unID,cone_thk_1,1+128 : unID=unID+1
hotspot -radius_1-1,0,0,unID,cone_thk_1,3 : unID=unID+1
hotspot -radius_1+cone_thk_1,0,0,unID,cone_thk_1,2 : unID=unID+1

hotspot -radius_2,b,0,unID,cone_thk_2,1+128 : unID=unID+1
hotspot -radius_2-1,b,0,unID,cone_thk_2,3 : unID=unID+1
hotspot -radius_2+cone_thk_2,b,0,unID,cone_thk_2,2 : unID=unID+1
del 2

rotz 90

resol gs_resol

revolve 5,cone_angle,63+(ABS(SGN (gs_segment)))*64,
		0,radius_1-cone_thk_1,2,
		0,radius_1,2,
		b,radius_2,2,
		b,radius_2-cone_thk_2,2,
		0,radius_1-cone_thk_1,2

body 1
del top
