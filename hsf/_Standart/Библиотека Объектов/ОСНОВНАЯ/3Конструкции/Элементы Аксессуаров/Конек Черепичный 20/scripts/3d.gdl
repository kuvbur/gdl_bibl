
IF gs_detlevel_3D_m = 0 THEN END

IF not(gs_shadow) THEN SHADOW OFF

resol gs_resol
pen gs_cont_pen
material mat1

!!!Moving hotspots
HsID=80
hotspot 0,              0, 0, HsID, inclAngle, 6  : HsID=HsID+1
hotspot 0,             -1, 0, HsID, inclAngle, 7   : HsID=HsID+1
hotspot fullLength / 2, 0, 0, HsID, inclAngle, 4+128   : HsID=HsID+1
roty -inclAngle
hotspot fullLength / 2, 0, 0, HsID, inclAngle, 5   : HsID=HsID+1
del 1

if abs(inclAngle - 90) < EPS then
	hotspot 0, 0, 0,      HsID,ridgeHeight, 1+128  : HsID=HsID+1
	hotspot 0, 0, -1,     HsID, ridgeHeight, 3  : HsID=HsID+1
	hotspot 0, 0, ridgeHeight, HsID, ridgeHeight, 2  : HsID=HsID+1
else
	hotspot A, 0, 0,      HsID,ridgeHeight, 1+128  : HsID=HsID+1
	hotspot A, 0, -1,     HsID, ridgeHeight, 3  : HsID=HsID+1
	hotspot A, 0, ridgeHeight, HsID, ridgeHeight, 2  : HsID=HsID+1
endif

if abs(inclAngle - 90) > EPS then
	hotspot 0,0,0, HsID, A, 1+256  : HsID=HsID+1
	hotspot -1,0,0, HsID, A, 3  : HsID=HsID+1
	hotspot A,0,0, HsID, A, 2  : HsID=HsID+1
endif
roty -inclAngle

addx fullLength
rotz 90
cutplane 90
del 2

nTiles = INT (fullLength / tileLength) + 1
for i = 1 to nTiles
	revolve 5,180,1+2+4+8+16+32,
			0,			innerRadius + 0.02,	2,
			0,			innerRadius + 0.04,	2,
			tileLength,	innerRadius + 0.02,	2,
			tileLength,	innerRadius,		2,
			0,			innerRadius + 0.02,	-1
	addx tileLength
next i
del nTiles
del 1
cutend

end
