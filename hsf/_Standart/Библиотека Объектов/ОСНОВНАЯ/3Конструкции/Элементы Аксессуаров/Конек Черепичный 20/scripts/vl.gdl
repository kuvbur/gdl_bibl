
call "FM_types" parameters all


if gs_cont_pen=0 then parameters gs_cont_pen=2
if gs_fill_pen=0 then parameters gs_fill_pen=91

values "tileLength" range (0, )
values "inclAngle" range [0,90]
values "innerRadius" range (0, )
values "B" range (0.08, )
values "ridgeHeight" range [0, )

VALUES "gs_detlevel_3D"  `Детальный`,`Откл.`
VALUES "gs_detlevel_3D_m"  1, 0

parameters ZZYZX = ridgeHeight + (cos(inclAngle) * innerRadius)
lock "ZZYZX"

if GLOB_MODPAR_NAME = "gs_detlevel_3D" then
	if gs_detlevel_3D = `Откл.` then
		parameters gs_detlevel_3D_m = 0
	else
		parameters gs_detlevel_3D_m = 1
	endif
else
	if gs_detlevel_3D_m = 0 then
		parameters gs_detlevel_3D = `Откл.`
	else
		parameters gs_detlevel_3D = `Детальный`
	endif
endif

If GLOB_MODPAR_NAME = "B" then
	innerRadius = (B - 0.08)/2
	parameters innerRadius = (B - 0.08)/2
else
	B = (innerRadius + 0.04) * 2
	parameters B = (innerRadius + 0.04) * 2
endif

if GLOB_MODPAR_NAME = "fullLength" or GLOB_MODPAR_NAME = "inclAngle" then
	if abs(inclAngle - 90) < EPS then
		A = innerRadius + 0.04
	else
		A = fullLength * cos(inclAngle)
	endif
	ridgeHeight= fullLength * sin(inclAngle)
	parameters A = A
	parameters ridgeHeight= ridgeHeight
else
	parameters fullLength = sqr (A*A + ridgeHeight*ridgeHeight)
	if A < B/2+EPS then
		inclAngle = 90
	else
		inclAngle = atn (ridgeHeight/ A)
	endif
	parameters inclAngle = inclAngle
endif

