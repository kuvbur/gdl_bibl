
hideparameter all "A", "B", "ZZYZX"

call "FM_types" parameters all

values "a" 			range [2 * rx * cos (inc_angle), )
values "half_a"	 	range [rx * cos (inc_angle), )
values "b" 			range [0.04, )
values "di" 		range [0.01, )
values "ror" 		range [2*di, )
values "plateThk" 	range [0, B - di/2)
values "plateDia" 	range (0, )

values{2} "iDetlevel3D"	DETLEVEL3D_DETAILED,	typRes[1],
						DETLEVEL3D_SIMPLE,		typRes[2],
						DETLEVEL3D_OFF,			typRes[3]

values "gs_resol" 		range [3,)
values "inc_angle" 		range [0,90]
values "length" 		range [2*rx,)
values "half_length" 	range [rx,)

IF gs_cont_pen=0 THEN PARAMETERS gs_cont_pen=7
IF gs_fill_pen=0 THEN PARAMETERS gs_fill_pen=91

if inc_angle > 15 then
	lock "gs_fill_pen"
	hideparameter "gs_fill_pen"
endif

IF iDetlevel3D = DETLEVEL3D_SIMPLE THEN HIDEPARAMETER "gs_resol"
IF iDetlevel3D = DETLEVEL3D_OFF THEN HIDEPARAMETER "gs_resol", "gs_shadow"

if GLOB_MODPAR_NAME = "A" or GLOB_MODPAR_NAME = "half_a" then
	if GLOB_MODPAR_NAME = "half_a" then
		A = 2 * half_a
		parameters A = A
	else
		half_a = A/2
		parameters half_a = half_a
	endif

	zzyzx = A*tan (inc_angle)
	length = A/cos (inc_angle)
	half_length = A/cos (inc_angle)/2
	parameters zzyzx = zzyzx, length = length, half_length = half_length
else
	if GLOB_MODPAR_NAME = "ZZYZX" then
		a = zzyzx/ tan (inc_angle)
		length = zzyzx/ sin (inc_angle)
		half_length = (zzyzx/ sin (inc_angle))/2
		parameters a = a, length = length, half_length = half_length
	else
		if GLOB_MODPAR_NAME = "half_length" then
			length = 2 * half_length
			parameters length = length
		else
			half_length = length/2
			parameters half_length = half_length
		endif

		a = length* cos (inc_angle)
		zzyzx = length* sin (inc_angle)
		parameters a = a, zzyzx = zzyzx
	endif

	half_a = A/2
	parameters half_a = half_a
endif

if bAutoPlateResize then
	plateDia = di + 4 * plateThk
	parameters plateDia = plateDia
	hideparameter "plateDia"
	lock "plateDia"
endif

