
PEN gs_cont_pen

! ======================================================================
! SCALE
! ======================================================================
call "2dDetailLevel" parameters gs_detlevel_2D_m = gs_detlevel_2D_m,
				returned_parameters det2D
if bChairBottom then
	if iBottomSideType = SIDETYPE_WHEELCHAIR and iSizingType = SIZING_CHAIR_DIST then WidForWheelchair = DistNextToWheelchair*2 + wheelchairw
endif


! =============================================================================
! Min. Space
! =============================================================================

reqBMinSpace = 0
call "fa_minimalspace" parameters all MSType = 0, returned_parameters	reqBMinSpace,
																		MSFillType,
																		MSFillPen,
																		MSFillBackPen,
																		MSContLineType,
																		MSContLinePen
if reqBMinSpace <> 0 then gosub "minimal_space"

fill gs_fill_type
pen gs_cont_pen
line_type 1


! ==============================================================================
! Call Layout
! ==============================================================================
! --- Top ----------------------------------------------------------------------

if TopSide then
	if bChairBottom and iBottomSideType < 2 then
		dist = RealDistH/2
	else
		dist = (WidForWheelchair-chairw)/2
	endif

	add2 -tablew/2+dist+addtablew*(iLeftSideType = SIDETYPE_WHEELCHAIR), tabled/2+ChairTableDist

	chairHotspotUnId = 100
	for kk = 1 to ChairNumHor
		gosub "chair"
		chairHotspotUnId = chairHotspotUnId + 100	! macro uses maximum 100 hotspot IDs
		hotspot2 chairw/2, -ChairTableDist, chairHotspotUnId ,	"ChairTableDist", 1+128	: chairHotspotUnId = chairHotspotUnId + 1
		hotspot2 chairw/2, -1, 				chairHotspotUnId ,	"ChairTableDist", 3		: chairHotspotUnId = chairHotspotUnId + 1
		hotspot2 chairw/2, 0, 				chairHotspotUnId ,	"ChairTableDist", 2		: chairHotspotUnId = chairHotspotUnId + 1
		if bChairBottom and iBottomSideType = 2 and kk = 1 then
			add2 chairw+dist+RealDistH/2,0
		else
			add2 chairw+RealDistH,0
		endif
	next kk
	del ChairNumHor

	del 1
endif

! --- Bottom -------------------------------------------------------------------
if bChairBottom then
	add2 -tablew/2+RealDistH/2+WidForWheelchair*(iBottomSideType = SIDETYPE_WHEELCHAIR)+addtablew*(iLeftSideType = SIDETYPE_WHEELCHAIR), -tabled/2-ChairTableDist

	ChairNumHor = ChairNumHor - (iBottomSideType = 2)
	chairHotspotUnId = 5000						! maximum of 50 chairs for each side!
	for kk = 1 to ChairNumHor
		mul2 1,-1
		gosub "chair"
		chairHotspotUnId = chairHotspotUnId + 100	! macro uses maximum 100 hotspot IDs
		del 1
		hotspot2 chairw/2, ChairTableDist, 	chairHotspotUnId ,	"ChairTableDist", 1+128	: chairHotspotUnId = chairHotspotUnId + 1
		hotspot2 chairw/2, 1, 				chairHotspotUnId ,	"ChairTableDist", 3		: chairHotspotUnId = chairHotspotUnId + 1
		hotspot2 chairw/2, 0, 				chairHotspotUnId ,	"ChairTableDist", 2		: chairHotspotUnId = chairHotspotUnId + 1
		add2 chairw+RealDistH,0
	next kk
	del ChairNumHor
	del 1

	if iBottomSideType = 2 then
		add2 -tablew/2-wheelchairw/2+WidForWheelchair/2, -tabled/2
		mul2 1, -1
		gosub "wheelchair"
		del 2
	endif
endif
! --- Left ---------------------------------------------------------------------
if bChairLeft then
	if iLeftSideType = SIDETYPE_CHAIR then
		add2 -tablew/2-ChairTableDist, -tabled/2+RealDistV/2
	
		chairHotspotUnId = 10000
		for kk = 1 to ChairNumVert
			rot2 90
			gosub "chair"
			chairHotspotUnId = chairHotspotUnId + 100	! macro uses maximum 100 hotspot IDs
			hotspot2 chairw/2, -ChairTableDist, chairHotspotUnId ,	"ChairTableDist", 1+128	: chairHotspotUnId = chairHotspotUnId + 1
			hotspot2 chairw/2, -1, 				chairHotspotUnId ,	"ChairTableDist", 3		: chairHotspotUnId = chairHotspotUnId + 1
			hotspot2 chairw/2, 0, 				chairHotspotUnId ,	"ChairTableDist", 2		: chairHotspotUnId = chairHotspotUnId + 1
			del 1
			add2 0,chairw+RealDistV
		next kk
		del ChairNumVert
		del 1
	endif
	
	IF iLeftSideType = SIDETYPE_WHEELCHAIR THEN
		ADD2 -tablew/2, -wheelchairw/2
		ROT2 90
		GOSUB "wheelchair"
		DEL 2
	ENDIF
endif
! --- Right --------------------------------------------------------------------
IF RightSide=1 THEN

	add2 tablew/2+ChairTableDist, tabled/2-RealDistV/2
	chairHotspotUnId = 15000
	For kk=1 to ChairNumVert
		ROT2 -90
		GOSUB "chair"
		chairHotspotUnId = chairHotspotUnId + 100	! macro uses maximum 100 hotspot IDs
		hotspot2 chairw/2, -ChairTableDist, chairHotspotUnId ,  "ChairTableDist", 1+128				: chairHotspotUnId =chairHotspotUnId +1
		hotspot2 chairw/2, -1, chairHotspotUnId , "ChairTableDist", 3					: chairHotspotUnId =chairHotspotUnId +1
		hotspot2 chairw/2, 0, chairHotspotUnId , "ChairTableDist", 2		: chairHotspotUnId =chairHotspotUnId +1
		DEL 1
		add2 0,-chairw-RealDistV
	NEXT kk
	DEL ChairNumVert
	DEL 1

ENDIF


! ==============================================================================
! Table
! ==============================================================================

add2 -tablew/2, -tabled/2

POLY2_b 5, 1+2+64,gs_fill_pen,gs_back_pen,
		0,0,1,
		0,tabled,1,
		tablew,tabled,1,
		tablew,0,1,
		0,0,-1
del 1

! --- Make Length stretchable --------------------------------------------------

unID = 50
HOTSPOT2 0, tablehalfd, unID, tablehalfw, 1+128, tablew
unID=unID+1
HOTSPOT2 -0.001, tablehalfd, unID, tablehalfw, 3, tablew
unID=unID+1
HOTSPOT2 tablehalfw, tablehalfd, unID, tablehalfw, 2, tablew
unID=unID+1

HOTSPOT2 0, tablehalfd, unID, tablehalfw, 1+128, tablew
unID=unID+1
HOTSPOT2 0.001, tablehalfd, unID, tablehalfw, 3, tablew
unID=unID+1
HOTSPOT2 -tablehalfw, tablehalfd, unID, tablehalfw, 2, tablew
unID=unID+1

HOTSPOT2 0, -tablehalfd, unID, tablehalfw, 1+128, tablew
unID=unID+1
HOTSPOT2 -0.001, -tablehalfd, unID, tablehalfw, 3, tablew
unID=unID+1
HOTSPOT2 tablehalfw, -tablehalfd, unID, tablehalfw, 2, tablew
unID=unID+1

HOTSPOT2 0, -tablehalfd, unID, tablehalfw, 1+128, tablew
unID=unID+1
HOTSPOT2 0.001, -tablehalfd, unID, tablehalfw, 3, tablew
unID=unID+1
HOTSPOT2 -tablehalfw, -tablehalfd, unID, tablehalfw, 2, tablew
unID=unID+1

! --- Make Width stretchable ---------------------------------------------------

IF bChairLeft and iLeftSideType = SIDETYPE_WHEELCHAIR and iSizingType = SIZING_TOTAL_SPACE THEN

ELSE
	HOTSPOT2 tablehalfw, 0, unID, tablehalfd, 1+128, tabled
unID=unID+1
	HOTSPOT2 tablehalfw, -0.001, unID, tablehalfd, 3, tabled
unID=unID+1
	HOTSPOT2 tablehalfw, tablehalfd, unID, tablehalfd, 2, tabled
unID=unID+1

	HOTSPOT2 tablehalfw, 0, unID, tablehalfd, 1+128, tabled
unID=unID+1
	HOTSPOT2 tablehalfw, 0.001, unID, tablehalfd, 3, tabled
unID=unID+1
	HOTSPOT2 tablehalfw, -tablehalfd, unID, tablehalfd, 2, tabled
unID=unID+1

	HOTSPOT2 -tablehalfw, 0, unID, tablehalfd, 1+128, tabled
	unID=unID+1
	HOTSPOT2 -tablehalfw, -0.001, unID, tablehalfd, 3, tabled
	unID=unID+1
	HOTSPOT2 -tablehalfw, tablehalfd, unID, tablehalfd, 2, tabled
	unID=unID+1

	HOTSPOT2 -tablehalfw, 0, unID, tablehalfd, 1+128, tabled
	unID=unID+1
	HOTSPOT2 -tablehalfw, 0.001, unID, tablehalfd, 3, tabled
	unID=unID+1
	HOTSPOT2 -tablehalfw, -tablehalfd, unID, tablehalfd, 2, tabled
	unID=unID+1
ENDIF

! --- Middle hotspot -----------------------------------------------------------
hotspot2 0, 0, 		unID: unID = unID + 1

END

! =============================================================================
! Call Chair
! =============================================================================

"chair":

	IF det2D = 1 then						! 1/200
		! macro uses maximum 100 hotspot IDs
		CALL "fa_ChairSymbol" PARAMETERS ALL a=chairw, b=chaird,
				gs_SymbolType_m=3,
				gs_hotspotUnIdBegin = chairHotspotUnId,
				calledAsMacro = 1
	else
		IF det2D = 2 then					! 1/100
			CALL "fa_ChairSymbol" PARAMETERS ALL a=chairw, b=chaird,
					gs_SymbolType_m=4,
					gs_hotspotUnIdBegin = chairHotspotUnId,
					calledAsMacro = 1

		else
			IF det2D = 4 then				! Symbolic
				CALL "fa_ChairSymbol" PARAMETERS ALL a=chairw, b=chaird,
							gs_hotspotUnIdBegin = chairHotspotUnId,
							calledAsMacro = 1

			ENDIF
		ENDIF
	ENDIF

	IF det2D = 3 then 	! 1/50

		POLY2_B 5, 1+2+4+64, gs_fill_pen, gs_back_pen,
				0,0,1,
				chairw,0,1,
				chairw,chaird,1,
				0,chaird,1,
				0,0,-1

		LINE2 0,chaird-0.05,chairw,chaird-0.05
		LINE2 0.05,chaird-0.05,0.05,chaird
		LINE2 chairw-0.05,chaird-0.05,chairw-0.05,chaird

		HOTSPOT2 chairw/2, chaird, chairHotspotUnId
	ENDIF


	RETURN

! =============================================================================
! Call Wheelchair
! =============================================================================

"wheelchair":
	HOTSPOT2 wheelchairw/2, wheelchaird, chairHotspotUnId
	MUL2 wheelchairw/0.6588046718894, wheelchaird/1.105992308983
	ADD2 0.3287397091834, 0.805992308983

	poly2_b 174, 1+2+4+64, gs_fill_pen, gs_back_pen,
		0.0699109858752, -0.4377411713173,      1,
		0.06961205752122, -0.5051879345449,      1,
		0.1709771871749, -0.505637191261,    900,
		0, 20.38114578997,   4001,
		0.07580139519355, -0.5405178443802,      1,
		0.02585207532455, -0.5588236011659,    900,
		0, -49.01651392956,   4001,
		0.07242990196594, -0.5845246002173,      1,
		0.1271753054403, -0.6147323549413,    900,
		0, 60.97396833238,   4001,
		0.0741988144792, -0.6479446877784,      1,
		0.02863596570631, -0.6765092331259,    900,
		0, -42.20707946757,   4001,
		0.0815753593333, -0.6859605315352,      1,
		0.1056144213419, -0.6902522382011,    900,
		0, 51.58392164706,   4001,
		0.08731469101803, -0.7064205751111,      1,
		0.1214776894418, -0.7279992907933,    900,
		0, 27.17156974681,   4001,
		0.08123075275881, -0.7244026924792,      1,
		0.1978383216048, -0.7348231238782,    900,
		0, 34.27970696995,   4001,
		0.09561660494458, -0.7918900244927,      1,
		0.1199522473849, -0.7783042646962,    900,
		0, 107.9927772044,   4001,
		0.1403908112835, -0.7972531820266,      1,
		0.07864031085567, -0.7400033451248,    900,
		0, 54.64920571484,   4001,
		0.1610623697874, -0.7227617579061,      1,
		0.268125, -0.7227617579061,      1,
		0.268125,      -0.4915,      1,
		0.27525,      -0.4915,      1,
		0.28375,      -0.4915,    900,
		0,          180,   4001,
		0.29225,      -0.4915,      1,
		0.29225, -0.3332584609492,      1,
		0.28375, -0.3332584609492,    900,
		0,          180,   4001,
		0.27525, -0.3332584609492,      1,
		0.268125, -0.3332584609492,      1,
		0.268125,    -0.284375,      1,
		0.28375,    -0.284375,    900,
		0,          180,   4001,
		0.299375,    -0.284375,      1,
		0.299375,   -0.2578125,      1,
		0.309375,   -0.2578125,      1,
		0.3171875,   -0.2578125,    900,
		0,          180,   4001,
		0.325,   -0.2578125,      1,
		0.325, -0.07255735226188,      1,
		0.307171992608, -0.05819516251856,    900,
		0, 39.22823336834,   4001,
		0.330064962706, -0.0580459583485,      1,
		0.3299159669601, -0.03518496757137,      1,
		0.3043372317511, -0.03535167612608,    900,
		0, 35.74569991953,   4001,
		0.325, -0.02027356301712,      1,
		0.325,    0.2578125,      1,
		0.3171875,    0.2578125,    900,
		0,          180,   4001,
		0.309375,    0.2578125,      1,
		0.299375,    0.2578125,      1,
		0.299375,     0.284375,      1,
		0.28375,     0.284375,    900,
		0,          180,   4001,
		0.268125,     0.284375,      1,
		0.268125, 0.1816504152777,      1,
		0.243125, 0.1816504152777,      1,
		0.243125, 0.1172229397843,      1,
		0.2404875405268, 0.06365470357756,    900,
		0, 19.38814879025,   4001,
		0.225192598715, 0.1150607039836,      1,
		0.2019872218463, 0.1930535219627,    900,
		0, -43.05283234833,   4001,
		0.1657004116051, 0.1202205859072,      1,
		0.1436170589716, 0.07589603142661,    900,
		0, 64.00558269769,   4001,
		0.1134552908559, 0.1151720844051,      1,
		0.04241254980253, 0.2076825251274,    900,
		0, -17.79653621073,   4001,
		0.08178106210694, 0.09788556279264,      1,
		0.04385468475608, 0.07344214671472,    900,
		0, 8.527311819779,   4001,
		0.07773730686117, 0.103239103066,      1,
		0.1036572189073, 0.1260335162455,    900,
		0, -40.37541431465,   4001,
		0.06914494344729, 0.1254590989326,      1,
		0.05078564979293, 0.1251535295088,    900,
		0, 79.26318158033,   4001,
		0.05390572969654, 0.1432483391943,      1,
		0.01152286874335, -0.102549789882,    900,
		0, 19.82755752493,   4001,
		-0.03197919185522, 0.1430527302265,      1,
		-0.02316563975879, 0.09329346420087,    900,
		0, 58.08921606063,   4001,
		-0.07006372502206, 0.1121145389473,      1,
		0.05252089042591, 0.06291908450712,    900,
		0, 4.217471461778,   4001,
		-0.07334972522561, 0.102966166768,      1,
		-0.1388160361531, 0.1044299558656,      1,
		-0.140064487144, 0.04859439807969,    900,
		0, 27.74387848431,   4001,
		-0.1649521282605, 0.09859213265633,      1,
		-0.1852812529486, 0.1394320891459,    900,
		0, -63.33149475406,   4001,
		-0.2126523054684, 0.1029355024479,      1,
		-0.2352314923738, 0.0728283937839,    900,
		0, 48.97611854914,   4001,
		-0.243125, 0.1096244562195,      1,
		-0.243125, 0.1816504152777,      1,
		-0.268125, 0.1816504152777,      1,
		-0.268125,     0.284375,      1,
		-0.28375,     0.284375,    900,
		0,          180,   4001,
		-0.299375,     0.284375,      1,
		-0.299375,    0.2578125,      1,
		-0.309375,    0.2578125,      1,
		-0.3171875,    0.2578125,    900,
		0,          180,   4001,
		-0.325,    0.2578125,      1,
		-0.325, -0.04225661254183,      1,
		-0.3262815407935, -0.04400793524165,      1,
		-0.315988159263, -0.05154017834879,    900,
		0, 46.89406488101,   4001,
		-0.328521362038, -0.05390813480034,      1,
		-0.3259561855779, -0.06748519053862,      1,
		-0.3167809195752, -0.06575166474193,    900,
		0, 17.63274833237,   4001,
		-0.325, -0.07018306800491,      1,
		-0.325,   -0.2578125,      1,
		-0.3171875,   -0.2578125,    900,
		0,          180,   4001,
		-0.309375,   -0.2578125,      1,
		-0.299375,   -0.2578125,      1,
		-0.299375,    -0.284375,      1,
		-0.28375,    -0.284375,    900,
		0,          180,   4001,
		-0.268125,    -0.284375,      1,
		-0.268125, -0.3332584609492,      1,
		-0.27525, -0.3332584609492,      1,
		-0.28375, -0.3332584609492,    900,
		0,          180,   4001,
		-0.29225, -0.3332584609492,      1,
		-0.29225,      -0.4915,      1,
		-0.28375,      -0.4915,    900,
		0,          180,   4001,
		-0.27525,      -0.4915,      1,
		-0.268125,      -0.4915,      1,
		-0.268125, -0.7227617579061,      1,
		-0.1560055516513, -0.7227617579061,      1,
		0.1865942819458, -0.6537021936188,    900,
		0, 10.57249370465,   4001,
		-0.1375184108527, -0.7844493991996,      1,
		-0.1055369771522, -0.7715480606607,    900,
		0, 151.7934839317,   4001,
		-0.07125551772059, -0.7752948161735,      1,
		-0.0635513932243, -0.7048048601356,      1,
		-0.1515125867838, -0.6951912353851,    900,
		0, 25.78659536579,   4001,
		-0.06812839523312, -0.6655826225724,      1,
		-0.08375290458484, -0.6502129578668,    900,
		0, 36.36792929997,   4001,
		-0.06205792267329, -0.6533241707335,      1,
		-2.291381635447, -0.3336234838441,    900,
		0, 3.743959783678,   4001,
		-0.04593992324398, -0.5070716393012,      1,
		-0.2781752175561, -0.4891327263419,    900,
		0, 10.4729999853,   4001,
		-0.0465480116072, -0.4645588787249,      1,
		0.1232580954407, -0.4465437695673,    900,
		0, -9.09191273604,   4001,
		-0.04726131219589,      -0.4375,      1,
		0.06991182073003,      -0.4375,      1,
		0.0699109858752, -0.4377411713173,      1

		IF det2D = 3 then 	! 1/50
			line2       -0.299375, -0.07628437448606,    -0.299375,   -0.2578125
			line2       -0.309375, -0.07719198387294,    -0.309375,   -0.2578125
			line2        0.243125, -0.02120625030881,     0.243125, -0.7227617579061
			line2        0.268125, -0.07059747233837,     0.268125,    -0.284375
			line2       -0.243125, -0.000155747368224,    -0.243125, -0.7227617579061
			line2       -0.268125, -0.03857671869333,    -0.268125,    -0.284375
			line2    -0.1520915148884, -0.1065066010139, -0.151029537473, -0.3015103855282
			line2    0.001669998793862, -0.1818153308617, -0.01308536342569, -0.3005797036428
			line2    0.01235603168089, -0.1849981383192, 0.02694236770676, -0.2714617365647
			line2        0.299375, -0.08664536654569,     0.299375,   -0.2578125
			line2        0.309375, -0.08411430360767,     0.309375,   -0.2578125
			line2    0.02101712689423, -0.04558416575846, -0.002515653313797, -0.0443944274274
			line2       -0.309375,    0.2578125,    -0.309375, 0.0529154040713
			line2    -0.2680645413204, 0.02874800074061, -0.2474907844493, -0.005453150768134
			line2    -0.2578007313063, 0.01168577318793, -0.2301136762353, -0.01065429456878
			line2    -0.2529288371149, 0.007754750330422, -0.2554360182789, 0.007754750330422
			line2    -0.04294410840957, -0.01498858332249, -0.04429096867392, -0.05048727255583
			line2    -0.03462735474607, -0.009479931956469, -0.01023010937634, -0.008186598488633
			line2    -0.04694658020728, -0.007978633969815, -0.03894163661188, -0.02199853267517
			line2    -0.01139292416353, -0.04303907315951, -0.01813050393668, -0.05699570071758
			line2        0.309375,    0.2578125,     0.309375, 0.08855857924235
			line2    0.142889228747, -0.06249393488544, 0.1600745908043, -0.1631917917314
			line2    0.02270180392415, -0.04551607645492, 0.04588578926359, -0.04245432651525
			line2    0.07030285331154, -0.01361674791344, 0.05975383666704, -0.03294189840787
			line2    0.3182506781715, 0.006987497858453, 0.3095709181006, 0.08722831374083
			line2        0.268125, -0.04002156234562,     0.268125, -0.05907065993451
			line2    -0.1590794996204,      -0.4375,    -0.268125,      -0.4375
			line2        -0.27525, -0.3332584609492,     -0.27525,      -0.4915
			line2    -0.1581266127748, -0.6227755188263,    -0.268125, -0.6227755188263
			line2    -0.1581702145855, -0.7109849251512,    -0.268125, -0.7109849251512
			line2    0.1628703291935, -0.7048316458592, 0.1737551120181, -0.5830401190403
			line2        0.268125,      -0.4375, 0.1588896609341,      -0.4375
			line2    0.06451745815623, -0.4009733604229, 0.0333732812797, -0.2987513896672
			line2         0.27525, -0.3332584609492,      0.27525,      -0.4915
			line2    0.1702038699209, -0.6227755188263,     0.268125, -0.6227755188263
			line2    0.1612683846754, -0.7109849251512,     0.268125, -0.7109849251512
			line2    0.1121803208346, -0.7275928471983, 0.08994070933793, -0.7089773550333
			line2    0.1381045009749, -0.7293680486139, 0.1539056933715, -0.7194574647597
			line2       -0.268125, -0.3332584609492,    -0.268125,      -0.4915
			line2          -0.325, -0.04225661254183, -0.3202666891338, -0.03578818421907
			line2       -0.299375,    0.2578125,    -0.299375, 0.08872944710719
			line2       -0.268125, 0.1816504152777,    -0.268125, 0.1020475266612
			line2        0.268125, 0.1816504152777,     0.268125, 0.1103699061604
			line2        0.299375,    0.2578125,     0.299375, 0.1012838516733
			line2        0.268125, -0.3332584609492,     0.268125,      -0.4915
			arc2     1.376460181551, -0.3526722323845, 1.220521905922, 174.1619497356, 189.4894586961
			arc2     0.01552355324828, 0.05388884722445, 0.1760827589272, 220.6612217709, 316.6857818995
			arc2     -0.01023010937634, 0.02764152792779, 0.03582812641642,          270, 15.43765830631
			arc2     0.0847017606252, -0.03841596986342, 0.08971501775787, 183.7075726701, 207.2949552467
			arc2     -0.08773165152654, -0.3376791466589, 0.1796835667357, 57.27401046285, 81.21954385177
			arc2     -0.2406109606676, 0.05401239469173, 0.06825310283846, 145.4123041359, 173.5456795291
			arc2     -0.2745409385556, 0.1563089133673, 0.05463938464898, 266.226815047, 295.2148863241
			arc2     -0.2795180840264, 0.08084029165095, 0.02099318003583, 86.22681504703, 145.4123041359
			arc2     -0.03738494437705, 0.3832726928529, 0.4401735206201, 245.8171644941, 255.6440466789
			arc2     0.4931283707356, -0.0289941225663, 0.8066726911183, 173.5456795291, 179.2953030278
			arc2     -0.2950355105125, -0.01929978358455, 0.01844919241228, 179.2953030278, 256.2890514595
			arc2     -0.3113819986252, -0.0422896092993, 0.01100937116769, 76.41853323444, 143.804978186
			arc2     -0.3071895832147, -0.04572722606086, 0.0315405616738, 244.4064397008, 307.7799699574
			arc2     -0.2657065290578, -0.01641086079456, 0.02125758125157, 284.3528448755, 31.02907886672
			arc2     -0.2803594203352, 0.0408540003419, 0.08036740737009, 256.2890514595, 284.3528448755
			arc2     -0.2959568651273, -0.06021881700952, 0.01320534518056, 307.7799699574, 7.826533316046
			arc2     -0.2589636970878, -0.05513392945809, 0.02413565859558, 139.4893858606, 187.826533316
			arc2     -0.1944110962998, 0.03359352542969, 0.05685546401772, 231.1007136051, 245.8171644941
			arc2     0.06312254338748, -0.03627003766242, 0.2263852153101, 180.5698324652, 198.0744437975
			arc2     -0.1603505449305, -0.09717976530966, 0.05576508795347, 40.66122177089, 75.64404667887
			arc2     -0.03652227570408, 0.02626556811647, 0.03579569109406, 202.3739085626, 273.0344922229
			arc2     -0.0002669970738189, 8.353186617571E-005, 0.04453476527171, 209.7250769355, 267.1057819893
			arc2     -0.03053100930797, -0.05100934091693, 0.01376985973517, 177.8271757872, 334.2310136226
			arc2     -0.1026475136933, -0.08951967212306, 0.05456504996706, 205.1048832142, 248.8274654062
			arc2     0.04385468475608, 0.07344214671472, 0.04512084538789, 6.409897252998, 32.80163710633
			arc2     0.292193561974, 0.08534858108624, 0.01747872709336, 6.173758604278, 78.55295450077
			arc2     0.2404875405268, 0.06365470357756, 0.05363312523779,  67.14854275, 87.18128920324
			arc2     0.331561428183, 0.2797674044032, 0.1808858558084, 247.14854275, 258.5529545008
			arc2     0.2092552934427, -0.0236187406415, 0.0271676638398, 34.54852668227, 109.9444110456
			arc2     0.02646252360684, -0.06846898800107, 0.02417882449291, 207.2949552467, 338.4679938428
			arc2     -0.08734140510812, 0.05870319902353, 0.1771422473449, 339.5863681653, 6.409897252998
			arc2     -0.05146711388443, -0.03772138912468, 0.1079549740594, 338.4679938428, 0.2380718141584
			arc2     0.04345454375292, -0.02404460613094, 0.01856956540583, 277.5231260894, 331.3712053776
			arc2     0.05834510595668, 0.0044834119682, 0.02169339783306, 239.1700596447, 339.5863681653
			arc2     -0.1374499807868, -0.3235760108996, 0.3603520195263, 59.17005964471, 64.88479490604
			arc2     0.02148600392844, -0.03630987417462, 0.009286136443934, 267.1057819893, 277.5231260894
			arc2     0.2307551719247, -0.08286796731702, 0.09019714611903, 109.9444110456, 166.9451729663
			arc2     0.09145681026984, -0.3420275754817, 0.1758271233598, 109.3703162414, 117.8162673097
			arc2     -0.0784960699186, -0.2039068904355, 0.2420199979759, 354.1619497356, 9.684941315946
			arc2     0.2949992926387, -0.04833726604192, 0.03855719620407, 246.707134283, 320.9981852237
			arc2     0.287895375838, -0.06483803163917, 0.02059220527153, 164.4090395352, 246.707134283
			arc2     0.2787932096021, 0.002719328892084, 0.03968764407502, 248.14341158, 6.173758604279
			arc2     0.2907304279401, 0.03247922754589, 0.07175240276013, 214.5485266823, 248.14341158
			arc2     0.2330924911387, -0.04954611114006, 0.036304183049, 344.4090395352, 23.68288089132
			arc2     0.03406758680191, -0.590794978319, 0.1948367658377, 176.3024276212, 194.835463831
			arc2     0.02997782774812, -0.4685623489197, 0.1915921254962, 164.16986618, 184.4975490501
			arc2     -0.08284241069815, -0.3931236237353, 0.05099809040767, 208.6929997023, 254.3358433259
			arc2     0.1232580954407, -0.4465437695673, 0.1707590646166, 157.3879190458, 176.9640711131
			arc2     -0.3424985981528, -0.3629505286571, 0.1955674597282, 344.16986618, 7.449313968541
			arc2     0.1394981039966, -0.2999281916515, 0.2905319496981, 180.3120258536, 187.4493139685
			arc2     -0.3182041575621, -0.2626715480061, 0.3074646431689, 337.3879190458, 355.6679718032
			arc2     -0.8212616482963, -0.5355197095845, 0.6622766780817, 356.3024276212, 4.497549050074
			arc2     0.1865942819458, -0.6537021936188, 0.3494908716981, 188.2610367049, 191.3966766399
			arc2     -0.0866688712141, -0.5205255218892, 0.151637145451, 253.4822664913, 271.2880541086
			arc2     -0.07105616559474, -0.6911104057799, 0.08913894169771, 152.6529180408, 188.2610367049
			arc2     -0.1195757182875, -0.6314910450196, 0.03589515692522, 194.835463831, 253.4822664913
			arc2     -0.08375290458484, -0.6502129578668, 0.02191693148331, 271.2880541086, 315.4710947801
			arc2     -0.05435480977365, -0.4371904173898, 0.1242670161311, 359.7460631156, 16.94451309115
			arc2     0.2420512239294, -0.2351730541287, 0.218148317661, 189.575590394, 196.9445130912
			arc2     0.1190348442008, -0.4655442419724, 0.02515447209654, 79.37708562866, 135.3133580041
			arc2     0.059413576945, -0.5728211587431, 0.1147972725827, 354.8929158479, 9.489458696106
			arc2     0.1436552116788, -0.7031143475663, 0.01929170429306, 302.0961345402, 354.8929158479
			arc2     0.12636348588, -0.7106484614357, 0.02209693145162, 230.0692479595, 302.0961345401
			arc2     0.07864031085567, -0.7400033451248, 0.084206105054, 11.81513385019, 17.40343245413
			arc2     0.1056144213419, -0.6902522382011, 0.02441915740477, 221.4615204823, 230.0692479595
			arc2     -0.3167809195752, -0.06575166474193, 0.009337591654593, 208.3317913994, 244.4064397008
			arc2     -0.2352314923738, 0.0728283937839, 0.03763319908551, 102.1076149985, 115.2148863241
			arc2     0.3043372317511, -0.03535167612607, 0.02557927846196, 36.1191179668, 64.09629019921
			arc2     0.05252089042591, 0.06291908450712, 0.1320877764295, 162.3509749148, 202.3739085626
		ENDIF
	DEL 2
RETURN

! =============================================================================
! Min. Space
! =============================================================================

"minimal_space":

	unID = 3000
	pen MSContLinePen
	fill MSFillType
	line_type MSContLineType

	add2 -tablew/2, -tabled/2

	adx = addtablew*(iLeftSideType = SIDETYPE_WHEELCHAIR)
	POLY2_b 5, 1+2+4+64, MSFillPen,MSFillBackPen,
		0,0,0,
		0,tabled,0,
		tablew,tabled,0,
		tablew,0,0,
		0,0,-1

	if bChairLeft and iLeftSideType = SIDETYPE_WHEELCHAIR then
		if iSizingType = SIZING_CHAIR_DIST THEN
			DistNextToWheelchair = wheelchairw/2+DistNextToWheelchair-tabled/2
		else
			DistNextToWheelchair = WidForWheelchair/2-tabled/2
		endif
	endif

	if TopSide=1 then
		add2 0,tabled
		PUT	adx,0,(iLeftSideType <> SIDETYPE_WHEELCHAIR)
		if bChairLeft and iLeftSideType = SIDETYPE_WHEELCHAIR THEN PUT adx,DistNextToWheelchair,1
		PUT	adx,min_pl,1
		PUT	tablew,min_pl,1
		PUT	tablew,0,0
		PUT	adx,0,-1

		poly2_b NSP/3, 1+2+4+64,MSFillPen,MSFillBackPen,
			GET(NSP)


		hotline2 adx, min_pl, tablew, min_pl
		hotline2 tablew, min_pl, tablew, 0
		hotline2 adx, min_pl, adx, DistNextToWheelchair*(iLeftSideType = SIDETYPE_WHEELCHAIR)

		hotspot2 adx, min_pl,    10
		hotspot2 tablew, min_pl, 11
		del 1
	endif

	if bChairBottom then
		if iBottomSideType = 1 then
			PUT	adx,0,(iLeftSideType <> SIDETYPE_WHEELCHAIR)
			if bChairLeft and iLeftSideType = SIDETYPE_WHEELCHAIR then PUT adx,-DistNextToWheelchair,1
			PUT	adx,-min_pl,1
			PUT	tablew,-min_pl,1
			PUT	tablew,0,0
			PUT	adx,0,-1
	
			poly2_b NSP/3, 1+2+4+64,MSFillPen,MSFillBackPen,
				GET(NSP)
	
			hotline2 adx, -min_pl, tablew, -min_pl
			hotline2 tablew, -min_pl, tablew, 0
			hotline2 adx, -min_pl, adx, -DistNextToWheelchair*(iLeftSideType = SIDETYPE_WHEELCHAIR)
	
			hotspot2 adx, -min_pl,    20
			hotspot2 tablew, -min_pl, 21
		endif

		if iBottomSideType = 2 then
			if ABS(min_plw - min_pl) > EPS then
				poly2_b 7, 1+2+4+64,MSFillPen,MSFillBackPen,
					-AddSideSpaceSize,0,1,
					-AddSideSpaceSize,-min_plw,1,
					WidForWheelchair,-min_plw,1,
					WidForWheelchair,-min_pl,1,
					tablew,-min_pl,1,
					tablew,0,0,
					-AddSideSpaceSize,0,-1
	
				hotline2 -AddSideSpaceSize, -min_plw, WidForWheelchair, -min_plw
				hotline2 WidForWheelchair, -min_plw, WidForWheelchair, -min_pl
				hotline2 WidForWheelchair, -min_pl, tablew, -min_pl
				hotline2 tablew, 0, tablew, -min_pl
				hotline2 -AddSideSpaceSize, 0, -AddSideSpaceSize, -min_plw
	
				hotspot2 -AddSideSpaceSize, -min_plw,    20
				hotspot2 WidForWheelchair, -min_plw, 21
				hotspot2 WidForWheelchair, -min_pl, 22
				hotspot2 tablew, -min_pl, 23
			else
				poly2_b 5, 1+2+4+64,MSFillPen,MSFillBackPen,
					-AddSideSpaceSize,0,1,
					-AddSideSpaceSize,-min_plw,1,
					tablew,-min_pl,1,
					tablew,0,0,
					-AddSideSpaceSize,0,-1
	
				hotline2 -AddSideSpaceSize, -min_plw, tablew, -min_pl
				hotline2 tablew, 0, tablew, -min_pl
				hotline2 -AddSideSpaceSize, 0, -AddSideSpaceSize, -min_plw
	
				hotspot2 -AddSideSpaceSize, -min_plw,    20
				hotspot2 WidForWheelchair, -min_plw, 21
				hotspot2 tablew, -min_pl, 23
			endif
		endif
	endif

	if bChairLeft then
		if iLeftSideType = SIDETYPE_CHAIR then
			PUT	0,0,0
			PUT	0,tabled,1
			PUT	-min_pl,tabled,1
			PUT	-min_pl,0,1
			if bChairBottom and iBottomSideType = 2 then PUT -AddSideSpaceSize,0,0
			PUT	0,0,-1
	
			poly2_b NSP/3, 1+2+4+64,MSFillPen,MSFillBackPen,
				GET(NSP)
	
			hotline2 -min_pl, 0, -min_pl, tabled
			hotline2 -min_pl, tabled, 0, tabled
			hotline2 -min_pl, 0, -AddSideSpaceSize*(iBottomSideType = 2), 0
	
			hotspot2 -min_pl, 0,      30
			hotspot2 -min_pl, tabled, 31
		endif
	
		if iLeftSideType = SIDETYPE_WHEELCHAIR then
			poly2_b 9, 1+2+4+64,MSFillPen,MSFillBackPen,
				adx,-DistNextToWheelchair,0,
				adx,0,0,
				0,0,0,
				0,tabled,0,
				adx,tabled,0,
				adx,tabled+DistNextToWheelchair,1,
				-min_plw,tabled+DistNextToWheelchair,1,
				-min_plw,-DistNextToWheelchair,1,
				adx,-DistNextToWheelchair,-1
	
			hotline2 -min_plw, -DistNextToWheelchair, -min_plw, tabled+DistNextToWheelchair
			hotline2 -min_plw, tabled+DistNextToWheelchair, adx, tabled+DistNextToWheelchair
			hotline2 -min_plw, -DistNextToWheelchair, adx, -DistNextToWheelchair
	
			hotspot2 -min_plw, -DistNextToWheelchair,      30
			hotspot2 -min_plw, tabled+DistNextToWheelchair, 31
		endif
	endif

	IF RightSide=1 THEN
		ADD2 tablew,0
		POLY2_b 5, 1+2+4+64,MSFillPen,MSFillBackPen,
			0,0,0,
			0,tabled,1,
			min_pl,tabled,1,
			min_pl,0,1,
			0,0,-1

		HOTLINE2 min_pl, 0, min_pl, tabled
		HOTLINE2 min_pl, tabled, 0, tabled
		HOTLINE2 min_pl, 0, 0, 0

		HOTSPOT2 min_pl, 0,      40
		HOTSPOT2 min_pl, tabled, 41
		DEL 1
	ENDIF
	del 1
	RETURN
