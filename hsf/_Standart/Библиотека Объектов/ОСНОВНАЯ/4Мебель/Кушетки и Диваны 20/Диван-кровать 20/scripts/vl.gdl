
hideparameter all "A", "B", "ZZYZX"

call "FM_types" parameters all

VALUES "gs_detlevel_3D" `Детальный`,`Простой`,`Откл.`
VALUES "gs_detlevel_3D_m" 2, 1, 0
VALUES "nSeats" 2,3
values{2} "iLegType" 	LEGTYPE_1, `Стиль 1`,
						LEGTYPE_2, `Стиль 2`,
						LEGTYPE_3, `Стиль 3`,
						LEGTYPE_4, `Стиль 4`,
						LEGTYPE_5, `Стиль 5`

values{2} "iSofaSymbolType" 	SOFASYMBOL_RECTSIMPLE, stSymbolTypes[1],
								SOFASYMBOL_RECT1, stSymbolTypes[2],
								SOFASYMBOL_RECT2, stSymbolTypes[3],
								SOFASYMBOL_RECT3, stSymbolTypes[4],
								SOFASYMBOL_RECT4, stSymbolTypes[5],
								SOFASYMBOL_CURVEDSIMPLE, stSymbolTypes[6],
								SOFASYMBOL_CURVED, stSymbolTypes[7]


call "2dDetailLevel" parameters gs_detlevel_2D	= gs_detlevel_2D,
							gs_detlevel_2D_m	= gs_detlevel_2D_m,
							enable2dDetLevels	= 2+4+8+16+32

if gs_detlevel_2D_m <> 4 then 
	hideparameter	"iSofaSymbolType"
	lock	"iSofaSymbolType"
endif

if GLOB_MODPAR_NAME = "gs_detlevel_3D" then
	gs_detlevel_3D_m = 0
	if gs_detlevel_3D = `Простой` then gs_detlevel_3D_m = 1
	if gs_detlevel_3D = `Детальный` then gs_detlevel_3D_m = 2
	parameters gs_detlevel_3D_m = gs_detlevel_3D_m
else
	gs_detlevel_3D = `Откл.`
	if gs_detlevel_3D_m = 1 then gs_detlevel_3D = `Простой`
	if gs_detlevel_3D_m = 2 then gs_detlevel_3D = `Детальный`
	parameters gs_detlevel_3D = gs_detlevel_3D
endif

IF gs_detlevel_3D_m = 1 then
	HIDEPARAMETER "gs_resol"
	LOCK "gs_resol"
ENDIF
IF gs_detlevel_3D_m = 0 then
	HIDEPARAMETER "gs_resol", "gs_shadow"
	LOCK "gs_resol", "gs_shadow"
ENDIF

if not(bLeg) then
	leg_h=0
	lock "iLegType", "leg_h", "gs_leg_mat"
	hideparameter "iLegType", "leg_h", "gs_leg_mat"
endif

IF iLegType = LEGTYPE_1 THEN
	PARAMETERS leg_h=0'-3 5/32"
	LOCK "leg_h"
	HIDEPARAMETER "leg_h"
	leg_h=0'-3 5/32"
ENDIF

IF nSeats=2 THEN
	values "A" range [1.2,)
ENDIF

IF nSeats=3 THEN
	values "A" range [1.7,)
ENDIF

values "B" range [0.6,)

values "zzyzx" range  [0.7,1.5]
values "leg_h" range [0,min(0.4,zzyzx*0.45-0.2))

values "gs_seat_height" range [leg_h+0.2,zzyzx*0.45]

values "bed_length" range [B + 0.01, )
values "gs_resol" range [3,)

if not(op_sofa) then
	lock "bed_length", "gs_dashed"
endif

IF gs_cont_pen<=0 then PARAMETERS gs_cont_pen=4
IF gs_fill_pen<=0 then PARAMETERS gs_fill_pen=19

! Minimal Space

if MSFront < 0 then
	MSFront = 0
	parameters MSFront = MSFront
endif
if MSSide < 0 then
	MSSide = 0
	parameters MSSide = MSSide
endif
if MSRear < 0 then
	MSRear = 0
	parameters MSRear = MSRear
endif
