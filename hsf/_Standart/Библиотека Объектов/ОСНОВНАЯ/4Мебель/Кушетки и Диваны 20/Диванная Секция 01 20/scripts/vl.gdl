
hideparameter all "A", "B", "ZZYZX"

call "FM_types" parameters all

VALUES "gs_detlevel_3D" `Детальный`,`Простой`,`Откл.`
VALUES "gs_detlevel_3D_m" 2, 1, 0
values{2} "iSofaUnitType" 	SOFAUNIT_STANDARD, `Рядная`,
							SOFAUNIT_END, `Торцевая`,
							SOFAUNIT_CORNER, `Угловая`,
							SOFAUNIT_POUFFE, `Пуф`
values{2} "iLegType" 	LEGTYPE_1, `Стиль 1`,
						LEGTYPE_2, `Стиль 2`,
						LEGTYPE_3, `Стиль 3`,
						LEGTYPE_4, `Стиль 4`,
						LEGTYPE_5, `Стиль 5`
VALUES "gs_resol" RANGE [3,)

call "2dDetailLevel" parameters gs_detlevel_2D	= gs_detlevel_2D,
							gs_detlevel_2D_m	= gs_detlevel_2D_m,
							enable2dDetLevels	= 2+4+8+16

values "A" range [0.3, )
if iSofaUnitType = SOFAUNIT_POUFFE then
	values "B" range [0.3, )
else
	values "B" range [yyy/TAN(75)+0.2672, )
endif
values "arm_h" range [gs_seat_height, zzyzx]
values "gs_seat_height" range [leg_h+0.2, )
values "leg_h" RANGE [0,)

if GLOB_MODPAR_NAME = "gs_detlevel_3D" then
	gs_detlevel_3D_m = 0
	if gs_detlevel_3D = `Простой` then gs_detlevel_3D_m = 1
	if gs_detlevel_3D = `Детальный` then gs_detlevel_3D_m = 2
	parameters gs_detlevel_3D_m = gs_detlevel_3D_m
else
	gs_detlevel_3D = `Откл.`
	if gs_detlevel_3D_m = 1 then gs_detlevel_3D = `Простой`
	if gs_detlevel_3D_m = 2 then gs_detlevel_3D = `Детальный`
	parameters gs_detlevel_3D = gs_detlevel_3D
endif

IF gs_detlevel_3D_m=1 THEN
	LOCK "gs_resol"
	HIDEPARAMETER "gs_resol"
ENDIF
IF gs_detlevel_3D_m=0 THEN
	LOCK "gs_resol", "gs_shadow"
	HIDEPARAMETER "gs_resol", "gs_shadow"
ENDIF

if not(bLeg) then
	leg_h = 0
	lock "iLegType", "leg_h"
	hideparameter "iLegType", "leg_h"
endif

IF iSofaUnitType = SOFAUNIT_CORNER THEN
	PARAMETERS a=b
	LOCK "a"
ENDIF

IF iSofaUnitType = SOFAUNIT_POUFFE THEN
	LOCK "arm_h","zzyzx","gs_sofa_mat"
	HIDEPARAMETER "arm_h","zzyzx","gs_sofa_mat"
ENDIF

IF iLegType = LEGTYPE_1 THEN
	leg_h=0.08
	PARAMETERS leg_h=leg_h
	LOCK "leg_h"
	HIDEPARAMETER "leg_h"
ENDIF

IF abs(leg_h) < EPS THEN
	LOCK "gs_leg_mat"
	HIDEPARAMETER "gs_leg_mat"
ENDIF

IF gs_cont_pen=0 THEN PARAMETERS gs_cont_pen=4
IF gs_fill_pen=0 THEN PARAMETERS gs_fill_pen=19


IF iSofaUnitType = SOFAUNIT_POUFFE then lock "gs_detlevel_2D"

!!! ******************************** Minimal Space

IF iSofaUnitType = SOFAUNIT_CORNER THEN
	HIDEPARAMETER "MSFront", "MSSide"
	LOCK "MSFront", "MSSide"
ENDIF
IF iSofaUnitType = SOFAUNIT_STANDARD  OR iSofaUnitType = SOFAUNIT_POUFFE THEN
	HIDEPARAMETER "MSSide"
	LOCK "MSSide"
ENDIF
IF iSofaUnitType = SOFAUNIT_CORNER OR iSofaUnitType = SOFAUNIT_END THEN
	HIDEPARAMETER "MSSide1","MSSide2"
	LOCK "MSSide1","MSSide2"
ENDIF

if MSFront < 0 then
	MSFront = 0
	parameters MSFront = MSFront
endif
if MSSide < 0 then
	MSSide = 0
	parameters MSSide = MSSide
endif
if MSRear < 0 then
	MSRear = 0
	parameters MSRear = MSRear
endif
if MSSide1 < 0 then
	MSSide1 = 0
	parameters MSSide1 = MSSide1
endif
if MSSide2 < 0 then
	MSSide2 = 0
	parameters MSSide2 = MSSide2
endif


IF GLOB_MODPAR_NAME = "iSofaUnitType" THEN
	IF iSofaUnitType = SOFAUNIT_STANDARD THEN
		PARAMETERS MSSide1=0, MSSide2=0
		MSSide1=0
		MSSide2=0
	else
		PARAMETERS MSSide1=0.2, MSSide2=0.2
		MSSide1=0.2
		MSSide2=0.2
	endif
	IF iSofaUnitType = SOFAUNIT_POUFFE THEN
		PARAMETERS MSRear=0
		MSRear=0
	else
		PARAMETERS MSRear=0.2
		MSRear=0.2
	endif
endif
