
!!Pianino

if gs_detlevel_3D_m = DLEV3D_OFF then end
if gs_detlevel_3D_m = DLEV3D_SIMPLE then gs_resol = 5

if not(gs_shadow) then SHADOW OFF

PEN gs_cont_pen
RESOL gs_resol

topThk	= 0.025

! --- Wheels ---

MATERIAL gs_acc_mat
roty 90
add -0.025, 0.1, A*(0.06/1.45)
for i = 1 to 2
	CYLIND 0.03, 0.025
	addy B-topOvhg-0.1-0.025
	CYLIND 0.03, 0.025
	del 1
	addz A-A*(0.06/1.45)-A*(0.09/1.45)
next i
del i-1
del 2

! --- Pedals ---
if gs_detlevel_3D_m = DLEV3D_DETAILED then
	add A/2-0.08, keyboardDepth, 0.08
	for i = 1 to 3
		prism_      11,      0.007,
					0.016494,	-0.055664,	79,
					0,			-0.064357,	900,
					0,			-235.5854,	4001,
					-0.016494,	-0.055664,	79,
					-0.068038,	-0.030111,	900,
					0.0,		57.9304,	4001,
					-0.019017,	0,			79,
					0.019017,	0,			79,
					0.068038,	-0.030111,	900,
					0.0,		57.9304,	4001,
					0.016494,	-0.055664,	-1
		add 0.08, 0, 0
	next i
	del i-1
	del 1
endif

MATERIAL gs_piano_mat

! --- Instrument box ---

add topOvhg, keyboardDepth, 0.05
BLOCK A-2*topOvhg, B-topOvhg-keyboardDepth, ZZYZX-0.025-0.05
del 1

add 0, keyboardDepth-topOvhg, zzyzx-topThk
BLOCK A, B-keyboardDepth+topOvhg, topThk
del 1

! --- Front section ---

add topOvhg, keyboardDepth,0

MUL (A-2*topOvhg)/1.4, 0.288/0.3, 1
MULY -1

for i=1 to 2
	addz 0.05
	BLOCK 0.1, 0.3, 0.1
	del 1
	rotx 90
	roty 90
	addy 0.66

	SWEEP 7, 2, 0, 1, 1+2+4+16+32,
			0, 0, 1,
			0.3, 0, 1,
			0.3, 0.1, 1,
			0.25, 0.1, 901,
			0.05, 90, 4001,
			0.25, 0.15, 1,
			0, 0.15,1,
			0, 0, 0,
			0, 0, 0.1
	del 3

	add 0.05, 0.2, 0.15
	RESOL gs_resol
	ELLIPS 0.05, 0.05
	CONE 0.51, 0.035, 0.025, 90, 90
	del 1
	addx 1.3
next i
del i-1
del 1

! --- Keyboard section ---

rotz -90
add 0, 0.1, 0.66
BLOCK 0.3, 1.2, 0.05
del 2

if iStandPos = STANDPOS_OPENED then
	roty 270
	addz -0.1
	mulz -1
	addy -0.05
	addx 0.76
	RESOL gs_resol
	SWEEP 6, 2, 0, 1, 1+2+4+16+32,
			0, 0, 1,
			0.28, 0, 1,
			0.23, 0, 901,
			0.05, 90, 4001,
			0.23, 0.05, 1,
			0, 0.05,1,
			0, 0, 0,
			0, 0, 1.2
	addx 0.23
	addy -0.05
	BLOCK 0.05, 0.05, 1.2
	del 7
ELSE
	rotx 90
	roty -90
	addy 0.76
	addz -1.3
	SWEEP 6, 2, 0, 1, 1+2+4+16+32,
			0, 0, 1,
			0.3, 0, 1,
			0.25, 0, 901,
			0.05, 90, 4001,
			0.25, 0.05, 1,
			0, 0.05,1,
			0, 0, 0,
			0, 0, 1.2
	addx 0.25
	addy -0.05
	BLOCK 0.05, 0.05, 1.2
	del 6
ENDIF

If iStandPos = STANDPOS_OPENED then
	addz 0.71
	addx 0.1
	MULY -1

	BLOCK 1.2, 0.15, 0.05
	addy 0.15
	MATERIAL kmat
	FOR I=1 TO 60 STEP 1
		BLOCK 0.018, 0.14, 0.04
		addx 0.02
	NEXT I
	del 60

	if gs_detlevel_3D_m = DLEV3D_DETAILED then
		MATERIAL kmat2
		addx 0.013
		FOR I=1 TO 8 STEP 1
			BLOCK 0.012, 0.08, 0.05
			addx 0.02
			BLOCK 0.012, 0.08, 0.05
			addx 0.04
			BLOCK 0.012, 0.08, 0.05
			addx 0.02
			BLOCK 0.012, 0.08, 0.05
			addx 0.02
			BLOCK 0.012, 0.08, 0.05
			addx 0.04
			NEXT I
			BLOCK 0.012, 0.08, 0.05
			addx 0.02
			BLOCK 0.012, 0.08, 0.05
			addx 0.02
			BLOCK 0.012, 0.08, 0.05
		del NTR()-1
		del 1
	ENDIF
ENDIF
del top

