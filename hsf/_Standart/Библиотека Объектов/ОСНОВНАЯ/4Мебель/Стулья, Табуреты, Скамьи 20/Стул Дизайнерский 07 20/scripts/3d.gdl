
IF gs_detlevel_3D_m=0 THEN END

PEN gs_cont_pen


IF gs_shadow=0 THEN SHADOW OFF

IF GLOB_CONTEXT>20 and GLOB_CONTEXT<40 THEN gs_detlevel_3D_m=1

ADD a/2,b/2,0

	unID=1

	HOTSPOT  -a/2, -b/2, 0, unID: unID=unID+1
	HOTSPOT  -a/2,  b/2, 0, unID: unID=unID+1
	HOTSPOT   a/2, -b/2, 0, unID: unID=unID+1
	HOTSPOT   a/2,  b/2, 0, unID: unID=unID+1

	hotspot -a/2,  b/2, 0, unID, zzyzx, 1+128: unID=unID+1
	hotspot -a/2,  b/2, -1, unID, zzyzx, 3: unID=unID+1
	hotspot -a/2,  b/2, zzyzx, unID, zzyzx, 2: unID=unID+1

	hotspot  a/2,  b/2, 0, unID, zzyzx, 1+128: unID=unID+1
	hotspot  a/2,  b/2, -1, unID, zzyzx, 3: unID=unID+1
	hotspot  a/2,  b/2, zzyzx, unID, zzyzx, 2: unID=unID+1



	hotspot -a/2+a/12+a/30+0.005, -b/2+a/60, 0, unID, gs_seat_height, 1+128: unID=unID+1
	hotspot -a/2+a/12+a/30+0.005, -b/2+a/60, -1, unID, gs_seat_height, 3: unID=unID+1
	hotspot -a/2+a/12+a/30+0.005, -b/2+a/60, gs_seat_height, unID, gs_seat_height, 2: unID=unID+1

	hotspot a/2-a/12-a/30-0.005, -b/2+a/60, 0, unID, gs_seat_height, 1+128: unID=unID+1
	hotspot a/2-a/12-a/30-0.005, -b/2+a/60, -1, unID, gs_seat_height, 3: unID=unID+1
	hotspot a/2-a/12-a/30-0.005, -b/2+a/60, gs_seat_height, unID, gs_seat_height, 2: unID=unID+1


ADD -A/2, B/2, 0
SS=gs_seat_height-0.03


IF gs_detlevel_3D_m=1 THEN

MATERIAL gs_frame_mat
ROTX 90

!   *** Leg ***

ADD A/12,0,A/30
PRISM_ 8,B-A/30,
0,0,15,
A-(2*A/12),0,15,
A-(2*A/12),SS+SS/3.2,15,
A-(2*A/12)-A/30,SS+SS/3.2,15,
A-(2*A/12)-A/30,A/30,15,
A/30,A/30,15,
A/30,SS+SS/3.2,15,
0,SS+SS/3.2,15
		gosub 5000

!   *** Seat ***

PRISM_ 4,B-A/15,
A/30,SS-A/30,15,
A-(2*A/12)-A/30,SS-A/30,15,
A-(2*A/12)-A/30,SS+0.03,15,
A/30,SS+0.03,15
		gosub 1000

!   *** Back ***

MATERIAL gs_frame_mat
DEL 1
!ADDY SS/2
PRISM_ 5,A/30,
0,SS/2,15,
A,SS/2,15,
A,SS+toth,15,
0,SS+toth,15,
0,SS/2,15
		gosub 1000

DEL 1
ENDIF

IF gs_detlevel_3D_m=2 THEN

MATERIAL gs_frame_mat
ROTX 90

!   *** Leg ***

ADD A/12,0,A/30
PRISM_ 8,B-A/30,
0,0,15,
A-(2*A/12),0,15,
A-(2*A/12),SS+0.13,15,
A-(2*A/12)-A/30,SS+0.13,15,
A-(2*A/12)-A/30,A/30,15,
A/30,A/30,15,
A/30,SS+0.13,15,
0,SS+0.13,15
		gosub 5000

!   *** Seat ***

PRISM_ 4,B-A/15,
A/30,SS-A/30,15,
A-(2*A/12)-A/30,SS-A/30,15,
A-(2*A/12)-A/30,SS,15,
A/30,SS,15
		gosub 1000

!   *** Textile ***

MATERIAL gs_seat_mat
PRISM_ 4,B-A/20,
A/30+0.005,SS,15,
A-(2*A/12)-A/30-0.005,SS,15,
A-(2*A/12)-A/30-0.005,SS+0.03,15,
A/30+0.005,SS+0.03,15

!   *** Back ***
MATERIAL gs_frame_mat
DEL 1
ADDY SS/2
PRISM_ 34,A/30,
0,0,15,
A/2-A/40,0,15,
A/2-A/40,SS/2+SS/6.4,15,
A/2+A/40,SS/2+SS/6.4,15,
A/2+A/40,0,15,
A,0,15,
A,SS+toth-SS/2,15,
0,SS+toth-SS/2,15,
0,0,-1,

A/11,SS+toth-SS/2-(2*A/11),15,
2*A/11,SS+toth-SS/2-(2*A/11),15,
2*A/11,SS+toth-SS/2-(A/11),15,
A/11,SS+toth-SS/2-(A/11),15,
A/11,SS+toth-SS/2-(2*A/11),-1,

3*A/11,SS+toth-SS/2-(2*A/11),15,
4*A/11,SS+toth-SS/2-(2*A/11),15,
4*A/11,SS+toth-SS/2-(A/11),15,
3*A/11,SS+toth-SS/2-(A/11),15,
3*A/11,SS+toth-SS/2-(2*A/11),-1,

5*A/11,SS+toth-SS/2-(2*A/11),15,
6*A/11,SS+toth-SS/2-(2*A/11),15,
6*A/11,SS+toth-SS/2-(A/11),15,
5*A/11,SS+toth-SS/2-(A/11),15,
5*A/11,SS+toth-SS/2-(2*A/11),-1,

7*A/11,SS+toth-SS/2-(2*A/11),15,
8*A/11,SS+toth-SS/2-(2*A/11),15,
8*A/11,SS+toth-SS/2-(A/11),15,
7*A/11,SS+toth-SS/2-(A/11),15,
7*A/11,SS+toth-SS/2-(2*A/11),-1,

9*A/11,SS+toth-SS/2-(2*A/11),15,
10*A/11,SS+toth-SS/2-(2*A/11),15,
10*A/11,SS+toth-SS/2-(A/11),15,
9*A/11,SS+toth-SS/2-(A/11),15,
9*A/11,SS+toth-SS/2-(2*A/11),-1
		gosub 1000

DEL 2
ENDIF

DEL 2
END

1000:
roty 90
gosub 5000
del 1
return

5000:

vert 0, 0, 0
vert 1, 0, 0
vert 0, 1, 0
vert 0, 0, 1

coor 2, -1, -2, -3, -4

base

body -1

return

