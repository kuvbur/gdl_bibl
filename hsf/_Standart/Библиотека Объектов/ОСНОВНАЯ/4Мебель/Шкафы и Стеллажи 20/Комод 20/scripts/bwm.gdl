
targetGUID = TO_GUID

! ==============================================================================
! Subroutines
! ==============================================================================

gosub "Knobs_Shelves_BWM"

gosub "2DSymbolStyles_BWM"

gosub "AccessoryBooleans_BWM"

! ==============================================================================
! Set migration GUID
! ==============================================================================

setmigrationguid targetGuid

! ==============================================================================
end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! en
! ==============================================================================


! ==============================================================================
! Knobs_Shelves
! ==============================================================================
"Knobs_Shelves_BWM":
	if targetGUID # "" then

		newparameter "shn", "Integer"
		shn = iNumShelves
		if bShelves = 0 then shn = 0
		parameters shn = shn

		if bDrawerKnob = 0 then
			iDrawerKnobType = 0
			parameters iDrawerKnobType = iDrawerKnobType
		endif

		if bDoorKnob = 0 then
			gs_knob_type_m = 0
			parameters gs_knob_type_m = gs_knob_type_m
		endif
	endif
return

! ==============================================================================
! 2D New Symbol Styles
! ==============================================================================
"2DSymbolStyles_BWM":
	if targetGUID # "" then
		_bMigrationSuccess = 1
		
		newparameter "gs_detlevel_2D", "String"
		newparameter "gs_detlevel_2D_m", "Integer"
				
		if iSymbolStyle = 1	then
			gs_detlevel_2D 		= `Стиль 1`
			gs_detlevel_2D_m	= 1
		endif

		if iSymbolStyle = 2	then
			gs_detlevel_2D 		= `Стиль 1`
			gs_detlevel_2D_m	= 1
		endif
		
		if iSymbolStyle = 3	then
			gs_detlevel_2D 		= `Стиль 1`
			gs_detlevel_2D_m	= 1
		endif
		
		if 	iSymbolStyle = 4 |\	
			iSymbolStyle = 5 then				! Cut migration in case of 'Style 4' and 'Style 5'
			
			_bMigrationSuccess = 0
		endif
		
		if iSymbolStyle = 6	then
			gs_detlevel_2D 		= `Стиль 2`
			gs_detlevel_2D_m	= 2
		endif
		
		if iSymbolStyle = 7	then
			gs_detlevel_2D 		= `Стиль 2`
			gs_detlevel_2D_m	= 2
		endif
		
		if iSymbolStyle = 8	then
			gs_detlevel_2D 		= `Стиль 3`
			gs_detlevel_2D_m	= 3
		endif
		
		if iSymbolStyle = 9	then
			gs_detlevel_2D 		= `Стиль 4`
			gs_detlevel_2D_m	= 4
		endif
		
		if _bMigrationSuccess = 1 then
			parameters 	gs_detlevel_2D 		= gs_detlevel_2D,
						gs_detlevel_2D_m 	= gs_detlevel_2D_m
		else
			targetGUID = ""
		endif
	endif
return

! ==============================================================================
! AccessoryBooleans
! ==============================================================================
"AccessoryBooleans_BWM":
	if targetGUID # "" then
	
		! If gs_cornice_type_m was 0, that equals with bCornice being off, otherwise it is on.
		if not(bCornice) then
			gs_cornice_type_m = 0
			parameters	gs_cornice_type_m = gs_cornice_type_m
		endif
	
		newparameter "gs_cornice_type", "String"
		if gs_cornice_type_m = 0			then _gs_cornice_type = `Нет`
		if gs_cornice_type_m = 1	then _gs_cornice_type = `Стиль 1`
		if gs_cornice_type_m = 2	then _gs_cornice_type = `Стиль 2`
		if gs_cornice_type_m = 3	then _gs_cornice_type = `Стиль 3`
		if gs_cornice_type_m = 4	then _gs_cornice_type = `Стиль 4`
		parameters gs_cornice_type = _gs_cornice_type
	
		! If gs_leg_type_m was 0, that equals with bBase being off, otherwise it is on.
		if not(bBase) then
			gs_leg_type_m = 0
			parameters	gs_leg_type_m = gs_leg_type_m
		else
			if gs_leg_type_m = 6 then !Style 6 is a new option, we migrate it to Style 4 at backward migration
				gs_leg_type_m = 4
				parameters	gs_leg_type_m = gs_leg_type_m
			endif
		endif

		newparameter "gs_leg_type", "String"
		if gs_leg_type_m = 0			then _gs_leg_type = `Нет`
		if gs_leg_type_m = 1	then _gs_leg_type = `Стиль 1`
		if gs_leg_type_m = 2	then _gs_leg_type = `Стиль 2`
		if gs_leg_type_m = 3	then _gs_leg_type = `Стиль 3`
		if gs_leg_type_m = 4	then _gs_leg_type = `Стиль 4`
		if gs_leg_type_m = 5	then _gs_leg_type = `Стиль 5`
		parameters gs_leg_type = _gs_leg_type

	endif
return

