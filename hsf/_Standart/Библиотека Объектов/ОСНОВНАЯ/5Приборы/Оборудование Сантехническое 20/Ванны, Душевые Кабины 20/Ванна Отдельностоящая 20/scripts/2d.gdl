
!! Bath-Tub.gsm



DrawingNum = 1
IF DrawingNum = 1 THEN	! Top


	!!! ******************************** SCALE

	if gs_detlevel_2D_m = 0 then			! Scale sensitive
		gs_detlevel_2D_m = 2

		if GLOB_SCALE > 150 						then gs_detlevel_2D_m = 1
		if GLOB_SCALE > 75 and GLOB_SCALE <= 150 	then gs_detlevel_2D_m = 2
		if GLOB_SCALE <= 75 						then gs_detlevel_2D_m = 3

	endif

	!!! ******************************** 2D

	pen gs_cont_pen
	fill gs_fill_type

	CALL "Resize_A_B_ZZYZX" Parameters ALL

	call "fa_minimalspace" parameters MSType	= 11,
									unID		= 3000,
									A			= A,
									MSFront		= MSFront,
									MSFront2	= MSFront2,
									MSLength	= MSLength,
									diff		= 0,
							returned_parameters reqBMinSpace,
												MSFillType,
												MSFillPen,
												MSFillBackPen,
												MSContLineType,
												MSContLinePen

	if reqBMinSpace <> 0 then
		mul2 A/1.70, B/0.90
		if gs_bathtub_form_m = 2 then			! --- Oval 1
			FILL MSFillType
			line_type MSContLineType
			pen MSContLinePen
			for i = -1 to 1 step 2
				add2 1.70*(i<0), 0
				mul2 i, 1
				POLY2_B 6, 1+2+4+64,MSFillPen,MSFillBackPen,
					0, 0, 0,
					0.4383822691601, 0, 0,
					0.4501539428934, 0.45, 900,
					0, -88.50152569297, 4000,
					0, 0.45, 1,
					0, 0, -1
				del 2
			next i
		endif
		if gs_bathtub_form_m = 3 then			! --- Oval 2
			FILL MSFillType
			line_type MSContLineType
			pen MSContLinePen
			POLY2_B 12, 1+2+4+64,MSFillPen,MSFillBackPen,
				0.849983989155, 0, 0,
				0.849983989155, 5.433530983948, 900,
				0, -6.231732118586, 4000,
				0.2601745828718, 0.03210674419578, 0,
				0.310221839499, 0.2996913485103, 900,
				0, -51.03249227803, 4000,
				0.07070038383684, 0.1703247351993, 0,
				0.5885173000479, 0.45, 900,
				0, -28.37368330061, 4000,
				0, 0.45, 1,
				0, 0, 0,
				0.849983989155, 0, -1

			POLY2_B 12, 1+2+4+64,MSFillPen,MSFillBackPen,
				1.7, 0, 1,
				1.7, 0.45, 0,
				1.157940748755, 0.45, 900,
				0, -42.8363537013, 4000,
				1.555432047979, 0.08145027621528, 0,
				1.407125160957, 0.2189588515073, 900,
				0, -39.96259696874, 4000,
				1.432477010793, 0.01830784920019, 0,
				1.001701274831, 5.077136860891, 900,
				0, 0, 4000,
				1.001701274831, 0, 0,
				1.7, 0, -1
		endif
		del 1
	endif

	pen gs_cont_pen
	fill gs_fill_type
	line_type SYMB_LINETYPE

	unID = 1
	hotspot2 a/2,0, unID : unID = unID + 1

	!!! ******************************** 1/50
	if gs_detlevel_2D_m = 3 | gs_detlevel_2D_m = 2 then
		circle2 ConPosX_1, ConPosY_1, 0.025

		if gs_bathtub_form_m = 1 then			! --- Rectangular
			gosub 10
			gosub 11
			gosub 12
		endif
		if gs_bathtub_form_m = 2 then			! --- Oval 1
			mul2 A/1.70, B/0.90
			gosub 20
			gosub 21
			gosub 22
			del 1
		endif
		if gs_bathtub_form_m = 3 then			! --- Oval 2
			mul2 A/1.70, B/0.90
			gosub 30
			gosub 31
			gosub 32
			del 1
		endif
	endif

	!!! ******************************** 1/100
	if gs_detlevel_2D_m = 2 then
		if gs_bathtub_form_m = 1 then			! --- Rectangular
			gosub 10
			gosub 11
		endif
		if gs_bathtub_form_m = 2 then			! --- Oval 1
			mul2 A/1.70, B/0.90
			gosub 20
			gosub 21
			del 1
		endif
		if gs_bathtub_form_m = 3 then			! --- Oval 2
			mul2 A/1.70, B/0.90
			gosub 30
			gosub 31
			del 1
		endif
	endif

	!!! ******************************** 1/200
	if gs_detlevel_2D_m = 1 then
		if gs_bathtub_form_m = 1 then			! --- Rectangular
			gosub 10
		endif
		if gs_bathtub_form_m = 2 then			! --- Oval 1
			mul2 A/1.70, B/0.90
			gosub 20
			del 1
		endif
		if gs_bathtub_form_m = 3 then			! --- Oval 2
			mul2 A/1.70, B/0.90
			gosub 30
			del 1
		endif
	endif
ENDIF
DEL TOP


! --- MEP part

if bShowMEP then

	PEN gs_cont_pen

				! --- OTHER VIEWS --- !

	ROT2 -SYMB_ROTANGLE * (DrawingNum > 1 AND NOT(SYMB_MIRRORED))+SYMB_ROTANGLE * (DrawingNum > 1 AND SYMB_MIRRORED)

	IF DrawingNum = 2 THEN PROJECT2 -3, 90, 2	! Bottom
	IF DrawingNum = 3 THEN PROJECT2 4, 270, 2	! Front
	IF DrawingNum = 4 THEN PROJECT2 4, 90, 2	! Back
	IF DrawingNum = 5 THEN PROJECT2 4, 180*(SYMB_MIRRORED), 2		! Right
	IF DrawingNum = 6 THEN PROJECT2 4, 180*NOT(SYMB_MIRRORED), 2	! Left


				! --- CONNECTIONS --- !

	CALL "MEP_m_ConnectionsACL_4" PARAMETERS SetProgram = SetProgram,
		ui_current_con = ui_current_con,
		MEP_NumberConnections = MEP_NumberConnections,
		MEP_NumConnectionData = gs_Connections,
		gs_AddConnections = gs_AddConnections,
		DrawingNum = DrawingNum,
		MEP_InsShow = 0,
		MEP_cline_show = 0,
		gs_cont_pen = gs_cont_pen,
		gs_fill_type=gs_fill_type,
		gs_fill_pen=gs_fill_pen,
		gs_back_pen=gs_back_pen,
		ConPosX_1=ConPosX_1, ConPosY_1=ConPosY_1, ConLength_1=ConLength_1, ConEdit_1 = 0

	DEL 1
ENDIF

end

10:
	fill gs_fill_type
	poly2_b 5, 1+2+64,gs_fill_pen, gs_back_pen,
		0,0,1,
		0,b,1,
		a,b,1,
		a,0,1,
		0,0,-1
return

11:
	rect2 edgeWidth, edgeWidth, a-edgeWidth, b-edgeWidth
return

12:
	edgeWidth2 = edgeWidth*0.4
	rect2 edgeWidth2, edgeWidth2, a-edgeWidth2, b-edgeWidth2
	line2 edgeWidth2, edgeWidth2, edgeWidth, edgeWidth
	line2 edgeWidth2, b-edgeWidth2, edgeWidth, b-edgeWidth
	line2 a-edgeWidth2, b-edgeWidth2, a-edgeWidth, b-edgeWidth
	line2 a-edgeWidth2, edgeWidth2, a-edgeWidth, edgeWidth
return

20:
	fill gs_fill_type
	poly2_b 9, 1+2+64,gs_fill_pen, gs_back_pen,
		0.4383822691602, 0.9, 1,
		0.4501539428935, 0.45, 900,
		0, 177.0030513859, 4001,
		0.4383822691602, 0, 1,
		1.26161773084, 0, 1,
		1.249846057107, 0.45, 900,
		0, 177.0030513859, 4001,
		1.26161773084, 0.9, 1,
		0.4383822691602, 0.9, -1
return

21:
	line2 0.5654320328752, 0.7099808275488, 1.134567967125, 0.7099808275488
	line2 0.5685894538261, 0.19, 			1.131410546174, 0.19
	arc2 0.5685894538261,	0.45, 0.26, 90.6958128518, 	270
	arc2 1.131410546174,	0.45, 0.26, 270,			89.3041871482
return

22:
	arc2 0.85,				-1.449295238869, 	1.586605759899,		75.31683905843, 104.6831609416
	arc2 0.4483543294874,	0.45,				0.3645047570111,	90.08128083669, 269.9187191633
	arc2 1.251645670513,	0.45,				0.3645047570111,	270.0812808367, 89.91871916331
	arc2 0.85,				2.349295238869,		1.586605759899, 	255.3168390584, 284.6831609416
return

30:
	fill gs_fill_type
	poly2_b 27, 1+2+64,gs_fill_pen, gs_back_pen,
		0.2601905937168, 0.8678932558042, 1,
		0.3102378503439, 0.6003086514897, 900,
		0, 51.03248668364, 4001,
		0.5885333108929, 0.45, 900,
		0, 28.37368588835, 4001,
		0.5885333108929, 0.45, 900,
		0, 28.37368507737, 4001,
		0.3102378503439, 0.2996913485103, 900,
		0, 51.03248843689, 4001,
		0.85, 5.433530983948, 900,
		0, 6.231732118585, 4001,
		1.001717285676, 0, 1,
		1.001717285676, 5.077136860891, 900,
		0, 4.867180449544, 4001,
		1.407141171802, 0.2189588515073, 900,
		0, 39.96259485807, 4001,
		1.1579567596, 0.45, 900,
		0, 42.83635448882, 4001,
		1.1579567596,  0.45, 900,
		0, 42.8363537013, 4001,
		1.407141171802, 0.6810411484927, 900,
		0, 39.96259696873, 4001,
		1.001717285676, -4.177136860891, 900,
		0, 4.867180449547, 4001,
		0.85, 0.9, 1,
		0.85, -4.533530983948, 900,
		0, 6.231732118586, 4001
return

31:
	arc2 0.85, 5.433530983948, 5.205537546716, 265.0335167069, 270
	arc2 0.4395172162687, 0.45, 0.2064101638184, 180, 258.7761857718
	arc2 1.070481662704, 0.45, 0.2127852702704, 286.1981386667, 0
	arc2 0.85, 2.452961155725, 2.224967718551, 269.9995877002, 277.2253810597
	arc2 0.85, -4.533530983948, 5.205537546716, 90, 94.96648329314
	arc2 0.4395172162687, 0.45, 0.2064101638184, 101.2238142282, 180
	arc2 1.070481662704, 0.45, 0.2127852702704, 0, 73.80186133325
	arc2 0.85, -1.552961155725, 2.224967718551, 82.77461894034, 90.00041229984
return

32:
	line2 0.85, 0.07998876362652, 1.001717285676, 0.07998876362652
	line2 0.85, 0.8200112363735, 1.001717285676, 0.8200112363735
	arc2 0.5885333108929, 0.45, 0.5082926715477, 180, 208.3736850774
	arc2 0.3102378503439, 0.2996913485103, 0.192, 208.3736850774, 259.4061735143
	arc2 0.85, 5.433530983948, 5.353542220322, 263.8335722159, 270
	arc2 1.1579567596, 0.45, 0.46218020029, 317.1636462987, 0
	arc2 1.407141171802, 0.2189588515073, 0.1223671876176, 278.7264068777, 317.1636462987
	arc2 1.001717285676, 5.077136860891, 4.997148097264, 270, 274.8671804495
	arc2 0.5885333108929, 0.45, 0.5082926715477, 151.6263149226, 180
	arc2 0.3102378503439, 0.6003086514897, 0.192, 100.5938264857, 151.6263149226
	arc2 0.85, -4.533530983948, 5.353542220322, 90, 96.16642778412
	arc2 1.1579567596, 0.45, 0.46218020029, 0, 42.8363537013
	arc2 1.407141171802, 0.6810411484927, 0.1223671876176, 42.8363537013, 81.2735931223
	arc2 1.001717285676, -4.177136860891, 4.997148097264, 85.13281955045, 90
return
