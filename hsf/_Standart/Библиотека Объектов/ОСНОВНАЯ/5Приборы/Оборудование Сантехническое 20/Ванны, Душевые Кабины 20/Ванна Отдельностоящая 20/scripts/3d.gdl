
IF gs_detlevel_3D_m = 0 THEN END

if gs_shadow=0 then SHADOW OFF
if gs_shadow=1 then SHADOW ON

bSolid = 0
if GLOB_CONTEXT > 40 and GLOB_CONTEXT < 50 then
	bSolid = 1
	gs_detlevel_3D_m = 1
endif

! --- start of modifying to Shaft

				! --- CONNECTIONS --- !

RESOL 24
IF gs_detlevel_3D_m = 1 THEN RESOL 8

if bShowMEP then

	IF useSysMat THEN
		gs_tub_mat = sMat
		gs_con_mat	= sMat
	ENDIF

	CALL "MEP_m_ConnectionsACL_4" PARAMETERS SetProgram = SetProgram,
		ui_current_con = ui_current_con,
		MEP_NumberConnections = MEP_NumberConnections,
		MEP_NumConnectionData = gs_Connections,
		gs_AddConnections = gs_AddConnections,
		cShow3D = 1,
		gs_ConMat = gs_con_mat,
		MEP_InsShow = 0,
		MEP_cline_show_3D = 0,
		gs_cont_pen = gs_cont_pen,
		ConPosX_1=ConPosX_1, ConPosY_1=ConPosY_1, ConPosZ_1=ConPosZ_1, ConLength_1=ConLength_1, ConEdit_1 = 0
ENDIF

! --- end of modifying to Shaft

pen gs_cont_pen

hotspot 0,0,0
hotspot 0,b,zzyzx
hotspot 0,0,zzyzx
hotspot 0,b,0
hotspot a,0,zzyzx
hotspot a,b,0
hotspot a,0,0
hotspot a,b,zzyzx


RESOL 16
IF gs_detlevel_3D_m = 1 THEN RESOL 8
ADD ConPosX_1, ConPosY_1, ConPosZ_1+thk*2
GOSUB "Drain"
DEL 1

RESOL 8
IF gs_bathtub_form_m = 1 THEN			! --- Rectangular
	IF gs_bathtubleg_type_m = 0 THEN
		MATERIAL footing_mat
		ADD A/2, B/2, zzyzx-footing_height

		PUT -a/2, -b/2, 15
		PUT -a/2, b/2, 15
		PUT a/2, b/2, 15
		PUT a/2, -b/2, 15
		PUT -a/2, -b/2, -1
		IF not(bSolid) THEN
			PUT -a/2+footingThk, -b/2+footingThk, 15
			PUT -a/2+footingThk, b/2-footingThk, 15
			PUT a/2-footingThk, b/2-footingThk, 15
			PUT a/2-footingThk, -b/2+footingThk, 15
			PUT -a/2+footingThk, -b/2+footingThk, -1
		ENDIF

		PRISM_ NSP/3, footing_height-0.02,
			GET(NSP)
		DEL 1
	ENDIF

	MATERIAL gs_tub_inside_mat

	ADD A/2, B/2, 0

	isSolidModel = bSolid
	bRadius2 = bRadius + thk
	bRadius3 = bRadius - thk
	num = 6
	IF gs_detlevel_3D_m = 1 THEN num = 1
	aa = a/2 - edgeWidth
	bb = b/2 - edgeWidth
	diff = 0

	IF NOT(bSolid) THEN GOSUB 5
	GOSUB 10

	MATERIAL gs_tub_outside_mat
	diff = thk*2
	IF NOT(bSolid) THEN GOSUB 5
	IF NOT(bSolid) THEN GOSUB 10

	MATERIAL gs_tub_inside_mat
	ADDz ZZYZX
	TUBEA 5, 7, 1+2+4+8+16+32,
		   0.005*SQR(2),     -0.005,      1,
		   0.0,              0,      1,
		   0.0,              -0.02,      1,
		   0.005*SQR(2),     -0.02,      1,
		   0.005*SQR(2),     -0.005,     -1,

			-a/2+0.005, b/2-0.005, 0,
			a/2-0.005, b/2-0.005, 0,
			a/2-0.005, -b/2+0.005, 0,
			-a/2+0.005, -b/2+0.005, 0,
			-a/2+0.005, b/2-0.005, 0,
			a/2-0.005, b/2-0.005, 0,
			a/2-0.005, -b/2+0.005, 0

		IF bSolid THEN
			ADDz -0.02
			PRISM_ 5, 0.02,
				a/2-0.005, b/2-0.005, 15,
				a/2-0.005, -b/2+0.005, 15,
				-a/2+0.005, -b/2+0.005, 15,
				-a/2+0.005, b/2-0.005, 15,
				a/2-0.005, b/2-0.005, -1
			DEL 1
		ENDIF
	DEL 2

	GROUP "to leg cutting_1"
		ADD A/2, B/2, 0
		diff = thk*2
		isSolidModel = 1
		GOSUB 10
		DEL 1
	ENDGROUP

	GROUP "legs_1"
		IF gs_bathtubleg_type_m = 1 THEN
			dist_1 	= 0.45
			dist_2 	= 0.45
			B2		= 0.75
			GOSUB "Wooden Plinth"
		ENDIF

		IF gs_bathtubleg_type_m = 2 THEN
			distx_1 	= edgeWidth
			disty_1 	= edgeWidth
			distx_2 	= distx_1
			disty_2 	= disty_1
			GOSUB "Rectangular Legs"
		ENDIF

		IF gs_bathtubleg_type_m = 3 THEN
			distx_1 	= edgeWidth+0.025
			disty_1 	= edgeWidth+0.025
			distx_2 	= distx_1
			disty_2 	= disty_1
			GOSUB "Round Legs"
		ENDIF

		IF gs_bathtubleg_type_m = 4 THEN
			distx_1 	= 0.10
			disty_1 	= 0.10
			leg_angle_1	= 45
			distx_2 	= 0.10
			disty_2 	= 0.10
			leg_angle_2	= 45
			GOSUB "Classic Legs"
		ENDIF
	ENDGROUP

	result_01 = SUBGROUP("legs_1", "to leg cutting_1")
	PLACEGROUP result_01

	KILLGROUP "to leg cutting_1"
	KILLGROUP "legs_1"
	KILLGROUP result_01
ENDIF

IF gs_bathtub_form_m = 2 THEN			! --- Oval 1

	ADD A/2, B/2, 0
	MUL A/2/0.8320710678119, B/2/0.4317404788998, 1
	dep = dep + thk
	ADDz zzyzx - dep

	isSolidModel = bSolid
	MATERIAL gs_tub_inside_mat
	GOSUB 20
	MATERIAL gs_tub_outside_mat
	ADDz -thk*2
	MUL 1.005, 1.005, 1
	IF NOT(bSolid) THEN GOSUB 20
	DEL 3

	IF gs_detlevel_3D_m = 2 THEN
		MATERIAL gs_tub_inside_mat
		ADDz zzyzx-thk
		FOR i = 1 TO 2
			PUT -0.402142695722,  0.424714, 8
			PUT	-0.4907983532451, 0.4044488962814, 8
			PUT	-0.5728277628437, 0.3708322664924, 8
			PUT	-0.6482590394621, 0.3242588640319, 8
			PUT	-0.7150307837043, 0.2660092204295, 8
			PUT	-0.7613932485807, 0.2098761483738, 8
			PUT	-0.7964664428042, 0.1446090954896, 8
			PUT	-0.8180710634184, 0.07373413530127, 8
			PUT	-0.825, 0, 8
			PUT	-0.8180710634184, -0.07373413530127, 8
			PUT	-0.7964664428042, -0.1446090954896, 8
			PUT	-0.7613932485807, -0.2098761483738, 8
			PUT	-0.7150307837043, -0.2660092204295, 8
			PUT	-0.6482590394621, -0.3242588640319, 8
			PUT	-0.5728277628437, -0.3708322664924, 8
			PUT	-0.4907983532451, -0.4044488962814, 8
			PUT	-0.402142695722, -0.424714, 8
			PUT	0.402142695722, -0.424714, 8
			PUT	0.4907983532451, -0.4044488962814, 8
			PUT	0.5728277628436, -0.3708322664924, 8
			PUT	0.6482590394621, -0.3242588640319, 8
			PUT	0.7150307837043, -0.2660092204295, 8
			PUT	0.7613932485807, -0.2098761483738, 8
			PUT	0.7964664428042, -0.1446090954896, 8
			PUT	0.8180710634184, -0.07373413530127, 8
			PUT	0.825, 0, 8
			PUT	0.8180710634184, 0.07373413530127, 8
			PUT	0.7964664428042, 0.1446090954896, 8
			PUT	0.7613932485807, 0.2098761483738, 8
			PUT	0.7150307837043, 0.2660092204295, 8
			PUT	0.6482590394621, 0.3242588640319, 8
			PUT	0.5728277628437, 0.3708322664924, 8
			PUT	0.4907983532451, 0.4044488962814, 8
			PUT	0.402142695722, 0.424714, 8
			PUT	-0.402142695722, 0.424714, -1
			IF NOT(bSolid) THEN
				PUT	-0.099398,     0.303123, 8
				PUT	-0.148974,     0.307023, 8
				PUT	-0.198403,     0.312478, 8
				PUT	-0.247637,     0.319482, 8
				PUT	-0.296626,     0.328029, 8
				PUT	-0.345323,      0.33811, 8
				PUT	-0.39368,     0.349714, 8
				PUT	-0.468069,      0.33271, 8
				PUT	-0.538677,     0.303774, 8
				PUT	-0.603606,     0.263685, 8
				PUT	-0.661108,     0.213522, 8
				PUT	-0.698841,     0.167837, 8
				PUT	-0.726889,     0.115643, 8
				PUT	-0.744166,     0.058965, 8
				PUT	-0.75,            0, 8
				PUT	-0.744166,    -0.058965, 8
				PUT	-0.726889,    -0.115643, 8
				PUT	-0.698841,    -0.167837, 8
				PUT	-0.661108,    -0.213522, 8
				PUT	-0.603606,    -0.263685, 8
				PUT	-0.538677,    -0.303774, 8
				PUT	-0.468069,     -0.33271, 8
				PUT	-0.39368,    -0.349714, 8
				PUT	-0.345323,     -0.33811, 8
				PUT	-0.296626,    -0.328029, 8
				PUT	-0.247637,    -0.319482, 8
				PUT	-0.198403,    -0.312478, 8
				PUT	-0.148974,    -0.307023, 8
				PUT	-0.099398,    -0.303123, 8
				PUT	-0.049723,    -0.300781, 8
				PUT	-0, -0.30, 8
				PUT	0.049723,    -0.300781, 8
				PUT	0.099398,    -0.303123, 8
				PUT	0.148974,    -0.307023, 8
				PUT	0.198403,    -0.312478, 8
				PUT	0.247637,    -0.319482, 8
				PUT	0.296626,    -0.328029, 8
				PUT	0.345323,     -0.33811, 8
				PUT	0.39368,    -0.349714, 8
				PUT	0.468069,     -0.33271, 8
				PUT	0.538677,    -0.303774, 8
				PUT	0.603606,    -0.263685, 8
				PUT	0.661108,    -0.213522, 8
				PUT	0.698841,    -0.167837, 8
				PUT	0.726889,    -0.115643, 8
				PUT	0.744166,    -0.058965, 8
				PUT	0.75,            0, 8
				PUT	0.744166,     0.058965, 8
				PUT	0.726889,     0.115643, 8
				PUT	0.698841,     0.167837, 8
				PUT	0.661108,     0.213522, 8
				PUT	0.603606,     0.263685, 8
				PUT	0.538677,     0.303774, 8
				PUT	0.468069,      0.33271, 8
				PUT	0.39368,     0.349714, 8
				PUT	0.345323,      0.33811, 8
				PUT	0.296626,     0.328029, 8
				PUT	0.247637,     0.319482, 8
				PUT	0.198403,     0.312478, 8
				PUT	0.148974,     0.307023, 8
				PUT	0.099398,     0.303123, 8
				PUT	0.049723,     0.300781, 8
				PUT	-0, 0.30, 8
				PUT	-0.049723,     0.300781, 8
				PUT	-0.099398,     0.303123, -1
			ENDIF

			PRISM_ NSP/3, thk,
				GET(NSP)

			MATERIAL gs_tub_outside_mat
			ADDz -thk
		NEXT i
		DEL 3

		MATERIAL gs_tub_inside_mat
		ADDz ZZYZX

		PUT	0.402142695722,     0.424714, 0
		PUT	-0.402142695722,     0.424714, 0
		PUT	-0.4907983532451, 0.4044488962814, 0
		PUT	-0.5728277628437, 0.3708322664924, 0
		PUT	-0.6482590394621, 0.3242588640319, 0
		PUT	-0.7150307837043, 0.2660092204295, 0
		PUT	-0.7613932485807, 0.2098761483738, 0
		PUT	-0.7964664428042, 0.1446090954896, 0
		PUT	-0.8180710634184, 0.07373413530127, 0
		PUT	-0.825,           0, 0
		PUT	-0.8180710634184, -0.07373413530127, 0
		PUT	-0.7964664428042, -0.1446090954896, 0
		PUT	-0.7613932485807, -0.2098761483738, 0
		PUT	-0.7150307837043, -0.2660092204295, 0
		PUT	-0.6482590394621, -0.3242588640319, 0
		PUT	-0.5728277628437, -0.3708322664924, 0
		PUT	-0.4907983532451, -0.4044488962814, 0
		PUT	-0.402142695722,    -0.424714, 0
		PUT	0.402142695722,    -0.424714, 0
		PUT	0.4907983532451, -0.4044488962814, 0
		PUT	0.5728277628436, -0.3708322664924, 0
		PUT	0.6482590394621, -0.3242588640319, 0
		PUT	0.7150307837043, -0.2660092204295, 0
		PUT	0.7613932485807, -0.2098761483738, 0
		PUT	0.7964664428042, -0.1446090954896, 0
		PUT	0.8180710634184, -0.07373413530127, 0
		PUT	0.825,           0, 0
		PUT	0.8180710634184, 0.07373413530127, 0
		PUT	0.7964664428042, 0.1446090954896, 0
		PUT	0.7613932485807, 0.2098761483738, 0
		PUT	0.7150307837043, 0.2660092204295, 0
		PUT	0.6482590394621, 0.3242588640319, 0
		PUT	0.5728277628437, 0.3708322664924, 0
		PUT	0.4907983532451, 0.4044488962814, 0
		PUT	0.402142695722,     0.424714, 0
		PUT	-0.402142695722,     0.424714, 0
		PUT	-0.4907983532451, 0.4044488962814, 0

		TUBEA 5, NSP/3, 1+2+4+8+16+32,
			-0.005*SQR(2),     -0.005,      1,
			0.0,              0,      1,
			0.0,              -0.02,      1,
			-0.005*SQR(2),     -0.02,      1,
			-0.005*SQR(2),     -0.005,     -1,

			GET(NSP)
		DEL 1

		IF gs_bathtubleg_type_m = 0 THEN
			MATERIAL footing_mat
			ADDz zzyzx-footing_height

			PUT -0.4029355350944, 0.4317404788998, 79
			PUT -0.4929340778132, 0.411189718232, 79
			PUT -0.5760366825043, 0.3771332850301, 79
			PUT -0.6524547876315, 0.3299505858539, 79
			PUT -0.7200977769579, 0.2709413172826, 79
			PUT -0.7672620705988, 0.213820375563, 79
			PUT -0.8029943983104, 0.1473267777574, 79
			PUT -0.8250084081119, 0.07510280202606, 79
			PUT -0.8320710678119, 0, 79
			PUT -0.8250084081119, -0.07510280202606, 79
			PUT -0.8029943983104, -0.1473267777574, 79
			PUT -0.7672620705988, -0.213820375563, 79
			PUT -0.7200977769579, -0.2709413172826, 79
			PUT -0.6524547876315, -0.3299505858539, 79
			PUT -0.5760366825043, -0.3771332850301, 79
			PUT -0.4929340778132, -0.411189718232, 79
			PUT -0.4029355350944, -0.4317404788998, 79
			PUT 0.4029355350944, -0.4317404788998, 79
			PUT 0.4929340778132, -0.411189718232, 79
			PUT 0.5760366825042, -0.3771332850301, 79
			PUT 0.6524547876315, -0.3299505858539, 79
			PUT 0.7200977769579, -0.2709413172826, 79
			PUT 0.7672620705988, -0.213820375563, 79
			PUT 0.8029943983104, -0.1473267777574, 79
			PUT 0.8250084081119, -0.07510280202606, 79
			PUT 0.8320710678119, 0, 79
			PUT 0.8250084081119, 0.07510280202606, 79
			PUT 0.8029943983104, 0.1473267777574, 79
			PUT 0.7672620705988, 0.213820375563, 79
			PUT 0.7200977769579, 0.2709413172826, 79
			PUT 0.6524547876315, 0.3299505858539, 79
			PUT 0.5760366825043, 0.3771332850301, 79
			PUT 0.4929340778132, 0.411189718232, 79
			PUT 0.4029355350944, 0.4317404788998, 79
			PUT -0.4029355350944, 0.4317404788998, -1
			IF not(bSolid) THEN
				PUT -0.402142695722, 0.424714, 79
				PUT -0.4907983532451, 0.4044488962814, 79
				PUT -0.5728277628437, 0.3708322664924, 79
				PUT -0.6482590394621, 0.3242588640319, 79
				PUT -0.7150307837043, 0.2660092204295, 79
				PUT -0.7613932485807, 0.2098761483738, 79
				PUT -0.7964664428042, 0.1446090954896, 79
				PUT -0.8180710634184, 0.07373413530127, 79
				PUT -0.825, 0, 79
				PUT -0.8180710634184, -0.07373413530127, 79
				PUT -0.7964664428042, -0.1446090954896, 79
				PUT -0.7613932485807, -0.2098761483738, 79
				PUT -0.7150307837043, -0.2660092204295, 79
				PUT -0.6482590394621, -0.3242588640319, 79
				PUT -0.5728277628437, -0.3708322664924, 79
				PUT -0.4907983532451, -0.4044488962814, 79
				PUT -0.402142695722, -0.424714, 79
				PUT 0.402142695722, -0.424714, 79
				PUT 0.4907983532451, -0.4044488962814, 79
				PUT 0.5728277628436, -0.3708322664924, 79
				PUT 0.6482590394621, -0.3242588640319, 79
				PUT 0.7150307837043, -0.2660092204295, 79
				PUT 0.7613932485807, -0.2098761483738, 79
				PUT 0.7964664428042, -0.1446090954896, 79
				PUT 0.8180710634184, -0.07373413530127, 79
				PUT 0.825, 0, 79
				PUT 0.8180710634184, 0.07373413530127, 79
				PUT 0.7964664428042, 0.1446090954896, 79
				PUT 0.7613932485807, 0.2098761483738, 79
				PUT 0.7150307837043, 0.2660092204295, 79
				PUT 0.6482590394621, 0.3242588640319, 79
				PUT 0.5728277628437, 0.3708322664924, 79
				PUT 0.4907983532451, 0.4044488962814, 79
				PUT 0.402142695722, 0.424714, 79
				PUT -0.402142695722, 0.424714, -1
			ENDIF

			PRISM_ NSP/3, footing_height-0.02,
				GET(NSP)
			DEL 1
		ENDIF
	ELSE
		MATERIAL gs_tub_inside_mat
		ADDz zzyzx-thk
		FOR i = 1 TO 2
			PUT -0.402142695722,  0.424714, 8
			PUT	-0.5728277628437, 0.3708322664924, 8
			PUT	-0.7613932485807, 0.2098761483738, 8
			PUT	-0.825, 0, 8
			PUT	-0.7613932485807, -0.2098761483738, 8
			PUT	-0.5728277628437, -0.3708322664924, 8
			PUT	-0.402142695722, -0.424714, 8
			PUT	0.402142695722, -0.424714, 8
			PUT	0.5728277628436, -0.3708322664924, 8
			PUT	0.7613932485807, -0.2098761483738, 8
			PUT	0.825, 0, 8
			PUT	0.7613932485807, 0.2098761483738, 8
			PUT	0.5728277628437, 0.3708322664924, 8
			PUT	0.402142695722, 0.424714, 8
			PUT	-0.402142695722, 0.424714, -1
			IF NOT(bSolid) THEN
				PUT	-0.049723,    0.300781, 8
				PUT	-0.148974,     0.307023, 8
				PUT	-0.198403,     0.312478, 8
				PUT	-0.345323,      0.33811, 8
				PUT	-0.538677,     0.303774, 8
				PUT	-0.698841,     0.167837, 8
				PUT	-0.75,            0, 8
				PUT	-0.698841,    -0.167837, 8
				PUT	-0.538677,    -0.303774, 8
				PUT	-0.345323,     -0.33811, 8
				PUT	-0.198403,    -0.312478, 8
				PUT	-0.049723,    -0.300781, 8
				PUT	-0, -0.30, 8
				PUT	0.049723,    -0.300781, 8
				PUT	0.198403,    -0.312478, 8
				PUT	0.345323,     -0.33811, 8
				PUT	0.538677,    -0.303774, 8
				PUT	0.698841,    -0.167837, 8
				PUT	0.75,            0, 8
				PUT	0.698841,     0.167837, 8
				PUT	0.538677,     0.303774, 8
				PUT	0.345323,      0.33811, 8
				PUT	0.198403,     0.312478, 8
				PUT	0.049723,     0.300781, 8
				PUT	-0, 0.30, 8
				PUT	-0.049723,     0.300781, -1
			ENDIF

			PRISM_ NSP/3, thk,
				GET(NSP)

			MATERIAL gs_tub_outside_mat
			ADDz -thk
		NEXT i
		DEL 3

		MATERIAL gs_tub_inside_mat
		ADDz ZZYZX

		PUT	0.402142695722,     0.424714, 0
		PUT	-0.402142695722,     0.424714, 0
		PUT	-0.5728277628437, 0.3708322664924, 0
		PUT	-0.7613932485807, 0.2098761483738, 0
		PUT	-0.825,           0, 0
		PUT	-0.7613932485807, -0.2098761483738, 0
		PUT	-0.5728277628437, -0.3708322664924, 0
		PUT	-0.402142695722,    -0.424714, 0
		PUT	0.402142695722,    -0.424714, 0
		PUT	0.5728277628436, -0.3708322664924, 0
		PUT	0.7613932485807, -0.2098761483738, 0
		PUT	0.825,           0, 0
		PUT	0.7613932485807, 0.2098761483738, 0
		PUT	0.5728277628437, 0.3708322664924, 0
		PUT	0.402142695722,     0.424714, 0
		PUT	-0.402142695722,     0.424714, 0
		PUT	-0.4907983532451, 0.4044488962814, 0

		TUBEA 5, NSP/3, 1+2+4+8+16+32,
			-0.005*SQR(2),     -0.005,      1,
			0.0,              0,      1,
			0.0,              -0.02,      1,
			-0.005*SQR(2),     -0.02,      1,
			-0.005*SQR(2),     -0.005,     -1,

			GET(NSP)
		DEL 1

		IF gs_bathtubleg_type_m = 0 THEN
			MATERIAL footing_mat
			ADDz zzyzx-footing_height

			PUT -0.4029355350944, 0.4317404788998, 79
			PUT -0.5760366825043, 0.3771332850301, 79
			PUT -0.7672620705988, 0.213820375563, 79
			PUT -0.8320710678119, 0, 79
			PUT -0.7672620705988, -0.213820375563, 79
			PUT -0.5760366825043, -0.3771332850301, 79
			PUT -0.4029355350944, -0.4317404788998, 79
			PUT 0.4029355350944, -0.4317404788998, 79
			PUT 0.5760366825042, -0.3771332850301, 79
			PUT 0.7672620705988, -0.213820375563, 79
			PUT 0.8320710678119, 0, 79
			PUT 0.7672620705988, 0.213820375563, 79
			PUT 0.5760366825043, 0.3771332850301, 79
			PUT 0.4029355350944, 0.4317404788998, 79
			PUT -0.4029355350944, 0.4317404788998, -1
			IF not(bSolid) THEN
				PUT -0.402142695722, 0.424714, 79
				PUT -0.5728277628437, 0.3708322664924, 79
				PUT -0.7613932485807, 0.2098761483738, 79
				PUT -0.825, 0, 79
				PUT -0.7613932485807, -0.2098761483738, 79
				PUT -0.5728277628437, -0.3708322664924, 79
				PUT -0.402142695722, -0.424714, 79
				PUT 0.402142695722, -0.424714, 79
				PUT 0.5728277628436, -0.3708322664924, 79
				PUT 0.7613932485807, -0.2098761483738, 79
				PUT 0.825, 0, 79
				PUT 0.7613932485807, 0.2098761483738, 79
				PUT 0.5728277628437, 0.3708322664924, 79
				PUT 0.402142695722, 0.424714, 79
				PUT -0.402142695722, 0.424714, -1
			ENDIF

			PRISM_ NSP/3, footing_height-0.02,
				GET(NSP)
			DEL 1
		ENDIF
	ENDIF
	DEL 2

	GROUP "to leg cutting_2"
		ADD A/2, B/2, zzyzx - dep - thk*2
		MUL A/2/0.8320710678119, B/2/0.4317404788998, 1
		MUL 1.005, 1.005, 1
		isSolidModel = 1
		GOSUB 20
		DEL 3
	ENDGROUP

	GROUP "legs_2"
		IF gs_bathtubleg_type_m = 1 THEN
			dist_1 	= 0.52
			dist_2 	= 0.52
			B2		= 0.70
			GOSUB "Wooden Plinth"
		ENDIF

		IF gs_bathtubleg_type_m = 2 THEN
			distx_1 	= 0.46*(A/1.70)
			disty_1 	= 0.20*(B/0.90)
			distx_2 	= distx_1
			disty_2 	= disty_1
			GOSUB "Rectangular Legs"
		ENDIF

		IF gs_bathtubleg_type_m = 3 THEN
			distx_1 	= 0.33*(A/1.70)
			disty_1 	= 0.205*(B/0.90)
			distx_2 	= 0.33*(A/1.70)
			disty_2 	= disty_1
			GOSUB "Round Legs"
		ENDIF

		IF gs_bathtubleg_type_m = 4 THEN
			distx_1 	= 0.25*(A/2/0.8320710678119)
			disty_1 	= 0.10
			leg_angle_1	= 45
			distx_2 	= 0.25*(A/2/0.8320710678119)
			disty_2 	= 0.10
			leg_angle_2	= 45
			GOSUB "Classic Legs"
		ENDIF
	ENDGROUP

	result_02 = SUBGROUP("legs_2", "to leg cutting_2")
	PLACEGROUP result_02

	KILLGROUP "to leg cutting_2"
	KILLGROUP "legs_2"
	KILLGROUP result_02
ENDIF

IF gs_bathtub_form_m = 3 THEN			! --- Oval 2
	dep = dep + thk
	ADD A/2, B/2, 0
	MUL A/1.605290133152, B/0.6645760494426, 1
	ADDz zzyzx - dep
	isSolidModel = bSolid
	MATERIAL gs_tub_inside_mat
	isEdge = 1
	GOSUB 30
	MATERIAL gs_tub_outside_mat
	ADDz -thk*2
	MUL 1.005, 1.005, 1
	isEdge = 0
	IF NOT(bSolid) THEN GOSUB 30
	DEL 3

	IF gs_bathtubleg_type_m = 0 THEN
		MATERIAL footing_mat
		ADDz zzyzx-footing_height

		IF gs_detlevel_3D_m = 2 THEN
			PUT -0.7980224564998, -0.0604249647619, 79
			PUT -0.7793922733527, -0.1339671858124, 79
			PUT -0.7415253774452, -0.2075853534855, 79
			PUT -0.6877558413752, -0.2637523996815, 79
			PUT -0.6360934039193, -0.2912243339817, 79
			PUT -0.5839739810111, -0.3003040765036, 79
			PUT -0.5170986732637, -0.3084611312173, 79
			PUT -0.4527504803704, -0.3146774419302, 79
			PUT -0.23565060443, -0.3265056202876, 79
			PUT -0.04828652204037, -0.3322880247213, 79
			PUT 0, -0.3322880247213, 79
			PUT 0.1432648598379, -0.3322880247213, 79
			PUT 0.3487122700561, -0.3278052983623, 79
			PUT 0.5313811426975, -0.3193120641111, 79
			PUT 0.6043926119431, -0.3056634881909, 79
			PUT 0.6686304385634, -0.272734555478, 79
			PUT 0.7301142332078, -0.2146695667648, 79
			PUT 0.771483632957, -0.1465619688921, 79
			PUT 0.7941221654228, -0.07830566786941, 79
			PUT 0.8026601854299, 0, 79
			PUT 0.7941221654228, 0.07830566786941, 79
			PUT 0.771483632957, 0.1465619688921, 79
			PUT 0.7301142332078, 0.2146695667648, 79
			PUT 0.6686304385634, 0.272734555478, 79
			PUT 0.6043926119431, 0.3056634881909, 79
			PUT 0.5313811426975, 0.3193120641111, 79
			PUT 0.3487122700561, 0.3278052983623, 79
			PUT 0.1432648598379, 0.3322880247213, 79
			PUT 0, 0.3322880247213, 79
			PUT -0.04828652204037, 0.3322880247213, 79
			PUT -0.23565060443, 0.3265056202876, 79
			PUT -0.4527504803704, 0.3146774419302, 79
			PUT -0.5170986732637, 0.3084611312173, 79
			PUT -0.5839739810111, 0.3003040765036, 79
			PUT -0.6360934039193, 0.2912243339817, 79
			PUT -0.6877558413752, 0.2637523996815, 79
			PUT -0.7415253774452, 0.2075853534855, 79
			PUT -0.7793922733527, 0.1339671858124, 79
			PUT -0.7980224564998, 0.0604249647619, 79
			PUT -0.8026299477222, 0, 79
			PUT -0.7980224564998, -0.0604249647619, -1
			IF NOT(bSolid) THEN
				PUT -0.5825095140282, 0.2904085897801, 79
				PUT -0.6328062419738, 0.2816463795721, 79
				PUT -0.6816428399081, 0.2556771091319, 79
				PUT -0.7332972636648, 0.2017194852164, 79
				PUT -0.7699783692966, 0.1304066479711, 79
				PUT -0.7881169509102, 0.05880501270851, 79
				PUT -0.7926009184385, 0, 79
				PUT -0.7881169509102, -0.05880501270851, 79
				PUT -0.7699783692966, -0.1304066479711, 79
				PUT -0.7332972636648, -0.2017194852164, 79
				PUT -0.6816428399081, -0.2556771091319, 79
				PUT -0.6328062419738, -0.2816463795721, 79
				PUT -0.5825095140282, -0.2904085897801, 79
				PUT -0.5160123357029, -0.2985195225021, 79
				PUT -0.4519973571888, -0.3047036432805, 79
				PUT -0.2352242994362, -0.3165140157143, 79
				PUT -0.04813224945659, -0.3222880247213, 79
				PUT 0, -0.3222880247213, 79
				PUT 0.1431557761327, -0.3222880247213, 79
				PUT 0.3483709221422, -0.3178103662134, 79
				PUT 0.5302246211299, -0.3093550336622, 79
				PUT 0.6011253072274, -0.2961010421045, 79
				PUT 0.6628005234112, -0.2644857283459, 79
				PUT 0.7222675896861, -0.2083253278366, 79
				PUT 0.762348687347, -0.1423386976622, 79
				PUT 0.7842962175727, -0.07616580275158, 79
				PUT 0.7926009184385, 0, 79
				PUT 0.7842962175727, 0.07616580275158, 79
				PUT 0.762348687347, 0.1423386976622, 79
				PUT 0.7222675896861, 0.2083253278366, 79
				PUT 0.6628005234112, 0.2644857283459, 79
				PUT 0.6011253072274, 0.2961010421045, 79
				PUT 0.5302246211299, 0.3093550336622, 79
				PUT 0.3483709221422, 0.3178103662134, 79
				PUT 0.1431557761327, 0.3222880247213, 79
				PUT 0, 0.3222880247213, 79
				PUT -0.04813224945659, 0.3222880247213, 79
				PUT -0.2352242994362, 0.3165140157143, 79
				PUT -0.4519973571888, 0.3047036432805, 79
				PUT -0.5160123357029, 0.2985195225021, 79
				PUT -0.5825095140282, 0.2904085897801, -1
			ENDIF
		ELSE
			PUT -0.8026299477222, 0, 79
			PUT -0.7415253774452, -0.2075853534855, 79
			PUT -0.5170986732637, -0.3084611312173, 79
			PUT 0, -0.3322880247213, 79
			PUT 0.5313811426975, -0.3193120641111, 79
			PUT 0.7301142332078, -0.2146695667648, 79
			PUT 0.8026601854299, 0, 79
			PUT 0.7301142332078, 0.2146695667648, 79
			PUT 0.5313811426975, 0.3193120641111, 79
			PUT 0, 0.3322880247213, 79
			PUT -0.5170986732637, 0.3084611312173, 79
			PUT -0.7415253774452, 0.2075853534855, 79
			PUT -0.8026299477222, 0, -1
			IF NOT(bSolid) THEN
				PUT -0.7332972636648, 0.2017194852164, 79
				PUT -0.7926009184385, 0, 79
				PUT -0.7332972636648, -0.2017194852164, 79
				PUT -0.5160123357029, -0.2985195225021, 79
				PUT 0, -0.3222880247213, 79
				PUT 0.5302246211299, -0.3093550336622, 79
				PUT 0.7222675896861, -0.2083253278366, 79
				PUT 0.7926009184385, 0, 79
				PUT 0.7222675896861, 0.2083253278366, 79
				PUT 0.5302246211299, 0.3093550336622, 79
				PUT 0, 0.3222880247213, 79
				PUT -0.5160123357029, 0.2985195225021, 79
				PUT -0.7332972636648, 0.2017194852164, -1
			ENDIF
		ENDIF

		PRISM_ NSP/3, footing_height-0.025*(dep/0.40),
			GET(NSP)
		DEL 1
	ENDIF
	DEL 2

	GROUP "to leg cutting_3"
		ADD A/2, B/2, zzyzx - dep - thk*2
		MUL A/1.605290133152, B/0.6645760494426, 1
		MUL 1.005, 1.005, 1
		isSolidModel = 1
		GOSUB 30
		DEL 3
	ENDGROUP

	GROUP "legs_3"
		IF gs_bathtubleg_type_m = 1 THEN
			dist_1 	= 0.40
			dist_2 	= 0.58
			B2		= 0.70
			GOSUB "Wooden Plinth"
		ENDIF

		IF gs_bathtubleg_type_m = 2 THEN
			distx_1 	= 0.30*(A/1.70)
			disty_1 	= 0.21*(B/0.90)
			distx_2 	= 0.45*(A/1.70)
			disty_2 	= disty_1
			GOSUB "Rectangular Legs"
		ENDIF

		IF gs_bathtubleg_type_m = 3 THEN
			distx_1 	= 0.27*(A/1.70)
			disty_1 	= 0.21*(B/0.90)
			distx_2 	= 0.42*(A/1.70)
			disty_2 	= disty_1
			GOSUB "Round Legs"
		ENDIF

		IF gs_bathtubleg_type_m = 4 THEN
			distx_1 	= 0.15*(A/1.605290133152)
			disty_1 	= 0.10
			leg_angle_1	= 50
			distx_2 	= 0.25*(A/1.605290133152)
			disty_2 	= 0.10
			leg_angle_2	= 45
			GOSUB "Classic Legs"
		ENDIF
	ENDGROUP

	result_03 = SUBGROUP("legs_3", "to leg cutting_3")
	PLACEGROUP result_03

	KILLGROUP "to leg cutting_3"
	KILLGROUP "legs_3"
	KILLGROUP result_03
ENDIF


END

"Wooden Plinth":
	MATERIAL gs_leg_mat
	ADD dist_1*(A/1.80), B/2, 0
	MULy B/B2
	ROTy -90
	ADDz -0.04
	PRISM_ 5, 0.08,
		0, -0.31, 15,
		0, 0.31, 15,
		leg_height+0.15, 0.31, 15,
		leg_height+0.15, -0.31, 15,
		0, -0.31, -1
	DEL 4

	ADD A-dist_2*(A/1.80), B/2, 0
	MULy B/B2
	ROTy -90
	ADDz -0.04
	PRISM_ 5, 0.08,
		0, -0.31, 15,
		0, 0.31, 15,
		leg_height+0.15, 0.31, 15,
		leg_height+0.15, -0.31, 15,
		0, -0.31, -1
	DEL 4
RETURN

"Rectangular Legs":
	MATERIAL gs_leg_mat
	ADD distx_1, disty_1, 0
	BLOCK 0.10, 0.10, zzyzx-0.02
	DEL 1

	ADD distx_1, B-disty_1-0.10, 0
	BLOCK 0.10, 0.10, zzyzx-0.02
	DEL 1

	ADD A-distx_2-0.10, disty_2, 0
	BLOCK 0.10, 0.10, zzyzx-0.02
	DEL 1

	ADD A-distx_2-0.10, B-disty_2-0.10, 0
	BLOCK 0.10, 0.10, zzyzx-0.02
	DEL 1
RETURN

"Round Legs":
	MATERIAL gs_leg_mat
	ADD distx_1, disty_1, 0
	GOSUB "Round Leg"
	DEL 1

	ADD distx_1, B-disty_1, 0
	ROTz -90
	GOSUB "Round Leg"
	DEL 2

	ADD A-distx_2, disty_2, 0
	ROTz 90
	GOSUB "Round Leg"
	DEL 2

	ADD A-distx_2, B-disty_2, 0
	ROTz 180
	GOSUB "Round Leg"
	DEL 2
RETURN

"Round Leg":
	dx = 0.10
	dy = 0.10
	lowerR = 0.04
	upperR = 0.10
	num = 16
	IF gs_detlevel_3D_m = 1 THEN num = 8
	alpha_i = 360/num

	alpha = 0
	FOR i = 1 TO num
		PUT lowerR*COS(alpha), lowerR*SIN(alpha), 1
		alpha = alpha + alpha_i
	NEXT i
	alpha = 0
	FOR i = 1 TO num
		PUT dx+upperR*COS(alpha), dy+upperR*SIN(alpha), zzyzx/2+leg_height/2
		alpha = alpha + alpha_i
	NEXT i

	RULED NSP/6, 1+2+4+16+32,
		GET(NSP)
RETURN

"Classic Legs":
	MATERIAL gs_leg_mat
	ADD distx_1, disty_1, 0
	ROTz leg_angle_1
	GOSUB "Classic Leg"
	DEL 2

	ADD distx_1, B-disty_1, 0
	ROTz -leg_angle_1
	GOSUB "Classic Leg"
	DEL 2

	ADD A-distx_2, disty_2, 0
	ROTz 180-leg_angle_2
	GOSUB "Classic Leg"
	DEL 2

	ADD A-distx_2, B-disty_2, 0
	ROTz 180+leg_angle_2
	GOSUB "Classic Leg"
	DEL 2
RETURN

"Classic Leg":
	angle = 18
	RESOL 16
	IF gs_detlevel_3D_m = 1 THEN RESOL 8
	CYLIND 0.01, 0.04
	ADDz 0.01
	CYLIND leg_height-0.12, 0.02
	ADDz leg_height-0.12

	ADDz 0.05
	ROTx 90
	CUTPOLYA 6, 2, 0,
		0, 0, 15,
		0.10*COS(angle), 0.10*SIN(angle), 15,
		0.10*COS(angle), 0.10, 15,
		-0.10, 0.10, 15,
		-0.10, 0, 15,
		0, 0, -1
	DEL 2

	CYLIND 0.10, 0.035
	CUTEND

	ADDz 0.05

	ROTz 90
	CUTPLANE 180-angle
	DEL 1
	ADD -0.035, 0, 0.02
	ROTz -90
	CUTPLANE 60
	DEL 2

	PRISM_ 5, zzyzx-(0.01+(leg_height-0.12)+0.07),
		B/2, 0.035, 15,
		B/2, -0.035, 15,
		0, -0.035, 79,
		0, 0.035, 1079,
		B/2, 0.035, -1

	CUTEND
	CUTEND
	DEL 3
RETURN

5:
	FOR I=-1 TO 1 STEP 2
	   MULx I
	   ADDx a/2-0.005
	   ROTy 90
		   CUTPLANE
	   DEL 3

	   MULy I
	   ADDy b/2-0.005
	   ROTz 90
	   ROTy 90
		   CUTPLANE
	   DEL 4
	NEXT I
RETURN

10:
	PUT -aa, bb, 0, 0
	PUT 0, bb, 0, 0
	alpha_i = 90/num: alpha = 0
	FOR i = 1 TO num+1
		PUT aa-edgeRadius+edgeRadius*SIN(alpha), bb-edgeRadius+edgeRadius*COS(alpha), 0, 0
		alpha = alpha + alpha_i
	NEXT i
	alpha = 0
	FOR i = 1 TO num+1
		PUT aa-edgeRadius+edgeRadius*COS(alpha), -bb+edgeRadius-edgeRadius*SIN(alpha), 0, 0
		alpha = alpha + alpha_i
	NEXT i
	alpha = 0
	FOR i = 1 TO num+1
		PUT -aa+edgeRadius-edgeRadius*SIN(alpha), -bb+edgeRadius-edgeRadius*COS(alpha), 0, 0
		alpha = alpha + alpha_i
	NEXT i
	alpha = 0
	FOR i = 1 TO num+1
		PUT -aa+edgeRadius-edgeRadius*COS(alpha), bb-edgeRadius+edgeRadius*SIN(alpha), 0, 0
		alpha = alpha + alpha_i
	NEXT i
	PUT 0, bb, 0, 0
	PUT aa, bb, 0, 0

	ADDz ZZYZX-dep-thk

	IF isSolidModel THEN
		TUBE 8, NSP/4, 1+2,
			-0.0001, -diff, 1,
			0, -diff, 1,
			0, bRadius, 901,
			(bRadius + diff)*SIN(wallAng), bRadius-(bRadius + diff)*COS(wallAng), 3001,
			arcWidth-(bRadius - diff)*SIN(wallAng), dep-bRadius+(bRadius - diff)*COS(wallAng), 1,
			arcWidth, dep-diff, 1001,
			arcWidth, dep+thk-diff, 1,
			-0.0001, dep+thk-diff, 1,

			GET(NSP)
	ELSE
		TUBE 13, NSP/4, 1+2,
			-0.0001, -diff, 1,
			0, -diff, 1,
			0, bRadius, 901,
			(bRadius + diff)*SIN(wallAng), bRadius-(bRadius + diff)*COS(wallAng), 3001,
			arcWidth-(bRadius - diff)*SIN(wallAng), dep-bRadius+(bRadius - diff)*COS(wallAng), 1,
			arcWidth, dep-diff, 1001,
			1, dep-diff, 1,
			1, dep+thk-diff, 1,
			arcWidth, dep+thk-diff, 1,
			arcWidth-(bRadius2 - diff)*SIN(wallAng), dep-bRadius+(bRadius2 - diff)*COS(wallAng), 1001,
			(bRadius3 + diff)*SIN(wallAng), bRadius-(bRadius3 + diff)*COS(wallAng), 1,
			0, thk-diff, 1001,
			-0.0001, thk-diff, 1,

			GET(NSP)

		FOR I=1 TO 4
		   CUTEND
		NEXT I
	ENDIF

	ADDz -diff
	alpha_i = 90/num: alpha = 0
	FOR i = 1 TO num+1
		PUT aa-edgeRadius+edgeRadius*SIN(alpha), bb-edgeRadius+edgeRadius*COS(alpha), 8
		alpha = alpha + alpha_i
	NEXT i
	alpha = 0
	FOR i = 1 TO num+1
		PUT aa-edgeRadius+edgeRadius*COS(alpha), -bb+edgeRadius-edgeRadius*SIN(alpha), 8
		alpha = alpha + alpha_i
	NEXT i
	alpha = 0
	FOR i = 1 TO num+1
		PUT -aa+edgeRadius-edgeRadius*SIN(alpha), -bb+edgeRadius-edgeRadius*COS(alpha), 8
		alpha = alpha + alpha_i
	NEXT i
	alpha = 0
	FOR i = 1 TO num+1
		PUT -aa+edgeRadius-edgeRadius*COS(alpha), bb-edgeRadius+edgeRadius*SIN(alpha), 8
		alpha = alpha + alpha_i
	NEXT i
	PUT aa-edgeRadius, bb, -1

	PRISM_ NSP/3, thk+(dep+thk)*isSolidModel,

		GET(NSP)

	DEL 2
RETURN


20:
	MULz dep/0.43
	IF isSolidModel THEN
		bSimple = 0
		num = 4
		IF gs_detlevel_3D_m = 1 THEN
			bSimple = 10
			num = 2
		ENDIF
		FOR k = -1 TO 1 STEP 2
			MULy k
			FOR j = -1 TO 1 STEP 2
				MULx j
				FOR i = 1 TO num
					mm = 1
					GOSUB 200 + bSimple + i
					mm = height
					GOSUB 201 + bSimple + i

					RULED NSP/6, 1+2+4+16+32,
						  GET(NSP)

					ADDz mm
				NEXT i
				DEL i
			NEXT j
			DEL 1
		NEXT k
	ELSE
		! --- OUTSIDE ---

		v = 0
		IF gs_detlevel_3D_m = 2 THEN
			FOR Q=-1 TO 1 STEP 2
				MULy Q
				FOR I=-1 TO 1 STEP 2
				MULx I

				CUTPOLYA 4, 1, 0,
					0, 0, 0,
					5*eps, 0, 0,
					5*eps, -0.8, 0,
					0, -0.8, 0

				ADDz v
				COONS 17, 7, 4+8+16+32,
					-0.53,         eps,           0,
					-0.525213,    -0.05109,       0,
					-0.511017,    -0.100401,      0,
					-0.487907,    -0.146216,      0,
					-0.456689,    -0.18694,       0,
					-0.418447,    -0.221156,      0,
					-0.374515,    -0.247671,      0,
					-0.326422,    -0.265563,      0,
					-0.275842,    -0.274209,      0,
					-0.241651,    -0.268546,      0,
					-0.207345,    -0.263633,      0,
					-0.17294,     -0.259471,      0,
					-0.138451,    -0.256064,      0,
					-0.103896,    -0.253412,      0,
					-0.069292,    -0.251517,      0,
					-0.034654,    -0.250379,      0,
					eps,          -0.25,           0,

					-0.75,         eps,           0.43-v,
					-0.744166,    -0.058965,      0.43-v,
					-0.726889,    -0.115643,      0.43-v,
					-0.698841,    -0.167837,      0.43-v,
					-0.661108,    -0.213522,      0.43-v,
					-0.603606,    -0.263685,      0.43-v,
					-0.538677,    -0.303774,      0.43-v,
					-0.468069,    -0.33271,       0.43-v,
					-0.39368,     -0.349714,      0.43-v,
					-0.345323,    -0.33811,       0.43-v,
					-0.296626,    -0.328029,      0.43-v,
					-0.247637,    -0.319482,      0.43-v,
					-0.198403,    -0.312478,      0.43-v,
					-0.148974,    -0.307023,      0.43-v,
					-0.099398,    -0.303123,      0.43-v,
					-0.049723,    -0.300781,      0.43-v,
					eps,         -0.3,           0.43-v,

					-0.53,      eps,   0.0,
					-0.54809,   eps,   0.007219,
					-0.566745,  eps,   0.028228,
					-0.58,      eps,   0.05,
					-0.74,      eps,   0.42,
					-0.743741,  eps,   0.426259,
					-0.75,      eps,   0.43-v,

					eps,   -0.25,       0.0,
					eps,   -0.262914,   0.007219,
					eps,   -0.276506,   0.028228,
					eps,   -0.280842,   0.05,
					eps,   -0.299496,   0.420007,
					eps,   -0.299779,   0.425608,
					eps,   -0.3,        0.43-v
				DEL 1

				CUTEND

				DEL 1
				NEXT I
				DEL 1
			NEXT Q

			! --- BOTTOM ---

			PRISM_ 65, 0,
				-0.529216,    -0.0,      13,
				-0.525213,     0.05109,      13,
				-0.511017,     0.100401,      13,
				-0.487907,     0.146216,      13,
				-0.456689,     0.18694,      13,
				-0.418447,     0.221156,      13,
				-0.374515,     0.247671,      13,
				-0.326422,     0.265563,      13,
				-0.275842,     0.274209,      13,
				-0.241651,     0.268546,      13,
				-0.207345,     0.263633,      13,
				-0.17294,     0.259471,      13,
				-0.138451,     0.256064,      13,
				-0.103896,     0.253412,      13,
				-0.069292,     0.251517,      13,
				-0.034654,     0.250379,      13,
				-0.0,     0.250085,      13,
				0.034654,     0.250379,      13,
				0.069292,     0.251517,      13,
				0.103896,     0.253412,      13,
				0.138451,     0.256064,      13,
				0.17294,     0.259471,      13,
				0.207345,     0.263633,      13,
				0.241651,     0.268546,      13,
				0.275842,     0.274209,      13,
				0.326422,     0.265563,      13,
				0.374515,     0.247671,      13,
				0.418447,     0.221156,      13,
				0.456689,     0.18694,      13,
				0.487907,     0.146216,      13,
				0.511017,     0.100401,      13,
				0.525213,     0.05109,      13,
				0.529216,     0.0,      13,
				0.525213,    -0.05109,      13,
				0.511017,    -0.100401,      13,
				0.487907,    -0.146216,      13,
				0.456689,    -0.18694,      13,
				0.418447,    -0.221156,      13,
				0.374515,    -0.247671,      13,
				0.326422,    -0.265563,      13,
				0.275842,    -0.274209,      13,
				0.241651,    -0.268546,      13,
				0.207345,    -0.263633,      13,
				0.17294,    -0.259471,      13,
				0.138451,    -0.256064,      13,
				0.103896,    -0.253412,      13,
				0.069292,    -0.251517,      13,
				0.034654,    -0.250379,      13,
				0.0,    -0.250085,      13,
				-0.034654,    -0.250379,      13,
				-0.069292,    -0.251517,      13,
				-0.103896,    -0.253412,      13,
				-0.138451,    -0.256064,      13,
				-0.17294,    -0.259471,      13,
				-0.207345,    -0.263633,      13,
				-0.241651,    -0.268546,      13,
				-0.275842,    -0.274209,      13,
				-0.326422,    -0.265563,      13,
				-0.374515,    -0.247671,      13,
				-0.418447,    -0.221156,      13,
				-0.456689,    -0.18694,      13,
				-0.487907,    -0.146216,      13,
				-0.511017,    -0.100401,      13,
				-0.525213,    -0.05109,      13,
				-0.529216,    -0.0,     -1
		ELSE
			FOR Q=-1 TO 1 STEP 2
				MULy Q
				FOR I=-1 TO 1 STEP 2
				MULx I

				CUTPOLYA 4, 1, 0,
					0, 0, 0,
					5*eps, 0, 0,
					5*eps, -0.8, 0,
					0, -0.8, 0

				ADDz v
				COONS 7, 3, 4+8+16+32,
					-0.53,         eps,           0,
					-0.487907,    -0.146216,      0,
					-0.374515,    -0.247671,      0,
					-0.241651,    -0.268546,      0,
					-0.138451,    -0.256064,      0,
					-0.034654,    -0.250379,      0,
					eps,          -0.25,           0,

					-0.75,         eps,           0.43-v,
					-0.698841,    -0.167837,      0.43-v,
					-0.538677,    -0.303774,      0.43-v,
					-0.345323,    -0.33811,       0.43-v,
					-0.198403,    -0.312478,      0.43-v,
					-0.049723,    -0.300781,      0.43-v,
					eps,         -0.3,           0.43-v,

					-0.53,      eps,   0.0,
					-0.58,      eps,   0.05,
					-0.75,      eps,   0.43-v,

					eps,   -0.25,       0.0,
					eps,   -0.280842,   0.05,
					eps,   -0.3,        0.43-v
				DEL 1

				CUTEND

				DEL 1
				NEXT I
				DEL 1
			NEXT Q

			! --- BOTTOM ---

			PRISM_ 25, 0,
				-0.5299712314443, 0, 13,
				-0.487907, -0.146216, 13,
				-0.374515, -0.247671, 13,
				-0.241651, -0.268546, 13,
				-0.138451, -0.256064, 13,
				-0.034654, -0.250379, 13,
				0, -0.250001090522, 13,
				0.034654, -0.250379, 13,
				0.138451, -0.256064, 13,
				0.241651, -0.268546, 13,
				0.374515, -0.247671, 13,
				0.487907, -0.146216, 13,
				0.5299712314443, 0, 13,
				0.487907, 0.146216, 13,
				0.374515, 0.247671, 13,
				0.241651, 0.268546, 13,
				0.138451, 0.256064, 13,
				0.034654, 0.250379, 13,
				0, 0.250001090522, 13,
				-0.034654, 0.250379, 13,
				-0.138451, 0.256064, 13,
				-0.241651, 0.268546, 13,
				-0.374515, 0.247671, 13,
				-0.487907, 0.146216, 13,
				-0.5299712314443, 0, -1
		ENDIF
	ENDIF
	DEL 1
RETURN

30:
	MULz dep/0.40
	IF gs_detlevel_3D_m = 2 THEN
		IF isSolidModel THEN
			FOR i = 1 TO 6
				mm = 1
				GOSUB 300 + i
				mm = height
				GOSUB 301 + i

				RULED NSP/6, 1+2+4+16+32,
					  GET(NSP)

				ADDz mm
			NEXT i
			DEL i-1
		ELSE
			FOR i = -1 TO 1 STEP 2
				MULy i

				COONS 10, 8, 1+2+4+8+16+32,
					0.4091440203386, 0, 0,
					0.4075873496582, -0.02160969954024, 0,
					0.4034680869234, -0.04097949266801, 0,
					0.3959116897267, -0.06176580945846, 0,
					0.3845562659838, -0.08252087473117, 0,
					0.3666453671199, -0.1049238474855, 0,
					0.3402920105118, -0.1265749049079, 0,
					0.2696019278158, -0.1503524961063, 0,
					0.1109575337766, -0.1639336049274, 0,
					0, -0.1639336049274, 0,

					0.7926009184385, 0, 0.40,
					0.7842962175727, -0.07616580275158, 0.40,
					0.762348687347, -0.1423386976622, 0.40,
					0.7222675896861, -0.2083253278366, 0.40,
					0.6628005234112, -0.2644857283459, 0.40,
					0.6011253072274, -0.2961010421045, 0.40,
					0.5302246211299, -0.3093550336622, 0.40,
					0.3483709221422, -0.3178103662134, 0.40,
					0.1431557761327, -0.3222880247213, 0.40,
					0, -0.3222880247213, 0.40,

					0.4091440203386, 0, 0,
					0.4576450417977, 0, 0.018150461424,
					0.4933130389135, 0, 0.0485508875862,
					0.5447323309588, 0, 0.1153597564761,
					0.7377760167709, 0, 0.3661806017743,
					0.7569944069408, 0, 0.3882684456721,
					0.7726009184385, 0, 0.40,
					0.7926009184385, 0, 0.40,

					0, -0.1639336049274, 0,
					0, -0.1953711262946, 0.01815162746508,
					0, -0.2212617431957, 0.04855205362727,
					0, -0.2405834188562, 0.1153609225171,
					0, -0.275362435045, 0.3661817678153,
					0, -0.2837735273842, 0.3882696117132,
					0, -0.3024109036449, 0.40,
					0, -0.3222880247213, 0.40

				COONS 12, 8, 1+2+4+8+16+32,
					-0.5825096822713, 0, 0,
					-0.5800928961545, -0.02728856071689, 0,
					-0.5722682153867, -0.05462358480829, 0,
					-0.5594098968824, -0.07998285956989, 0,
					-0.5419830293801, -0.1024491334099, 0,
					-0.5206179472294, -0.1212097953355, 0,
					-0.496087431032, -0.1355862673047, 0,
					-0.4692787559659, -0.1450585485714, 0,
					-0.4411615988105, -0.149284024248, 0,
					-0.2198708017462, -0.1592263223037, 0,
					-0.04813224945659, -0.1639336049274, 0,
					0, -0.1639336049274, 0,

					-0.7926009184385, 0, 0.40,
					-0.7881169509102, -0.05880501270851, 0.40,
					-0.7699783692966, -0.1304066479711, 0.40,
					-0.7332972636648, -0.2017194852164, 0.40,
					-0.6816428399081, -0.2556771091319, 0.40,
					-0.6328062419738, -0.2816463795721, 0.40,
					-0.5825095140282, -0.2904085897801, 0.40,
					-0.5160123357029, -0.2985195225021, 0.40,
					-0.4519973571888, -0.3047036432805, 0.40,
					-0.2352242994362, -0.3165140157143, 0.40,
					-0.04813224945659, -0.3222880247213, 0.40,
					0, -0.3222880247213, 0.40,

					-0.5825096822713, 0, 0,
					-0.6139472036385, 0, 0.01815366686216,
					-0.6471099914192, 0, 0.04855409302435,
					-0.685682109857, 0, 0.1153629619142,
					-0.7385174279137, 0, 0.3661838072124,
					-0.7510276220776, 0, 0.3882716511103,
					-0.7725096822713, 0, 0.40,
					-0.7926009184385, 0, 0.40,

					0, -0.1639336049274, 0,
					0, -0.1953711262946, 0.01815162746508,
					0, -0.2212617431957, 0.04855205362727,
					0, -0.2405834188562, 0.1153609225171,
					0, -0.275362435045, 0.3661817678153,
					0, -0.2837735273842, 0.3882696117132,
					0, -0.3024109036449, 0.40,
					0, -0.3222880247213, 0.40

				DEL 1
			NEXT i

			! --- BOTTOM ---

			PRISM_ 41, 0,
				0, 0.1639336049274, 13,
				0.1109575337766, 0.1639336049274, 13,
				0.2696019278158, 0.1503524961063, 13,
				0.3402920105118, 0.1265749049079, 13,
				0.3666453671199, 0.1049238474855, 13,
				0.3845562659838, 0.08252087473117, 13,
				0.3959116897267, 0.06176580945846, 13,
				0.4034680869234, 0.04097949266801, 13,
				0.4075873496582, 0.02160969954024, 13,
				0.4091440203386, 0, 13,
				0.4075873496582, -0.02160969954024, 13,
				0.4034680869234, -0.04097949266801, 13,
				0.3959116897267, -0.06176580945846, 13,
				0.3845562659838, -0.08252087473117, 13,
				0.3666453671199, -0.1049238474855, 13,
				0.3402920105118, -0.1265749049079, 13,
				0.2696019278158, -0.1503524961063, 13,
				0.1109575337766, -0.1639336049274, 13,
				0, -0.1639336049274, 13,
				-0.04813224945659, -0.1639336049274, 13,
				-0.2198708017462, -0.1592263223037, 13,
				-0.4411615988105, -0.149284024248, 13,
				-0.4692787559659, -0.1450585485714, 13,
				-0.496087431032, -0.1355862673047, 13,
				-0.5206179472294, -0.1212097953355, 13,
				-0.5419830293801, -0.1024491334099, 13,
				-0.5594098968824, -0.07998285956989, 13,
				-0.5722682153867, -0.05462358480829, 13,
				-0.5800928961545, -0.02728856071689, 13,
				-0.5825096822713, 0, 0,
				-0.5800928961545, 0.02728856071689, 13,
				-0.5722682153867, 0.05462358480829, 13,
				-0.5594098968824, 0.07998285956989, 13,
				-0.5419830293801, 0.1024491334099, 13,
				-0.5206179472294, 0.1212097953355, 13,
				-0.496087431032, 0.1355862673047, 13,
				-0.4692787559659, 0.1450585485714, 13,
				-0.4411615988105, 0.149284024248, 13,
				-0.2198708017462, 0.1592263223037, 13,
				-0.04813224945659, 0.1639336049274, 13,
				0, 0.1639336049274, -1
		ENDIF

		RESOL 8
		IF isEdge THEN
			PUT -0.04813224945659, -0.3222880247213, 0.40, 0
			PUT 0, -0.3222880247213, 0.40, 0
			PUT 0.1431557761327, -0.3222880247213, 0.40, 0
			PUT 0.3483709221422, -0.3178103662134, 0.40, 0
			PUT 0.5302246211299, -0.3093550336622, 0.40, 0
			PUT 0.6011253072274, -0.2961010421045, 0.40, 0
			PUT 0.6628005234112, -0.2644857283459, 0.40, 0
			PUT 0.7222675896861, -0.2083253278366, 0.40, 0
			PUT 0.762348687347, -0.1423386976622, 0.40, 0
			PUT 0.7842962175727, -0.07616580275158, 0.40, 0
			PUT 0.7926009184385, 0, 0.40, 0
			PUT 0.7842962175727, 0.07616580275158, 0.40, 0
			PUT 0.762348687347, 0.1423386976622, 0.40, 0
			PUT 0.7222675896861, 0.2083253278366, 0.40, 0
			PUT 0.6628005234112, 0.2644857283459, 0.40, 0
			PUT 0.6011253072274, 0.2961010421045, 0.40, 0
			PUT 0.5302246211299, 0.3093550336622, 0.40, 0
			PUT 0.3483709221422, 0.3178103662134, 0.40, 0
			PUT 0.1431557761327, 0.3222880247213, 0.40, 0
			PUT 0, 0.3222880247213, 0.40, 0
			PUT -0.04813224945659, 0.3222880247213, 0.40, 0
			PUT -0.2352242994362, 0.3165140157143, 0.40, 0
			PUT -0.4519973571888, 0.3047036432805, 0.40, 0
			PUT -0.5160123357029, 0.2985195225021, 0.40, 0
			PUT -0.5825095140282, 0.2904085897801, 0.40, 0
			PUT -0.6328062419738, 0.2816463795721, 0.40, 0
			PUT -0.6816428399081, 0.2556771091319, 0.40, 0
			PUT -0.7332972636648, 0.2017194852164, 0.40, 0
			PUT -0.7699783692966, 0.1304066479711, 0.40, 0
			PUT -0.7881169509102, 0.05880501270851, 0.40, 0
			PUT -0.7926009184385, 0, 0.40, 0
			PUT -0.7881169509102, -0.05880501270851, 0.40, 0
			PUT -0.7699783692966, -0.1304066479711, 0.40, 0
			PUT -0.7332972636648, -0.2017194852164, 0.40, 0
			PUT -0.6816428399081, -0.2556771091319, 0.40, 0
			PUT -0.6328062419738, -0.2816463795721, 0.40, 0
			PUT -0.5825095140282, -0.2904085897801, 0.40, 0
			PUT -0.5160123357029, -0.2985195225021, 0.40, 0
			PUT -0.4519973571888, -0.3047036432805, 0.40, 0
			PUT -0.2352242994362, -0.3165140157143, 0.40, 0
			PUT -0.04813224945659, -0.3222880247213, 0.40, 0
			PUT 0, -0.3222880247213, 0.40, 0
			PUT 0.1431557761327, -0.3222880247213, 0.40, 0

			TUBE 9, NSP/4, 1+2,
				0, 0, 0,
				-0.0075, 0, 1,
				-0.0075-0.0025*SIN(45), -0.0025+0.0025*SIN(45), 1,
				-0.01, -0.0025, 1,
				-0.01, -0.025, 0,
				-0.008, -0.025, 0,
				-0.008, -0.002, 0,
				0, -0.002, 0,
				0, 0, 1001,

				GET(NSP)
		ENDIF
	ELSE
		IF isSolidModel THEN
			FOR i = 1 TO 4
				mm = 1
				GOSUB 310 + i
				mm = height
				GOSUB 311 + i

				RULED NSP/6, 1+2+4+16+32,
					  GET(NSP)

				ADDz mm
			NEXT i
			DEL i-1
		ELSE
			FOR i = -1 TO 1 STEP 2
				MULy i

				COONS 4, 4, 1+2+4+8+16+32,
					0.4091440203386, 0, 0,
					0.3959116897267, -0.06176580945846, 0,
					0.3402920105118, -0.1265749049079, 0,
					0, -0.1639336049274, 0,

					0.7926009184385, 0, 0.40,
					0.7222675896861, -0.2083253278366, 0.40,
					0.5302246211299, -0.3093550336622, 0.40,
					0, -0.3222880247213, 0.40,

					0.4091440203386, 0, 0,
					0.4933130389135, 0, 0.0485508875862,
					0.7569944069408, 0, 0.3882684456721,
					0.7926009184385, 0, 0.40,

					0, -0.1639336049274, 0,
					0, -0.2212617431957, 0.04855205362727,
					0, -0.2837735273842, 0.3882696117132,
					0, -0.3222880247213, 0.40


				COONS 4, 4, 1+2+4+8+16+32,
					-0.5825096822713, 0, 0,
					-0.5594098968824, -0.07998285956989, 0,
					-0.4692787559659, -0.1450585485714, 0,
					0, -0.1639336049274, 0,

					-0.7926009184385, 0, 0.40,
					-0.7332972636648, -0.2017194852164, 0.40,
					-0.5160123357029, -0.2985195225021, 0.40,
					0, -0.3222880247213, 0.40,

					-0.5825096822713, 0, 0,
					-0.6471099914192, 0, 0.04855409302435,
					-0.7510276220776, 0, 0.3882716511103,
					-0.7926009184385, 0, 0.40,

					0, -0.1639336049274, 0,
					0, -0.2212617431957, 0.04855205362727,
					0, -0.2837735273842, 0.3882696117132,
					0, -0.3222880247213, 0.40

				DEL 1
			NEXT i

			! --- BOTTOM ---

			PRISM_ 13, 0,
				0, 0.1639336049274, 13,
				0.3402920105118, 0.1265749049079, 13,
				0.3959116897267, 0.06176580945846, 13,
				0.4091440203386, 0, 13,
				0.3959116897267, -0.06176580945846, 13,
				0.3402920105118, -0.1265749049079, 13,
				0, -0.1639336049274, 13,
				-0.4692787559659, -0.1450585485714, 13,
				-0.5594098968824, -0.07998285956989, 13,
				-0.5825096822713, 0, 0,
				-0.5594098968824, 0.07998285956989, 13,
				-0.4692787559659, 0.1450585485714, 13,
				0, 0.1639336049274, -1
		ENDIF

		RESOL 8
		IF isEdge THEN
			PUT -0.04813224945659, -0.3222880247213, 0.40, 0
			PUT 0, -0.3222880247213, 0.40, 0
			PUT 0.5302246211299, -0.3093550336622, 0.40, 0
			PUT 0.7222675896861, -0.2083253278366, 0.40, 0
			PUT 0.7926009184385, 0, 0.40, 0
			PUT 0.7222675896861, 0.2083253278366, 0.40, 0
			PUT 0.5302246211299, 0.3093550336622, 0.40, 0
			PUT 0, 0.3222880247213, 0.40, 0
			PUT -0.5160123357029, 0.2985195225021, 0.40, 0
			PUT -0.7332972636648, 0.2017194852164, 0.40, 0
			PUT -0.7926009184385, 0, 0.40, 0
			PUT -0.7332972636648, -0.2017194852164, 0.40, 0
			PUT -0.5160123357029, -0.2985195225021, 0.40, 0
			PUT 0, -0.3222880247213, 0.40, 0
			PUT 0.1431557761327, -0.3222880247213, 0.40, 0

			TUBE 9, NSP/4, 1+2,
				0, 0, 0,
				-0.0075, 0, 1,
				-0.0075-0.0025*SIN(45), -0.0025+0.0025*SIN(45), 1,
				-0.01, -0.0025, 1,
				-0.01, -0.025, 0,
				-0.008, -0.025, 0,
				-0.008, -0.002, 0,
				0, -0.002, 0,
				0, 0, 1001,

				GET(NSP)
		ENDIF
	ENDIF
	DEL 1
RETURN

201:
	PUT 0.53,            0, mm
	PUT 0.525213,      0.05109, mm
	PUT 0.511017,     0.100401, mm
	PUT 0.487907,     0.146216, mm
	PUT 0.456689,      0.18694, mm
	PUT 0.418447,     0.221156, mm
	PUT 0.374515,     0.247671, mm
	PUT 0.326422,     0.265563, mm
	PUT 0.275842,     0.274209, mm
	PUT 0.241651,     0.268546, mm
	PUT 0.207345,     0.263633, mm
	PUT 0.17294,     0.259471, mm
	PUT 0.138451,     0.256064, mm
	PUT 0.103896,     0.253412, mm
	PUT 0.069292,     0.251517, mm
	PUT 0.034654,     0.250379, mm
	PUT 0, 0.25, mm
	PUT 0, 0, mm

	height = 0.007219
RETURN

202:
	PUT 0.5480892788339, 0, mm
	PUT 0.5442895416667, 0.05268879166667, mm
	PUT 0.5307410833333, 0.1035139166667, mm
	PUT 0.507969125,  0.150678375, mm
	PUT 0.4768263333333,    0.1925155, mm
	PUT 0.436535375,  0.229675625, mm
	PUT 0.3902649166667,   0.25873925, mm
	PUT 0.3395804583333, 0.2787582083333, mm
	PUT 0.2861933333333,    0.2890835, mm
	PUT 0.250802375,  0.282716625, mm
	PUT 0.2152589166667, 0.2772285833333, mm
	PUT 0.1795842916667, 0.2726220416667, mm
	PUT 0.1437988333333, 0.2689018333333, mm
	PUT 0.107925875, 0.2660689583333, mm
	PUT 0.07198758333333, 0.2641260833333, mm
	PUT 0.03600445833333, 0.2630737083333, mm
	PUT 0, 0.2629103838565, mm
	PUT 0, 0, mm
	height = 0.021009
RETURN

203:
	PUT 0.5667444756659, 0, mm
	PUT 0.5638957708333, 0.05432995833333, mm
	PUT 0.5509595416667, 0.1067115833333, mm
	PUT 0.5284903125,  0.155267875, mm
	PUT 0.4973874166667,    0.1982605, mm
	PUT 0.4550121875,  0.238407125, mm
	PUT 0.4063679583333,   0.27006175, mm
	PUT 0.3530567291667, 0.2922500416667, mm
	PUT 0.2968271666667,     0.304297, mm
	PUT 0.2602009375,  0.297268625, mm
	PUT 0.2233847083333, 0.2912479166667, mm
	PUT 0.1864051458333, 0.2862392083333, mm
	PUT 0.1492879166667, 0.2822481666667, mm
	PUT 0.1120616875, 0.2792767916667, mm
	PUT 0.07475379166666, 0.2773284166667, mm
	PUT 0.03739022916667, 0.2764040416667, mm
	PUT 0, 0.2765059727386, mm
	PUT 0, 0, mm
	height = 0.02177198350364
RETURN

204:
	PUT 0.58, 0, mm
	PUT 0.5784395,  0.055392625, mm
	PUT 0.566453,   0.10875225, mm
	PUT 0.544624,  0.158121875, mm
	PUT 0.5138985,    0.2016915, mm
	PUT 0.4697765,  0.244246125, mm
	PUT 0.419096,   0.27791325, mm
	PUT 0.3634955,  0.301692375, mm
	PUT 0.304761,    0.3148825, mm
	PUT 0.267237,  0.306614125, mm
	PUT 0.2294855,   0.29948225, mm
	PUT 0.1915385,  0.293492875, mm
	PUT 0.153427,    0.2886525, mm
	PUT 0.115185,  0.284964125, mm
	PUT 0.076845,   0.28243175, mm
	PUT 0.0384385,  0.281056875, mm
	PUT 0, 0.2808420558864, mm
	PUT 0, 0, mm
	height = 0.3700069999101
RETURN

205:
	PUT 0.74, 0, mm
	PUT 0.73056098498, 0.05736075373981, mm
	PUT 0.7103528379706, 0.1125912480947, mm
	PUT 0.6799931782975, 0.1636667906909, mm
	PUT 0.6404728200514, 0.2087081382641, mm
	PUT 0.585431315951, 0.2545657880466, mm
	PUT 0.5235418902474, 0.2911401812179, mm
	PUT 0.4564796487788, 0.3174046623258, mm
	PUT 0.3860691994758, 0.3326320277467, mm
	PUT 0.3384754863626, 0.3240171545986, mm
	PUT 0.2906167965407, 0.3166678763815, mm
	PUT 0.2425304743081, 0.3105918368226, mm
	PUT 0.1942528626577, 0.3057963449047, mm
	PUT 0.1458233032288, 0.3022853753608, mm
	PUT 0.09727200554234, 0.3000633215653, mm
	PUT 0.04865467620599, 0.2991328818888, mm
	PUT 0, 0.2994959253836, mm
	PUT 0, 0, mm
RETURN

211:
	PUT 0.53, 0,  mm
	PUT 0.487907, 0.146216, mm
	PUT 0.374515, 0.247671, mm
	PUT 0.241651, 0.268546, mm
	PUT 0.138451, 0.256064, mm
	PUT 0.034654, 0.250379, mm
	PUT 0, 0.25, mm
	PUT 0, 0, mm
	height = 0.05
RETURN

212:
	PUT 0.58, 0, mm
	PUT 0.543374, 0.1580001666667, mm
	PUT 0.416596, 0.2776698333333, mm
	PUT 0.263487, 0.306249, mm
	PUT 0.148427, 0.2881656666667, mm
	PUT 0.0321885, 0.2804483333333, mm
	PUT 0, 0.280842, mm
	PUT 0, 0, mm

	height = 0.38
RETURN

213:
	PUT 0.75, 0, mm
	PUT 0.698841, 0.167837, mm
	PUT 0.538677, 0.303774, mm
	PUT 0.345323, 0.33811, mm
	PUT 0.198403, 0.312478, mm
	PUT 0.049723, 0.300781, mm
	PUT 0, 0.3, mm
	PUT 0, 0, mm
RETURN


301:
	PUT -0.04813224945659, 0.1639336049274, mm
	PUT -0.2198708017462, 0.1592263223037, mm
	PUT -0.4411615988105, 0.149284024248, mm
	PUT -0.4692787559659, 0.1450585485714, mm
	PUT -0.496087431032, 0.1355862673047, mm
	PUT -0.5206179472294, 0.1212097953355, mm
	PUT -0.5419830293801, 0.1024491334099, mm
	PUT -0.5594098968824, 0.07998285956989, mm
	PUT -0.5722682153867, 0.05462358480829, mm
	PUT -0.5800928961545, 0.02728856071689, mm
	PUT -0.5825096822713, 0, mm
	PUT -0.5800928961545, -0.02728856071689, mm
	PUT -0.5722682153867, -0.05462358480829, mm
	PUT -0.5594098968824, -0.07998285956989, mm
	PUT -0.5419830293801, -0.1024491334099, mm
	PUT -0.5206179472294, -0.1212097953355, mm
	PUT -0.496087431032, -0.1355862673047, mm
	PUT -0.4692787559659, -0.1450585485714, mm
	PUT -0.4411615988105, -0.149284024248, mm
	PUT -0.2198708017462, -0.1592263223037, mm
	PUT -0.04813224945659, -0.1639336049274, mm
	PUT 0, -0.1639336049274, mm
	PUT 0.1109575337766, -0.1639336049274, mm
	PUT 0.2696019278158, -0.1503524961063, mm
	PUT 0.3402920105118, -0.1265749049079, mm
	PUT 0.3666453671199, -0.1049238474855, mm
	PUT 0.3845562659838, -0.08252087473117, mm
	PUT 0.3959116897267, -0.06176580945846, mm
	PUT 0.4034680869234, -0.04097949266801, mm
	PUT 0.4075873496582, -0.02160969954024, mm
	PUT 0.4091440203386, 0, mm
	PUT 0.4075873496582, 0.02160969954024, mm
	PUT 0.4034680869234, 0.04097949266801, mm
	PUT 0.3959116897267, 0.06176580945846, mm
	PUT 0.3845562659838, 0.08252087473117, mm
	PUT 0.3666453671199, 0.1049238474855, mm
	PUT 0.3402920105118, 0.1265749049079, mm
	PUT 0.2696019278158, 0.1503524961063, mm
	PUT 0.1109575337766, 0.1639336049274, mm
	PUT 0, 0.1639336049274, mm
	height = 0.018150461424
RETURN

302:
	PUT -0.04826174833196, 0.1945697207131, mm
	PUT -0.2223231563098, 0.1889086430245, mm
	PUT -0.4430980609192, 0.177898071619, mm
	PUT -0.4764729771441, 0.1725913839178, mm
	PUT -0.5090809372654, 0.1625121754331, mm
	PUT -0.5374218397308, 0.1481363352769, mm
	PUT -0.5628409230117, 0.1275444665534, mm
	PUT -0.5852869402828, 0.09977802283536, mm
	PUT -0.6016780129664, 0.06705254785172, mm
	PUT -0.6111056070161, 0.03259231658292, mm
	PUT -0.6139472036385, 0, mm
	PUT -0.6111056070161, -0.03259231658292, mm
	PUT -0.6016780129664, -0.06705254785172, mm
	PUT -0.5852869402828, -0.09977802283536, mm
	PUT -0.5628409230117, -0.1275444665534, mm
	PUT -0.5374218397308, -0.1481363352769, mm
	PUT -0.5090809372654, -0.1625121754331, mm
	PUT -0.4764729771441, -0.1725913839178, mm
	PUT -0.4430980609192, -0.177898071619, mm
	PUT -0.2223231563098, -0.1889086430245, mm
	PUT -0.04826174833196, -0.1945697207131, mm
	PUT 0, -0.1953711262946, mm
	PUT 0.1148596676388, -0.1943916305839, mm
	PUT 0.2794594111994, -0.1811315189539, mm
	PUT 0.3653323954627, -0.1585633261372, mm
	PUT 0.3973520412377, -0.1371323538419, mm
	PUT 0.4208173703872, -0.1124338366619, mm
	PUT 0.4383482708746, -0.08564137064469, mm
	PUT 0.4498534388061, -0.05741837051723, mm
	PUT 0.4558219818509, -0.03038292428117, mm
	PUT 0.4576450417977, 0, mm
	PUT 0.4558219818509, 0.03038292428117, mm
	PUT 0.4498534388061, 0.05741837051723, mm
	PUT 0.4383482708746, 0.08564137064469, mm
	PUT 0.4208173703872, 0.1124338366619, mm
	PUT 0.3973520412377, 0.1371323538419, mm
	PUT 0.3653323954627, 0.1585633261372, mm
	PUT 0.2794594111994, 0.1811315189539, mm
	PUT 0.1148596676388, 0.1943916305839, mm
	PUT 0, 0.1953711262946, mm
	height = 0.03040042616219
RETURN

303:
	PUT -0.04854808960855, 0.220163196075, mm
	PUT -0.2250891956758, 0.214052587364, mm
	PUT -0.4455050502316, 0.2024780066511, mm
	PUT -0.4842945679272, 0.1965943709676, mm
	PUT -0.522858655505, 0.1864124993073, mm
	PUT -0.5551667866396, 0.1725415550064, mm
	PUT -0.5847967134518, 0.1506227435274, mm
	PUT -0.612418722893, 0.1180603939737, mm
	PUT -0.6324993921572, 0.0784729828104, mm
	PUT -0.64368674189, 0.03739180840658, mm
	PUT -0.6471099914192, 0, mm
	PUT -0.64368674189, -0.03739180840658, mm
	PUT -0.6324993921572, -0.0784729828104, mm
	PUT -0.612418722893, -0.1180603939737, mm
	PUT -0.5847967134518, -0.1506227435274, mm
	PUT -0.5551667866396, -0.1725415550064, mm
	PUT -0.522858655505, -0.1864124993073, mm
	PUT -0.4842945679272, -0.1965943709676, mm
	PUT -0.4455050502316, -0.2024780066511, mm
	PUT -0.2250891956758, -0.214052587364, mm
	PUT -0.04854808960855, -0.220163196075, mm
	PUT 0, -0.2212617431957, mm
	PUT 0.1173359099073, -0.2199190744927, mm
	PUT 0.2864651113955, -0.2075962827723, mm
	PUT 0.3860951056324, -0.1868538110558, mm
	PUT 0.4223551489807, -0.166259246606, mm
	PUT 0.4499490168221, -0.1398815077189, mm
	PUT 0.4722295024603, -0.1076679636756, mm
	PUT 0.4862575495329, -0.07262460292953, mm
	PUT 0.492649481294, -0.03853982630364, mm
	PUT 0.4933130389135, 0, mm
	PUT 0.492649481294, 0.03853982630364, mm
	PUT 0.4862575495329, 0.07262460292953, mm
	PUT 0.4722295024603, 0.1076679636756, mm
	PUT 0.4499490168221, 0.1398815077189, mm
	PUT 0.4223551489807, 0.166259246606, mm
	PUT 0.3860951056324, 0.1868538110558, mm
	PUT 0.2864651113955, 0.2075962827723, mm
	PUT 0.1173359099073, 0.2199190744927, mm
	PUT 0, 0.2212617431957, mm
	height = 0.06680886888983
RETURN

304:
	PUT -0.04932618821761, 0.2397849066728, mm
	PUT -0.2288387497068, 0.2338219434158, mm
	PUT -0.4493873115414, 0.2222805298718, mm
	PUT -0.4940831880401, 0.2164171226825, mm
	PUT -0.5390951604069, 0.206729764323, mm
	PUT -0.5758622775431, 0.1939608923538, mm
	PUT -0.6101948052192, 0.1713123145957, mm
	PUT -0.643484564163, 0.1345512356828, mm
	PUT -0.6677465873401, 0.08869906481624, mm
	PUT -0.6811854500885, 0.04159412375382, mm
	PUT -0.685682109857, -6.305019118306E-016, mm
	PUT -0.6811854500885, -0.04159412375382, mm
	PUT -0.6677465873401, -0.08869906481625, mm
	PUT -0.643484564163, -0.1345512356828, mm
	PUT -0.6101948052192, -0.1713123145957, mm
	PUT -0.5758622775431, -0.1939608923538, mm
	PUT -0.5390951604069, -0.206729764323, mm
	PUT -0.4940831880401, -0.2164171226825, mm
	PUT -0.4493873115414, -0.2222805298718, mm
	PUT -0.2288387497068, -0.2338219434158, mm
	PUT -0.04932618821761, -0.2397849066728, mm
	PUT 0, -0.2405834188562, mm
	PUT 0.1215622960569, -0.239607459521, mm
	PUT 0.2969710993538, -0.2289518700703, mm
	PUT 0.4121082474454, -0.210765001814, mm
	PUT 0.454358832248, -0.1917367275698, mm
	PUT 0.4878313826623, -0.1644096493356, mm
	PUT 0.5166115973323, -0.1275049096262, mm
	PUT 0.534912667427, -0.08637107062171, mm
	PUT 0.5434781317856, -0.04596684596605, mm
	PUT 0.5447323309588, 0, mm
	PUT 0.5434781317856, 0.04596684596605, mm
	PUT 0.534912667427, 0.08637107062171, mm
	PUT 0.5166115973323, 0.1275049096262, mm
	PUT 0.4878313826623, 0.1644096493356, mm
	PUT 0.454358832248, 0.1917367275698, mm
	PUT 0.4121082474454, 0.210765001814, mm
	PUT 0.2969710993538, 0.2289518700703, mm
	PUT 0.1215622960569, 0.239607459521, mm
	PUT 0, 0.2405834188562, mm
	height = 0.2508208452982
RETURN

305:
	PUT -0.0514009413375, 0.2734587450236, mm
	PUT -0.2351816127594, 0.2662382144452, mm
	PUT -0.4571595363836, 0.2533247552949, mm
	PUT -0.5090584261963, 0.2460763638244, mm
	PUT -0.5618149378628, 0.2354783059905, mm
	PUT -0.6043376955115, 0.2224062935777, mm
	PUT -0.6446694785623, 0.1976227367652, mm
	PUT -0.6849236415194, 0.1552577157178, mm
	PUT -0.7146636731203, 0.1017355723727, mm
	PUT -0.7316507033952, 0.04720165187635, mm
	PUT -0.7385174279137, 0, mm
	PUT -0.7316507033952, -0.04720165187636, mm
	PUT -0.7146636731203, -0.1017355723727, mm
	PUT -0.6849236415194, -0.1552577157178, mm
	PUT -0.6446694785623, -0.1976227367652, mm
	PUT -0.6043376955115, -0.2224062935777, mm
	PUT -0.5618149378628, -0.2354783059905, mm
	PUT -0.5090584261963, -0.2460763638244, mm
	PUT -0.4571595363836, -0.2533247552949, mm
	PUT -0.2351816127594, -0.2662382144452, mm
	PUT -0.05140094133746, -0.2734587450236, mm
	PUT 0, -0.275362435045, mm
	PUT 0.1415247259583, -0.2730357027966, mm
	PUT 0.3389491748159, -0.2623298333347, mm
	PUT 0.4853295205139, -0.2449810862577, mm
	PUT 0.5493066905227, -0.2258016199382, mm
	PUT 0.6043939672619, -0.1958077200759, mm
	PUT 0.6554099547155, -0.1524943024197, mm
	PUT 0.6937200915843, -0.1035525028757, mm
	PUT 0.7201951322921, -0.05511134790938, mm
	PUT 0.7377760167709, 0, mm
	PUT 0.7201951322921, 0.05511134790938, mm
	PUT 0.6937200915843, 0.1035525028757, mm
	PUT 0.6554099547155, 0.1524943024197, mm
	PUT 0.6043939672619, 0.1958077200759, mm
	PUT 0.5493066905227, 0.2258016199382, mm
	PUT 0.4853295205139, 0.2449810862577, mm
	PUT 0.3389491748159, 0.2623298333347, mm
	PUT 0.1415247259583, 0.2730357027966, mm
	PUT 0, 0.275362435045, mm
	height = 0.0328182321847
RETURN

306:
	PUT -0.04813224945659, 0.3222880247213, mm
	PUT -0.2352242994362, 0.3165140157143, mm
	PUT -0.4519973571888, 0.3047036432805, mm
	PUT -0.5160123357029, 0.2985195225021, mm
	PUT -0.5825095140282, 0.2904085897801, mm
	PUT -0.6328062419738, 0.2816463795721, mm
	PUT -0.6816428399081, 0.2556771091319, mm
	PUT -0.7332972636648, 0.2017194852164, mm
	PUT -0.7699783692966, 0.1304066479711, mm
	PUT -0.7881169509102, 0.05880501270851, mm
	PUT -0.7926009184385, 0, mm
	PUT -0.7881169509102, -0.05880501270851, mm
	PUT -0.7699783692966, -0.1304066479711, mm
	PUT -0.7332972636648, -0.2017194852164, mm
	PUT -0.6816428399081, -0.2556771091319, mm
	PUT -0.6328062419738, -0.2816463795721, mm
	PUT -0.5825095140282, -0.2904085897801, mm
	PUT -0.5160123357029, -0.2985195225021, mm
	PUT -0.4519973571888, -0.3047036432805, mm
	PUT -0.2352242994362, -0.3165140157143, mm
	PUT -0.04813224945659, -0.3222880247213, mm
	PUT 0, -0.3222880247213, mm
	PUT 0.1431557761327, -0.3222880247213, mm
	PUT 0.3483709221422, -0.3178103662134, mm
	PUT 0.5302246211299, -0.3093550336622, mm
	PUT 0.6011253072274, -0.2961010421045, mm
	PUT 0.6628005234112, -0.2644857283459, mm
	PUT 0.7222675896861, -0.2083253278366, mm
	PUT 0.762348687347, -0.1423386976622, mm
	PUT 0.7842962175727, -0.07616580275158, mm
	PUT 0.7926009184385, 0, mm
	PUT 0.7842962175727, 0.07616580275158, mm
	PUT 0.762348687347, 0.1423386976622, mm
	PUT 0.7222675896861, 0.2083253278366, mm
	PUT 0.6628005234112, 0.2644857283459, mm
	PUT 0.6011253072274, 0.2961010421045, mm
	PUT 0.5302246211299, 0.3093550336622, mm
	PUT 0.3483709221422, 0.3178103662134, mm
	PUT 0.1431557761327, 0.3222880247213, mm
	PUT 0, 0.3222880247213, mm
	height = 0.001
RETURN

307:
	GOTO 306
RETURN

311:
	PUT 0, -0.1639336049274, mm
	PUT 0.3402920105118, -0.1265749049079, mm
	PUT 0.3959116897267, -0.06176580945846, mm
	PUT 0.4091440203386, 0, mm
	PUT 0.3959116897267, 0.06176580945846, mm
	PUT 0.3402920105118, 0.1265749049079, mm
	PUT 0, 0.1639336049274, mm
	PUT -0.4692787559659, 0.1450585485714, mm
	PUT -0.5594098968824, 0.07998285956989, mm
	PUT -0.5825096822713, 0, mm
	PUT -0.5594098968824, -0.07998285956989, mm
	PUT -0.4692787559659, -0.1450585485714, mm
	height = 0.0485508875862
RETURN

312:
	PUT 0, -0.2212617431957, mm
	PUT 0.3890528982317, -0.1905305022729, mm
	PUT 0.4755970247409, -0.1121334261413, mm
	PUT 0.4933130389135, 0, mm
	PUT 0.4755970247409, 0.1121334261413, mm
	PUT 0.3890528982317, 0.1905305022729, mm
	PUT 0, 0.2212617431957, mm
	PUT -0.4830465815756, 0.1992410943285, mm
	PUT -0.6137522838713, 0.1220761786755, mm
	PUT -0.6471099914192, 0, mm
	PUT -0.6137522838713, -0.1220761786755, mm
	PUT -0.4830465815756, -0.1992410943285, mm
	height = 0.3882684456721-0.0485508875862
RETURN

313:
	PUT 0, -0.2837735273842, mm
	PUT 0.4976511853034, -0.257941529938, mm
	PUT 0.674957051566, -0.1642287368988, mm
	PUT 0.7569944069408, 0, mm
	PUT 0.674957051566, 0.1642287368988, mm
	PUT 0.4976511853034, 0.257941529938, mm
	PUT 0, 0.2837735273842, mm
	PUT -0.5099207451904, 0.2568786715837, mm
	PUT -0.6943058676516, 0.1658961463836, mm
	PUT -0.7510266415526, 0, mm
	PUT -0.6943058676516, -0.1658961463836, mm
	PUT -0.5099207451904, -0.2568786715837, mm

	height = 0.399-0.3882684456721
RETURN

314:
	PUT	0, -0.3222880247213, mm
	PUT	0.5302246211299, -0.3093550336622, mm
	PUT	0.7222675896861, -0.2083253278366, mm
	PUT	0.7926009184385, 0, mm
	PUT	0.7222675896861, 0.2083253278366, mm
	PUT	0.5302246211299, 0.3093550336622, mm
	PUT	0, 0.3222880247213, mm
	PUT	-0.5160123357029, 0.2985195225021, mm
	PUT	-0.7332972636648, 0.2017194852164, mm
	PUT	-0.7926009184385, 0, mm
	PUT	-0.7332972636648, -0.2017194852164, mm
	PUT	-0.5160123357029, -0.2985195225021, mm
	height = 0.001
RETURN

315:
	GOTO 314
RETURN

"Drain":
	MATERIAL gs_drain_mat
	mul 1.2, 1.2, 1
	cylind 0.005, 0.025
	addz 0.005
	mulz 0.002/0.0035
	roty -90
	revolve 3, 360, 2,
		0, 0.025, 1,
		0.002620754009745, 0.01262190556136, 1,
		0.0035, 0, 1
	del 4
RETURN
