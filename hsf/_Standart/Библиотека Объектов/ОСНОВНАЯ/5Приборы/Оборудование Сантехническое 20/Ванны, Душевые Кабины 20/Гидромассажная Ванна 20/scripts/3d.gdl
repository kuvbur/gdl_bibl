
if gs_detlevel_3D_m = 0 then end
if not(gs_shadow) then shadow off

! -----------------------------------------------------------------------------
! 3D Hotspots
! -----------------------------------------------------------------------------
unID = 1
hotspot 0, 0,	 0, unID : unID = unID + 1
hotspot A, 0,	 0, unID : unID = unID + 1
hotspot A, B,	 0, unID : unID = unID + 1
hotspot 0, B,	 0, unID : unID = unID + 1
hotspot 0, 0, zzyzx, unID : unID = unID + 1
hotspot A, 0, zzyzx, unID : unID = unID + 1
hotspot A, B, zzyzx, unID : unID = unID + 1
hotspot 0, B, zzyzx, unID : unID = unID + 1

! -----------------------------------------------------------------------------
! Styles and Tap
! -----------------------------------------------------------------------------

pen gs_cont_pen
gosub iStyle

! -----------------------------------------------------------------------------
! MEP Connections
! -----------------------------------------------------------------------------
if bShowMEP then
	gosub "mepconnection"
endif

end

! =============================================================================
! SUBRUTINES
!
! =============================================================================

! -----------------------------------------------------------------------------
! Jacuzzi Square
! -----------------------------------------------------------------------------

1:
	if gs_detlevel_3D_m = 1 then gs_resol=6		!! Simple Model

	resol       gs_resol

	mul a/1.8788,b/1.7264,zzyzx/0.7620
	add 0.02499999949417, 0.02499999919788,0

	if gs_detlevel_3D_m = 2 then
		addz        0.6604
		material gs_tub_mat
		prism_     58,     0.1016,
					1.7307,     1.6383,     79,
					1.746229,     1.636256,     79,
					1.7607,     1.630262,     79,
					1.773126,     1.620726,     79,
					1.782662,     1.6083,     79,
					1.788656,     1.593829,     79,
					1.7907,     1.5783,     79,
					1.7907,     0.0981,     79,
					1.788656,     0.082571,     79,
					1.782662,     0.0681,     79,
					1.773126,     0.055674,     79,
					1.7607,     0.046138,     79,
					1.746229,     0.040144,     79,
					1.7307,     0.0381,     79,
					0.0981,     0.0381,     79,
					0.082571,     0.040144,     79,
					0.0681,     0.046138,     79,
					0.055674,     0.055674,     79,
					0.046138,     0.0681,     79,
					0.040144,     0.082571,     79,
					0.0381,     0.0981,     79,
					0.0381,     1.5783,     79,
					0.040144,     1.593829,     79,
					0.046138,     1.6083,     79,
					0.055674,     1.620726,     79,
					0.0681,     1.630262,     79,
					0.082571,     1.636256,     79,
					0.0981,     1.6383,     79,
					1.7307,     1.6383,     -1,
					1.522702,     1.500302,     76,
					1.556349,     1.495872,     76,
					1.587702,     1.482885,     76,
					1.614626,     1.462226,     76,
					1.635285,     1.435302,     76,
					1.648272,     1.403949,     76,
					1.652702,     1.370302,     76,
					1.652702,     0.306098,     76,
					1.648272,     0.272451,     76,
					1.635285,     0.241098,     76,
					1.614626,     0.214174,     76,
					1.587702,     0.193515,     76,
					1.556349,     0.180528,     76,
					1.522702,     0.176098,     76,
					0.306098,     0.176098,     76,
					0.272451,     0.180528,     76,
					0.241098,     0.193515,     76,
					0.214174,     0.214174,     76,
					0.193515,     0.241098,     76,
					0.180528,     0.272451,     76,
					0.176098,     0.306098,     76,
					0.176098,     1.370302,     76,
					0.180528,     1.403949,     76,
					0.193515,     1.435302,     76,
					0.214174,     1.462226,     76,
					0.241098,     1.482885,     76,
					0.272451,     1.495872,     76,
					0.306098,     1.500302,     76,
					1.522702,     1.500302,     -1
		del          1

		addz 0.3556
		extrude  29, 0, 0, 0.3048, 4+16,
					1.522702,     1.500302,     1,
					1.556349,     1.495872,     1,
					1.587702,     1.482885,     1,
					1.614626,     1.462226,     1,
					1.635285,     1.435302,     1,
					1.648272,     1.403949,     1,
					1.652702,     1.370302,     1,
					1.652702,     0.306098,     1,
					1.648272,     0.272451,     1,
					1.635285,     0.241098,     1,
					1.614626,     0.214174,     1,
					1.587702,     0.193515,     1,
					1.556349,     0.180528,     1,
					1.522702,     0.176098,     1,
					0.306098,     0.176098,     1,
					0.272451,     0.180528,     1,
					0.241098,     0.193515,     1,
					0.214174,     0.214174,     1,
					0.193515,     0.241098,     1,
					0.180528,     0.272451,     1,
					0.176098,     0.306098,     1,
					0.176098,     1.370302,     1,
					0.180528,     1.403949,     1,
					0.193515,     1.435302,     1,
					0.214174,     1.462226,     1,
					0.241098,     1.482885,     1,
					0.272451,     1.495872,     1,
					0.306098,     1.500302,     1,
					1.522702,     1.500302,     -1
		del          1

		addz 0.3556
		poly_      58,
					1.522702,     1.500302,     15,
					1.556349,     1.495872,     15,
					1.587702,     1.482885,     15,
					1.614626,     1.462226,     15,
					1.635285,     1.435302,     15,
					1.648272,     1.403949,     15,
					1.652702,     1.370302,     15,
					1.652702,     0.306098,     15,
					1.648272,     0.272451,     15,
					1.635285,     0.241098,     15,
					1.614626,     0.214174,     15,
					1.587702,     0.193515,     15,
					1.556349,     0.180528,     15,
					1.522702,     0.176098,     15,
					0.306098,     0.176098,     15,
					0.272451,     0.180528,     15,
					0.241098,     0.193515,     15,
					0.214174,     0.214174,     15,
					0.193515,     0.241098,     15,
					0.180528,     0.272451,     15,
					0.176098,     0.306098,     15,
					0.176098,     1.370302,     15,
					0.180528,     1.403949,     15,
					0.193515,     1.435302,     15,
					0.214174,     1.462226,     15,
					0.241098,     1.482885,     15,
					0.272451,     1.495872,     15,
					0.306098,     1.500302,     15,
					1.522702,     1.500302,     -1,

					1.352702,     0.576098,     15,
					1.349295,     0.550216,     15,
					1.339305,     0.526098,     15,
					1.323413,     0.505387,     15,
					1.302702,     0.489495,     15,
					1.278584,     0.479505,     15,
					1.252702,     0.476098,     15,
					0.576098,     0.476098,     15,
					0.550216,     0.479505,     15,
					0.526098,     0.489495,     15,
					0.505387,     0.505387,     15,
					0.489495,     0.526098,     15,
					0.479505,     0.550216,     15,
					0.476098,     0.576098,     15,
					0.476098,     1.100302,     15,
					0.479505,     1.126184,     15,
					0.489495,     1.150302,     15,
					0.505387,     1.171013,     15,
					0.526098,     1.186905,     15,
					0.550216,     1.196895,     15,
					0.576098,     1.200302,     15,
					1.252702,     1.200302,     15,
					1.278584,     1.196895,     15,
					1.302702,     1.186905,     15,
					1.323413,     1.171013,     15,
					1.339305,     1.150302,     15,
					1.349295,     1.126184,     15,
					1.352702,     1.100302,     15,
					1.352702,     0.576098,     -1
		del 1
		addz 0.127
		extrude     29, 0, 0, 0.2286, 1+4+32+16,
					1.352702,     0.576098,     1,
					1.349295,     0.550216,     1,
					1.339305,     0.526098,     1,
					1.323413,     0.505387,     1,
					1.302702,     0.489495,     1,
					1.278584,     0.479505,     1,
					1.252702,     0.476098,     1,
					0.576098,     0.476098,     1,
					0.550216,     0.479505,     1,
					0.526098,     0.489495,     1,
					0.505387,     0.505387,     1,
					0.489495,     0.526098,     1,
					0.479505,     0.550216,     1,
					0.476098,     0.576098,     1,
					0.476098,     1.100302,     1,
					0.479505,     1.126184,     1,
					0.489495,     1.150302,     1,
					0.505387,     1.171013,     1,
					0.526098,     1.186905,     1,
					0.550216,     1.196895,     1,
					0.576098,     1.200302,     1,
					1.252702,     1.200302,     1,
					1.278584,     1.196895,     1,
					1.302702,     1.186905,     1,
					1.323413,     1.171013,     1,
					1.339305,     1.150302,     1,
					1.349295,     1.126184,     1,
					1.352702,     1.100302,     1,
					1.352702,     0.576098,     -1
		del 1

		! --- sides ---

		addz 0.048
		for n=1 to 2
			material mat3
			prism_      5,     0.5884,
						1.7907,     0.5588,     15,
						1.8088,     0.5588,     15,
						1.8088,     1.1176,     15,
						1.7907,     1.1176,     15,
						1.7907,     0.5588,     -1
			prism_      5,     0.5884,
						0.6096,     0.02,     15,
						1.2192,     0.02,     15,
						1.2192,     0.0381,     15,
						0.6096,     0.0381,     15,
						0.6096,     0.02,     -1
			addz        0.569

			addz 0.0196
			prism_     11,     0.024,
					   -0.025,    -0.025,     15,
						1.8538,    -0.025,     10,
						1.773126,     0.055674,     15,
						1.7607,     0.046138,     15,
						1.746229,     0.040144,     15,
						1.7307,     0.0381,     15,
						0.0981,     0.0381,     15,
						0.082333,     0.040243,     15,
						0.0681,     0.046138,     15,
						0.055674,     0.055674,     10,
					   -0.025,    -0.025,     -1
			del 1

			material mat3
			addz 0.0196
			prism_     11,     0.024,
						1.8538,    -0.025,     15,
						1.8538,     1.7014,     10,
						1.773126,     1.620726,     15,
						1.782662,     1.6083,     15,
						1.788656,     1.593829,     15,
						1.7907,     1.5783,     15,
						1.7907,     0.0981,     15,
						1.788557,     0.082333,     15,
						1.782662,     0.0681,     15,
						1.773126,     0.055674,     10,
						1.8538,    -0.025,     -1
			del 1
			del          1

			prism_      8,     0.5884,
						0.6096,     0.0,     15,
						0.0,     0.0,     15,
						0.055674,     0.055674,     15,
						0.0681,     0.046138,     15,
						0.082571,     0.040144,     15,
						0.0981,     0.0381,     15,
						0.6096,     0.0381,     15,
						0.6096,     0.0,     -1
			prism_      8,     0.5884,
						1.2192,     0.0,     15,
						1.8288,     0.0,     15,
						1.773126,     0.055674,     15,
						1.7607,     0.046138,     15,
						1.746229,     0.040144,     15,
						1.7307,     0.0381,     15,
						1.2192,     0.0381,     15,
						1.2192,     0.0,     -1
			addz        0.569
			del          1
			prism_      8,     0.5884,
						1.8288,     1.6764,     15,
						1.8288,     1.1176,     15,
						1.7907,     1.1176,     15,
						1.7907,     1.5783,     15,
						1.788656,     1.593829,     15,
						1.782662,     1.6083,     15,
						1.773126,     1.620726,     15,
						1.8288,     1.6764,     -1
			prism_      8,     0.5884,
						1.8288,     0.0,     15,
						1.8288,     0.5588,     15,
						1.7907,     0.5588,     15,
						1.7907,     0.0981,     15,
						1.788656,     0.082571,     15,
						1.782662,     0.0681,     15,
						1.773126,     0.055674,     15,
						1.8288,     0.0,     -1
			add 1.8288,1.6764,0
			rotz 180
		next n
		del 5
		prism_  5, 0.048,
				1.8288,     0.0,     79,
				0,     0.0,     79,
				0,     1.6764,     79,
				1.8288,     1.6764,     79,
				1.8288,     0.0,     -1


		! --- outlets ---

		material mat2

		add 1.8288/2, 0.18, 0.55
		rotx -90
		circle 0.035
		addz 1.31
		circle 0.035
		del 3

		add 0.18, 1.6764/2, 0.5
		roty 90
		circle 0.035
		addz 1.46
		circle 0.035
		del 3

		add 1.8288/2, 1.6764/2, 0.128
		circle 0.05
		del 1
		del 2
	endif

	if gs_detlevel_3D_m = 1 then
		addz        0.6604
		material gs_tub_mat
		prism_     31,     0.1016,
					1.7307,     1.6383,     79,
					1.773126,     1.620726,     79,
					1.7907,     1.5783,     79,
					1.7907,     0.0981,     79,
					1.773126,     0.055674,     79,
					1.7307,     0.0381,     79,
					0.0981,     0.0381,     79,
					0.055674,     0.055674,     79,
					0.0381,     0.0981,     79,
					0.0381,     1.5783,     79,
					0.055674,     1.620726,     79,
					0.0981,     1.6383,     79,
					1.7307,     1.6383,     79,
					1.7307,     1.6383,     -1,
					1.522702,     1.500302,     76,
					1.587702,     1.482885,     76,
					1.635285,     1.435302,     76,
					1.652702,     1.370302,     76,
					1.652702,     0.306098,     76,
					1.635285,     0.241098,     76,
					1.587702,     0.193515,     76,
					1.522702,     0.176098,     76,
					0.306098,     0.176098,     76,
					0.241098,     0.193515,     76,
					0.193515,     0.241098,     76,
					0.176098,     0.306098,     76,
					0.176098,     1.370302,     76,
					0.193515,     1.435302,     76,
					0.241098,     1.482885,     76,
					0.306098,     1.500302,     76,
					1.522702,     1.500302,     -1
		del 1

		addz 0.3556

		extrude  17, 0, 0, 0.3048, 4+16,
					1.522702,     1.500302,     1,
					1.587702,     1.482885,     1,
					1.635285,     1.435302,     1,
					1.652702,     1.370302,     1,
					1.652702,     0.306098,     1,
					1.635285,     0.241098,     1,
					1.587702,     0.193515,     1,
					1.522702,     0.176098,     1,
					0.306098,     0.176098,     1,
					0.241098,     0.193515,     1,
					0.193515,     0.241098,     1,
					0.176098,     0.306098,     1,
					0.176098,     1.370302,     1,
					0.193515,     1.435302,     1,
					0.241098,     1.482885,     1,
					0.306098,     1.500302,     1,
					1.522702,     1.500302,     -1

		del          1
		addz 0.3556
		poly_      34,
					1.522702,     1.500302,     15,
					1.587702,     1.482885,     15,
					1.635285,     1.435302,     15,
					1.652702,     1.370302,     15,
					1.652702,     0.306098,     15,
					1.635285,     0.241098,     15,
					1.587702,     0.193515,     15,
					1.522702,     0.176098,     15,
					0.306098,     0.176098,     15,
					0.241098,     0.193515,     15,
					0.193515,     0.241098,     15,
					0.176098,     0.306098,     15,
					0.176098,     1.370302,     15,
					0.193515,     1.435302,     15,
					0.241098,     1.482885,     15,
					0.306098,     1.500302,     15,
					1.522702,     1.500302,     -1,

					1.352702,     0.576098,     15,
					1.339305,     0.526098,     15,
					1.302702,     0.489495,     15,
					1.252702,     0.476098,     15,
					0.576098,     0.476098,     15,
					0.526098,     0.489495,     15,
					0.489495,     0.526098,     15,
					0.476098,     0.576098,     15,
					0.476098,     1.100302,     15,
					0.489495,     1.150302,     15,
					0.526098,     1.186905,     15,
					0.576098,     1.200302,     15,
					1.252702,     1.200302,     15,
					1.302702,     1.186905,     15,
					1.339305,     1.150302,     15,
					1.352702,     1.100302,     15,
					1.352702,     0.576098,     -1
		del 1

		addz 0.127
		extrude     17,0,0,0.2286,1+ 4+32+16,
					1.352702,     0.576098,     1,
					1.339305,     0.526098,     1,
					1.302702,     0.489495,     1,
					1.252702,     0.476098,     1,
					0.576098,     0.476098,     1,
					0.526098,     0.489495,     1,
					0.489495,     0.526098,     1,
					0.476098,     0.576098,     1,
					0.476098,     1.100302,     1,
					0.489495,     1.150302,     1,
					0.526098,     1.186905,     1,
					0.576098,     1.200302,     1,
					1.252702,     1.200302,     1,
					1.302702,     1.186905,     1,
					1.339305,     1.150302,     1,
					1.352702,     1.100302,     1,
					1.352702,     0.576098,     -1
		del 1

		! --- sides ---

		addz 0.048
		for n=1 to 2
			material mat3
			addz        0.569
			addz 0.0196
			prism_     11,     0.024,
					   -0.025,    -0.025,     15,
						1.8538,    -0.025,     10,
						1.773126,     0.055674,     15,
						1.7607,     0.046138,     15,
						1.746229,     0.040144,     15,
						1.7307,     0.0381,     15,
						0.0981,     0.0381,     15,
						0.082333,     0.040243,     15,
						0.0681,     0.046138,     15,
						0.055674,     0.055674,     10,
					   -0.025,    -0.025,     -1
			del 1

			addz 0.0196
			prism_     11,     0.024,
						1.8538,    -0.025,     15,
						1.8538,     1.7014,     10,
						1.773126,     1.620726,     15,
						1.782662,     1.6083,     15,
						1.788656,     1.593829,     15,
						1.7907,     1.5783,     15,
						1.7907,     0.0981,     15,
						1.788557,     0.082333,     15,
						1.782662,     0.0681,     15,
						1.773126,     0.055674,     10,
						1.8538,    -0.025,     -1
			del 2

			prism_      6,     0.5884,
						0.0,     0.0,     15,
						0.055674,     0.055674,     15,
						0.0981,     0.0381,     15,
						1.7307,     0.0381,     15,
						1.773126,     0.055674,     15,
						1.8288,     0.0,     15

			addz 0.569
			del 1
			prism_      6,     0.5884,
						1.8288,     1.6764,     15,
						1.8288,     0.0,     15,
						1.773126,     0.055674,     15,
						1.7907,     0.0981,     15,
						1.7907,     1.5783,     15,
						1.773126,     1.620726,     15

			add 1.8288, 1.6764, 0
			rotz 180
		next n
		del 5

		prism_  5, 0.048,
				1.8288,     0.0,     79,
				0,     0.0,     79,
				0,     1.6764,     79,
				1.8288,     1.6764,     79,
				1.8288,     0.0,     -1
		del 2
	endif

	if gs_detlevel_3D_m = 3 then
		addz 0.6604
		material gs_tub_mat
		prism_     10,     0.1016,
					1.7907,     1.6383,     15,
					1.7907,     0.0381,     15,
					0.0381,     0.0381,     15,
					0.0381,     1.6383,     15,
					1.7907,     1.6383,     -1,
					1.652702,     1.500302,     12,
					1.652702,     0.176098,     12,
					0.176098,     0.176098,     12,
					0.176098,     1.500302,     12,
					1.652702,     1.500302,     -1
		del 1

		addz 0.3556
		extrude  5, 0, 0, 0.3048, 4+16,
					1.652702,     1.500302,     0,
					1.652702,     0.176098,     0,
					0.176098,     0.176098,     0,
					0.176098,     1.500302,     0,
					1.652702,     1.500302,     -1
		del 1

		addz 0.3556
		poly_      10,
					1.652702,     1.500302,     0,
					1.652702,     0.176098,     0,
					0.176098,     0.176098,     0,
					0.176098,     1.500302,     0,
					1.652702,     1.500302,     -1,

					1.352702,     1.200302,     15,
					1.352702,     0.476098,     15,
					0.476098,     0.476098,     15,
					0.476098,     1.200302,     15,
					1.352702,     1.200302,     -1
		del 1

		addz 0.127
		extrude     5,0,0,0.2286,1+ 4+32+16,
					1.352702,     1.200302,     0,
					1.352702,     0.476098,     0,
					0.476098,     0.476098,     0,
					0.476098,     1.200302,     0,
					1.352702,     1.200302,     -1
		del 1


		! --- sides ---

		material mat3
		extrude 5, 0, 0, 0.6606, 16+32,
			1.8538,       -0.025,      0,
			-0.025,       -0.025,      0,
			-0.025,       1.7014,      0,
			1.8538,       1.7014,      0,
			1.8538,       -0.025,      -1

		addz 0.6606
		poly_ 10,
			1.8538,       -0.025,      0,
			-0.025,       -0.025,      0,
			-0.025,       1.7014,      0,
			1.8538,       1.7014,      0,
			1.8538,       -0.025,      -1,
			1.7907,       0.0381,      0,
			0.0381,       0.0381,      0,
			0.0381,       1.6383,      0,
			1.7907,       1.6383,      0,
			1.7907,       0.0381,      -1
		del TOP
	endif

return

! -----------------------------------------------------------------------------
! Jacuzzi Round
! -----------------------------------------------------------------------------

2:
	if gs_detlevel_3D_m = 3 then
		gs_resol=12

		mul a/1.8788, b/1.8788, zzyzx/0.7620
		add 0.025,    0.025,0

		resol      gs_resol
		addz        0.6604
		material gs_tub_mat
		prism_     12,      0.1016,
					1.7907,     1.7907,     15,
					1.7907,     0.0381,     15,
					0.0381,     0.0381,     15,
					0.0381,     1.7907,     15,
					1.7907,     1.7907,     -1,
					1.6944,     0.9144,     78,
					0.9144,     0.9144,    900,
					0.0,     180.0,   4078,
					0.1344,     0.9144,     78,
					0.9144,     0.9144,    900,
					0.0,     180.0,   4078,
					1.6944,     0.9144,     -1
		del 1

		addz 0.3556
		extrude 2, 0, 0, 0.3048, 4,
					0.9144,     0.9144,    901,
					0.78,     360,   4001
		del          1

		addz        0.127
		prism_      12,      0.2286,
					0.1344,     0.1344,      15,
					1.6944,     0.1344,    15,
					1.6944,     1.6944,   15,
					0.1344,     1.6944,      15,
					0.1344,     0.1344,     -1,
					1.3944,     0.9144,      79,
					0.9144,     0.9144,    900,
					0.0,     180.0,   4001,
					0.4344,     0.9144,      79,
					0.9144,     0.9144,    900,
					0.0,     180.0,   4001,
					1.3944,     0.9144,     -1
		del 1

		add 0.9144,     0.9144,0.127
		circle      0.48
		del 1

		! --- sides ---

		material mat3
		extrude 5, 0, 0, 0.6844, 16+32,
			1.8538,       -0.025,      0,
			-0.025,       -0.025,      0,
			-0.025,       1.8538,      0,
			1.8538,       1.8538,      0,
			1.8538,       -0.025,      -1

		addz 0.6844
		poly_ 10,
			1.8538,       -0.025,      0,
			-0.025,       -0.025,      0,
			-0.025,       1.8538,      0,
			1.8538,       1.8538,      0,
			1.8538,       -0.025,      -1,
			1.7907,       0.0381,      0,
			0.0381,       0.0381,      0,
			0.0381,       1.7907,      0,
			1.7907,       1.7907,      0,
			1.7907,       0.0381,      -1
		del TOP
	else
		if gs_detlevel_3D_m = 1 then gs_resol=16		!! Simple Model

		mul a/1.8788, b/1.8788, zzyzx/0.7620
		add 0.025,    0.025, 0

		resol      gs_resol
		addz        0.6604
		material gs_tub_mat
		prism_     28,      0.1016,
					1.7307,     1.7907,     79,
					1.753661,     1.786133,     79,
					1.773126,     1.773126,     79,
					1.786133,     1.753661,     79,
					1.7907,     1.7307,     79,
					1.7907,     0.0981,     79,
					1.786133,     0.075139,     79,
					1.773126,     0.055674,     79,
					1.753661,     0.042667,     79,
					1.7307,     0.0381,     79,
					0.0981,     0.0381,     79,
					0.075139,     0.042667,     79,
					0.055674,     0.055674,     79,
					0.042667,     0.075139,     79,
					0.0381,     0.0981,     79,
					0.0381,     1.7307,     79,
					0.042667,     1.753661,     79,
					0.055674,     1.773126,     79,
					0.075139,     1.786133,     79,
					0.0981,     1.7907,     79,
					1.7307,     1.7907,     -1,
					1.6944,     0.9144,     78,
					0.9144,     0.9144,    900,
					0.0,     180.0,   4078,
					0.1344,     0.9144,     78,
					0.9144,     0.9144,    900,
					0.0,     180.0,   4078,
					1.6944,     0.9144,     -1
		del 1

		addz 0.3556
		extrude 2, 0, 0, 0.3048, 4,
					0.9144,     0.9144,    901,
					0.78,     360,   4001
		del          1

		addz        0.127
		if gs_detlevel_3D_m = 2 then
			prism_      14,      0.2286,
						1.6944,     0.9144,      79,
						0.9144,     0.9144,    900,
						0.0,     180.0,   4001,
						0.1344,     0.9144,      79,
						0.9144,     0.9144,    900,
						0.0,     180.0,   4001,
						1.6944,     0.9144,     -1,
						1.3944,     0.9144,      79,
						0.9144,     0.9144,    900,
						0.0,     180.0,   4001,
						0.4344,     0.9144,      79,
						0.9144,     0.9144,    900,
						0.0,     180.0,   4001,
						1.3944,     0.9144,     -1
		else
			prism_      12,      0.2286,
						0.1344,     0.1344,      15,
						1.6944,     0.1344,    15,
						1.6944,     1.6944,   15,
						0.1344,     1.6944,      15,
						0.1344,     0.1344,     -1,
						1.3944,     0.9144,      79,
						0.9144,     0.9144,    900,
						0.0,     180.0,   4001,
						0.4344,     0.9144,      79,
						0.9144,     0.9144,    900,
						0.0,     180.0,   4001,
						1.3944,     0.9144,     -1
		endif
		del 1

		add 0.9144, 0.9144, 0.127
		circle      0.48
		del 1

		! --- sides ---

		if gs_detlevel_3D_m = 2 then
			for n = 1 to 4
				material mat3
				addz        0.048
				prism_      7,     0.5884,
							1.2192,     0.0,     15,
							1.8288,     0.0,     15,
							1.773126,     0.055674,     15,
							1.753661,     0.042667,     15,
							1.7307,     0.0381,     15,
							1.2192,     0.0381,     15,
							1.2192,     0.0,     -1
				del          1
				addz        0.048
				prism_      7,     0.5884,
							0.6096,     0.0,     15,
						   -0.0,     0.0,     15,
							0.055674,     0.055674,     15,
							0.075139,     0.042667,     15,
							0.0981,     0.0381,     15,
							0.6096,     0.0381,     15,
							0.6096,     0.0,     -1
				del          1

				addz        0.048
				material mat3
				prism_      5,     0.5884,
							0.6096,     0.02,     15,
							1.2192,     0.02,     15,
							1.2192,     0.0381,     15,
							0.6096,     0.0381,     15,
							0.6096,     0.02,     -1
				del          1

				addx 1.8288
				rotz 90
			next n
		else
			for n=1 to 4
				material mat3
				addz        0.048
				prism_      8,     0.5884,
							0.0981,     0.0381,     15,
							0.075139,     0.042667,     15,
							0.055674,     0.055674,     15,
						   0.0,     0.0,     15,
							1.8288,     0.0,     15,
							1.773126,     0.055674,     15,
							1.753661,     0.042667,     15,
							1.7307,     0.0381,     15
				del 1
				addx 1.8288
				rotz 90
			next n
		endif

		del 8

		for m=1 to 2
			addz        0.6364
			prism_      9,     0.024,
					   -0.025,    -0.025,     15,
						1.8538,    -0.025,     15,
						1.773126,     0.055674,     15,
						1.753661,     0.042667,     15,
						1.7307,     0.0381,     15,
						0.0981,     0.0381,     15,
						0.075139,     0.042667,     15,
						0.055674,     0.055674,     15,
					   -0.025,    -0.025,     -1
			del          1

			rotz 180
			add -1.8288,-1.8288,0
		next m

		material mat3
		for m=1 to 2
			addx 1.8288
			rotz 90
			addz        0.6364
			prism_      9,     0.024,
					   -0.025,    -0.025,     15,
						1.8538,    -0.025,     15,
						1.773126,     0.055674,     15,
						1.753661,     0.042667,     15,
						1.7307,     0.0381,     15,
						0.0981,     0.0381,     15,
						0.075139,     0.042667,     15,
						0.055674,     0.055674,     15,
					   -0.025,    -0.025,     -1
			del          1

			rotz 90
			addy -1.8288
		next m

		prism_ 5, 0.048,
			0,0,15,
			0,1.8288,15,
			1.8288,1.8288,15,
			1.8288,0,15,
			0,0,-1

		! --- Accessories ---

		if gs_detlevel_3D_m = 2 then
			material mat2
			add 1.8288/2, 0.15, 0.55
			rotx -90
			circle 0.035
			addz 1.53
			circle 0.035
			del 3

			add 0.15, 1.8288/2, 0.5
			roty 90
			circle 0.035
			addz 1.53
			circle 0.035
			del 3

			add 1.8288/2, 1.8288/2, 0.128
			circle 0.05
			del 1
		endif
		del 14
	endif
return

! -----------------------------------------------------------------------------
! MEP Connections
! -----------------------------------------------------------------------------

"mepconnection":

	if gs_detlevel_3D_m=1 or gs_detlevel_3D_m=3 then resol 8
	if gs_detlevel_3D_m=2 then resol 24

	if useSysMat then
		gs_tub_mat	= sMat
		mat2		= sMat
		mat3		= sMat
		gs_con_mat		= sMat
	endif

	call "MEP_m_ConnectionsACL_4" parameters SetProgram = SetProgram,
		ui_current_con = ui_current_con,
		MEP_NumberConnections = MEP_NumberConnections,
		MEP_NumConnectionData = gs_Connections,
		gs_AddConnections = gs_AddConnections,
		cShow3D = 1,
		gs_ConMat = gs_con_mat,
		MEP_InsShow = 0,
		MEP_cline_show_3D = 0,
		gs_cont_pen = gs_cont_pen,
		ConPosX_1=ConPosX_1, ConPosY_1=ConPosY_1, ConPosZ_1=ConPosZ_1, ConLength_1=ConLength_1, ConEdit_1 = 16,
		ConPosX_2=ConPosX_2, ConPosY_2=ConPosY_2, ConPosZ_2=ConPosZ_2, ConLength_2=ConLength_2, ConEdit_2 = 16,
		ConPosX_3=ConPosX_3, ConPosY_3=ConPosY_3, ConPosZ_3=ConPosZ_3, ConLength_3=ConLength_3, ConEdit_3 = 15

return


