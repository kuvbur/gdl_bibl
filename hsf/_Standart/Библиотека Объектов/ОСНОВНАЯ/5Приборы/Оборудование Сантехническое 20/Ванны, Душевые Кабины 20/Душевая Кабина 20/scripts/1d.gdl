
! ==============================================================================
! Shower Cabin
! ==============================================================================


EPS = 0.00001

CABINTYPE_ALCOVE 			= 1
CABINTYPE_CORNER 			= 2
CABINTYPE_PENINSULAR 		= 3
CABINTYPE_FREESTANDING		= 4

CABINFORM_SQUAREDALCOVE 	= 1
CABINFORM_SQUAREDCORNER 	= 2
CABINFORM_ROUNDEDCORNER 	= 3
CABINFORM_CHAMFERCORNER 	= 4
CABINFORM_SQUAREDPENINSULAR	= 5
CABINFORM_ROUNDEDPENINSULAR = 6
CABINFORM_SQUARE 			= 7
CABINFORM_ROUND 			= 8

DOORTYPE_SIMPLELEAF				= 1
DOORTYPE_DOUBLELEAF				= 2
DOORTYPE_SIMPLELEAF_SIDEPANEL1	= 3
DOORTYPE_SIMPLELEAF_SIDEPANEL2	= 4
DOORTYPE_DOUBLELEAF_SIDEPANEL1	= 5
DOORTYPE_DOUBLELEAF_SIDEPANEL2	= 6
DOORTYPE_FOLDING				= 7
DOORTYPE_DOUBLEFOLDING			= 8
DOORTYPE_SLIDING				= 9
DOORTYPE_DOUBLESLIDING			= 10
DOORTYPE_CORNERSLIDING			= 11

PANELTYPE_FRAMED	= 1
PANELTYPE_GLAZED	= 2

TAPTYPE_NONE		= 0
TAPTYPE_THERMO		= 24
TAPTYPE_PIPE		= 25
TAPTYPE_PANEL		= 26
TAPTYPE_OVERHEAD	= 27

GRAB_NONE 		= 0
GRAB_WALL_LEFT 	= 1
GRAB_WALL_UP 	= 2

! enabled by cabin type
_iGrabPos = GRAB_NONE
if iCabinType <> 4 then
	if iCabinType = CABINTYPE_ALCOVE or iCabinType = CABINTYPE_CORNER then
		_iGrabPos = GRAB_WALL_LEFT
	else
		if iCabinType = CABINTYPE_PENINSULAR then 
			_iGrabPos = GRAB_WALL_UP
		endif
	endif
endif

if not(bGrabBar) then  bGrabBar2D = 0
if gs_tap_type_m = TAPTYPE_NONE then  bShowShowerKit = 0

glassThk = 0.003
frameThk = 0.01
frameWidth = 0.04
xWasteWaterPos = -A/2 + 0.175
yWasteWaterPos = B/2 - 0.175
wasteWaterR = 0.025
arcAngle = 90
if iCabinForm = CABINFORM_ROUNDEDPENINSULAR | iCabinForm = CABINFORM_ROUND then arcAngle = 2 * asn(doorWidth/A)
if not(bTray) then trayThk = 0		! no tray

bMetricDimensionNeeded = 0
if GLOB_SCRIPT_TYPE = 4 | \		! parameter script
	GLOB_SCRIPT_TYPE = 5 then	! interface script
	w_units_form = ""
	rrr = request("Working_length_unit", "", w_units_form)
	bMetricDimensionNeeded = strstr(w_units_form, "m")		! m, cm, mm
endif

dim st_cabinSize[7]
if bMetricDimensionNeeded then
		st_cabinSize[1] = str{2}("%.0mm", defaultCabinSize1) + ` x ` + str{2}("%.0mm", defaultCabinSize1)
		st_cabinSize[2] = str{2}("%.0mm", defaultCabinSize2) + ` x ` + str{2}("%.0mm", defaultCabinSize2)
		st_cabinSize[3] = str{2}("%.0mm", defaultCabinSize3) + ` x ` + str{2}("%.0mm", defaultCabinSize3)
		st_cabinSize[4] = `O` + str{2}("%.0mm", defaultCabinSize1)
		st_cabinSize[5] = `O` + str{2}("%.0mm", defaultCabinSize2)
		st_cabinSize[6] = `O` + str{2}("%.0mm", defaultCabinSize3)
		st_cabinSize[7] = `Специальный`
else
		st_cabinSize[1] = str{2}("%0.64fi", defaultCabinSize1) + ` x ` + str{2}("%0.64fi", defaultCabinSize1)
		st_cabinSize[2] = str{2}("%0.64fi", defaultCabinSize2) + ` x ` + str{2}("%0.64fi", defaultCabinSize2)
		st_cabinSize[3] = str{2}("%0.64fi", defaultCabinSize3) + ` x ` + str{2}("%0.64fi", defaultCabinSize3)
		st_cabinSize[4] = `O` + str{2}("%0.64fi", defaultCabinSize1)
		st_cabinSize[5] = `O` + str{2}("%0.64fi", defaultCabinSize2)
		st_cabinSize[6] = `O` + str{2}("%0.64fi", defaultCabinSize3)
		st_cabinSize[7] = `Специальный`
endif

if gs_tap_type_m > 25 then
	if gs_tap_type_m = 26 then
		widthTap	= 0.3
		limit_X		= widthTap/2
		limit_Y1	= 0.35
		limit_Y2	= 1.04
	endif
	if gs_tap_type_m = 27 then
		widthTap	= 0.16
		limit_X		= widthTap/2
		limit_Y1	= 0.13
		limit_Y2	= 0.13
	endif
else
	widthTap = 0.068
	posTap = 0.041
endif

! Show MEP Connections -------------------------------------------------------------[

isavailable = 0
isInArchiCAD = APPLICATION_QUERY ("MEPMODELER", "IsAvailable()", isavailable)
isMEPEnabled = (isavailable OR isInArchiCAD = 0)
if isMEPEnabled then
	bShowMEP = 1
	reqBMep = 0
	success = LIBRARYGLOBAL ("LibraryGlobals13", "showMepConnect", reqBMep)
	if success > 0 then
		bShowMEP = reqBMep
	endif
else
	bShowMEP = 0
endif

! Show MEP Connections -------------------------------------------------------------]

