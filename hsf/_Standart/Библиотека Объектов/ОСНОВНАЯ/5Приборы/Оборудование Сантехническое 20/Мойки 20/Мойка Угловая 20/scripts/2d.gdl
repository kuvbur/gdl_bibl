
! Sink Corner


DrawingNum = 1
IF DrawingNum = 1 THEN	! Top

	MUL2 a/0.821, b/0.821

	hotspot2 0,     0
	hotspot2 0.46,  0
	hotspot2 0,     0.361
	hotspot2 0.46,  0.821
	hotspot2 0.821, 0.361
	hotspot2 0.821, 0.821
	hotspot2 0.23,  0.591

	pen gs_cont_pen
	fill gs_fill_type
	drawindex 10

	IF SinkSymbol_m = 2 THEN

		! --- Detailed 2D Symbol -----------------------------------------------

		POLY2_B      29, 1+2+4+64,      gs_fill_pen,     gs_back_pen,
				0.08,     0.0,      1,
				0.08,     0.08,    900,
				0.0,     -90.0,   4001,
				0.0,     0.08,      1,
			   -0.0,     0.327863,      1,
				0.08,     0.327863,    900,
				0.0,     -45.0,   4001,
				0.023431,     0.384431,      1,
				0.436569,     0.797569,      1,
				0.493137,     0.741001,    900,
				0.0,     -44.8194,   4001,
				0.492885,     0.821,      1,
				0.741,     0.821,      1,
				0.741,     0.741,    900,
				0.0,     -90.0,   4001,
				0.821,     0.741,      1,
				0.821,     0.441,      1,
				0.741,     0.441,    900,
				0.0,     -90.0,   4001,
				0.741,     0.361,      1,
				0.54,     0.361,      1,
				0.54,     0.281,    900,
				0.0,      90.0,   4001,
				0.46,     0.281,      1,
				0.46,     0.08,      1,
				0.38,     0.08,    900,
				0.0,     -90.0,   4001,
				0.38,     0.0,      1,
				0.08,     0.0,     -1

		line2        0.193137, 0.401,         0.38,        0.401
		line2            0.42,        0.441, 0.42, 0.627862887646
		line2        0.164853,     0.469284, 0.351715887645, 0.656146887646
		line2            0.42,         0.08,         0.42,        0.321
		line2            0.38,        0.361,         0.08,        0.361
		line2           0.781,     0.768696,        0.781,        0.781
		line2        0.469873,        0.401,     0.526442,        0.401
		line2         0.58301,        0.401,     0.639579,        0.401
		line2        0.696147,        0.401,     0.752716,        0.401
		line2            0.46,     0.504264,         0.46,     0.447696
		line2            0.46,     0.560833,         0.46,     0.617401
		line2            0.46,     0.730538,         0.46,      0.67397
		line2           0.781,     0.712127,        0.781,     0.655558
		line2        0.510462,        0.781,      0.56703,        0.781
		line2        0.623599,        0.781,     0.680167,        0.781
		line2           0.781,      0.59899,        0.781,     0.542421
		line2        0.736736,        0.781,        0.781,        0.781
		line2           0.781,     0.485853,        0.781,     0.429284
		line2            0.04,        0.321,         0.04,         0.08
		line2            0.08,         0.04,         0.38,         0.04
		arc2             0.08,         0.08,         0.04,          180, 270
		arc2             0.08,         0.08,         0.04,          180, 270
		arc2             0.38,         0.08,         0.04, 270,            0
		arc2             0.08,        0.321,         0.04, 90,          180
		arc2             0.38,        0.321,         0.04,            0, 90
		arc2             0.38, 0.627862887646, 0.0399997752916,            0, 135
		arc2             0.38,        0.441,         0.04, 270,            0
		arc2         0.193137, 0.441, 0.04, 135, 270

		hotspot2 0.483431457505, 0.337568542495
		hotspot2 0.741, 0.821
		hotspot2 0.821, 0.741
		hotspot2 0.821, 0.441
		hotspot2 0.741, 0.361
		hotspot2 0.38,  0
		hotspot2 0.46,  0.08
		hotspot2 0.08,  0
		hotspot2 0,     0.08

	ELSE

		! --- Simple 2D Symbol -------------------------------------------------

		hotspot2         0.46,  0.361

		poly2_b 8, 1+2+4+64,      gs_fill_pen,     gs_back_pen,
				0.821, 0.821,      1,
				0.46,  0.821,      1,
				0,     0.361,      1,
				0,     0,          1,
				0.46,  0,          1,
				0.46,  0.361,      1,
				0.821, 0.361,      1,
				0.821, 0.821,      1

		rect2  0.04, 0.361, 0.42, 0.04
		line2    0.096569, 0.401, 0.42, 0.401
		line2    0.096569, 0.401, 0.42, 0.724430829584
		line2    0.42,     0.401, 0.42, 0.724430829584

	ENDIF

	line2            0.46,     0.730538,     0.510462,        0.781
	line2            0.46,      0.67397,      0.56703,        0.781
	line2            0.46,     0.617401,     0.623599,        0.781
	line2            0.46,     0.560833,     0.680167,        0.781
	line2            0.46,     0.504264,     0.736736,        0.781
	line2            0.46,     0.447696,        0.781,     0.768696
	line2        0.469873,        0.401,        0.781,     0.712127
	line2        0.752716,        0.401,        0.781,     0.429284
	line2        0.526442,        0.401,        0.781,     0.655558
	line2         0.58301,        0.401,        0.781,      0.59899
	line2        0.639579,        0.401,        0.781,     0.542421
	line2        0.696147,        0.401,        0.781,     0.485853

	del 1

	! --- TAP ------------------------------------------------------------------
	drawindex 50

	aa=a/0.821* 0.46
	bb=b/0.821* 0.46
	alfa=atn(bb/aa)

	if gs_tap_type_m <> 0 & SinkSymbol_m = 2 then

		ADD2 (a/0.821*0.23)-0.04*sin(alfa), (b/0.821* 0.591)+0.04*cos(alfa)
		ADD2 -0.087, -0.206
		ROT2 alfa

		call "tapType_m" parameters all	gs_tap_type_m		= tempTapType,
										bEnableTapEdit		= 0,
										bSinkTap			= 1,
										iTapGroup			= 2

		DEL 3
	ENDIF
ENDIF
DEL TOP


! --- start of modifying to Shaft

if bShowMEP then

	PEN gs_cont_pen

				! --- OTHER VIEWS --- !

	ROT2 -SYMB_ROTANGLE * (DrawingNum > 1 AND NOT(SYMB_MIRRORED))+SYMB_ROTANGLE * (DrawingNum > 1 AND SYMB_MIRRORED)

	IF DrawingNum = 2 THEN PROJECT2 -3, 90, 2	! Bottom
	IF DrawingNum = 3 THEN PROJECT2 4, 270, 2	! Front
	IF DrawingNum = 4 THEN PROJECT2 4, 90, 2	! Back
	IF DrawingNum = 5 THEN PROJECT2 4, 180*(SYMB_MIRRORED), 2		! Right
	IF DrawingNum = 6 THEN PROJECT2 4, 180*NOT(SYMB_MIRRORED), 2	! Left


				! --- CONNECTIONS --- !

	CALL "MEP_m_ConnectionsACL_4" PARAMETERS SetProgram = SetProgram,
		ui_current_con = ui_current_con,
		MEP_NumberConnections = MEP_NumberConnections,
		MEP_NumConnectionData = gs_Connections,
		gs_AddConnections = gs_AddConnections,
		DrawingNum = DrawingNum,
		MEP_InsShow = 0,
		MEP_cline_show = 0,
		gs_cont_pen = gs_cont_pen,
		gs_fill_type=gs_fill_type,
		gs_fill_pen=gs_fill_pen,
		gs_back_pen=gs_back_pen,
		ConPosX_1=ConPosX_1, ConPosY_1=ConPosY_1, ConLength_1=ConLength_1, ConEdit_1 = 15,
		ConPosX_2=ConPosX_2, ConPosY_2=ConPosY_2, ConLength_2=ConLength_2, ConEdit_2 = 15,
		ConPosX_3=ConPosX_3, ConPosY_3=ConPosY_3, ConLength_3=ConLength_3, ConEdit_3 = 5,
		ConPosX_4=ConPosX_4, ConPosY_4=ConPosY_4, ConLength_4=ConLength_4, ConEdit_4 = 5

	DEL 1
ENDIF

! --- end of modifying to Shaft
