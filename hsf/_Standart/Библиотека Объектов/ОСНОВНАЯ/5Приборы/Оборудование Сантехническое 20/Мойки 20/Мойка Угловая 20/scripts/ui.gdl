
UI_CURRENT_PAGE gs_ui_current_page



UI_DIALOG `Параметры Мойки`


IF isMEPEnabled THEN
	DIM tabTitles[3]
		tabTitles[1] = `Стиль Смесителя`
		tabTitles[2] = `Отображение и Покрытия`
		tabTitles[3] = `Соединения`

	DIM tabIcons[3]
		tabIcons[1] = "uiTab_Style_flat(1)"
		tabIcons[2] = "uiTab_2DRepr_flat(1)"
		tabIcons[3] = "uiTab_Connections_flat(1)"

	DIM ui_matpar_names[3][2]
		ui_matpar_names[1][1] = `Мойка`
		ui_matpar_names[2][1] = `Смеситель`
		ui_matpar_names[3][1] = `Соединение`

		ui_matpar_names[1][2] = "gs_sink_mat"
		ui_matpar_names[2][2] = "gs_tap_mat"
		ui_matpar_names[3][2] = "gs_con_mat"

	DIM ui_matpar_locked[3]
		ui_matpar_locked[1] = 0
		ui_matpar_locked[2] = 0
		ui_matpar_locked[3] = (NOT(ConStatus_1) AND NOT(ConStatus_2) AND NOT(ConStatus_3) AND NOT(ConStatus_4))

	IF gs_tap_type_m=0 THEN ui_matpar_locked[2] = 1
ELSE
	DIM tabTitles[2]
		tabTitles[1] = `Стиль Смесителя`
		tabTitles[2] = `Отображение и Покрытия`

	DIM tabIcons[2]
		tabIcons[1] = "uiTab_Style_flat(1)"
		tabIcons[2] = "uiTab_2DRepr_flat(1)"

	DIM ui_matpar_names[2][2]
		ui_matpar_names[1][1] = `Мойка`
		ui_matpar_names[2][1] = `Смеситель`

		ui_matpar_names[1][2] = "gs_sink_mat"
		ui_matpar_names[2][2] = "gs_tap_mat"

	DIM ui_matpar_locked[2]
		ui_matpar_locked[1] = 0
		ui_matpar_locked[2] = 0
ENDIF

FILE_DEPENDENCE "uiTab_Style_flat(1)"
FILE_DEPENDENCE "uiTab_2DRepr_flat(1)"
FILE_DEPENDENCE "uiTab_Connections_flat(1)"



IF gs_tap_type_m=0 THEN ui_matpar_locked[2] = 1

iPageIDRoot 			=-1
iPageIDSink				= 1
iPageIDTap				= 2
iPageIDConnections		= 3

pageStartY = 5

! ==============================================================================
!UI_PAGES
! ==============================================================================

	UI_PAGE iPageIDSink, iPageIDRoot, `Стиль Смесителя`, "uiTab_Style_flat(1)"
		gosub "sinkPage"


	UI_PAGE iPageIDTap, iPageIDRoot, `Отображение и Покрытия`, "uiTab_2DRepr_flat(1)"
		gosub "tapPage"


if isMEPEnabled then
	UI_PAGE iPageIDConnections, iPageIDRoot, `Соединения`, "uiTab_Connections_flat(1)"
		gosub "connectionsPage"
endif

! ==============================================================================
END
! ==============================================================================


! ==============================================================================
!SUBROUTINES
! ==============================================================================

! ------------------------------------------------------------------------------
"sinkPage":
! ------------------------------------------------------------------------------

	pos_x=10    				! start Position X Coordinate
	pos_y=pageStartY - 3  		! start Position Y Coordinate
	cell1_x=427					! width of 1.cell
	cell1_y=220					! height of 1.cell

	ui_infield{3} "gs_tap_type", pos_x, pos_y, cell1_x, cell1_y,
		1, "ui_taptypes_2(4)", 35, 7,
		84, 118, 60, 90,
		7, `Стиль 1`, `Стиль 1`,
		2, `Стиль 2`, `Стиль 2`,
		32, `Простой`, `Простой`,
		34, `Нет`, `Нет`

return

! ------------------------------------------------------------------------------
"tapPage":
! ------------------------------------------------------------------------------

	CALL "ui_visualizationtab" PARAMETERS ALL 	bEnableCenterlinePars = 0,
												bEnable3dDetail = 1,
												bEnableUseSystemMat = 0,
												ui_matpar_names = ui_matpar_names,
												ui_matpar_locked = ui_matpar_locked,
												ui_3dviewpar_rowspace = 2,
												bEnable2dDetail = 1,
												iObjectType = 92


return

! ------------------------------------------------------------------------------
"connectionsPage":
! ------------------------------------------------------------------------------

	DIM ui_con_type[4]
		ui_con_type[1] = 0
		ui_con_type[2] = 0
		ui_con_type[3] = 0
		ui_con_type[4] = 0

	CALL "MEP_m_ConnectionsACL_4" PARAMETERS ALL ui_con_type = ui_con_type,
												ui_system_var_pos = 2

return

