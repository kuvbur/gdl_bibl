
! ==============================================================================
! Multi-Basin Counter
! ==============================================================================

bLockConMat = 0

if isMEPEnabled then
	bLockConMat = (not(ConStatus_1) & not(ConStatus_2) & not(ConStatus_3)) | not(isMEPEnabled)
	if nSink > 1 & bLockConMat then
		bLockConMat = bLockConMat & (not(ConStatus_4) & not(ConStatus_5) & not(ConStatus_6))

		if nSink > 2 & bLockConMat then
			bLockConMat = bLockConMat & (not(ConStatus_7) & not(ConStatus_8) & not(ConStatus_9))

			if nSink > 3 & bLockConMat then
				bLockConMat = bLockConMat & (not(ConStatus_10) & not(ConStatus_11) & not(ConStatus_12))

				if nSink > 4 & bLockConMat then
					bLockConMat = bLockConMat & (not(ConStatus_13) & not(ConStatus_14) & not(ConStatus_15))

					if nSink > 5 & bLockConMat then
						bLockConMat = bLockConMat & (not(ConStatus_16) & not(ConStatus_17) & not(ConStatus_18))
					endif
				endif
			endif
		endif
	endif
endif

call "ui_plumbingfixtures" parameters all 	iObjectType 		= 16,
										lock_conn_param			= bLockConMat


! ==============================================================================
! Counter and Basin Settings
! ==============================================================================
iPageIDRoot 	=  -1
iPageIDSettings = 	1
pageStartY 		= 	5

UI_PAGE iPageIDSettings, iPageIDRoot, `Параметры Столешницы и Умывальников`, "uiTab_FurnitureCounter_flat(1)"

ui_separator 210, pageStartY - 2, 210, pageStartY + 230

x1 = 5
y1 = pageStartY - 3
dy = 20
textX1 = 100
cell_w = 75		! width of cell
cell_h = 100	! height of cell

ui_style 0, 1
ui_outfield `Столешница`, x1, y1, 200, 18
ui_style 0, 0
y1 = y1 + dy
ui_outfield `Отметка Верха`, x1, y1, textX1, 18
ui_infield "h_top", x1 + textX1 + 5, y1, 195 - textX1, 18
y1 = y1 + dy
ui_outfield `Толщина`, x1, y1, textX1, 18
ui_infield "count_th", x1 + textX1 + 5, y1, 195 - textX1, 18
y1 = y1 + dy
ui_outfield `Тип Торца`, x1, y1, textX1, 18
ui_infield{3} "gs_count_type", x1 + textX1 + 5, y1, 60, 24,
	3,"ui_CabCountTyp(13)",3,1,
	44,24,40,20,
	1,`Прямоугольный`,`Прямоугольный`,
	2,`Скругленные`,`Скругленные`
y1 = y1 + dy *1.5

ui_style 0, 1
ui_outfield `Умывальник`, x1, y1, 200, 18
ui_style 0, 0
y1 = y1 + dy
ui_outfield `Количество`, x1, y1, textX1, 18
ui_infield "nSink", x1 + textX1 + 5, y1, 195 - textX1, 18
y1 = y1 + dy
ui_outfield `Стиль`, x1, y1, textX1, 18
!ui_infield "gs_sink_type", x1 + textX1 + 5, y1, 195 - textX1, 18
ui_infield{3} "gs_sink_type_m", x1 + textX1 + 5, y1, 195 - textX1, 18,
	8, "",
	2,
	1, 100, 20, 100, 20,
	"", `Круглые`, 1,
	"", `Овальная`, 2,	
	"", `Прямоугольный`, 3 

y1 = y1 + dy
ui_outfield `Ширина`, x1, y1, textX1, 18
ui_infield "sink_width", x1 + textX1 + 5, y1, 195 - textX1, 18
y1 = y1 + dy
ui_outfield `Длина`, x1, y1, textX1, 18
ui_infield "sink_depth", x1 + textX1 + 5, y1, 195 - textX1, 18
y1 = y1 + dy
ui_outfield `Расст. от Центра`, x1, y1, textX1, 18
ui_infield "yBasinPos", x1 + textX1 + 5, y1, 195 - textX1, 18
y1 = y1 + dy
ui_infield{3} "bUnderMounted", x1, y1, 200, 21,
				7, "",
				2,
				1, 20, 20, 20, 20,
				0, `Под Столешницей`, 0,
				1, `Под Столешницей`, 1
y1 = y1 + dy


x2 = 218
y2 = pageStartY - 3
textX2 = 200
textX3 = 155

ui_style 0, 1
ui_outfield `Фартуки и Передняя Панель`, x2, y2, 200, 18
ui_style 0, 0
y2 = y2 + dy
ui_infield{3} "bBackSplash", x2, y2, textX2, 18,
				7, "",
				2,
				1, 20, 20, 20, 20,
				0, `Фартук`, 0,
				1, `Фартук`, 1
y2 = y2 + dy
ui_infield{3} "bFrontFacePanel", x2, y2, textX2, 18,
				7, "",
				2,
				1, 20, 20, 20, 20,
				0, `Передняя Панель`, 0,
				1, `Передняя Панель`, 1
y2 = y2 + dy
ui_infield{3} "bSideSplashL", x2, y2, textX2, 18,
				7, "",
				2,
				1, 20, 20, 20, 20,
				0, `Фартук Слева`, 0,
				1, `Фартук Слева`, 1
y2 = y2 + dy
ui_infield{3} "bsideSplashR", x2, y2, textX2, 18,
				7, "",
				2,
				1, 20, 20, 20, 20,
				0, `Фартук Справа`, 0,
				1, `Фартук Справа`, 1
y2 = y2 + dy + 10

ui_outfield `Выступ Передней Панели`, x2, y2, textX3, 18, 4 * not(bFrontFacePanel)
ui_infield "frontFacePanelOvg", x2 + 160, y2, 60, 18
y2 = y2 + dy + 5
if not(bBackSplash) & not(bSideSplashL) & not(bSideSplashR) then
else
	ui_infield "bs_h", x2 + 160, y2, 60, 18
endif
y2 = y2 + dy + 5
if bFrontFacePanel then
	ui_infield "frontFacePanelHeight", x2 + 160, y2, 60, 18
endif
y2 = y2 - 17
if bBackSplash then
	if not(bSideSplashL) & not(bSideSplashR) then
		ui_pict 1, x2, y2, 155, 15, 1		! Basin_Multi_Bs1_Ls0_Rs0.png
	endif
	if bSideSplashL & not(bSideSplashR) then
		ui_pict 2, x2, y2, 155, 15, 1		! Basin_Multi_Bs1_Ls1_Rs0.png
	endif
	if not(bSideSplashL) & bSideSplashR then
		ui_pict 3, x2, y2, 155, 15, 1		! Basin_Multi_Bs1_Ls0_Rs1.png
	endif
	if bSideSplashL & bSideSplashR then
		ui_pict 4, x2, y2, 155, 15, 1		! Basin_Multi_Bs1_Ls1_Rs1.png
	endif
else
	if not(bSideSplashL) & not(bSideSplashR) then
		ui_pict 5, x2, y2, 145, 15, 1		! Basin_Multi_Bs0_Ls0_Rs0.png
	endif
	if bSideSplashL & not(bSideSplashR) then
		ui_pict 6, x2, y2, 155, 15, 1		! Basin_Multi_Bs0_Ls1_Rs0.png
	endif
	if not(bSideSplashL) & bSideSplashR then
		ui_pict 7, x2, y2, 155, 15, 1		! Basin_Multi_Bs0_Ls0_Rs1.png
	endif
	if bSideSplashL & bSideSplashR then
		ui_pict 8, x2, y2, 155, 15, 1		! Basin_Multi_Bs0_Ls1_Rs1.png
	endif
endif

if bFrontFacePanel then
	ui_pict 9, x2, y2 + 15, 155, 15, 1		! Basin_Multi_Facepanel1.png
else
	ui_pict 10, x2, y2 + 15, 145, 15, 1		! Basin_Multi_Facepanel0.png
endif



