
EPS = 0.0001

dim stStyles[6]
	stStyles[1] = `Закругленный 1`
	stStyles[2] = `Закругленный 2`
	stStyles[3] = `С Пьедесталом`
	stStyles[4] = `Овальный Плоский`
	stStyles[5] = `Для Инвалидов`
	stStyles[6] = `Прямоугольный`

if iStyle = 3 then
	PEDESTAL				= 1
	SEMI_PEDESTAL			= 2
	WALL_MOUNT				= 3
else
	SEMI_PEDESTAL			= 0
endif



TAPGROUP_SINGLE 		= 1
TAPGROUP_TWOHANDLE 		= 2
TAPGROUP_TRADITIONAL 	= 3
TAPGROUP_SENSOR			= 4
TAPGROUP_WALLMOUNTED	= 5
TAPGROUP_NONE 			= 6
TAPGROUP_CUSTOMTAPS		= 7


bWallMountedTap		= (gs_tap_type_m > 20 and gs_tap_type_m < 28) or (gs_tap_type_m = -1 and iTapGroup = TAPGROUP_WALLMOUNTED)

! -----------------------------------------------------------------------------
! Object Types
! -----------------------------------------------------------------------------

iObjectType = 10
if iStyle = 5 then iObjectType = 13

! -----------------------------------------------------------------------------
! Original tap distance from wall
! -----------------------------------------------------------------------------

yWallPos = -b/0.33*0.0677 + 0.035
if iStyle = 2 then yWallPos = -0.07*b / 0.48
if iStyle = 4 then yWallPos = -b/2 + b/0.476*0.175135
if iStyle = 5 then yWallPos = -0.2*b
if iStyle = 6 then yWallPos = -0.06

! -----------------------------------------------------------------------------
! ConPosX/ConPosY Range
! -----------------------------------------------------------------------------
if bWallmountedTap then
	if gs_tap_type_m = 21 then
		widthTap = 0.068
		posTap = 0.041
	else
		if gs_tap_type_m = -1 then
			widthTap = 0.05
			posTap = 0.036
		else
			widthTap = 0.05
			posTap = 0.0765
		endif
	endif
endif

if ZZYZX < 0.05 then  ZZYZX = 0.05

dim stSymbolTypes[2]
	stSymbolTypes[1] = `Символический`
	stSymbolTypes[2] = `На Основе Модели`

if gs_symbol_type_enable then
	iSymbolType = 1
	if gs_symbol_type = stSymbolTypes[2] then iSymbolType = 2
else
	iSymbolType = 2
endif

cornerRadius = 0.015
h = 0.4*ZZYZX/3

! -----------------------------------------------------------------------------
! Drain positions
! -----------------------------------------------------------------------------

if iStyle = 1 then _drainPosY = -0.4603 * B
if iStyle = 2 then _drainPosY = -0.5104 * B
if iStyle = 3 then _drainPosY = -0.4900 * B
if iStyle = 4 then _drainPosY = -0.3169 * B
if iStyle = 5 then _drainPosY = -0.4227 * B
if iStyle = 6 then _drainPosY = - 0.11 - 0.2727 * (B - 0.11)


! -----------------------------------------------------------------------------
! Show MEP Connections
! -----------------------------------------------------------------------------

isavailable = 0
isInArchiCAD = APPLICATION_QUERY ("MEPMODELER", "IsAvailable()", isavailable)
isMEPEnabled = (isavailable OR isInArchiCAD = 0)
if isMEPEnabled then
	bShowMEP = 1
	reqBMep = 0
	success = LIBRARYGLOBAL ("LibraryGlobals13", "showMepConnect", reqBMep)
	if success > 0 then
		bShowMEP = reqBMep
	endif
else
	bShowMEP = 0
endif


