
if gs_detlevel_3D_m = 0 then end
if not(gs_shadow) then shadow off

! -----------------------------------------------------------------------------
! 3D Hotspots
! -----------------------------------------------------------------------------

unID=1

if iStyle <> 3 then
	hotspot	0, 0,     0, unID, h_top, 1+128 : unID = unID+1
else !At type 3, this hotspot was missing, correction without changing other hotspot IDs
	hotspot	0, 0,     0, 500,  h_top, 1+128 :
endif

hotspot	0, 0,    -1, unID, h_top, 3 : unID = unID+1
hotspot	0, 0, h_top, unID, h_top, 2 : unID = unID+1

comp_unID = unID
unID = unID + 50
! --- 

if iStyle <> 5 then
	addz h_top

	hotspot	 0,  0, 0, unID, A2, 1+128, A: unID = unID + 1
	hotspot	-1,  0, 0, unID, A2, 3, A : unID = unID + 1
	hotspot	A/2,  0, 0, comp_unID+2, A2, 2, A : unID = unID + 1

	hotspot	  0,  0, 0, unID, a2, 1+128, a : unID = unID + 1
	hotspot	  1,  0, 0, unID, a2, 3, a : unID = unID + 1
	hotspot	-A/2,  0, 0, comp_unID, a2, 2, a : unID = unID + 1

	hotspot	0,  0, 0, unID, b, 1+128 : unID = unID + 1
	hotspot	0,  1, 0, unID, b, 3 : unID = unID + 1
	hotspot	0, -b, 0, comp_unID+5, b, 2 : unID = unID + 1

	if iStyle <> 3 then
		add -a / 2, -b, 0
		hotspot	0, b, 		0, unID, ZZYZX, 1+128 : unID = unID + 1
		hotspot	0, b, 		1, unID, ZZYZX, 3 : unID = unID + 1
		hotspot	0, b,  -ZZYZX, comp_unID+8, ZZYZX, 2 : unID = unID + 1

		hotspot	a, b, 		0, unID, ZZYZX, 1+128 : unID = unID + 1
		hotspot	a, b, 		1, unID, ZZYZX, 3 : unID = unID + 1
		hotspot	a, b,  -ZZYZX, comp_unID+11, ZZYZX, 2 : unID = unID + 1

		hotspot	a/2, 0,		 0, unID, ZZYZX, 1+128 : unID = unID + 1
		hotspot	a/2, 0,		 1, unID, ZZYZX, 3 : unID = unID + 1
		hotspot	a/2, 0, -ZZYZX, comp_unID+14, ZZYZX, 2 : unID = unID + 1
		del 1
	endif
	del 1
else
	addz h_top
	hotspot	 0,  0, 0, unID, A2, 1+128, A: unID = unID + 1
	hotspot	-1,  0, 0, unID, A2, 3, A : unID = unID + 1
	hotspot	A2,  0, 0, unID, A2, 2, A : unID = unID + 1

	hotspot	0,  0, 0, unID, b, 1+128 : unID = unID + 1
	hotspot	0,  1, 0, unID, b, 3 : unID = unID + 1
	hotspot	0, -b, 0, unID, b, 2 : unID = unID + 1

	add -a / 2, -b, 0
	hotspot	0, b, 		0, unID, ZZYZX, 1+128 : unID = unID + 1
	hotspot	0, b,		1, unID, ZZYZX, 3 : unID = unID + 1
	hotspot	0, b,  -ZZYZX, unID, ZZYZX, 2 : unID = unID + 1

	hotspot	a, b,		0, unID, ZZYZX, 1+128 : unID = unID + 1
	hotspot	a, b,		1, unID, ZZYZX, 3 : unID = unID + 1
	hotspot	a, b,  -ZZYZX, unID, ZZYZX, 2 : unID = unID + 1

	hotspot	a/2, 0, 	0, unID, ZZYZX, 1+128 : unID = unID + 1
	hotspot	a/2, 0, 	1, unID, ZZYZX, 3 : unID = unID + 1
	hotspot	a/2, 0,-ZZYZX, unID, ZZYZX, 2 : unID = unID + 1
	del 1

	hotspot	  0,  0, 0, unID, a2, 1+128, a : unID = unID + 1
	hotspot	  1,  0, 0, unID, a2, 3, a : unID = unID + 1
	hotspot	-a2,  0, 0, unID, a2, 2, a : unID = unID + 1
	del 1
endif


! -----------------------------------------------------------------------------
! Styles
! -----------------------------------------------------------------------------

pen gs_cont_pen

addZiStyle = h_top - ZZYZX
if iStyle = 2 then addZiStyle = h_top
if iStyle = 3 then addZiStyle = h_top - 0.17
if iStyle = 5 then addZiStyle = 0

addz addZiStyle
gosub iStyle
if gs_detlevel_3D_m <> 3 and gs_tap_type_m <> 0 then
	gosub "tap"
endif

del 1

! -----------------------------------------------------------------------------
! MEP Connections
! -----------------------------------------------------------------------------
addZiStyle2 = h_top - ZZYZX
if iStyle = 3 then addZiStyle2 = 0
if iStyle = 4 or iStyle = 5 then addZiStyle2 = h_top
if bShowMEP then gosub "mepconnection"


end

! =============================================================================
! SUBRUTINES
!
! =============================================================================

! -----------------------------------------------------------------------------
! Rounded 01
! -----------------------------------------------------------------------------
1:

	dd=0
	if gs_detlevel_3D_m=1 then
		gs_resol=4: dd = 0
	endif

	if gs_detlevel_3D_m=2 then
		dd = 1
	endif

	if gs_detlevel_3D_m=3 then
		gs_resol=3: dd = 2
	endif

	if GLOB_CONTEXT>20 and GLOB_CONTEXT<40 then gs_resol=4

	resol 2.5*gs_resol

	mulx a / 0.46
	muly b / 0.33
	mulz ZZYZX / 0.14

	if GLOB_CONTEXT > 40 AND GLOB_CONTEXT < 50 then
		prism_ 19, 0.14,
			-0.229978, 0, 15,
			-0.229995, -0.168, 79,
			-0.2268041210992, -0.1976008875153, 79,
			-0.2173780945435, -0.2258417138705, 79,
			-0.2021500145299, -0.2514249081385, 79,
			-0.1818195600853, -0.2731750086424, 79,
			-0.1573208471697, -0.2900926714636, 79,
			-0.09694804928942, -0.3154326802409, 79,
			-0.03274613633989, -0.3283662445804, 79,
			0.03274613633989, -0.3283662445804, 79,
			0.09694804928942, -0.3154326802409, 79,
			0.1573208471697, -0.2900926714636, 79,
			0.1818195600853, -0.2731750086424, 79,
			0.2021500145299, -0.2514249081385, 79,
			0.2173780945435, -0.2258417138705, 79,
			0.2268041210992, -0.1976008875153, 79,
			0.229995, -0.168, 79,
			0.229978, 0, 15,
			-0.229978, 0, -1
		del 3
	else
		roty -90
		add 0,-0.168,0.0911

		rotx 90
		material gs_basin_mat
		gosub 1100+dd
		del 2

		add 0,-0.168,-0.0911
		rotx 208.4746
		gosub 1100+dd
		del 2

		rotx 151.5254
		gosub 2100+dd
		del 2

		rotz 90
		roty -90
		add 0,0.0911,0.1344
		gosub 3100+dd
		muly -1
		addy 0.1822
		gosub 3100+dd
		del 5

		rotz 90
		roty -90
		add 0,0.0911,0
		gosub 4100+dd
		muly -1
		addy 0.1822
		gosub 4100+dd
		del 5

		if gs_detlevel_3D_m=1 then resol 2.5*8
		poly_ 6,
			-0.0911,0,1,
			0.0911,0,1,
			0.0911,-0.168,1,
			0,0,900,
			-0.0911,-0.168,3000,
			-0.0911,0,-1

		if gs_detlevel_3D_m=1 then resol 2.5*gs_resol
		rotx 90
		mul 1.0001,1.0001,1
		gosub 6100+dd
		del 1
		del 1

		! --- inner part ---
		addz 0.02
		resol 2.5*8
		if NOT(gs_detlevel_3D_m=3) then
			poly_ 8,
				-0.0911,-0.134,0,
				0.0911,-0.134,0,
				0.0911,-0.168,0,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,-0.134,-1,

				0,-0.1519,901,
				0.0175,360,4001
		endif
		del 1


		if gs_detlevel_3D_m=1 then resol 2.5*5
		if gs_detlevel_3D_m=3 then resol 1.5*5
		material gs_basin_mat
		addy  -0.03353757
		muly 0.0667/0.0889
		addz 0.14
			poly_ 10,
			-0.20,-0.1344,0,
			-0.18,-0.1344,0,
			0,1,800,
			-0.0911,-0.0455,1000,
			0.0911,-0.0455,0,
			0.18,-0.1344,1000,
			0.20,-0.1344,0,
			0.20,0.0447,1,
			-0.20,0.0447,0,
			-0.20,-0.1344,-1
		del 3

		resol 2.5*gs_resol
		roty -90
		add 0,-0.1344,0.0911
		muly 0.0667/0.0889
		gosub 7100+dd
		del 2

		add 0,-0.1344,-0.0911
		rotx -90
		mulz 0.0667/0.0889
		gosub 7100+dd
		del 4

		roty -90
		add 0,-0.1344,-0.0911
		muly 0.0667/0.0889
		gosub 8100+dd
		del 3
		del 3

		material gs_drain_mat
		add 0, _drainPosY, + 0.1 * ZZYZX + 0.007
		gosub 1200	! --- Drain ---
		del 1
	endif

return

! -----------------------------------------------------------------------------
! Rounded 02
! -----------------------------------------------------------------------------

2:

	if GLOB_CONTEXT > 40 and GLOB_CONTEXT < 50 then gs_detlevel_3D_m = 1

	material gs_basin_mat
	if gs_detlevel_3D_m = 2 then
		mulx a/0.66
		muly b/0.48
		mulz ZZYZX/0.19

		mulz 0.19/0.1885
		add 0, -0.24, -0.146

		cutpolya 16, 1, 0.10,
			-0.3, 0.22, 8,
			-0.3, 0, 8,
			-0.2949309433553, -0.04252756008031, 8,
			-0.2749447287034, -0.08794248504573, 8,
			-0.2311327964087, -0.1384155368501, 8,
			-0.1733897463977, -0.1758854935969, 8,
			-0.0926399870495, -0.2028490270292, 8,
			0, -0.21, 8,
			0.0926399870495, -0.2028490270292, 8,
			0.1733897463977, -0.1758854935969, 8,
			0.2311327964087, -0.1384155368501, 8,
			0.2749447287034, -0.08794248504573, 8,
			0.2949309433553, -0.04252756008031, 8,
			0.3, 0, 8,
			0.3, 0.22, 8,
			-0.3, 0.22, -1

		tube 11, 29, 1+2,
			-0.04, 0, 0,
			-0.01570407698389, 0, 1,
			-0.01273237789243, 0.00098562585124, 1,
			-0.0108033008589, 0.004303300858899, 1,
			-0.0065, 0.006, 1,
			-0.001696699141101, 0.004303300858899, 1,
			0, 0, 1,
			0, -0.0825, 0,
			-0.005, -0.0825, 1,
			-0.005, -0.005, 1,
			-0.04, -0.005, 0,

			-0.33, 0.24, 0.14, 0,
			0, 0.24, 0.14, 0,
			0.33, 0.24, 0.14, 0,
			0.33, 0, 0.14, 0,
			0.3169765648831, -0.04908427964502, 0.14, 0,
			0.3047859451552, -0.07414694378661, 0.14, 0,
			0.2900117119509, -0.0977906328828, 0.14, 0,
			0.2674301450192, -0.1258639594083, 0.14, 0,
			0.241326923939, -0.1507475992849, 0.14, 0,
			0.2113383286777, -0.1749776655162, 0.14, 0,
			0.1785661272998, -0.1952040101226, 0.14, 0,
			0.139292052172, -0.2133870773104, 0.14, 0,
			0.09796861034148, -0.2262500050817, 0.14, 0,
			0.04927528024869, -0.2352235398992, 0.14, 0,
			0, -0.24, 0.14, 0,
			-0.04927528024869, -0.2352235398992, 0.14, 0,
			-0.09796861034148, -0.2262500050817, 0.14, 0,
			-0.139292052172, -0.2133870773104, 0.14, 0,
			-0.1785661272998, -0.1952040101226, 0.14, 0,
			-0.2113383286777, -0.1749776655162, 0.14, 0,
			-0.241326923939, -0.1507475992849, 0.14, 0,
			-0.2674301450192, -0.1258639594083, 0.14, 0,
			-0.2900117119509, -0.0977906328828, 0.14, 0,
			-0.3047859451552, -0.07414694378661, 0.14, 0,
			-0.3169765648831, -0.04908427964502, 0.14, 0,
			-0.33, 0, 0.14, 0,
			-0.33, 0.24, 0.14, 0,
			0, 0.24, 0.14, 0,
			0.33, 0.24, 0.14, 0
		cutend

		tube 14, 27, 1+2,
			0, -0.0825, 0,
			-0.01957008826442, -0.1200081293218, 1,
			-0.04598902210725, -0.1466922919124, 1,
			-0.08264967731925, -0.1675453319497, 1,
			-0.1239705227357, -0.179417944226, 1,
			-0.16, -0.1825, 1,
			-0.161, -0.1825, 0,
			-0.161, -0.1774817394963, 0,
			-0.16, -0.1774817394963, 1,
			-0.1248825814294, -0.1744777036098, 1,
			-0.08460351802896, -0.1629044238817, 1,
			-0.04905858566041, -0.1426860209776, 1,
			-0.0236655496236, -0.1170380555333, 1,
			-0.005, -0.0825, 0,

			0.33, 0.26, 0.14, 0,
			0.33, 0.235, 0.14, 0,
			0.33, 0, 0.14, 0,
			0.3169765648831, -0.04908427964502, 0.14, 0,
			0.3047859451552, -0.07414694378661, 0.14, 0,
			0.2900117119509, -0.0977906328828, 0.14, 0,
			0.2674301450192, -0.1258639594083, 0.14, 0,
			0.241326923939, -0.1507475992849, 0.14, 0,
			0.2113383286777, -0.1749776655162, 0.14, 0,
			0.1785661272998, -0.1952040101226, 0.14, 0,
			0.139292052172, -0.2133870773104, 0.14, 0,
			0.09796861034148, -0.2262500050817, 0.14, 0,
			0.04927528024869, -0.2352235398992, 0.14, 0,
			0, -0.24, 0.14, 0,
			-0.04927528024869, -0.2352235398992, 0.14, 0,
			-0.09796861034148, -0.2262500050817, 0.14, 0,
			-0.139292052172, -0.2133870773104, 0.14, 0,
			-0.1785661272998, -0.1952040101226, 0.14, 0,
			-0.2113383286777, -0.1749776655162, 0.14, 0,
			-0.241326923939, -0.1507475992849, 0.14, 0,
			-0.2674301450192, -0.1258639594083, 0.14, 0,
			-0.2900117119509, -0.0977906328828, 0.14, 0,
			-0.3047859451552, -0.07414694378661, 0.14, 0,
			-0.3169765648831, -0.04908427964502, 0.14, 0,
			-0.33, 0, 0.14, 0,
			-0.33, 0.235, 0.14, 0,
			-0.33, 0.26, 0.14, 0

		addy 0.24
		rotx 90
		extrude 13, 0, 0, 0.005, 1+2+16,
			0.33, 0.0575, 0,
			0.3104299117356, 0.0199918706782, 1,
			0.2840109778928, -0.0066922919124, 1,
			0.2473503226808, -0.0275453319497, 1,
			0.2060294772643, -0.039417944226, 1,
			0.17, -0.0425, 1,
			-0.17, -0.0425, 1,
			-0.2060294772643, -0.039417944226, 1,
			-0.2473503226808, -0.0275453319497, 1,
			-0.2840109778928, -0.0066922919124, 1,
			-0.3104299117356, 0.0199918706782, 1,
			-0.33, 0.0575, 0,
			0.33,  0.0575, -1
		del 2

		addz 0.135
		prism_ 14, 0.005,
			0.3, 0.06, 8,
			0.2961808887971, 0.08296100594191, 8,
			0.2831745237177, 0.1024264068712, 8,
			0.2637091227884, 0.1154327719507, 8,
			0.2407481168465, 0.12, 8,
			0.20804086759, 0.12, 8,
			-0.2407481168465, 0.12, 8,
			-0.2637091227884, 0.1154327719507, 8,
			-0.2831745237177, 0.1024264068712, 8,
			-0.2961808887971, 0.08296100594191, 8,
			-0.3, 0.06, 8,
			-0.3, 0.22, 8,
			0.3, 0.22, 8,
			0.3, 0.06, -1
		del 1

		addz -0.0425
		prism_  26, 0.005,
			0.169, 0.235, 8,
			0.169, 0.02099567197312, 8,
			0.1653653375038, 0.007296921315011, 8,
			0.1645492008434, 0.005619028027411, 8,
			0.1585540484487, -0.004347013697618, 8,
			0.1486437617425, -0.01666744812567, 8,
			0.1350122068674, -0.0296621165395, 8,
			0.1180941367218, -0.04333151173994, 8,
			0.1021945151137, -0.0531444389232, 8,
			0.0812942393601, -0.06282082511525, 8,
			0.05931601459868, -0.06966208288867, 8,
			0.02687805769896, -0.07563996805474, 8,
			0, -0.07824537120086, 8,
			-0.02687805769896, -0.07563996805474, 8,
			-0.05931601459868, -0.06966208288867, 8,
			-0.0812942393601, -0.06282082511524, 8,
			-0.1021945151137, -0.0531444389232, 8,
			-0.1180941367218, -0.04333151173994, 8,
			-0.1350122068674, -0.0296621165395, 8,
			-0.1486437617425, -0.01666744812567, 8,
			-0.1585540484487, -0.004347013697618, 8,
			-0.1645492008434, 0.005619028027411, 8,
			-0.1653653375038, 0.007296921315011, 8,
			-0.169, 0.02099567197312, 8,
			-0.169, 0.235, 8,
			0.169, 0.235, -1
		del 1

		for i = -1 to 1 step 2
			mulx i
			muly -1
			coons 7, 10, 8,
				0.06, 0, 0,
				0.05898618867106, 0.008505512016061, 0,
				0.05498894574069, 0.01758849700915, 0,
				0.04622655928174, 0.02768310737002, 0,
				0.03467794927954, 0.03517709871937, 0,
				0.01997765858749, 0.04026370753437, 0,
				0, 0.042, 0,

				0.30, 0, 0.14,
				0.2949309433553, 0.04252756008031, 0.14,
				0.2749447287034, 0.08794248504573, 0.14,
				0.2311327964087, 0.1384155368501, 0.14,
				0.1733897463977, 0.1758854935969, 0.14,
				0.0926399870495, 0.2028490270292, 0.14,
				0, 0.21, 0.14,

				0.06, 0, 0,
				0.1174077554981, 0, 0.00393091023911,
				0.171228536787, 0, 0.01803315912766,
				0.2182274458956, 0, 0.04215290918419,
				0.2540223567053, 0, 0.07395489661357,
				0.27932470644, 0, 0.1126420189435,
				0.2878329747935, 0, 0.1352900266729,
				0.2907481168465, 0, 0.138781236722,
				0.2947481168465, 0, 0.14,
				0.30, 0, 0.14,

				0, 0.042, 0,
				0, 0.07196037966529, 0.003930910239104,
				0, 0.114353109892, 0.01803315912784,
				0, 0.1500558600172, 0.0421529091842,
				0, 0.1741190421117, 0.07395489661357,
				0, 0.1900218299035, 0.1126420189435,
				0, 0.1970848579471, 0.1352900266729,
				0, 0.2, 0.138781236722,
				0, 0.204, 0.14,
				0, 0.21, 0.14
			del 1

			coons 7, 10, 8,
				0.06, 0, 0,
				0.06, 0.012, 0,
				0.05923617775943, 0.01659220118838, 0,
				0.05663490474353, 0.02048528137424, 0,
				0.05274182455768, 0.02308655439014, 0,
				0.04814962336929, 0.024, 0,
				0, 0.024, 0,

				0.30, 0, 0.14,
				0.30, 0.06, 0.14,
				0.2961808887971, 0.08296100594191, 0.14,
				0.2831745237177, 0.1024264068712, 0.14,
				0.2637091227884, 0.1154327719507, 0.14,
				0.2407481168465, 0.12, 0.14,
				0, 0.12, 0.14,

				0.06, 0, 0,
				0.1174077554981, 0, 0.00393091023911,
				0.171228536787, 0, 0.01803315912766,
				0.2182274458956, 0, 0.04215290918419,
				0.2540223567053, 0, 0.07395489661357,
				0.27932470644, 0, 0.1126420189435,
				0.2878329747935, 0, 0.1352900266729,
				0.2907481168465, 0, 0.138781236722,
				0.2947481168465, 0, 0.14,
				0.30, 0, 0.14,

				0, 0.024, 0,
				0, 0.05708485794706, 0,
				0, 0.07621902956531, 0.003806023374436,
				0, 0.09244019700638, 0.01464466094067,
				0, 0.1032788345726, 0.03086582838175,
				0, 0.1070848579471, 0.05,
				0, 0.1070848579471, 0.1343386347766,
				0, 0.11, 0.138781236722,
				0, 0.114, 0.14,
				0, 0.12, 0.14
			del 1
		next i

		poly_ 25,
			0, -0.042, 1,
			-0.01997765858749, -0.04026370753437, 1,
			-0.03467794927954, -0.03517709871937, 1,
			-0.04622655928174, -0.02768310737002, 1,
			-0.05498894574069, -0.01758849700915, 1,
			-0.05898618867106, -0.008505512016061, 1,
			-0.06, 0, 1,
			-0.06, 0.012, 1,
			-0.05923617775943, 0.01659220118838, 1,
			-0.05663490474353, 0.02048528137424, 1,
			-0.05274182455768, 0.02308655439014, 1,
			-0.04814962336929, 0.024, 1,
			0, 0.024, 1,
			0.04814962336929, 0.024, 1,
			0.05274182455768, 0.02308655439014, 1,
			0.05663490474353, 0.02048528137424, 1,
			0.05923617775943, 0.01659220118838, 1,
			0.06, 0.012, 1,
			0.06, 0, 1,
			0.05898618867106, -0.008505512016061, 1,
			0.05498894574069, -0.01758849700915, 1,
			0.04622655928174, -0.02768310737002, 1,
			0.03467794927954, -0.03517709871937, 1,
			0.01997765858749, -0.04026370753437, 1,
			0, -0.042, -1
		del 5

		material gs_drain_mat
		add 0, _drainPosY, -0.147*(ZZYZX/0.19)
		gosub 1200	! --- Drain ---
		del 1

		add 0, -0.134*b/0.48, -0.045*(ZZYZX/0.19)
		rotx 90
		mul 0.6, 0.6, 1
		gosub 1200	! --- Drain ---
		del 3
	endif

	if gs_detlevel_3D_m = 1 then
		mulx a/0.66
		muly b/0.48
		mulz ZZYZX/0.19

		resol gs_resol			!!!16
		group "basin01"
			rotx 90
			extrude 15, 0, 0, 0.24, 1+2+16,
				0.17, -0.19, 1,
				0.2060294772643, -0.1868934185832, 1,
				0.2473503226808, -0.1749263292862, 1,
				0.2840109778928, -0.1539073499382, 1,
				0.3104299117356, -0.1270108465313, 1,
				0.33, -0.08920424403183, 1,
				0.33, 0, 0,
				-0.33, 0, 0,
				-0.33, -0.08920424403183, 1,
				-0.3104299117356, -0.1270108465313, 1,
				-0.2840109778928, -0.1539073499382, 1,
				-0.2473503226808, -0.1749263292862, 1,
				-0.2060294772643, -0.1868934185832, 1,
				-0.17, -0.19, 1,
				0.17, -0.19, -1

			addz 0.24
			rotz -90
			mulz 0.24/0.33
			revolve 7, 180, 1+2+4+8,
				0.19, 0.17, 1,
				0.1868934185832, 0.2060294772643, 1,
				0.1749263292862, 0.2473503226808, 1,
				0.1539073499382, 0.2840109778928, 1,
				0.1270108465313, 0.3104299117356, 1,
				0.08920424403183, 0.33, 1,
				0, 0.33, 0
			del 4
		endgroup

		group "basin02"
			addy -0.21
			mul 1, 0.24/0.30, 0.148/0.30
			cutplane 0
			cutplane -90
			sphere 0.30
			cutend
			cutend
			del 1

			mul 1, 0.09/0.30, 0.148/0.30
			cutplane 0
			cutplane 90
			sphere 0.30
			cutend
			cutend
			del 2
		endgroup

		result01 = subgroup("basin01","basin02")
		placegroup result01

		killgroup "basin01"
		killgroup "basin02"

		del 3
	endif

	if gs_detlevel_3D_m = 3 then
		mulx a/0.66
		muly b/0.48
		mulz ZZYZX/0.19

		resol 8
		group "basin11"
			rotx 90
			extrude 9, 0, 0, 0.24, 1+2+16,
				0.17, -0.19, 1,
				0.2840109778928, -0.1539073499382, 1,
				0.33, -0.08920424403183, 1,
				0.33, 0, 0,
				-0.33, 0, 0,
				-0.33, -0.08920424403183, 1,
				-0.2840109778928, -0.1539073499382, 1,
				-0.17, -0.19, 1,
				0.17, -0.19, -1

			addz 0.24
			rotz -90
			mulz 0.24/0.33
			revolve 4, 180, 1+2+4+8,
				0.19, 0.17, 1,
				0.1539073499382, 0.2840109778928, 1,
				0.08920424403183, 0.33, 1,
				0, 0.33, 0
			del 4
		endgroup

		group "basin12"
			addy -0.21
			mul 1, 0.24/0.30, 0.148/0.30
			cutplane 0
			cutplane -90
			sphere 0.30
			cutend
			cutend
			del 1

			mul 1, 0.09/0.30, 0.148/0.30
			cutplane 0
			cutplane 90
			sphere 0.30
			cutend
			cutend
			del 2
		endgroup

		result11 = subgroup("basin11","basin12")
		placegroup result11

		killgroup "basin11"
		killgroup "basin12"

		del 3
	endif

return


! -----------------------------------------------------------------------------
! On Pedestal
! -----------------------------------------------------------------------------
3:

	if GLOB_CONTEXT > 20 and GLOB_CONTEXT < 40 then gs_resol = 4
	if gs_detlevel_3D_m = 1 then gs_resol = 4
	if gs_detlevel_3D_m = 3 then gs_resol = 3

	resol 2.5*gs_resol

	mulx a/0.46
	muly b/0.33

	if GLOB_CONTEXT > 40 AND GLOB_CONTEXT < 50 then
		prism_ 19, 0.17,
			-0.229978, 0, 15,
			-0.229995, -0.168, 79,
			-0.2268041210992, -0.1976008875153, 79,
			-0.2173780945435, -0.2258417138705, 79,
			-0.2021500145299, -0.2514249081385, 79,
			-0.1818195600853, -0.2731750086424, 79,
			-0.1573208471697, -0.2900926714636, 79,
			-0.09694804928942, -0.3154326802409, 79,
			-0.03274613633989, -0.3283662445804, 79,
			0.03274613633989, -0.3283662445804, 79,
			0.09694804928942, -0.3154326802409, 79,
			0.1573208471697, -0.2900926714636, 79,
			0.1818195600853, -0.2731750086424, 79,
			0.2021500145299, -0.2514249081385, 79,
			0.2173780945435, -0.2258417138705, 79,
			0.2268041210992, -0.1976008875153, 79,
			0.229995, -0.168, 79,
			0.229978, 0, 15,
			-0.229978, 0, -1
	else
		if gs_detlevel_3D_m=1 then
			mulz 0.17/0.14
			roty -90
			add 0,-0.168,0.0911

			rotx 90
			material gs_basin_mat
			revolve  14,  61.5254,0,
					0.0,    -0.0,     1,
					0.006162,     0.049277,     1,
					0.036627,     0.107079,     1,
					0.0581,     0.122115,     1,
					0.09,     0.138878,     2,
					0.105175,     0.135695,     1,
					0.119648,     0.123685,     1,
					0.124298,     0.116898,     1,
					0.14,     0.10888,     2,
					0.14,     0.0889,     2,
					0.102175,     0.084476,     1,
					0.056175,     0.063026,     1,
					0.025603,     0.028117,     1,
					0.02,    -0.0,     1
			del 2


			add 0,-0.168,-0.0911
			rotx 208.4746
			revolve  14,  61.5254,0,
					0.0,    -0.0,     1,
					0.006162,     0.049277,     1,
					0.036627,     0.107079,     1,
					0.0581,     0.122115,     1,
					0.09,     0.138878,     2,
					0.105175,     0.135695,     1,
					0.119648,     0.123685,     1,
					0.124298,     0.116898,     1,
					0.14,     0.10888,     2,
					0.14,     0.0889,     2,
					0.102175,     0.084476,     1,
					0.056175,     0.063026,     1,
					0.025603,     0.028117,     1,
					0.02,    -0.0,     1
			del 2

			resol 2.5*8

			rotx 151.5254
			revolve 14, 56.9491,0,
				 0.0,     0.1911,     1,
				0.006162,     0.240377,     1,
				0.036627,     0.298179,     1,
				0.0581,     0.313215,     1,
				0.09,     0.329978,     2,
				0.105175,     0.326795,     1,
				0.119648,     0.314785,     1,
				0.124298,     0.307998,     1,
				0.14,     0.30,     2,
				0.14,     0.28,     2,
				0.102175,     0.275576,     1,
				0.056175,     0.254126,     1,
				0.025603,     0.219217,     1,
				0.02,     0.1911,     1
			del 2

			resol 2.5*gs_resol
			rotz 90
			roty -90
			add 0,0.0911,0.1344
			extrude  14,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     0,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0,
				0.102175,     0.084476,     1,
				0.056175,     0.063026,     1,
				0.025603,     0.028117,     1,
				0.02,    -0.0,     1
			muly -1
			addy 0.1822
			extrude  14,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     0,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0,
				0.102175,     0.084476,     1,
				0.056175,     0.063026,     1,
				0.025603,     0.028117,     1,
				0.02,    -0.0,     1
			del 5

			rotz 90
			roty -90
			add 0,0.0911,0
			extrude  9,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     0,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     0
			muly -1
			addy 0.1822
			extrude  9,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.006162,     0.049277,     1,
				0.036627,     0.107079,     1,
				0.0581,     0.122115,     1,
				0.09,     0.138878,     0,
				0.105175,     0.135695,     1,
				0.119648,     0.123685,     1,
				0.124298,     0.116898,     1,
				0.14,     0.10888,     0
			del 5

			resol 2.5*8
			poly_ 6,
				-0.0911,0,1,
				0.0911,0,1,
				0.0911,-0.168,1,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,0,-1

			resol 2.5*gs_resol
			rotx 90
			mul 1.0001,1.0001,1
			poly_      19,
				   -0.0911,     0.0,      1,
				   -0.140377,     0.006162,      1,
				   -0.198179,     0.036627,      1,
				   -0.213215,     0.0581,      1,
				   -0.229978,     0.09,      1,
				   -0.226795,     0.105175,      1,
				   -0.214785,     0.119648,      1,
				   -0.207998,     0.124298,      1,
				   -0.19998,     0.14,      1,
					0.19998,     0.14,      1,
					0.207998,     0.124298,      1,
					0.214785,     0.119648,      1,
					0.226795,     0.105175,      1,
					0.229978,     0.09,      1,
					0.213215,     0.0581,      1,
					0.198179,     0.036627,      1,
					0.140377,     0.006162,      1,
					0.0911,    -0.0,      1,
				   -0.0911,     0.0,     -1
			del 2

			! --- inner part ---
			addz 0.02
			resol 2.5*8
			poly_ 8,
				-0.0911,-0.134,0,
				0.0911,-0.134,0,
				0.0911,-0.168,0,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,-0.134,-1,

				0,-0.1519,901,
				0.0175,360,4001
			del 1

			resol 2.5*5
			material gs_basin_mat
			addy  -0.03353757
			muly 0.0667/0.0889
			addz 0.14
				poly_ 10,
				-0.20,-0.1344,0,
				-0.18,-0.1344,0,
				0,1,800,
				-0.0911,-0.0455,1000,
				0.0911,-0.0455,0,
				0.18,-0.1344,1000,
				0.20,-0.1344,0,
				0.20,0.0447,1,
				-0.20,0.0447,0,
				-0.20,-0.1344,-1
			del 3

			resol 2.5*gs_resol
			roty -90
			add 0,-0.1344,0.0911
			muly 0.0667/0.0889
			revolve  5,  90,0,
						0.14,     0.0889,     0,
						0.102175,     0.084476,     1,
						0.056175,     0.063026,     1,
						0.025603,     0.028117,     1,
						0.02,    -0.0,     1
			del 2


			add 0,-0.1344,-0.0911
			rotx -90
			mulz 0.0667/0.0889
			revolve  5,  90,0,
						0.14,     0.0889,     0,
						0.102175,     0.084476,     1,
						0.056175,     0.063026,     1,
						0.025603,     0.028117,     1,
						0.02,    -0.0,     1
			del 4

			roty -90
			add 0,-0.1344,-0.0911
			muly 0.0667/0.0889
			extrude  5,  0,0,0.1822,0,
						0.14,     0.0889,     0,
						0.102175,     0.084476,     1,
						0.056175,     0.063026,     1,
						0.025603,     0.028117,     1,
						0.02,    -0.0,     1
			del 4
		endif


		if gs_detlevel_3D_m=2 then
			mulz 0.17/0.14
			roty -90
			add 0,-0.168,0.0911

			rotx 90
			material gs_basin_mat
			revolve  38,  61.5254,0,
					0.0,    -0.0,     1,
					0.000246,     0.018342,     1,
					0.006162,     0.049277,     1,
					0.017359,     0.078715,     1,
					0.025429,     0.092238,     1,
					0.02817,     0.097,     1,
					0.036627,     0.107079,     1,
					0.046706,     0.115537,     1,
					0.0581,     0.122115,     1,
					0.070464,     0.126615,     1,
					0.083421,     0.1289,     1,
					0.09,     0.1289,     1,
					0.09,     0.138878,     2,
					0.092969,     0.138895,     1,
					0.099212,     0.137829,     1,
					0.105175,     0.135695,     1,
					0.110677,     0.132559,     1,
					0.115551,     0.128514,     1,
					0.119648,     0.123685,     1,
					0.121246,     0.120951,     1,
					0.122103,     0.119486,     1,
					0.124298,     0.116898,     1,
					0.12691,     0.114731,     1,
					0.129451,     0.113326,     1,
					0.137338,     0.109459,     1,
					0.14,     0.10888,     2,
					0.14,     0.0889,     2,
					0.127263,     0.0889,     1,
					0.102175,     0.084476,     1,
					0.078237,     0.075764,     1,
					0.056175,     0.063026,     1,
					0.043696,     0.052497,     1,
					0.039103,     0.048446,     1,
					0.031464,     0.038872,     1,
					0.025603,     0.028117,     1,
					0.021699,     0.016507,     1,
					0.01987,     0.004396,     1,
					0.02,    -0.0,     1
			del 2


			add 0,-0.168,-0.0911
			rotx 208.4746
			revolve  38,  61.5254,0,
					0.0,    -0.0,     1,
					0.000246,     0.018342,     1,
					0.006162,     0.049277,     1,
					0.017359,     0.078715,     1,
					0.025429,     0.092238,     1,
					0.02817,     0.097,     1,
					0.036627,     0.107079,     1,
					0.046706,     0.115537,     1,
					0.0581,     0.122115,     1,
					0.070464,     0.126615,     1,
					0.083421,     0.1289,     1,
					0.09,     0.1289,     1,
					0.09,     0.138878,     2,
					0.092969,     0.138895,     1,
					0.099212,     0.137829,     1,
					0.105175,     0.135695,     1,
					0.110677,     0.132559,     1,
					0.115551,     0.128514,     1,
					0.119648,     0.123685,     1,
					0.121246,     0.120951,     1,
					0.122103,     0.119486,     1,
					0.124298,     0.116898,     1,
					0.12691,     0.114731,     1,
					0.129451,     0.113326,     1,
					0.137338,     0.109459,     1,
					0.14,     0.10888,     2,
					0.14,     0.0889,     2,
					0.127263,     0.0889,     1,
					0.102175,     0.084476,     1,
					0.078237,     0.075764,     1,
					0.056175,     0.063026,     1,
					0.043696,     0.052497,     1,
					0.039103,     0.048446,     1,
					0.031464,     0.038872,     1,
					0.025603,     0.028117,     1,
					0.021699,     0.016507,     1,
					0.01987,     0.004396,     1,
					0.02,    -0.0,     1
			del 2

			rotx 151.5254
			revolve 38, 56.9491,0,
				 0.0,     0.1911,     1,
				0.000246,     0.209442,     1,
				0.006162,     0.240377,     1,
				0.017359,     0.269815,     1,
				0.025429,     0.283338,     1,
				0.02817,     0.2881,     1,
				0.036627,     0.298179,     1,
				0.046706,     0.306637,     1,
				0.0581,     0.313215,     1,
				0.070464,     0.317715,     1,
				0.083421,     0.32,     1,
				0.09,     0.32,     1,
				0.09,     0.329978,     2,
				0.092969,     0.329995,     1,
				0.099212,     0.328929,     1,
				0.105175,     0.326795,     1,
				0.110677,     0.323659,     1,
				0.115551,     0.319614,     1,
				0.119648,     0.314785,     1,
				0.121246,     0.312051,     1,
				0.122103,     0.310586,     1,
				0.124298,     0.307998,     1,
				0.12691,     0.305831,     1,
				0.129451,     0.304426,     1,
				0.137338,     0.300559,     1,
				0.14,     0.30,     2,
				0.14,     0.28,     2,
				0.127263,     0.28,     1,
				0.102175,     0.275576,     1,
				0.078237,     0.266864,     1,
				0.056175,     0.254126,     1,
				0.043696,     0.243597,     1,
				0.039103,     0.239546,     1,
				0.031464,     0.229972,     1,
				0.025603,     0.219217,     1,
				0.021699,     0.207607,     1,
				0.01987,     0.195496,     1,
				0.02,     0.1911,     1
			del 2

			rotz 90
			roty -90
			add 0,0.0911,0.1344
			extrude  38,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.000246,     0.018342,     1,
				0.006162,     0.049277,     1,
				0.017359,     0.078715,     1,
				0.025429,     0.092238,     1,
				0.02817,     0.097,     1,
				0.036627,     0.107079,     1,
				0.046706,     0.115537,     1,
				0.0581,     0.122115,     1,
				0.070464,     0.126615,     1,
				0.083421,     0.1289,     1,
				0.09,     0.1289,     1,
				0.09,     0.138878,     0,
				0.092969,     0.138895,     1,
				0.099212,     0.137829,     1,
				0.105175,     0.135695,     1,
				0.110677,     0.132559,     1,
				0.115551,     0.128514,     1,
				0.119648,     0.123685,     1,
				0.121246,     0.120951,     1,
				0.122103,     0.119486,     1,
				0.124298,     0.116898,     1,
				0.12691,     0.114731,     1,
				0.129451,     0.113326,     1,
				0.137338,     0.109459,     1,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0,
				0.127263,     0.0889,     1,
				0.102175,     0.084476,     1,
				0.078237,     0.075764,     1,
				0.056175,     0.063026,     1,
				0.043696,     0.052497,     1,
				0.039103,     0.048446,     1,
				0.031464,     0.038872,     1,
				0.025603,     0.028117,     1,
				0.021699,     0.016507,     1,
				0.01987,     0.004396,     1,
				0.02,    -0.0,     1

			muly -1
			addy 0.1822
			extrude  38,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.000246,     0.018342,     1,
				0.006162,     0.049277,     1,
				0.017359,     0.078715,     1,
				0.025429,     0.092238,     1,
				0.02817,     0.097,     1,
				0.036627,     0.107079,     1,
				0.046706,     0.115537,     1,
				0.0581,     0.122115,     1,
				0.070464,     0.126615,     1,
				0.083421,     0.1289,     1,
				0.09,     0.1289,     1,
				0.09,     0.138878,     0,
				0.092969,     0.138895,     1,
				0.099212,     0.137829,     1,
				0.105175,     0.135695,     1,
				0.110677,     0.132559,     1,
				0.115551,     0.128514,     1,
				0.119648,     0.123685,     1,
				0.121246,     0.120951,     1,
				0.122103,     0.119486,     1,
				0.124298,     0.116898,     1,
				0.12691,     0.114731,     1,
				0.129451,     0.113326,     1,
				0.137338,     0.109459,     1,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0,
				0.127263,     0.0889,     1,
				0.102175,     0.084476,     1,
				0.078237,     0.075764,     1,
				0.056175,     0.063026,     1,
				0.043696,     0.052497,     1,
				0.039103,     0.048446,     1,
				0.031464,     0.038872,     1,
				0.025603,     0.028117,     1,
				0.021699,     0.016507,     1,
				0.01987,     0.004396,     1,
				0.02,    -0.0,     1
			del 5

			rotz 90
			roty -90
			add 0,0.0911,0
			extrude  26,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.000246,     0.018342,     1,
				0.006162,     0.049277,     1,
				0.017359,     0.078715,     1,
				0.025429,     0.092238,     1,
				0.02817,     0.097,     1,
				0.036627,     0.107079,     1,
				0.046706,     0.115537,     1,
				0.0581,     0.122115,     1,
				0.070464,     0.126615,     1,
				0.083421,     0.1289,     1,
				0.09,     0.1289,     1,
				0.09,     0.138878,     0,
				0.092969,     0.138895,     1,
				0.099212,     0.137829,     1,
				0.105175,     0.135695,     1,
				0.110677,     0.132559,     1,
				0.115551,     0.128514,     1,
				0.119648,     0.123685,     1,
				0.121246,     0.120951,     1,
				0.122103,     0.119486,     1,
				0.124298,     0.116898,     1,
				0.12691,     0.114731,     1,
				0.129451,     0.113326,     1,
				0.137338,     0.109459,     1,
				0.14,     0.10888,     0

			muly -1
			addy 0.1822
			extrude  26,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.000246,     0.018342,     1,
				0.006162,     0.049277,     1,
				0.017359,     0.078715,     1,
				0.025429,     0.092238,     1,
				0.02817,     0.097,     1,
				0.036627,     0.107079,     1,
				0.046706,     0.115537,     1,
				0.0581,     0.122115,     1,
				0.070464,     0.126615,     1,
				0.083421,     0.1289,     1,
				0.09,     0.1289,     1,
				0.09,     0.138878,     0,
				0.092969,     0.138895,     1,
				0.099212,     0.137829,     1,
				0.105175,     0.135695,     1,
				0.110677,     0.132559,     1,
				0.115551,     0.128514,     1,
				0.119648,     0.123685,     1,
				0.121246,     0.120951,     1,
				0.122103,     0.119486,     1,
				0.124298,     0.116898,     1,
				0.12691,     0.114731,     1,
				0.129451,     0.113326,     1,
				0.137338,     0.109459,     1,
				0.14,     0.10888,     0
			del 5


			poly_ 6,
				-0.0911,0,1,
				0.0911,0,1,
				0.0911,-0.168,1,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,0,-1

			rotx 90
			mul 1.0001, 1.0001, 1
			poly_      53,
					   -0.0911,     0.0,      1,
					   -0.109442,     0.000246,      1,
					   -0.140377,     0.006162,      1,
					   -0.169815,     0.017359,      1,
					   -0.183338,     0.025429,      1,
					   -0.1881,     0.02817,      1,
					   -0.198179,     0.036627,      1,
					   -0.206637,     0.046706,      1,
					   -0.213215,     0.0581,      1,
					   -0.217715,     0.070464,      1,
					   -0.22,     0.083421,      1,
					   -0.22,     0.09,      1,
					   -0.229978,     0.09,      1,
					   -0.229995,     0.092969,      1,
					   -0.228929,     0.099212,      1,
					   -0.226795,     0.105175,      1,
					   -0.223659,     0.110677,      1,
					   -0.219614,     0.115551,      1,
					   -0.214785,     0.119648,      1,
					   -0.212051,     0.121246,      1,
					   -0.210586,     0.122103,      1,
					   -0.207998,     0.124298,      1,
					   -0.205831,     0.12691,      1,
					   -0.204426,     0.129451,      1,
					   -0.200559,     0.137338,      1,
					   -0.19998,     0.14,      1,
						0.19998,     0.14,      1,
						0.200559,     0.137338,      1,
						0.204426,     0.129451,      1,
						0.205831,     0.12691,      1,
						0.207998,     0.124298,      1,
						0.210586,     0.122103,      1,
						0.212051,     0.121246,      1,
						0.214785,     0.119648,      1,
						0.219614,     0.115551,      1,
						0.223659,     0.110677,      1,
						0.226795,     0.105175,      1,
						0.228929,     0.099212,      1,
						0.229995,     0.092969,      1,
						0.229978,     0.09,      1,
						0.22,     0.09,      1,
						0.22,     0.083421,      1,
						0.217715,     0.070464,      1,
						0.213215,     0.0581,      1,
						0.206637,     0.046706,      1,
						0.198179,     0.036627,      1,
						0.1881,     0.02817,      1,
						0.183338,     0.025429,      1,
						0.169815,     0.017359,      1,
						0.140377,     0.006162,      1,
						0.109442,     0.000246,      1,
						0.0911,    -0.0,      1,
					   -0.0911,     0.0,     -1
			del 2

			! --- inner part ---
			addz 0.02
			poly_ 8,
				-0.0911,-0.134,0,
				0.0911,-0.134,0,
				0.0911,-0.168,0,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,-0.134,-1,

				0,-0.1519,901,
				0.0175,360,4001

			del 1

			material gs_basin_mat
			addy  -0.03353757
			muly 0.0667/0.0889
			addz 0.14
				poly_ 10,
				-0.20,-0.1344,0,
				-0.18,-0.1344,0,
				0,1,800,
				-0.0911,-0.0455,1000,
				0.0911,-0.0455,0,
				0.18,-0.1344,1000,
				0.20,-0.1344,0,
				0.20,0.0447,1,
				-0.20,0.0447,0,
				-0.20,-0.1344,-1
			del 3

			roty -90
			add 0,-0.1344,0.0911
			muly 0.0667/0.0889
			revolve  12,  90,0,
				0.14,     0.0889,     0,
				0.127263,     0.0889,     1,
				0.102175,     0.084476,     1,
				0.078237,     0.075764,     1,
				0.056175,     0.063026,     1,
				0.043696,     0.052497,     1,
				0.039103,     0.048446,     1,
				0.031464,     0.038872,     1,
				0.025603,     0.028117,     1,
				0.021699,     0.016507,     1,
				0.01987,     0.004396,     1,
				0.02,    -0.0,     1
			del 2


			add 0,-0.1344,-0.0911
			rotx -90
			mulz 0.0667/0.0889
			revolve  12,  90,0,
						0.14,     0.0889,     0,
						0.127263,     0.0889,     1,
						0.102175,     0.084476,     1,
						0.078237,     0.075764,     1,
						0.056175,     0.063026,     1,
						0.043696,     0.052497,     1,
						0.039103,     0.048446,     1,
						0.031464,     0.038872,     1,
						0.025603,     0.028117,     1,
						0.021699,     0.016507,     1,
						0.01987,     0.004396,     1,
						0.02,    -0.0,     1
			del 4

			roty -90
			add 0,-0.1344,-0.0911
			muly 0.0667/0.0889
			extrude  12,  0,0,0.1822,0,
						0.14,     0.0889,     0,
						0.127263,     0.0889,     1,
						0.102175,     0.084476,     1,
						0.078237,     0.075764,     1,
						0.056175,     0.063026,     1,
						0.043696,     0.052497,     1,
						0.039103,     0.048446,     1,
						0.031464,     0.038872,     1,
						0.025603,     0.028117,     1,
						0.021699,     0.016507,     1,
						0.01987,     0.004396,     1,
						0.02,    -0.0,     1
			del 4
		endif


		if gs_detlevel_3D_m = 3 then
			mulz 0.17/0.14
			roty -90
			add 0,-0.168,0.0911

			rotx 90
			material gs_basin_mat
			revolve  5,  61.5254,0,
					0.0,    -0.0,     1,
					0.036627,     0.107079,     1,
					0.09,     0.138878,     2,
					0.14,     0.10888,     2,
					0.14,     0.0889,     1
			del 2


			add 0,-0.168,-0.0911
			rotx 208.4746
			revolve  5,  61.5254,0,
					0.0,    -0.0,     1,
					0.036627,     0.107079,     1,
					0.09,     0.138878,     2,
					0.14,     0.10888,     2,
					0.14,     0.0889,     1
			del 2

			resol 2.5*4
			rotx 151.5254
			revolve 5, 56.9491,0,
				 0.0,     0.1911,     1,
				0.036627,     0.298179,     1,
				0.09,     0.329978,     2,
				0.14,     0.30,     2,
				0.14,     0.28,     1
			del 2

			resol 2.5*gs_resol
			rotz 90
			roty -90
			add 0,0.0911,0.1344
			extrude  5,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     0,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0

			muly -1
			addy 0.1822
			extrude  5,0,0,0.0336,0,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     0,
				0.14,     0.10888,     0,
				0.14,     0.0889,     0
			del 5

			rotz 90
			roty -90
			add 0,0.0911,0
			extrude  4,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     0,
				0.14,     0.10888,     0
			muly -1
			addy 0.1822
			extrude  4,0,0,0.1344,16,
				0.0,    -0.0,     1,
				0.036627,     0.107079,     1,
				0.09,     0.138878,     0,
				0.14,     0.10888,     0
			del 5

			resol 2.5*4
			poly_ 6,
				-0.0911,0,1,
				0.0911,0,1,
				0.0911,-0.168,1,
				0,0,900,
				-0.0911,-0.168,3000,
				-0.0911,0,-1

			resol 2.5*gs_resol
			rotx 90
			mul 1.0001,1.0001,1
			poly_      9,
				   -0.0911,     0.0,      1,
				   -0.198179,     0.036627,      1,
				   -0.229978,     0.09,      1,
				   -0.19998,     0.14,      1,
					0.19998,     0.14,      1,
					0.229978,     0.09,      1,
					0.198179,     0.036627,      1,
					0.0911,    -0.0,      1,
				   -0.0911,     0.0,     -1
			del 2

			resol 2.5*5
			material gs_basin_mat
			addy  -0.03353757
			muly 0.0667/0.0889
			addz 0.14
				poly_ 10,
				-0.20,-0.1344,0,
				-0.18,-0.1344,0,
				0,1,800,
				-0.0911,-0.0455,1000,
				0.0911,-0.0455,0,
				0.18,-0.1344,1000,
				0.20,-0.1344,0,
				0.20,0.0447,1,
				-0.20,0.0447,0,
				-0.20,-0.1344,-1
			del 4
		endif
	endif

	del 2

	material gs_drain_mat
	add 0, _drainPosY, +0.02
	gosub 1200	! --- Drain ---
	del 1


	resol 1.5*gs_resol

	!if iSuptyp = WALL_MOUNT then END
	if iSuptyp = SEMI_PEDESTAL then gosub 1300
	if iSuptyp = PEDESTAL then gosub 2300

return

! -----------------------------------------------------------------------------
! Flat Back-Oval
! -----------------------------------------------------------------------------

4:

	addz 0
	addy -b/2
	mul  a/0.600722, b/0.475903, ZZYZX/0.14
	addy -0.075/2

	if gs_detlevel_3D_m = 2 then
		addz 0.11
		addy 0.275
		rotx 90
		resol gs_resol
		material gs_basin_mat
		prism_ 11,     0.04,
			   -0.042254,    -0.09,     79,
			   -0.137214,    -0.085,     79,
			   -0.212214,    -0.06,     79,
			   -0.237214,    -0.04,     79,
			   -0.262214,     0.0,     15,
				0.262214,     0.0,     15,
				0.237154,    -0.04,     79,
				0.212094,    -0.06,     79,
				0.136913,    -0.085,     79,
				0.041652,    -0.09,     79,
			   -0.042254,    -0.09,     -1
		del 2

		prism_ 10,     -0.08,
			   -0.15315,     0.235421,     15,
			   -0.15315,     0.145858,     2,
			   -0.105491,     0.162068,     0,
			   -0.053779,     0.172051,     0,
				0.0,     0.175421,     0,
				0.053779,     0.172051,     0,
				0.105491,     0.162068,     0,
				0.15315,     0.145858,     15,
				0.15315,     0.235421,     15,
			   -0.15315,     0.235421,     -1

		extrude 53,     0,      0,    0.03,     1+2+16+32,
			   -0.262214,     0.275421,     0,
			   -0.300722,     0.0,     1,
			   -0.294944,    -0.039112,     1,
			   -0.277831,    -0.076721,     1,
			   -0.250041,    -0.111382,     1,
			   -0.212643,    -0.141762,     1,
			   -0.167072,    -0.166694,     1,
			   -0.115081,    -0.185221,     1,
			   -0.058668,    -0.196629,     1,
			   -0.0,    -0.200482,     1,
				0.058668,    -0.196629,     1,
				0.115081,    -0.185221,     1,
				0.167072,    -0.166694,     1,
				0.212643,    -0.141762,     1,
				0.250041,    -0.111382,     1,
				0.277831,    -0.076721,     1,
				0.294944,    -0.039112,     1,
				0.3,    -0.0,     1,
				0.262214,     0.275421,     0,
			   -0.262214,     0.275421,     -1,

			   -0.053779,    -0.172051,     1,
			   -0.105491,    -0.162068,     1,
			   -0.15315,    -0.145858,     1,
			   -0.194923,    -0.124042,     1,
			   -0.229205,    -0.097459,     1,
			   -0.254679,    -0.067131,     1,
			   -0.270365,    -0.034223,     1,
			   -0.275662,     0.0,     1,
			   -0.270365,     0.034223,     1,
			   -0.254679,     0.067131,     1,
			   -0.229205,     0.097459,     1,
			   -0.194923,     0.124042,     1,
			   -0.15315,     0.145858,     1,
			   -0.105491,     0.162068,     1,
			   -0.053779,     0.172051,     1,
				0.0,     0.175421,     1,
				0.053779,     0.172051,     1,
				0.105491,     0.162068,     1,
				0.15315,     0.145858,     1,
				0.194923,     0.124042,     1,
				0.229205,     0.097459,     1,
				0.254679,     0.067131,     1,
				0.270365,     0.034223,     1,
				0.275,     0.0,     1,
				0.270365,    -0.034223,     1,
				0.254679,    -0.067131,     1,
				0.229205,    -0.097459,     1,
				0.194923,    -0.124042,     1,
				0.15315,    -0.145858,     1,
				0.105491,    -0.162068,     1,
				0.053779,    -0.172051,     1,
			   -0.0,    -0.175421,     1,
			   -0.053779,    -0.172051,     -1

		y=-0.040
		ruled 32, 4,
			   -0.053779,    -0.172051,     1,
			   -0.105491,    -0.162068,     1,
			   -0.15315,    -0.145858,     1,
			   -0.194923,    -0.124042,     1,
			   -0.229205,    -0.097459,     1,
			   -0.254679,    -0.067131,     1,
			   -0.270365,    -0.034223,     1,
			   -0.275662,     0.0,     1,
			   -0.270365,     0.034223,     1,
			   -0.254679,     0.067131,     1,
			   -0.229205,     0.097459,     1,
			   -0.194923,     0.124042,     1,
			   -0.15315,     0.145858,     1,
			   -0.105491,     0.162068,     1,
			   -0.053779,     0.172051,     1,
				0.0,     0.175421,     1,
				0.053779,     0.172051,     1,
				0.105491,     0.162068,     1,
				0.15315,     0.145858,     1,
				0.194923,     0.124042,     1,
				0.229205,     0.097459,     1,
				0.254679,     0.067131,     1,
				0.270365,     0.034223,     1,
				0.275,     0.0,     1,
				0.270365,    -0.034223,     1,
				0.254679,    -0.067131,     1,
				0.229205,    -0.097459,     1,
				0.194923,    -0.124042,     1,
				0.15315,    -0.145858,     1,
				0.105491,    -0.162068,     1,
				0.053779,    -0.172051,     1,
			   -0.0,    -0.175421,     1,

			   -0.04889,    -0.122412,     y,
			   -0.095901,    -0.113855,     y,
			   -0.139227,    -0.099961,     y,
			   -0.177202,    -0.081261,     y,
			   -0.208368,    -0.058476,     y,
			   -0.231526,    -0.032481,     y,
			   -0.245787,    -0.004274,     y,
			   -0.250602,     0.02506,     y,
			   -0.245787,     0.054394,     y,
			   -0.231526,     0.082601,     y,
			   -0.208368,     0.108596,     y,
			   -0.177202,     0.131382,     y,
			   -0.139227,     0.150081,     y,
			   -0.095901,     0.163976,     y,
			   -0.04889,     0.172532,     y,
				0.0,     0.175421,     y,
				0.04889,     0.172532,     y,
				0.095901,     0.163976,     y,
				0.139227,     0.150081,     y,
				0.177202,     0.131382,     y,
				0.208368,     0.108596,     y,
				0.231526,     0.082601,     y,
				0.245787,     0.054394,     y,
				0.25,     0.02506,     y,
				0.245787,    -0.004274,     y,
				0.231526,    -0.032481,     y,
				0.208368,    -0.058476,     y,
				0.177202,    -0.081261,     y,
				0.139227,    -0.099961,     y,
				0.095901,    -0.113855,     y,
				0.04889,    -0.122412,     y,
			   -0.0,    -0.125301,     y

		addz y
		y=-0.02
		ruled 32, 4,
			   -0.04889,    -0.122412,     1,
			   -0.095901,    -0.113855,     1,
			   -0.139227,    -0.099961,     1,
			   -0.177202,    -0.081261,     1,
			   -0.208368,    -0.058476,     1,
			   -0.231526,    -0.032481,     1,
			   -0.245787,    -0.004274,     1,
			   -0.250602,     0.02506,     1,
			   -0.245787,     0.054394,     1,
			   -0.231526,     0.082601,     1,
			   -0.208368,     0.108596,     1,
			   -0.177202,     0.131382,     1,
			   -0.139227,     0.150081,     1,
			   -0.095901,     0.163976,     1,
			   -0.04889,     0.172532,     1,
				0.0,     0.175421,     1,
				0.04889,     0.172532,     1,
				0.095901,     0.163976,     1,
				0.139227,     0.150081,     1,
				0.177202,     0.131382,     1,
				0.208368,     0.108596,     1,
				0.231526,     0.082601,     1,
				0.245787,     0.054394,     1,
				0.25,     0.02506,     1,
				0.245787,    -0.004274,     1,
				0.231526,    -0.032481,     1,
				0.208368,    -0.058476,     1,
				0.177202,    -0.081261,     1,
				0.139227,    -0.099961,     1,
				0.095901,    -0.113855,     1,
				0.04889,    -0.122412,     1,
			   -0.0,    -0.125301,     1,

			   -0.044001,    -0.072773,     y,
			   -0.086311,    -0.065643,     y,
			   -0.125304,    -0.054064,     y,
			   -0.159482,    -0.038481,     y,
			   -0.187531,    -0.019493,     y,
			   -0.208373,     0.00217,     y,
			   -0.221208,     0.025675,     y,
			   -0.225542,     0.05012,     y,
			   -0.221208,     0.074565,     y,
			   -0.208373,     0.098071,     y,
			   -0.187531,     0.119734,     y,
			   -0.159482,     0.138722,     y,
			   -0.125304,     0.154304,     y,
			   -0.086311,     0.165883,     y,
			   -0.044001,     0.173014,     y,
				0.0,     0.175421,     y,
				0.044001,     0.173014,     y,
				0.086311,     0.165883,     y,
				0.125304,     0.154304,     y,
				0.159482,     0.138722,     y,
				0.187531,     0.119734,     y,
				0.208373,     0.098071,     y,
				0.221208,     0.074565,     y,
				0.225,     0.05012,     y,
				0.221208,     0.025675,     y,
				0.208373,     0.00217,     y,
				0.187531,    -0.019493,     y,
				0.159482,    -0.038481,     y,
				0.125304,    -0.054064,     y,
				0.086311,    -0.065643,     y,
				0.044001,    -0.072773,     y,
			   -0.0,    -0.075181,     y

		addz y
		y=-0.02
		ruled 32, 4,                                    !! inner part 1
				   -0.044001,    -0.072773,     1,
				   -0.086311,    -0.065643,     1,
				   -0.125304,    -0.054064,     1,
				   -0.159482,    -0.038481,     1,
				   -0.187531,    -0.019493,     1,
				   -0.208373,     0.00217,     1,
				   -0.221208,     0.025675,     1,
				   -0.225542,     0.05012,     1,
				   -0.221208,     0.074565,     1,
				   -0.208373,     0.098071,     1,
				   -0.187531,     0.119734,     1,
				   -0.159482,     0.138722,     1,
				   -0.125304,     0.154304,     1,
				   -0.086311,     0.165883,     1,
				   -0.044001,     0.173014,     1,
					0.0,     0.175421,     1,
					0.044001,     0.173014,     1,
					0.086311,     0.165883,     1,
					0.125304,     0.154304,     1,
					0.159482,     0.138722,     1,
					0.187531,     0.119734,     1,
					0.208373,     0.098071,     1,
					0.221208,     0.074565,     1,
					0.225,     0.05012,     1,
					0.221208,     0.025675,     1,
					0.208373,     0.00217,     1,
					0.187531,    -0.019493,     1,
					0.159482,    -0.038481,     1,
					0.125304,    -0.054064,     1,
					0.086311,    -0.065643,     1,
					0.044001,    -0.072773,     1,
				   -0.0,    -0.075181,     1,

				   -0.039112,    -0.023134,     y,
				   -0.076721,    -0.01743,     y,
				   -0.111382,    -0.008167,     y,
				   -0.141762,     0.0043,     y,
				   -0.166694,     0.01949,     y,
				   -0.185221,     0.03682,     y,
				   -0.196629,     0.055625,     y,
				   -0.200482,     0.075181,     y,
				   -0.196629,     0.094737,     y,
				   -0.185221,     0.113541,     y,
				   -0.166694,     0.130871,     y,
				   -0.141762,     0.146062,     y,
				   -0.111382,     0.158528,     y,
				   -0.076721,     0.167791,     y,
				   -0.039112,     0.173495,     y,
					0.0,     0.175421,     y,
					0.039112,     0.173495,     y,
					0.076721,     0.167791,     y,
					0.111382,     0.158528,     y,
					0.141762,     0.146062,     y,
					0.166694,     0.130871,     y,
					0.185221,     0.113541,     y,
					0.196629,     0.094737,     y,
					0.2,     0.075181,     y,
					0.196629,     0.055625,     y,
					0.185221,     0.03682,     y,
					0.166694,     0.01949,     y,
					0.141762,     0.0043,     y,
					0.111382,    -0.008167,     y,
					0.076721,    -0.01743,     y,
					0.039112,    -0.023134,     y,
				   -0.0,    -0.02506,     y

		addz y
		y=-0.02
		ruled 32, 4,                                !! inner part 2
				   -0.039112,    -0.023134,     1,
				   -0.076721,    -0.01743,     1,
				   -0.111382,    -0.008167,     1,
				   -0.141762,     0.0043,     1,
				   -0.166694,     0.01949,     1,
				   -0.185221,     0.03682,     1,
				   -0.196629,     0.055625,     1,
				   -0.200482,     0.075181,     1,
				   -0.196629,     0.094737,     1,
				   -0.185221,     0.113541,     1,
				   -0.166694,     0.130871,     1,
				   -0.141762,     0.146062,     1,
				   -0.111382,     0.158528,     1,
				   -0.076721,     0.167791,     1,
				   -0.039112,     0.173495,     1,
					0.0,     0.175421,     1,
					0.039112,     0.173495,     1,
					0.076721,     0.167791,     1,
					0.111382,     0.158528,     1,
					0.141762,     0.146062,     1,
					0.166694,     0.130871,     1,
					0.185221,     0.113541,     1,
					0.196629,     0.094737,     1,
					0.2,     0.075181,     1,
					0.196629,     0.055625,     1,
					0.185221,     0.03682,     1,
					0.166694,     0.01949,     1,
					0.141762,     0.0043,     1,
					0.111382,    -0.008167,     1,
					0.076721,    -0.01743,     1,
					0.039112,    -0.023134,     1,
				   -0.0,    -0.02506,     1,

				   -0.024445,     0.076144,     y,
				   -0.047951,     0.078996,     y,
				   -0.069613,     0.083627,     y,
				   -0.088601,     0.08986,     y,
				   -0.104184,     0.097456,     y,
				   -0.115763,     0.106121,     y,
				   -0.122893,     0.115523,     y,
				   -0.125301,     0.125301,     y,
				   -0.122893,     0.135079,     y,
				   -0.115763,     0.144481,     y,
				   -0.104184,     0.153146,     y,
				   -0.088601,     0.160741,     y,
				   -0.069613,     0.166975,     y,
				   -0.047951,     0.171606,     y,
				   -0.024445,     0.174458,     y,
					0.0,     0.175421,     y,
					0.024445,     0.174458,     y,
					0.047951,     0.171606,     y,
					0.069613,     0.166975,     y,
					0.088601,     0.160741,     y,
					0.104184,     0.153146,     y,
					0.115763,     0.144481,     y,
					0.122893,     0.135079,     y,
					0.125,     0.125301,     y,
					0.122893,     0.115523,     y,
					0.115763,     0.106121,     y,
					0.104184,     0.097456,     y,
					0.088601,     0.08986,     y,
					0.069613,     0.083627,     y,
					0.047951,     0.078996,     y,
					0.024445,     0.076144,     y,
				   -0.0,     0.075181,     y

		addz y
		y=-0.005
		ruled 32, 4+32,                             !! inner part 3
				   -0.024445,     0.076144,     1,
				   -0.047951,     0.078996,     1,
				   -0.069613,     0.083627,     1,
				   -0.088601,     0.08986,     1,
				   -0.104184,     0.097456,     1,
				   -0.115763,     0.106121,     1,
				   -0.122893,     0.115523,     1,
				   -0.125301,     0.125301,     1,
				   -0.122893,     0.135079,     1,
				   -0.115763,     0.144481,     1,
				   -0.104184,     0.153146,     1,
				   -0.088601,     0.160741,     1,
				   -0.069613,     0.166975,     1,
				   -0.047951,     0.171606,     1,
				   -0.024445,     0.174458,     1,
					0.0,     0.175421,     1,
					0.024445,     0.174458,     1,
					0.047951,     0.171606,     1,
					0.069613,     0.166975,     1,
					0.088601,     0.160741,     1,
					0.104184,     0.153146,     1,
					0.115763,     0.144481,     1,
					0.122893,     0.135079,     1,
					0.125,     0.125301,     1,
					0.122893,     0.115523,     1,
					0.115763,     0.106121,     1,
					0.104184,     0.097456,     1,
					0.088601,     0.08986,     1,
					0.069613,     0.083627,     1,
					0.047951,     0.078996,     1,
					0.024445,     0.076144,     1,
				   -0.0,     0.075181,     1,

				   -0.005861,     0.095838,     y,
				   -0.011496,     0.097547,     y,
				   -0.016689,     0.100323,     y,
				   -0.021242,     0.104059,     y,
				   -0.024978,     0.108611,     y,
				   -0.027754,     0.113805,     y,
				   -0.029463,     0.11944,     y,
				   -0.03004,     0.125301,     y,
				   -0.029463,     0.131162,     y,
				   -0.027754,     0.136797,     y,
				   -0.024978,     0.14199,     y,
				   -0.021242,     0.146543,     y,
				   -0.016689,     0.150279,     y,
				   -0.011496,     0.153055,     y,
				   -0.005861,     0.154764,     y,
				   -0.0,     0.155341,     y,
					0.005861,     0.154764,     y,
					0.011496,     0.153055,     y,
					0.016689,     0.150279,     y,
					0.021242,     0.146543,     y,
					0.024978,     0.14199,     y,
					0.027754,     0.136797,     y,
					0.029463,     0.131162,     y,
					0.03004,     0.125301,     y,
					0.029463,     0.11944,     y,
					0.027754,     0.113805,     y,
					0.024978,     0.108611,     y,
					0.021242,     0.104059,     y,
					0.016689,     0.100323,     y,
					0.011496,     0.097547,     y,
					0.005861,     0.095838,     y,
					0.0,     0.095261,     y

		addz y
		poly_ 32,
				   -0.005861,     0.095838,     1,
				   -0.011496,     0.097547,     1,
				   -0.016689,     0.100323,     1,
				   -0.021242,     0.104059,     1,
				   -0.024978,     0.108611,     1,
				   -0.027754,     0.113805,     1,
				   -0.029463,     0.11944,     1,
				   -0.03004,     0.125301,     1,
				   -0.029463,     0.131162,     1,
				   -0.027754,     0.136797,     1,
				   -0.024978,     0.14199,     1,
				   -0.021242,     0.146543,     1,
				   -0.016689,     0.150279,     1,
				   -0.011496,     0.153055,     1,
				   -0.005861,     0.154764,     1,
				   -0.0,     0.155341,     1,
					0.005861,     0.154764,     1,
					0.011496,     0.153055,     1,
					0.016689,     0.150279,     1,
					0.021242,     0.146543,     1,
					0.024978,     0.14199,     1,
					0.027754,     0.136797,     1,
					0.029463,     0.131162,     1,
					0.03004,     0.125301,     1,
					0.029463,     0.11944,     1,
					0.027754,     0.113805,     1,
					0.024978,     0.108611,     1,
					0.021242,     0.104059,     1,
					0.016689,     0.100323,     1,
					0.011496,     0.097547,     1,
					0.005861,     0.095838,     1,
					0.0,   		  0.095261,     1
		del 1

		addz y-0.005
		material gs_tap_mat
		extrude 33, 0, 0, 0.005, 4+16+32,                !!!  1+2+....072696
				   -0.005861,     0.095838,     1,
				   -0.011496,     0.097547,     1,
				   -0.016689,     0.100323,     1,
				   -0.021242,     0.104059,     1,
				   -0.024978,     0.108611,     1,
				   -0.027754,     0.113805,     1,
				   -0.029463,     0.11944,     1,
				   -0.03004,     0.125301,     1,
				   -0.029463,     0.131162,     1,
				   -0.027754,     0.136797,     1,
				   -0.024978,     0.14199,     1,
				   -0.021242,     0.146543,     1,
				   -0.016689,     0.150279,     1,
				   -0.011496,     0.153055,     1,
				   -0.005861,     0.154764,     1,
				   -0.0,     0.155341,     1,
					0.005861,     0.154764,     1,
					0.011496,     0.153055,     1,
					0.016689,     0.150279,     1,
					0.021242,     0.146543,     1,
					0.024978,     0.14199,     1,
					0.027754,     0.136797,     1,
					0.029463,     0.131162,     1,
					0.03004,     0.125301,     1,
					0.029463,     0.11944,     1,
					0.027754,     0.113805,     1,
					0.024978,     0.108611,     1,
					0.021242,     0.104059,     1,
					0.016689,     0.100323,     1,
					0.011496,     0.097547,     1,
					0.005861,     0.095838,     1,
					0.0,     0.095261,     1,
				   -0.005861,     0.095838,     1    !!!072696
		del 6
	endif

	if gs_detlevel_3D_m = 1 then
		addz 0.11
		addy 0.275
		rotx 90
		resol gs_resol
		material gs_basin_mat
		prism_ 11,     0.04,
			   -0.042254,    -0.09,     79,
			   -0.137214,    -0.085,     79,
			   -0.212214,    -0.06,     79,
			   -0.237214,    -0.04,     79,
			   -0.262214,     0.0,     15,
				0.262214,     0.0,     15,
				0.237154,    -0.04,     79,
				0.212094,    -0.06,     79,
				0.136913,    -0.085,     79,
				0.041652,    -0.09,     79,
			   -0.042254,    -0.09,     -1
		del 2

		prism_ 10,     -0.08,
			   -0.15315,     0.235421,     15,
			   -0.15315,     0.145858,     2,
			   -0.105491,     0.162068,     0,
			   -0.053779,     0.172051,     0,
				0.0,     0.175421,     0,
				0.053779,     0.172051,     0,
				0.105491,     0.162068,     0,
				0.15315,     0.145858,     15,
				0.15315,     0.235421,     15,
			   -0.15315,     0.235421,     -1


		extrude 29,     0,      0,    0.03,     1+2+16+32,
			   -0.262214,     0.275421,     0,
			   -0.300722,     0.0,     1,
			   -0.277831,    -0.076721,     1,
			   -0.212643,    -0.141762,     1,
			   -0.115081,    -0.185221,     1,
			   -0.0,    -0.200482,     1,
				0.115081,    -0.185221,     1,
				0.212643,    -0.141762,     1,
				0.277831,    -0.076721,     1,
				0.3,    -0.0,     1,
				0.262214,     0.275421,     0,
			   -0.262214,     0.275421,     -1,
			   -0.105491,    -0.162068,     1,
			   -0.194923,    -0.124042,     1,
			   -0.254679,    -0.067131,     1,
			   -0.275662,     0.0,     1,
			   -0.254679,     0.067131,     1,
			   -0.194923,     0.124042,     1,
			   -0.105491,     0.162068,     1,
				0.0,     0.175421,     1,
				0.105491,     0.162068,     1,
				0.194923,     0.124042,     1,
				0.254679,     0.067131,     1,
				0.275,     0.0,     1,
				0.254679,    -0.067131,     1,
				0.194923,    -0.124042,     1,
				0.105491,    -0.162068,     1,
			   -0.0,    -0.175421,     1,
			   -0.105491,    -0.162068,     -1

		y=-0.105
		ruled 16, 4,
			   -0.105491,    -0.162068,     1,
			   -0.194923,    -0.124042,     1,
			   -0.254679,    -0.067131,     1,
			   -0.275662,     0.0,     1,
			   -0.254679,     0.067131,     1,
			   -0.194923,     0.124042,     1,
			   -0.105491,     0.162068,     1,
				0.0,     0.175421,     1,
				0.105491,     0.162068,     1,
				0.194923,     0.124042,     1,
				0.254679,     0.067131,     1,
				0.275,     0.0,     1,
				0.254679,    -0.067131,     1,
				0.194923,    -0.124042,     1,
				0.105491,    -0.162068,     1,
			   -0.0,    -0.175421,     1,

			   -0.047951,     0.078996,     y,
			   -0.088601,     0.08986,     y,
			   -0.115763,     0.106121,     y,
			   -0.125301,     0.125301,     y,
			   -0.115763,     0.144481,     y,
			   -0.088601,     0.160741,     y,
			   -0.047951,     0.171606,     y,
				0.0,     0.175421,     y,
				0.047951,     0.171606,     y,
				0.088601,     0.160741,     y,
				0.115763,     0.144481,     y,
				0.125,     0.125301,     y,
				0.115763,     0.106121,     y,
				0.088601,     0.08986,     y,
				0.047951,     0.078996,     y,
			   -0.0,     0.075181,     y

		addz y
		poly_ 19,
				   -0.047951,     0.078996,     1,
				   -0.088601,     0.08986,     1,
				   -0.115763,     0.106121,     1,
				   -0.125301,     0.125301,     1,
				   -0.115763,     0.144481,     1,
				   -0.088601,     0.160741,     1,
				   -0.047951,     0.171606,     1,
					0.0,     0.175421,     1,
					0.047951,     0.171606,     1,
					0.088601,     0.160741,     1,
					0.115763,     0.144481,     1,
					0.125,     0.125301,     1,
					0.115763,     0.106121,     1,
					0.088601,     0.08986,     1,
					0.047951,     0.078996,     1,
				   -0.0,     0.075181,     1,
				   -0.047951,     0.078996,     -1,
					0,     0.125301,     901,
					0.03,    360,     4001
		addz -0.005
		material gs_tap_mat
		extrude 2, 0, 0, 0.005, 4+16+32,                !!!  1+2+....072696
				   0,     0.125301,     901,
				   0.03,     360,     4001
		del 3
	endif

	if gs_detlevel_3D_m = 3 then
		addz 0.11
		addy 0.275
		rotx 90
		resol gs_resol
		material gs_basin_mat
		prism_ 5,     0.04,
			   -0.17,    -0.09,     79,
			   -0.262214,     0.0,     15,
				0.262214,     0.0,     15,
				0.17,    -0.09,     79,
			   -0.17,    -0.09,     -1
		del 2

		extrude 23,     0,      0,    0.03,     1+2+16+32,
			   -0.262214,     0.275421,     0,
			   -0.300722,     0.0,     1,
			   -0.277831,    -0.076721,     1,
			   -0.212643,    -0.141762,     1,
			   -0.0,    -0.200482,     1,
				0.212643,    -0.141762,     1,
				0.277831,    -0.076721,     1,
				0.3,    -0.0,     1,
				0.262214,     0.275421,     0,
			   -0.262214,     0.275421,     -1,
			   -0.194923,    -0.124042,     1,
			   -0.254679,    -0.067131,     1,
			   -0.275662,     0.0,     1,
			   -0.254679,     0.067131,     1,
			   -0.194923,     0.124042,     1,
				0.0,     0.175421,     1,
				0.194923,     0.124042,     1,
				0.254679,     0.067131,     1,
				0.275,     0.0,     1,
				0.254679,    -0.067131,     1,
				0.194923,    -0.124042,     1,
			   -0.0,    -0.175421,     1,
			   -0.194923,    -0.124042,     -1

		y=-0.11
		ruled 12, 4,
			   -0.194923,    -0.124042,     1,
			   -0.254679,    -0.067131,     1,
			   -0.275662,     0.0,     1,
			   -0.254679,     0.067131,     1,
			   -0.194923,     0.124042,     1,
				0.0,     0.175421,     1,
				0.194923,     0.124042,     1,
				0.254679,     0.067131,     1,
				0.275,     0.0,     1,
				0.254679,    -0.067131,     1,
				0.194923,    -0.124042,     1,
			   -0.0,    -0.175421,     1,

			   -0.088601,     0.08986,     y,
			   -0.115763,     0.106121,     y,
			   -0.125301,     0.125301,     y,
			   -0.115763,     0.144481,     y,
			   -0.088601,     0.160741,     y,
				0.0,     0.175421,     y,
				0.088601,     0.160741,     y,
				0.115763,     0.144481,     y,
				0.125,     0.125301,     y,
				0.115763,     0.106121,     y,
				0.088601,     0.08986,     y,
			   -0.0,     0.075181,     y

		addz y
		poly_ 13,
				   -0.088601,     0.08986,     1,
				   -0.115763,     0.106121,     1,
				   -0.125301,     0.125301,     1,
				   -0.115763,     0.144481,     1,
				   -0.088601,     0.160741,     1,
					0.0,     0.175421,     1,
					0.088601,     0.160741,     1,
					0.115763,     0.144481,     1,
					0.125,     0.125301,     1,
					0.115763,     0.106121,     1,
					0.088601,     0.08986,     1,
				   -0.0,     0.075181,     1,
				   -0.088601,     0.08986,     -1
		del 2
	endif
	del 4

	! --- DRAIN ---

	if NOT(gs_detlevel_3D_m = 3) then
		add 0,_drainPosY,0.004
		material gs_drain_mat
		gosub 1200	! --- Drain ---
		del 1
	endif

return

! -----------------------------------------------------------------------------
! Disabled
! -----------------------------------------------------------------------------

5:

	if GLOB_CONTEXT > 40 AND GLOB_CONTEXT < 50 then gs_detlevel_3D_m = 3

	if gs_detlevel_3D_m = 1 then gs_resol = 12
	if GLOB_CONTEXT > 20 and GLOB_CONTEXT < 40 then gs_resol = 4


	if gs_detlevel_3D_m = 2 then
		addz h_top - ZZYZX

		material gs_basin_mat
		addz 0.6 * ZZYZX
		resol 1.5 * gs_resol

		tempa=0.6
		tempb=0.686

		mul a/0.6, b/0.686, 1
		prism_  19, 0.4*ZZYZX,
				-tempa/2, 0, 14,
				-tempa/2, -0.9*tempb, 79,
				-tempa/2+0.2*tempa, -tempb, 1079,
				tempa/2-0.2*tempa, -tempb, 1079,
				tempa/2, -0.9*tempb, 1012,
				tempa/2, 0, 14,
				tempa/2-0.1*tempa, 0, 13,
				-tempa/2+0.1*tempa, 0, 12,
				-tempa/2, 0, -1,

				0, -0.25*tempb, 0,
				-tempa/2+0.2*tempa, -0.25*tempb, 0,
				0.1*tempa, 90, 2000,
				-tempa/2+0.1*tempa, -0.8*tempb, 0,
				0.1*tempa, 90, 2000,
				tempa/2-0.2*tempa, -0.8*tempb-0.1*tempa, 0,
				0.1*tempa, 90, 2000,
				tempa/2-0.1*tempa, -0.25*tempb-0.1*tempa, 0,
				0.1*tempa, 90, 2000,
				0, -0.25*tempb, -1
		del 1

		addx a/2
		roty -90
		prism_  3, 0.1*a,
				0, 0, 13,
				-0.6*ZZYZX, 0, 15,
				0, -0.9*b, 6
		addz a-0.1*a
		prism_  3, 0.1*a,
				0, 0, 13,
				-0.6*ZZYZX, 0, 15,
				0, -0.9*b, 3
		del 4

		addz ZZYZX
		rotx 180
		rotz 180

mul a/0.6, b/0.686, 1

		for i=1 to 2

			sweep   9, 7, 0, 0.7, 2+4+16,
					0, -0.25*tempb, 1,
					-tempa/2+0.2*tempa, -0.25*tempb, 1,
					0.1*tempa, 90, 2001,
					-tempa/2+0.1*tempa, -0.8*tempb, 1,
					0.1*tempa, 90, 2001,
					tempa/2-0.2*tempa, -0.8*tempb-0.1*tempa, 1,
					0.1*tempa, 90, 2001,
					tempa/2-0.1*tempa, -0.25*tempb-0.1*tempa, 1,
					0.1*tempa, 90, 2001,

					0, -(0.26+0), 0,
					0, -(0.26+0), h,
					0, -(0.26+0), h+h/2,
					0, -(0.26+0), h+h/2+h/4,
					0, -(0.26+0), h+h/2+h/4+h/8,
					0, -(0.26+0), h+h/2+h/4+h/8+h/16,
					0, -(0.26+0), h+h/2+h/4+h/8+h/16+h/32
			addz 0.4*ZZYZX
		next i
		del 5

		material gs_drain_mat
		add 0, _drainPosY , -ZZYZX*0.53 + (h+h/2+h/4+h/8+h/16+h/32)
		gosub 1200	! --- Drain ---
		del 1

	endif

	if gs_detlevel_3D_m = 1 then

		addz h_top - ZZYZX

		material gs_basin_mat
		addz 0.6*ZZYZX
		resol 16

		num = 2
		alpha_i = 90/num

			put -a/2, 0, 14
			put -a/2, -b, 15
			put a/2, -b, 15
			put a/2, 0, 14
			put a/2-0.1*a, 0, 13
			put -a/2+0.1*a, 0, 12
			put -a/2, 0, -1
			put 0, -0.25*b, 0
			alpha = 0
			for i = 1 to num+1
				put -a/2+0.2*a-0.1*a*SIN(alpha), -0.25*b-0.1*a+0.1*a*COS(alpha), 0
				 alpha = alpha+alpha_i
			next i
			alpha = 0
			for i = 1 to num+1
				put -a/2+0.2*a-0.1*a*COS(alpha), -0.8*b-0.1*a*SIN(alpha), 0
				 alpha = alpha+alpha_i
			next i
			alpha = 0
			for i = 1 to num+1
				put a/2-0.2*a+0.1*a*SIN(alpha), -0.8*b-0.1*a*COS(alpha), 0
				 alpha = alpha+alpha_i
			next i
			alpha = 0
			for i = 1 to num+1
				put a/2-0.2*a+0.1*a*COS(alpha), -0.25*b-0.1*a+0.1*a*SIN(alpha), 0
				 alpha = alpha+alpha_i
			next i
			put 0, -0.25*b, -1

		prism_  NSP/3, 0.4*ZZYZX,

				GET (NSP)

		addx a/2
		roty -90
		prism_  3, 0.1*a,
				0, 0, 13,
				-0.6*ZZYZX, 0, 15,
				0, -0.9*b, 6
		addz a-0.1*a
		prism_  3, 0.1*a,
				0, 0, 13,
				-0.6*ZZYZX, 0, 15,
				0, -0.9*b, 3
		del 4

		addz ZZYZX
		rotx 180
		rotz 180

		for i=1 to 2

			alpha = 0
			for j = 1 to num+1
				put -a/2+0.2*a-0.1*a*SIN(alpha), -0.25*b-0.1*a+0.1*a*COS(alpha), 1
				 alpha = alpha+alpha_i
			next j
			alpha = 0
			for j = 1 to num+1
				put -a/2+0.2*a-0.1*a*COS(alpha), -0.8*b-0.1*a*SIN(alpha), 1
				 alpha = alpha+alpha_i
			next j
			alpha = 0
			for j = 1 to num+1
				put a/2-0.2*a+0.1*a*SIN(alpha), -0.8*b-0.1*a*COS(alpha), 1
				 alpha = alpha+alpha_i
			next j
			alpha = 0
			for j = 1 to num+1
				put a/2-0.2*a+0.1*a*COS(alpha), -0.25*b-0.1*a+0.1*a*SIN(alpha), 1
				 alpha = alpha+alpha_i
			next j
			put 0, -0.35*b, 0
			put 0, -0.35*b, h+h/2+h/4+h/8+h/16+h/32

			sweep NSP/3-2, 2, 0, 0.1, 2+4+16,

				GET (NSP)

			addz 0.4*ZZYZX
		next i
		del 4

		resol 8
		material gs_drain_mat
		add 0, _drainPosY , -0.05
		gosub 1200	! --- Drain ---
		del 1

	endif

	if gs_detlevel_3D_m = 3 then

		addz h_top - ZZYZX

		material gs_basin_mat
		addz 0.6*ZZYZX
		resol 16

		num = 2
		alpha_i = 90/num

			put -a/2, 0, 15
			put -a/2, -b, 15
			put a/2, -b, 15
			put a/2, 0, 15
			put a/2-0.1*a, 0, 15
			put -a/2+0.1*a, 0, 15
			put -a/2, 0, -1
			put 0, -0.25*b, 15
			put -a/2+0.1*a, -0.25*b, 15
			put -a/2+0.1*a, -0.8*b-0.1*a, 15
			put a/2-0.1*a, -0.8*b-0.1*a, 15
			put a/2-0.1*a, -0.25*b, 15
			put 0, -0.25*b, -1

		prism_  NSP/3, 0.4*ZZYZX,

				GET (NSP)


		addx a/2
		roty -90
		prism_  3, 0.1*a,
				0, 0, 15,
				-0.6*ZZYZX, 0, 15,
				0, -0.9*b, 15
		addz a-0.1*a
		prism_  3, 0.1*a,
				0, 0, 15,
				-0.6*ZZYZX, 0, 15,
				0, -0.9*b, 15
		del 4

		addz ZZYZX
		rotx 180
		rotz 180

		for i=1 to 2

			put -a/2+0.1*a, -0.25*b, 1
			put -a/2+0.1*a, -0.8*b-0.1*a, 1
			put a/2-0.1*a, -0.8*b-0.1*a, 1
			put a/2-0.1*a, -0.25*b, 1

			put 0, -0.35*b, 0
			put 0, -0.35*b, h+h/2+h/4+h/8+h/16+h/32

			sweep NSP/3-2, 2, 0, 0.1, (i=2)+2+4+16,

				GET (NSP)

			addz 0.4*ZZYZX
		next i
		del 4
	endif

	del 2

return

! -----------------------------------------------------------------------------
! Rectangular
! -----------------------------------------------------------------------------

6:
	if gs_detlevel_3D_m = 2 then
		resol gs_resol
	else
		resol 8
		gs_resol = 8
	endif

	addz 0

	material gs_basin_mat

	cutpoly 5,
		-a/2 + 0.03,			-0.11,			!	15,
		 a/2 - 0.03,			-0.11,			!	15,
		 a/2 - 0.03,			-b + 0.03,		!	15,
		-a/2 + 0.03,			-b + 0.03,		!	15,
		-a/2 + 0.03,			-0.11			!	-1

	put	-a/2 + cornerRadius,	 0,					79,
		 a/2 - cornerRadius,	 0,					79,
		 a/2,					-cornerRadius,		1079,
		 a/2,					-b + cornerRadius,	79,
		 a/2 - cornerRadius,	-b,					1079,
		-a/2 + cornerRadius,	-b,					79,
		-a/2,					-b + cornerRadius,	1079,
		-a/2,					-cornerRadius,		79,
		-a/2 + cornerRadius,	 0,					1079,
		-a/2 + cornerRadius,	 0,					-1


	if GLOB_CONTEXT = 4 then
		prism_ nsp/3, ZZYZX,
			get (nsp)
	else
		fprism_ gs_basin_mat, gs_basin_mat, gs_basin_mat, gs_basin_mat,
				nsp/3, ZZYZX, 0, 0.005,
				get (nsp)
	endif

	cutend

	addy _drainPosY
	cutpolya 2, 1, 0,
			0, 0, 900,
			0.025, 360, 4015
	del 1

	add -a/2 + 0.03, -b + 0.03, 0

	minHeight = ZZYZX - 0.1
	halfWidth = (a - 0.06) / 2
	basinDepth = b - 0.03 - 0.11
	maxRadius = (halfWidth^2 + 0.1^2) / (2 * 0.1)

	for i = 1 to gs_resol + 1
		put ZZYZX
	next i

	actualX = 0
	RRR = 2 * maxRadius
	actualMinHeight = ZZYZX - (RRR - sqr (RRR^2 - halfWidth^2))
	for i = 1 to gs_resol + 1
		put actualMinHeight + (RRR) - sqr (RRR^2 - (halfWidth - actualX)^2)
		actualX = actualX + (2 * halfWidth) / gs_resol
	next i

	actualX = 0
	RRR = 1.1 * maxRadius
	actualMinHeight = ZZYZX - (RRR - sqr (RRR^2 - halfWidth^2))
	for i = 1 to gs_resol + 1
		put actualMinHeight + (RRR) - sqr (RRR^2 - (halfWidth - actualX)^2)
		actualX = actualX + (2 * halfWidth) / gs_resol
	next i

	for j = 1 to 3
		actualX = 0
		for i = 1 to gs_resol + 1
			put minHeight + maxRadius - sqr (maxRadius^2 - (halfWidth - actualX)^2)
			actualX = actualX + (2 * halfWidth) / gs_resol
		next i
	next j


	mesh 2 * halfWidth, basinDepth, gs_resol + 1, 6, 1+4+16,
		get (nsp)

	cutend

	del 2

	material gs_drain_mat
	add 0, _drainPosY, +ZZYZX-0.100
	gosub 1200	! --- Drain ---
	del 1

return

! -----------------------------------------------------------------------------
! Rounded 01 model parts  1100 - 8102
! -----------------------------------------------------------------------------

1100:
	revolve  14,  61.5254, 0,
			0.0,    -0.0,     1,
			0.006162,     0.049277,     1,
			0.036627,     0.107079,     1,
			0.0581,     0.122115,     1,
			0.09,     0.138878,     2,
			0.105175,     0.135695,     1,
			0.119648,     0.123685,     1,
			0.124298,     0.116898,     1,
			0.14,     0.10888,     2,
			0.14,     0.0889,     2,
			0.102175,     0.084476,     1,
			0.056175,     0.063026,     1,
			0.025603,     0.028117,     1,
			0.02,    -0.0,     1
return

1101:
	revolve  38,  61.5254, 0,
			0.0,    -0.0,     1,
			0.000246,     0.018342,     1,
			0.006162,     0.049277,     1,
			0.017359,     0.078715,     1,
			0.025429,     0.092238,     1,
			0.02817,     0.097,     1,
			0.036627,     0.107079,     1,
			0.046706,     0.115537,     1,
			0.0581,     0.122115,     1,
			0.070464,     0.126615,     1,
			0.083421,     0.1289,     1,
			0.09,     0.1289,     1,
			0.09,     0.138878,     2,
			0.092969,     0.138895,     1,
			0.099212,     0.137829,     1,
			0.105175,     0.135695,     1,
			0.110677,     0.132559,     1,
			0.115551,     0.128514,     1,
			0.119648,     0.123685,     1,
			0.121246,     0.120951,     1,
			0.122103,     0.119486,     1,
			0.124298,     0.116898,     1,
			0.12691,     0.114731,     1,
			0.129451,     0.113326,     1,
			0.137338,     0.109459,     1,
			0.14,     0.10888,     2,
			0.14,     0.0889,     2,
			0.127263,     0.0889,     1,
			0.102175,     0.084476,     1,
			0.078237,     0.075764,     1,
			0.056175,     0.063026,     1,
			0.043696,     0.052497,     1,
			0.039103,     0.048446,     1,
			0.031464,     0.038872,     1,
			0.025603,     0.028117,     1,
			0.021699,     0.016507,     1,
			0.01987,     0.004396,     1,
			0.02,    -0.0,     1
return

1102:
	revolve  5,  61.5254, 0,
			0.0,    -0.0,     1,
			0.036627,     0.107079,     1,
			0.09,     0.138878,     2,
			0.14,     0.10888,     2,
			0.14,     0.0889,     1
return

2100:
	resol 2.5*8
	revolve 14, 56.9491, 0,
		 0.0,     0.1911,     1,
		0.006162,     0.240377,     1,
		0.036627,     0.298179,     1,
		0.0581,     0.313215,     1,
		0.09,     0.329978,     2,
		0.105175,     0.326795,     1,
		0.119648,     0.314785,     1,
		0.124298,     0.307998,     1,
		0.14,     0.30,     2,
		0.14,     0.28,     2,
		0.102175,     0.275576,     1,
		0.056175,     0.254126,     1,
		0.025603,     0.219217,     1,
		0.02,     0.1911,     1
return

2101:
	revolve 38, 56.9491, 0,
		 0.0,     0.1911,     1,
		0.000246,     0.209442,     1,
		0.006162,     0.240377,     1,
		0.017359,     0.269815,     1,
		0.025429,     0.283338,     1,
		0.02817,     0.2881,     1,
		0.036627,     0.298179,     1,
		0.046706,     0.306637,     1,
		0.0581,     0.313215,     1,
		0.070464,     0.317715,     1,
		0.083421,     0.32,     1,
		0.09,     0.32,     1,
		0.09,     0.329978,     2,
		0.092969,     0.329995,     1,
		0.099212,     0.328929,     1,
		0.105175,     0.326795,     1,
		0.110677,     0.323659,     1,
		0.115551,     0.319614,     1,
		0.119648,     0.314785,     1,
		0.121246,     0.312051,     1,
		0.122103,     0.310586,     1,
		0.124298,     0.307998,     1,
		0.12691,     0.305831,     1,
		0.129451,     0.304426,     1,
		0.137338,     0.300559,     1,
		0.14,     0.30,     2,
		0.14,     0.28,     2,
		0.127263,     0.28,     1,
		0.102175,     0.275576,     1,
		0.078237,     0.266864,     1,
		0.056175,     0.254126,     1,
		0.043696,     0.243597,     1,
		0.039103,     0.239546,     1,
		0.031464,     0.229972,     1,
		0.025603,     0.219217,     1,
		0.021699,     0.207607,     1,
		0.01987,     0.195496,     1,
		0.02,     0.1911,     1
return

2102:
	resol 1.5*8
	revolve 5, 56.9491, 0,
		 0.0,     0.1911,     1,
		0.036627,     0.298179,     1,
		0.09,     0.329978,     2,
		0.14,     0.30,     2,
		0.14,     0.28,     1
return

3100:
	resol 2.5*gs_resol
	extrude  14, 0, 0, 0.0336, 0,
		0.0,    -0.0,     1,
		0.006162,     0.049277,     1,
		0.036627,     0.107079,     1,
		0.0581,     0.122115,     1,
		0.09,     0.138878,     0,
		0.105175,     0.135695,     1,
		0.119648,     0.123685,     1,
		0.124298,     0.116898,     1,
		0.14,     0.10888,     0,
		0.14,     0.0889,     0,
		0.102175,     0.084476,     1,
		0.056175,     0.063026,     1,
		0.025603,     0.028117,     1,
		0.02,    -0.0,     1
return

3101:
	extrude  38, 0, 0, 0.0336, 0,
		0.0,    -0.0,     1,
		0.000246,     0.018342,     1,
		0.006162,     0.049277,     1,
		0.017359,     0.078715,     1,
		0.025429,     0.092238,     1,
		0.02817,     0.097,     1,
		0.036627,     0.107079,     1,
		0.046706,     0.115537,     1,
		0.0581,     0.122115,     1,
		0.070464,     0.126615,     1,
		0.083421,     0.1289,     1,
		0.09,     0.1289,     1,
		0.09,     0.138878,     0,
		0.092969,     0.138895,     1,
		0.099212,     0.137829,     1,
		0.105175,     0.135695,     1,
		0.110677,     0.132559,     1,
		0.115551,     0.128514,     1,
		0.119648,     0.123685,     1,
		0.121246,     0.120951,     1,
		0.122103,     0.119486,     1,
		0.124298,     0.116898,     1,
		0.12691,     0.114731,     1,
		0.129451,     0.113326,     1,
		0.137338,     0.109459,     1,
		0.14,     0.10888,     0,
		0.14,     0.0889,     0,
		0.127263,     0.0889,     1,
		0.102175,     0.084476,     1,
		0.078237,     0.075764,     1,
		0.056175,     0.063026,     1,
		0.043696,     0.052497,     1,
		0.039103,     0.048446,     1,
		0.031464,     0.038872,     1,
		0.025603,     0.028117,     1,
		0.021699,     0.016507,     1,
		0.01987,     0.004396,     1,
		0.02,    -0.0,     1
return

3102:
	addz -0.1344
	extrude  5, 0, 0, 0.1344 + 0.0336, 0,
		0.0,    -0.0,     1,
		0.036627,     0.107079,     1,
		0.09,     0.138878,     0,
		0.14,     0.10888,     0,
		0.14,     0.0889,     1
	del 1
return

4100:
	extrude  9, 0, 0, 0.1344, 16,
		0.0,    -0.0,     1,
		0.006162,     0.049277,     1,
		0.036627,     0.107079,     1,
		0.0581,     0.122115,     1,
		0.09,     0.138878,     0,
		0.105175,     0.135695,     1,
		0.119648,     0.123685,     1,
		0.124298,     0.116898,     1,
		0.14,     0.10888,     0
return

4101:
	extrude  26, 0, 0, 0.1344, 16,
		0.0,    -0.0,     1,
		0.000246,     0.018342,     1,
		0.006162,     0.049277,     1,
		0.017359,     0.078715,     1,
		0.025429,     0.092238,     1,
		0.02817,     0.097,     1,
		0.036627,     0.107079,     1,
		0.046706,     0.115537,     1,
		0.0581,     0.122115,     1,
		0.070464,     0.126615,     1,
		0.083421,     0.1289,     1,
		0.09,     0.1289,     1,
		0.09,     0.138878,     0,
		0.092969,     0.138895,     1,
		0.099212,     0.137829,     1,
		0.105175,     0.135695,     1,
		0.110677,     0.132559,     1,
		0.115551,     0.128514,     1,
		0.119648,     0.123685,     1,
		0.121246,     0.120951,     1,
		0.122103,     0.119486,     1,
		0.124298,     0.116898,     1,
		0.12691,     0.114731,     1,
		0.129451,     0.113326,     1,
		0.137338,     0.109459,     1,
		0.14,     0.10888,     0
return

4102:
return

6100:
	poly_      19,
		   -0.0911,     0.0,      1,
		   -0.140377,     0.006162,      1,
		   -0.198179,     0.036627,      1,
		   -0.213215,     0.0581,      1,
		   -0.229978,     0.09,      1,
		   -0.226795,     0.105175,      1,
		   -0.214785,     0.119648,      1,
		   -0.207998,     0.124298,      1,
		   -0.19998,     0.14,      1,
			0.19998,     0.14,      1,
			0.207998,     0.124298,      1,
			0.214785,     0.119648,      1,
			0.226795,     0.105175,      1,
			0.229978,     0.09,      1,
			0.213215,     0.0581,      1,
			0.198179,     0.036627,      1,
			0.140377,     0.006162,      1,
			0.0911,    -0.0,      1,
		   -0.0911,     0.0,     -1
return

6101:
	poly_      53,
		   -0.0911,     0.0,      1,
		   -0.109442,     0.000246,      1,
		   -0.140377,     0.006162,      1,
		   -0.169815,     0.017359,      1,
		   -0.183338,     0.025429,      1,
		   -0.1881,     0.02817,      1,
		   -0.198179,     0.036627,      1,
		   -0.206637,     0.046706,      1,
		   -0.213215,     0.0581,      1,
		   -0.217715,     0.070464,      1,
		   -0.22,     0.083421,      1,
		   -0.22,     0.09,      1,
		   -0.229978,     0.09,      1,
		   -0.229995,     0.092969,      1,
		   -0.228929,     0.099212,      1,
		   -0.226795,     0.105175,      1,
		   -0.223659,     0.110677,      1,
		   -0.219614,     0.115551,      1,
		   -0.214785,     0.119648,      1,
		   -0.212051,     0.121246,      1,
		   -0.210586,     0.122103,      1,
		   -0.207998,     0.124298,      1,
		   -0.205831,     0.12691,      1,
		   -0.204426,     0.129451,      1,
		   -0.200559,     0.137338,      1,
		   -0.19998,     0.14,      1,
			0.19998,     0.14,      1,
			0.200559,     0.137338,      1,
			0.204426,     0.129451,      1,
			0.205831,     0.12691,      1,
			0.207998,     0.124298,      1,
			0.210586,     0.122103,      1,
			0.212051,     0.121246,      1,
			0.214785,     0.119648,      1,
			0.219614,     0.115551,      1,
			0.223659,     0.110677,      1,
			0.226795,     0.105175,      1,
			0.228929,     0.099212,      1,
			0.229995,     0.092969,      1,
			0.229978,     0.09,      1,
			0.22,     0.09,      1,
			0.22,     0.083421,      1,
			0.217715,     0.070464,      1,
			0.213215,     0.0581,      1,
			0.206637,     0.046706,      1,
			0.198179,     0.036627,      1,
			0.1881,     0.02817,      1,
			0.183338,     0.025429,      1,
			0.169815,     0.017359,      1,
			0.140377,     0.006162,      1,
			0.109442,     0.000246,      1,
			0.0911,    -0.0,      1,
		   -0.0911,     0.0,     -1
return

6102:
	poly_      9,
			   -0.0911,     0.0,      1,
			   -0.198179,     0.036627,      1,
			   -0.229978,     0.09,      1,
			   -0.19998,     0.14,      1,
				0.19998,     0.14,      1,
				0.229978,     0.09,      1,
				0.198179,     0.036627,      1,
				0.0911,    -0.0,      1,
			   -0.0911,     0.0,     -1
return

7100:
	revolve  5,  90, 0,
				0.14,     0.0889,     0,
				0.102175,     0.084476,     1,
				0.056175,     0.063026,     1,
				0.025603,     0.028117,     1,
				0.02,    -0.0,     1
return

7101:
	revolve  12,  90, 0,
				0.14,     0.0889,     0,
				0.127263,     0.0889,     1,
				0.102175,     0.084476,     1,
				0.078237,     0.075764,     1,
				0.056175,     0.063026,     1,
				0.043696,     0.052497,     1,
				0.039103,     0.048446,     1,
				0.031464,     0.038872,     1,
				0.025603,     0.028117,     1,
				0.021699,     0.016507,     1,
				0.01987,     0.004396,     1,
				0.02,    -0.0,     1
return

7102:
return

8100:
	extrude  5, 0, 0, 0.1822, 0,
				0.14,     0.0889,     0,
				0.102175,     0.084476,     1,
				0.056175,     0.063026,     1,
				0.025603,     0.028117,     1,
				0.02,    -0.0,     1
return

8101:
	extrude  12, 0, 0, 0.1822, 0,
				0.14,     0.0889,     0,
				0.127263,     0.0889,     1,
				0.102175,     0.084476,     1,
				0.078237,     0.075764,     1,
				0.056175,     0.063026,     1,
				0.043696,     0.052497,     1,
				0.039103,     0.048446,     1,
				0.031464,     0.038872,     1,
				0.025603,     0.028117,     1,
				0.021699,     0.016507,     1,
				0.01987,     0.004396,     1,
				0.02,    -0.0,     1
return

8102:
return

! -----------------------------------------------------------------------------
! Rounded 02 model parts  1200
! -----------------------------------------------------------------------------

1200:
	cylind 0.005, 0.025
	addz 0.005
	mulz 0.002/0.0035
	roty -90
	revolve 3, 360, 2,
		0, 0.025, 1,
		0.002620754009745, 0.01262190556136, 1,
		0.0035, 0, 1
	del 3
return


! -----------------------------------------------------------------------------
! On Pedestal model parts  1300 - 2300
! -----------------------------------------------------------------------------

1300:
	addz -addZiStyle

	if gs_detlevel_3D_m = 1 then resol 2.5*5

	addz h_top-0.17-0.25
	addz 0.25
	addy -0.15
	rotx -90
	cutplane
	del 1
	roty 180
	ellips 0.25,0.115
	cutend
	del 1
	del 2

	rotx 90
	if gs_detlevel_3D_m = 1 then
		prism_      8,      0.15,
				0.115,         0.25,      79,
				0.099592921,        0.125,      79,
				0.0575, 0.03349365,      79,
				0,            0,      79,
				-0.0575, 0.03349365,      79,
				-0.099592921,        0.125,      79,
				-0.115,         0.25,      79,
				0.115,         0.25,      -1
	else
		prism_      20,      0.15,
				0.115,     0.25,      15,
				0.113253,     0.206588,      79,
				0.108065,     0.164495,      79,
				0.099593,     0.125,      79,
				0.088095,     0.089303,      79,
				0.073921,     0.058489,      79,
				0.0575,     0.033494,      79,
				0.039332,     0.015077,      79,
				0.01997,     0.003798,      79,
				0.0,    -0.0,      79,
			   -0.01997,     0.003798,      79,
			   -0.039332,     0.015077,      79,
			   -0.0575,     0.033494,      79,
			   -0.073921,     0.058489,      79,
			   -0.088095,     0.089303,      79,
			   -0.099593,     0.125,      79,
			   -0.108065,     0.164495,      79,
			   -0.113253,     0.206588,      79,
			   -0.115,     0.25,      15,
				0.115,     0.25,     -1
	endif
	del 3
return


2300:

	addz -addZiStyle
	roty -90
	addy -0.12
	rotx 45
	mulx (h_top-0.17)/0.65
	material gs_basin_mat
	if gs_detlevel_3D_m = 1 then
		revolve  6, 270,1+2+4+8+16+32,
				0.65,     0.081265,     0,
				0.024479,     0.081565,     1,
				0.020803,     0.084417,     1,
				0.018512,     0.090164,     1,
				0.013563,     0.093057,     1,
				0.0,     0.095,     0
	endif

	if gs_detlevel_3D_m = 2 then
		revolve  20, 270,1+2+4+8+16+32,
				0.65,     0.081265,     0,
				0.02656,     0.081265,     0,
				0.025636,     0.081302,     1,
				0.024479,     0.081565,     1,
				0.023386,     0.082024,     1,
				0.02239,     0.082667,     1,
				0.02152,     0.083473,     1,
				0.020803,     0.084417,     1,
				0.020261,     0.085472,     1,
				0.01991,     0.086605,     1,
				0.019836,     0.087193,     1,
				0.019699,     0.087835,     1,
				0.019208,     0.089052,     1,
				0.018512,     0.090164,     1,
				0.017634,     0.09114,     1,
				0.0166,     0.091947,     1,
				0.015441,     0.092563,     1,
				0.014193,     0.092969,     1,
				0.013563,     0.093057,     1,
				0.0,     0.095,     0
	endif

	if gs_detlevel_3D_m = 3 then
		revolve  2, 270,1+2+4+8+16+32,
				0.65,     0.09,    0,
				0.0,     0.09,    0
	endif
	del 5
return


! -----------------------------------------------------------------------------
! MEP Connections
! -----------------------------------------------------------------------------

"mepconnection":

	if gs_detlevel_3D_m = 1 or gs_detlevel_3D_m = 3 then resol 8
	if gs_detlevel_3D_m = 2 then resol 24

	conedit = 1
	if iStyle = 3 and iSuptyp = SEMI_PEDESTAL then conedit = 14

	if useSysMat then
		gs_basin_mat	= sMat
		gs_tap_mat		= sMat
		gs_drain_mat	= sMat
		gs_con_mat		= sMat
	endif

	if bWallMountedTap then
		ConEdit_1 = 12
		ConEdit_2 = 12
		corrMEPx = xTapPos
		corrMEPz = zTapPos - (iStyle = 4) * zzyzx

		add corrMEPx,0,corrMEPz
	else
		ConEdit_1 = 16
		ConEdit_2 = 16

		corrMEPx = 0
		corrMEPz = 0
	endif

	addz addZiStyle2
	call "MEP_m_ConnectionsACL_4" parameters SetProgram = SetProgram,
		ui_current_con = ui_current_con,
		MEP_NumberConnections = MEP_NumberConnections,
		MEP_NumConnectionData = gs_Connections,
		gs_AddConnections = gs_AddConnections,
		cShow3D = 1,
		gs_ConMat = gs_con_mat,
		MEP_InsShow = 0,
		MEP_cline_show_3D = 0,
		gs_cont_pen = gs_cont_pen,
		ConPosX_1=ConPosX_1, ConPosY_1=ConPosY_1, ConPosZ_1=ConPosZ_1, ConLength_1=ConLength_1, ConEdit_1 = ConEdit_1,
		ConPosX_2=ConPosX_2, ConPosY_2=ConPosY_2, ConPosZ_2=ConPosZ_2, ConLength_2=ConLength_2, ConEdit_2 = ConEdit_2,
		ConPosX_3=ConPosX_3-corrMEPx, ConPosY_3=ConPosY_3,
		ConPosZ_3=ConPosZ_3-corrMEPz - ZZYZX * (iStyle = 4 | iStyle = 5),
		ConLength_3=ConLength_3, ConEdit_3 = conedit

	del 1

	if bWallmountedTap then del 1

return

! -----------------------------------------------------------------------------
! Taps
! -----------------------------------------------------------------------------

"tap":

	if bWallMountedTap then
		addZiStylebWall = tapHeight - addZiStyle
		if iStyle = 2 then addZiStylebWall = tapHeight - h_top
		if iStyle = 3 then addZiStylebWall = tapHeight - h_top + 0.17
		if iStyle = 5 then addZiStylebWall = tapHeight

		add 0, 0, addZiStylebWall
	else
		addZiStyleNotbWall = ZZYZX
		if iStyle = 2 then addZiStyleNotbWall = -0.006 * (ZZYZX / 0.19) * (gs_detlevel_3D_m = 2)
		if iStyle = 3 then addZiStyleNotbWall = 0.17
		if iStyle = 5 then addZiStyleNotbWall = h_top
		add 0, yWallPos, addZiStyleNotbWall
	endif

	call "tapType_m" parameters all bShower 			= 0,
									yWallPos 			= yWallPos,
									bEnableTapEdit		= 1,
									bSinkTap			= 0,
									useOldSimpleTaps	= 0

	del 1

return




