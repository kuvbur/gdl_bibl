
! ==============================================================================
! Basin Corner
! ==============================================================================


EPS = 0.0001

yWallPos = -0.05*A/0.417			! Original tap distance from wall

dia= 0.005

if zzyzx<0.1 then  zzyzx=0.1

dim stSymbolTypes[2]
	stSymbolTypes[1] = `Символический`
	stSymbolTypes[2] = `На Основе Модели`

if gs_symbol_type_enable then
	iSymbolType = 1
	if gs_symbol_type = stSymbolTypes[2] then iSymbolType = 2
else
	iSymbolType = 2
endif

! --- Ranging A and B to prevent impossible calculations later in master script
if (A < 0.12) | (B < 0.12) then
	A = 0.12
	B = 0.12
	parameters	A = A,
				B = B
endif

! -------For Minimal Space-------
if iSymbolType = 2 then
	aOffset = 0.0901
	bOffset = 0.0902
	defSizeA = 0.416924
	defSizeB = 0.417186
else
	aOffset = 0.1523
	bOffset = 0.1523
	defSizeA = 0.417
	defSizeB = 0.417
endif

aa = a * (defSizeA - aOffset) / defSizeA
bb = b * (defSizeB - bOffset) / defSizeB
rrr = sqr ((bb * sin (45))^2 + (aa * sin (45))^2)
bDiffR = sqr(rrr^2 - bOffset^2)
aDiffR = sqr(rrr^2 - aOffset^2)

aMod = A - (rrr-aDiffR)
bMod = B - (rrr-bDiffR)

if abs(A-B) > EPS then
	radOrigo = rrr+ sqr((aOffset * (a/defSizeA))^2 + (bOffset * (b/defSizeB))^2)

	temp_b = 2 * (sin(45)*bMod)
	temp_a = 2 * (sin(45)*aMod)
	minWidth = 2 * radOrigo
	maxWidth = 2 * (rrr + sqr(aOffset^2 + bOffset^2) + MSFront)

	side2 = (b/a) * MSFront
	side1 = MSFront / (b/a)
	maxWidth2 = minWidth/2 + side1
	maxWidth1 = minWidth/2 + side2
	delta2 = (maxWidth1 - MSWidth/2) / (b/a)
	delta1 = (maxWidth2 - MSWidth/2) * (b/a)
else
	radOrigo = rrr + sqr(aOffset^2 + bOffset^2)
endif

! Show MEP Connections -------------------------------------------------------------[

isavailable = 0
isInArchiCAD = APPLICATION_QUERY ("MEPMODELER", "IsAvailable()", isavailable)
isMEPEnabled = (isavailable OR isInArchiCAD = 0)
if isMEPEnabled then
	bShowMEP = 1
	reqBMep = 0
	success = LIBRARYGLOBAL ("LibraryGlobals13", "showMepConnect", reqBMep)
	if success > 0 then
		bShowMEP = reqBMep
	endif
else
	bShowMEP = 0
endif

! Show MEP Connections -------------------------------------------------------------]
