
if gs_detlevel_3D_m = 0 then end

if not (gs_shadow) then shadow off

bDetailed = (gs_detlevel_3D_m = 2)
if bDetailed then
	resol gs_resol
else
	resol 8
endif

pen gs_cont_pen

! ------------------------------------------------------------------------------
! Hotspots
! ------------------------------------------------------------------------------
unID = 0
hotspot 0, 0, 0, unID : unID = unID + 1
hotspot a, 0, 0, unID : unID = unID + 1
hotspot a, b, 0, unID : unID = unID + 1
hotspot 0, b, 0, unID : unID = unID + 1

hotspot 0, 0, zzyzx, unID : unID = unID + 1
hotspot a, 0, zzyzx, unID : unID = unID + 1
hotspot a, b, zzyzx, unID : unID = unID + 1
hotspot 0, b, zzyzx, unID : unID = unID + 1


! ------------------------------------------------------------------------------
! Transforming model
! ------------------------------------------------------------------------------

mul a/0.23, b/0.815, zzyzx/0.295

rotx -90
rotz -180

! ------------------------------------------------------------------------------
! Setting materials for MEP
! ------------------------------------------------------------------------------
if bShowMEP & useSysMat then
	gs_matPanel		= sMat
	gs_matGrille	= sMat
endif

! ------------------------------------------------------------------------------
! Main Body
! ------------------------------------------------------------------------------

material gs_matPanel
addz 0.06
cutform 5, 1, 2,
		0, 0, 1, (0.815 - 0.12) * b/0.815,
		-0.08,				-0.02455190732941,	15,
		-0.08,				 0.02259074143611,	15,
		-0.1210773600796,	 0.0362572460279,	15,
		-0.1514264156081,	-0.004304183379595,	15,
		-0.08,				-0.02455190732941,	-1

cutform 7, 1, 2,
		0, 0, 1, (0.815 - 0.12) * b/0.815,
		-0.1435265836221,	 0.2400857828749,		15,
		-0.02,				 3.885780586188E-016,	900,
		 0,					-20.39767399499,		4015,
		-0.05210293249502,	 0.2680846913295,		15,
		-0.0597790833747,	 0.3321865779561,		15,
		-0.173063096951,	 0.2974928341996,		15,
		-0.1435265836221,	 0.2400857828749,		15
del 1

addz 0.815/2
for i = 1 to 2
	fprism_ gs_matPanel, gs_matPanel, gs_matPanel, gs_matPanel,
		21,	0.815/2, 0, 0.015,
		-0.02,				 0.2909725072924,		14,
		-0.024,				 0.2909725072924,		900,
		 0,					 90.7875956557,			4014,
		-0.02405498281787,	 0.2949721293857,		14,
		-0.02,				-4.440892098501E-016,	900,
		 0,					 38.1368781746,			4014,
		-0.205347150691,	 0.2295025789195,		14,
		 0.1164188354717,	 0.212811657594,		900,
		 0,					 29.88121359314,		4014,
		-0.1708871033093,	 0.06697875922355,		14,
		 0.1164188354717,	 0.212811657594,		900,
		 0,					 4.860779353093,		4014,
		-0.1574966845362,	 0.04315840945314,      14,
		-0.08,				 0.09115702501939,		900,
		 0,					 58.22743851341,		4014,
		-0.08,				 0,						14,
		-0.023,				 0,						14,
		-0.023,				 0.003,					900,
		 0,					 90,					4014,
		-0.02,				 0.003,					14,
		-0.02,				 0.2909725072924,		14
	mulz -1
next i
del 3

cutend
cutend


! ------------------------------------------------------------------------------
! Louvre
! ------------------------------------------------------------------------------
if bDetailed then
	addz 0.06
	prism_ 9, 0.815 - 0.12,
		-0.08231527232894,	 0.01950104816759,		15,
		-0.1320912412071,	 0.09226102330854,		900,
		 0,					-36.80473606354,		4015,
		-0.1358262840644,	 0.004183157104119,		15,
		-0.1359533882693,	 0.001185850893354,		15,
		-0.1320912412071,	 0.09226102330854,		900,
		 0,					 36.80473606354,		4015,
		-0.08062138682632,	 0.01702501264603,		15,
		-0.08231527232894,	 0.01950104816759,		15

	del 1
endif


! ------------------------------------------------------------------------------
! Back on Wall
! ------------------------------------------------------------------------------

addz 0.015
prism_ 5, 0.815 - 0.03,
		 0,		0.2909725072924,	15,
		-0.02,	0.2909725072924,	15,
		-0.02,	0.003,				15,
		 0,		0.003,				15,
		 0,		0.2909725072924,	-1
del 1


! ------------------------------------------------------------------------------
! Front Extension
! ------------------------------------------------------------------------------

addz 0.815/2
for i = 1 to 2
	fprism_ gs_matPanel, gs_matPanel, gs_matPanel, gs_matPanel,
		21,	0.815/2 - 0.01, 0, 0.004,
		-0.194294941978, 0.05963542551953,      14,
		-0.190707218152, 0.06140410800893,    900,
				   0, 90.66932162315,   4014,
		-0.1888967459877, 0.05783729002334,      14,
		-0.1744320514763, 0.06517938790542,      14,
		-0.1762425236406, 0.06874620589101,    900,
				   0, 89.29738706423,   4014,
		-0.1726537727397, 0.07051280346008,      14,
		0.1164188354717, 0.212811657594,    900,
				   0, -28.47600309961,   4014,
		-0.2055276300017, 0.2255556787465,      14,
		-0.2095244998483, 0.2257138919879,    900,
				   0, 89.29739470581,   4014,
		-0.2093172870122, 0.2297085212374,      14,
		-0.2255169058358, 0.2305488417651,      14,
		-0.2257241186718, 0.2265542125156,    900,
				   0, 90.66931389114,   4014,
		-0.2297208959147, 0.2267147480898,      14,
		0.1164188354717, 0.212811657594,    900,
				   0, 28.54257043613,   4014,
		-0.194294941978, 0.05963542551953,      14
	mulz -1
next i
del 3


! ------------------------------------------------------------------------------
! Grille
! ------------------------------------------------------------------------------

material gs_matGrille
addz 0.06
if bDetailed then
	resol 48

	length = 0.815 - 0.125
	for i = 1 to 8
		prism_ 9, 0.005,
			-0.1549642302538, 0.2623159479559,      15,
			-0.1435265836221, 0.2400857828749,      15,
				   -0.02, -3.497202527569E-015,    900,
					   0, -20.39767399499,   4015,
			-0.05210293249502, 0.2680846913295,      15,
			-0.05507542624456, 0.2929073479341,      15,
				   -0.02, -3.330669073875E-016,    900,
					   0, 20.39767399499,   4015,
			-0.1549642302538, 0.2623159479559,      15

		addz 0.005

		if i < 8 then
			prism_ 23, length / 7 - 0.005,
				-0.05600442075271, 0.2745878998445,      15,
				-0.05835259823958, 0.2924962875119,      15,
				-0.05507542624456, 0.2929073479341,      15,
				-0.05210293249502, 0.2680846913295,      15,
					   -0.02, -1.221245327088E-015,    900,
						   0, 20.39767399499,   4015,
				-0.1435265836221, 0.2400857828749,      15,
				-0.1549642302538, 0.2623159479559,      15,
				-0.1520188999827, 0.2638105571188,      15,
				-0.1439359063132, 0.2476584829581,      15,
				-0.1250288728676, 0.2562494271582,      15,
				-0.131878766008, 0.2729617953424,      15,
				-0.1288156924801, 0.2741972740019,      15,
				-0.1221533391839, 0.2574092623593,      15,
				-0.1025768653688, 0.2643404894461,      15,
				-0.1079624578083, 0.2815805497834,      15,
				-0.1048043882902, 0.282547722919,      15,
				-0.09961215192261, 0.2652484464064,      15,
				-0.07951161827346, 0.2704684830904,      15,
				-0.08339291505078, 0.2881082059251,      15,
				-0.08016330227667, 0.2887998910304,      15,
				-0.07647974188113, 0.2711178190599,      15,
				-0.05600442075271, 0.2745878998445,      15
		endif

		addz length / 7 - 0.005
	next i
	del 16
else
	resol 24
	prism_ 9, 0.815 - 0.12,
		-0.1549642302538, 0.2623159479559,      15,
		-0.1435265836221, 0.2400857828749,      15,
			   -0.02, -3.497202527569E-015,    900,
				   0, -20.39767399499,   4015,
		-0.05210293249502, 0.2680846913295,      15,
		-0.05507542624456, 0.2929073479341,      15,
			   -0.02, -3.330669073875E-016,    900,
				   0, 20.39767399499,   4015,
		-0.1549642302538, 0.2623159479559,      15

endif

del 1

del 3


! ------------------------------------------------------------------------------
! MEP connections
! ------------------------------------------------------------------------------

if bShowMEP then
	pen gs_cont_pen
	if gs_detlevel_3D_m = 1 then resol 8
	if gs_detlevel_3D_m = 2 then resol 24

	call "MEP_m_ConnectionsACL_4" parameters SetProgram = SetProgram,
		MEP_NumberConnections = MEP_NumberConnections,
		MEP_NumConnectionData = gs_Connections,
		gs_AddConnections = gs_AddConnections,
		cShow3D = 1,
		gs_ConMat = gs_matPanel,
		MEP_InsShow = 0,
		MEP_cline_show_3D = 0,
		gs_cont_pen = gs_cont_pen,
		ConPosX_1=ConPosX_1, ConPosY_1=ConPosY_1, ConPosZ_1=ConPosZ_1, ConLength_1=ConLength_1, ConEdit_1 = 17,
		ConPosX_2=ConPosX_2, ConPosY_2=ConPosY_2, ConPosZ_2=ConPosZ_2, ConLength_2=ConLength_2, ConEdit_2 = 17,
		ConPosX_3=ConPosX_3, ConPosY_3=ConPosY_3, ConPosZ_3=ConPosZ_3, ConLength_3=ConLength_3, ConEdit_3 = 17
endif


