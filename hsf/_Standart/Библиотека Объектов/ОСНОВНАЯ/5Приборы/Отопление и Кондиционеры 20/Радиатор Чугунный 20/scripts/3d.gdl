
!!Radiator Cast Iron.gsm


IF gs_detlevel_3D_m = -1 THEN
	gs_detlevel_3D_m = 2	! Detailed
	IF gs_detlevel_3D = `Откл.` THEN gs_detlevel_3D_m = 0
	IF gs_detlevel_3D = `Простой` THEN gs_detlevel_3D_m = 1
ENDIF

IF gs_detlevel_3D_m = 0 THEN END

IF gs_shadow=0 THEN SHADOW OFF
IF gs_shadow=1 THEN SHADOW ON

HOTSPOT 0, 0, 0
HOTSPOT A, 0, 0
HOTSPOT A, B, 0
HOTSPOT 0, B, 0
HOTSPOT A/2, B/2, 0

HOTSPOT 0, 0, ZZYZX
HOTSPOT A, 0, ZZYZX
HOTSPOT A, B, ZZYZX
HOTSPOT 0, B, ZZYZX
HOTSPOT A/2, B/2, ZZYZX


! --- start of modifying to Shaft

				! --- CONNECTIONS --- !

PEN gs_cont_pen
IF gs_detlevel_3D_m = 1 THEN RESOL 8
IF gs_detlevel_3D_m = 2 THEN RESOL 24


IF bShowMEP THEN

	IF useSysMat THEN mat1 = sMat

	CALL "MEP_m_ConnectionsACL_4" PARAMETERS SetProgram = SetProgram,
		ui_current_con = ui_current_con,
		MEP_NumberConnections = MEP_NumberConnections,
		MEP_NumConnectionData = gs_Connections,
		gs_AddConnections = gs_AddConnections,
		cShow3D = 1,
		gs_ConMat = mat1,
		MEP_InsShow = 0,
		MEP_cline_show_3D = 0,
		gs_cont_pen = gs_cont_pen,
		ConPosX_1=ConPosX_1, ConPosY_1=ConPosY_1, ConPosZ_1=ConPosZ_1, ConLength_1=ConLength_1, ConEdit_1 = 14,
		ConPosX_2=ConPosX_2, ConPosY_2=ConPosY_2, ConPosZ_2=ConPosZ_2, ConLength_2=ConLength_2, ConEdit_2 = 14
ENDIF

! --- end of modifying to Shaft


if gs_detlevel_3D_m = 1 then gs_resol=3

pen gs_cont_pen
resol gs_resol
muly b/0.3
mulz zzyzx/0.8
rotz 90
rotx 90
material mat1

if a>=0.04 then
vv=0.02
endif


if a<0.04 then
vv=a/2
endif

for n=1 to 2

prism_     51,      vv,
			0.0,     0.05,      79,
			0.05,     0.05,    900,
			0.0,      90.0,   4001,
			0.05,    -0.0,      79,
			0.25,    -0.0,     79,
			0.25,     0.05,    900,
			0.0,      90.0,   4001,
			0.3,     0.05,      79,
			0.3,     0.75,     79,
			0.25,     0.75,    900,
			0.0,      90.0,   4001,
			0.25,     0.8,     79,
			0.05,     0.8,      79,
			0.05,     0.75,    900,
			0.0,      90.0,   4001,
			0.0,     0.75,      79,
			0.0,     0.05,     -1,
			0.12,     0.08,      79,
			0.1,     0.08,    900,
			0.0,     -90.0,   4001,
			0.1,     0.06,     79,
			0.08,     0.06,    79,
			0.08,     0.08,    900,
			0.0,     -90.0,   4001,
			0.06,     0.08,   79,
			0.06,     0.72,      79,
			0.08,     0.72,    900,
			0.0,     -90.0,   4001,
			0.08,     0.74,     79,
			0.1,     0.74,      79,
			0.1,     0.72,    900,
			0.0,     -90.0,   4001,
			0.12,     0.72,      79,
			0.12,     0.08,     -1,
			0.18,     0.08,      79,
			0.2,     0.08,    900,
			0.0,      90.0,   4001,
			0.2,     0.06,      79,
			0.22,     0.06,    79,
			0.22,     0.08,    900,
			0.0,      90.0,   4001,
			0.24,     0.08,     79,
			0.24,     0.72,      79,
			0.22,     0.72,    900,
			0.0,      90.0,   4001,
			0.22,     0.74,      79,
			0.2,     0.74,     79,
			0.2,     0.72,    900,
			0.0,      90.0,   4001,
			0.18,     0.72,      79,
			0.18,     0.08,     -1

addz a-vv
next n
del 2

if a<=0.04 then end

if a<0.22 then
addz 0.02
aa=a-0.04
prism_      17,      aa,
			0.06,     0.72,      79,
			0.08,     0.72,    900,
			0.0,     -90.0,   4001,
			0.08,     0.74,      79,
			0.22,     0.74,      79,
			0.22,     0.72,    900,
			0.0,     -90.0,   4001,
			0.24,     0.72,      79,
			0.24,     0.08,      79,
			0.22,     0.08,    900,
			0.0,     -90.0,   4001,
			0.22,     0.06,      79,
			0.08,     0.06,      79,
			0.08,     0.08,    900,
			0.0,     -90.0,   4001,
			0.06,     0.08,      79,
			0.06,     0.72,     -1
end
endif



if a>=0.32 then
nn=int((a-0.02)/(0.02+0.08))
aa=(a-0.02-nn*(0.02))/nn
endif

if a<0.32 then
nn=2
aa=(a-0.06)/2
endif


addz 0.02
for w=1 to nn-1

prism_      17,      aa,
			0.06,     0.72,      79,
			0.08,     0.72,    900,
			0.0,     -90.0,   4001,
			0.08,     0.74,      79,
			0.22,     0.74,      79,
			0.22,     0.72,    900,
			0.0,     -90.0,   4001,
			0.24,     0.72,      79,
			0.24,     0.08,      79,
			0.22,     0.08,    900,
			0.0,     -90.0,   4001,
			0.22,     0.06,      79,
			0.08,     0.06,      79,
			0.08,     0.08,    900,
			0.0,     -90.0,   4001,
			0.06,     0.08,      79,
			0.06,     0.72,     -1

addz aa

prism_     17,      0.02,
			0.0,     0.05,      79,
			0.05,     0.05,    900,
			0.0,      90.0,   4001,
			0.05,    -0.0,      79,
			0.25,    -0.0,     79,
			0.25,     0.05,    900,
			0.0,      90.0,   4001,
			0.3,     0.05,      79,
			0.3,     0.75,     79,
			0.25,     0.75,    900,
			0.0,      90.0,   4001,
			0.25,     0.8,     79,
			0.05,     0.8,      79,
			0.05,     0.75,    900,
			0.0,      90.0,   4001,
			0.0,     0.75,      79,
			0.0,     0.05,     -1

addz 0.02
next w
prism_      17,      aa,
			0.06,     0.72,      79,
			0.08,     0.72,    900,
			0.0,     -90.0,   4001,
			0.08,     0.74,      79,
			0.22,     0.74,      79,
			0.22,     0.72,    900,
			0.0,     -90.0,   4001,
			0.24,     0.72,      79,
			0.24,     0.08,      79,
			0.22,     0.08,    900,
			0.0,     -90.0,   4001,
			0.22,     0.06,      79,
			0.08,     0.06,      79,
			0.08,     0.08,    900,
			0.0,     -90.0,   4001,
			0.06,     0.08,      79,
			0.06,     0.72,     -1
del top
