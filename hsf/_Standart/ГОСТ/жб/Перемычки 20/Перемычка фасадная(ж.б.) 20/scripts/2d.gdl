!******** S.A.Titov *********
!***** Moscow, 2000 *****

xx=(wt-0.25)/n
define style 'пр''arial',0.4,8,0
define style "mark" fontType2,fs,5,0

if GLOB_CONTEXT=6 then
for i=1 to n
pen shp
rect2 0,0,aa,bb
add2 0.01+aa,0
next i
del top


pen SYMB_VIEW_PEN
add2 0,-rv
line2 -0.02,-0.2,wt+0.02,-0.2
line2 0,-0.12,0,-0.23
line2 wt,-0.12,wt,-0.23
line2 -0.02,-0.22,0.02,-0.18
line2 wt-0.02,-0.22,wt+0.02,-0.18
del 1
line2 xx/2+0.03,-0.1-rv,xx/2+xx*n-0.01,-0.1-rv
line2 wt-0.03,-0.1-rv,wt+0.06,-0.1-rv

line2 -0.02,0,-0.12,0
line2 -0.02,bb,-0.12,bb
line2 -0.1,-0.02,-0.1,bb+0.02
line2 -0.08,-0.02,-0.12,0.02
line2 -0.08,bb-0.02,-0.12,bb+0.02
style 'пр'
text2 wt/2,-0.2-rv,str("%0.0mm",wt)
text2 wt+0.02,-0.1-rv,"2"
text2 xx/2+xx*n-0.05,-0.1-rv,"1"
rot2 90
text2 bb/2,0.11,str("%0.0mm",bb)
del 1
if abs(rv) > EPS then
line2 -0.02,-rv,-0.12,-rv
line2 -0.1,-0.02,-0.1,-(rv+0.02)
line2 -0.08,-rv-0.02,-0.12,-rv+0.02
rot2 90
text2 -rv/2,0.11,str("%0.0mm",rv)
del 1
endif

line2 0,bb,0,max(bb,fbb)+0.05
line2 wt,fpv-rv,wt,max(bb,fbb)+0.05

fill sha
poly2 8,6,
0,bb,0,max(bb,fbb)+0.05,wt,max(bb,fbb)+0.05,wt,fpv-rv,wt-0.13,fpv-rv,wt-0.13,fbb-rv,wt-0.25,fbb-rv,wt-0.25,bb

add2 (aa+0.01)*n,-rv
pen fhp
fill fh
POLY2_  7, 1+2+64,
0,0,1,
0.25,0,1,
0.25,fpv,1,
0.12,fpv,1,
0.12,fbb,1,
0,fbb,1,
0,0,-1
del 1

pen SYMB_VIEW_PEN
add2 wt+0.15,0

ht=0.1 !5*0.001*A_
ha=0.04 !3*0.001*A_


lb=0.1 ! 5*0.001*A_
la=0.04 ! 3*0.001*A_

line2 0,0,0,ht
line2 0,0,-lb,0
line2 0,0,la,0

define style "otm" "Geneva CY",0.4,7,0
style "otm"
txt=str (GLOB_ELEVATION,6,3)
lt=stw (txt)*0.001*GLOB_SCALE
add2 0,ht
text2 0,0,txt
line2 0,0,lt,0
del 1

line2 0,0,ha,ha
line2 0,0,-ha,ha
del top

add2 xx/2,0

for i=1 to n

line2 0,0,0.03,-0.1-rv
add2 xx,0
next i
del top
line2 wt-0.06,-rv,wt-0.03,-0.1-rv
else

if GLOB_CONTEXT=5 then

if mode='размещение' then
hotspot2 (ll-fll)/2,wt
hotspot2 (ll-fll)/2,wt-0.25
hotspot2 ll-(ll-fll)/2,wt
hotspot2 ll-(ll-fll)/2,wt-0.25
hotspot2 0,0
hotspot2 ll,0
hotspot2 0,wt-0.25
hotspot2 ll,wt-0.25
hotspot2 ll/2,wt
hotspot2 ll/2,0
add2 ll/2,mm*0.001*GLOB_SCALE
hotspot2 0,0
rot2 mr
style "mark"
text2 0,0,GLOB_ID
del 2
if ps='полностью'  then
rect2 0,0,ll,(aa+0.01)*n
add2 (ll-fll)/2,(aa+0.01)*n
rect2 0,0,fll,0.25
endif
endif
if mode='конструирование' then
for i=1 to n
pen shp
rect2 0,0,aa,bb
add2 aa+0.01,0
next i
del top

pen SYMB_VIEW_PEN
line2 xx/2+0.03,-0.1-rv,xx/2+xx*n-0.01,-0.1-rv
line2 wt-0.03,-0.1-rv,wt+0.06,-0.1-rv

style 'пр'
text2 wt+0.02,-0.1-rv,"2"
text2 xx/2+xx*n-0.05,-0.1-rv,"1"

line2 0,bb,0,max(bb,fbb)+0.05
line2 wt,fpv-rv,wt,max(bb,fbb)+0.05

fill sha
poly2 8,6,
0,bb,0,max(bb,fbb)+0.05,wt,max(bb,fbb)+0.05,wt,fpv-rv,wt-0.13,fpv-rv,wt-0.13,fbb-rv,wt-0.25,fbb-rv,wt-0.25,bb

add2 (aa+0.01)*n,-rv

pen fhp
fill fh
POLY2_  7, 1+2+64,
0,0,1,
0.25,0,1,
0.25,fpv,1,
0.12,fpv,1,
0.12,fbb,1,
0,fbb,1,
0,0,-1
del 1

pen SYMB_VIEW_PEN
add2 xx/2,0
for i=1 to n
line2 0,0,0.03,-0.1-rv
add2 xx,0
next i
del top
line2 wt-0.06,-rv,wt-0.03,-0.1-rv
endif

else

hotspot2 (ll-fll)/2,wt
hotspot2 (ll-fll)/2,wt-0.25
hotspot2 ll-(ll-fll)/2,wt
hotspot2 ll-(ll-fll)/2,wt-0.25
hotspot2 0,0
hotspot2 ll,0
hotspot2 0,wt-0.25
hotspot2 ll,wt-0.25
hotspot2 ll/2,wt
hotspot2 ll/2,0
add2 ll/2,mm*0.001*GLOB_SCALE
hotspot2 0,0

rot2 mr
style "mark"
text2 0,0,GLOB_ID
del 2
if ps='полностью' then
 rect2 0,0,ll,(aa+0.01)*n
add2 (ll-fll)/2,(aa+0.01)*n
rect2 0,0,fll,0.25
endif
endif
endif