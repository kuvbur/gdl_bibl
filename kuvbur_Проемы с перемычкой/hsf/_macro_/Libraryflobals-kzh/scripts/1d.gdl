
dim tshow_razb_pile[]
dim ishow_razb_pile[] : i=0
i=i+1 : ishow_razb_pile[i]=0 : tshow_razb_pile[i] = "По настройкам сваи"
i=i+1 : ishow_razb_pile[i]=1 : tshow_razb_pile[i] = "Показать у всех"
i=i+1 : ishow_razb_pile[i]=2 : tshow_razb_pile[i] = "Скрыть у всех"

dim tshow_direction[]
dim ishow_direction[] : i=0
i=i+1 : ishow_direction[i]=0 : tshow_direction[i] = "Все"
i=i+1 : ishow_direction[i]=1 : tshow_direction[i] = "X"
i=i+1 : ishow_direction[i]=2 : tshow_direction[i] = "Y"
i=i+1 : ishow_direction[i]=3 : tshow_direction[i] = "Поперечная/хомуты"

dim tshow_constr[]
dim ishow_constr[] : i=0
i=i+1 : ishow_constr[i]=0 : tshow_constr[i] = "Все"
i=i+1 : ishow_constr[i]=1 : tshow_constr[i] = "Плиты"
i=i+1 : ishow_constr[i]=2 : tshow_constr[i] = "Стены"
i=i+1 : ishow_constr[i]=3 : tshow_constr[i] = "Балки"
i=i+1 : ishow_constr[i]=4 : tshow_constr[i] = "Колонны"

dim tshow_type[]
dim ishow_type[] : i=0
i=i+1 : ishow_type[i]=1 : tshow_type[i] = "Условно"
i=i+1 : ishow_type[i]=2 : tshow_type[i] = "Линия"
i=i+1 : ishow_type[i]=3 : tshow_type[i] = "Тело"



dim tshow_layer[]
dim ishow_layer[] : i=0
i=i+1 : ishow_layer[i]=0 : tshow_layer[i] = "Все"
i=i+1 : ishow_layer[i]=1 : tshow_layer[i] = "1-й"
i=i+1 : ishow_layer[i]=2 : tshow_layer[i] = "2-й"
i=i+1 : ishow_layer[i]=3 : tshow_layer[i] = "3-й"
i=i+1 : ishow_layer[i]=4 : tshow_layer[i] = "4-й"
i=i+1 : ishow_layer[i]=5 : tshow_layer[i] = "5-й"
i=i+1 : ishow_layer[i]=6 : tshow_layer[i] = "6-й"


FILE_DEPENDENCE "Сортамент_арматуры.txt"
dim reinforce_gost[] : reinforce_gost[1] = ""
dim reinforce_class[] : reinforce_class[1] = ""
dim reinforce_diam[][] : reinforce_diam[1][1] = 0
dim reinforce_weight[][] : reinforce_weight[1][1] = 0
ch6=OPEN("TEXT","Сортамент_арматуры.txt","SEPARATOR=';',MODE=RO,LIBRARY")
i = 1 : gost_in="" : class_in="" : diam_in=0 : area_in=0 : weight_in=0 : nclass=1 : ndiam=1
REPEAT
	n=INPUT(ch6, i+1, 1, gost_in, class_in, diam_in, area_in, weight_in)
	if reinforce_class[nclass] = "" then
		reinforce_class[nclass]= class_in
		reinforce_gost[nclass]= gost_in
	endif
	if class_in <> reinforce_class[nclass] then  
		nclass = nclass + 1
		reinforce_class[nclass]= class_in
		reinforce_gost[nclass]= gost_in
		ndiam = 1
	endif
	if reinforce_diam[ndiam][nclass] = 0 then 
		reinforce_diam[ndiam][nclass] = diam_in / 1000
		reinforce_weight[ndiam][nclass] = weight_in
	endif
	if diam_in/1000 <> reinforce_diam[ndiam][nclass] then 
		ndiam = ndiam + 1
		reinforce_diam[ndiam][nclass] = diam_in / 1000
		reinforce_weight[ndiam][nclass] = weight_in
	endif
	i = i + 1
UNTIL n = -1	
close (ch6)
PARAMETERS reinforce_gost=reinforce_gost, reinforce_class=reinforce_class, reinforce_diam=reinforce_diam, reinforce_weight=reinforce_weight

dim diam_inx[] : diam_inx[1]=""
k=1
for i=1 to 4
	if i<=vardim1(reinforce_class) then
		class = reinforce_class[i]
		for j=1 to vardim1(reinforce_diam)
			if j<=vardim1(reinforce_diam) and i<=vardim2(reinforce_diam) then
				if reinforce_diam[j][i]>0 then
					diam_t = str("%.0mm", reinforce_diam[j][i])
					diam_inx[k] = diam_t + "." + class
					k=k+1
				endif
			endif
		next j
	endif
next i
parameters diam_inx=diam_inx
if vardim1(diam_mat)<>vardim1(diam_inx) then 
	dim diam_t[]
	for i=1 to vardim1(diam_inx)
		diam_t[i] = 0
	next i
	parameters diam_mat=diam_t, diam_cpen=diam_t, diam_rpen=diam_t, diam_hide = diam_t
endif

if vardim1(area_mat)<10 or vardim1(area_arr)<10 then 
	dim area_mat_t[]
	for i=1 to 10
		area_mat_t[i] = 0
	next i
	parameters area_mat=area_mat_t, area_arr=area_mat_t
endif

dim ttype_shrift_tip[]
dim itype_shrift_tip[] : i=0
i=i+1 : itype_shrift_tip[i]=0 : ttype_shrift_tip[i] = "Обычный"
i=i+1 : itype_shrift_tip[i]=1 : ttype_shrift_tip[i] = "Жирный(Ж)"
i=i+1 : itype_shrift_tip[i]=2 : ttype_shrift_tip[i] = "Курсив(К)"
i=i+1 : itype_shrift_tip[i]=4 : ttype_shrift_tip[i] = "Подчеркнутый(П)"
i=i+1 : itype_shrift_tip[i]=3 : ttype_shrift_tip[i] = "Ж+К"
i=i+1 : itype_shrift_tip[i]=5 : ttype_shrift_tip[i] = "Ж+П"
i=i+1 : itype_shrift_tip[i]=6 : ttype_shrift_tip[i] = "К+П"
i=i+1 : itype_shrift_tip[i]=7 : ttype_shrift_tip[i] = "Ж+К+П"


