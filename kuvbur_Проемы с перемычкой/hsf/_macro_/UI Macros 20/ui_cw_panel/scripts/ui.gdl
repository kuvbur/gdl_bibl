
!cw door 2 asymmetric
!cw door revolving
!cw door sliding
!cw panel box
!cw corner panel
!cw window 2
!cw panel

DIM st_outfields[5]
DIM st_infields[5]
DIM outfield_flags[5]
mody = 0
y0 = 35
	st_outfields[1] = `Перо Коробки`
	st_outfields[2] = `Тип Штриховки`
	st_outfields[3] = `Перо Штриховки`
	st_outfields[4] = `Перо Фона`

! =============================================================================
! Tabpage System
! =============================================================================

if vardim1(gs_idUI) = 1 & gs_idUI[1] = 0 & gs_stUI[1] = "" & gs_icoUI[1] = "" then
	i = 1
	gs_idUI[i] = 100:	i = i + 1
	gs_idUI[i] = 201:	i = i + 1
	gs_idUI[i] = 202:	i = i + 1
	gs_idUI[i] = 203:	i = i + 1
	gs_idUI[i] = 300:	i = i + 1
	gs_idUI[i] = 301:	i = i + 1
	gs_idUI[i] = 302:	i = i + 1
	gs_idUI[i] = 303:	i = i + 1
	gs_idUI[i] = 400:	i = i + 1
	gs_idUI[i] = 401:	i = i + 1
	gs_idUI[i] = 402:	i = i + 1
	gs_idUI[i] = 410:	i = i + 1
	gs_idUI[i] = 800:	i = i + 1
	gs_idUI[i] = 600:	i = i + 1
	gs_idUI[i] = 500:	i = i + 1
endif

dim tabIDs[]
dim tabNames[]
dim tabIcons[]
dim customPageIdx[20]

idTab_GeneralSettings			= 0
idTab_FrameSettings				= 0
idTab_DoorLeaf					= 0
idTab_DoorLeaf1					= 0
idTab_DoorLeaf2					= 0
idTab_WindowSash				= 0
idTab_OpeningSettings			= 0
idTab_AdditionalLeaf			= 0
idTab_ListSettings				= 0
idTab_FrameAndThreshold			= 0
idTab_DimensionSettings			= 0
idTab_AppearanceSettings		= 0
idTab_FrameAndGlass				= 0
idTab_TopAndBottomAttributes	= 0
idTab_FrameAndDoorLeaf			= 0
idTab_GeneralBoxSettings		= 0
idTab_OpeningSettings			= 0

actIdx = 1
j = 1
for i=1 to vardim1(gs_idUI)

	if gs_idUI[i] = 0 then
		tabIDs[actIdx] = actIdx
		tabNames[actIdx] = gs_stUI[i]
		tabIcons[actIdx] = gs_icoUI[i]
		customPageIdx[j] = actIdx
		j = j + 1

		actIdx = actIdx + 1
	else
		if gs_idUI[i] = 100 then		! Built-in General Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[1]			! "General Settings"
			if iPanelType = PANEL_BOX or iPanelType = PANEL_CORNER or iPanelType = PANEL_FIX then
				tabIcons[actIdx] = "uiTab_CW_general_flat(1)"
			endif
			if iPanelType >= PANEL_DOOR and iPanelType <= PANEL_DOOR2_ASSYM then
				tabIcons[actIdx] = "uiTab_CW_door_general_flat(1)"
			endif
			if iPanelType = PANEL_WINDOW or iPanelType = PANEL_WINDOW2 then
				tabIcons[actIdx] = "uiTab_CW_windowGeneral_flat(1)"
			endif

			idTab_GeneralSettings = actIdx

			actIdx = actIdx + 1
		endif

		if gs_idUI[i] = 201 then		! Built-in Appearance Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[13]			! "Appearance"
			tabIcons[actIdx] = "uiTab_Attributes_flat(1)"
			idTab_AppearanceSettings = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 202 then		! Built-in Dimensions Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[12]			! "Dimensions"
			tabIcons[actIdx] = "uiTab_Dimensions_flat(1)"
			idTab_DimensionSettings = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 203 then		! Built-in Top and Bottom Attributes Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[15]			! "Top & Bottom Attributes"
			tabIcons[actIdx] = "uiTab_Attributes_flat(1)"
			idTab_TopAndBottomAttributes = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 300 then		! Built-in Frame Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[3]			! "Frame Settings"
			if iPanelType = PANEL_DOOR_SLIDING2 or iPanelType = PANEL_DOOR_SLIDING4 then
				tabIcons[actIdx] = "uiTab_CW_door_frame_flat(1)"
			endif
			if iPanelType = PANEL_WINDOW or iPanelType = PANEL_WINDOW2 then
				tabIcons[actIdx] = "uiTab_CW_framesash_flat(1)"
			endif
			idTab_FrameSettings = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 301 then		! Built-in Frame and Threshold Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[11]			! "Frame And Threshold"
			tabIcons[actIdx] = "uiTab_CW_door_frame_flat(1)"
			idTab_FrameAndThreshold = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 302 then		! Built-in Frame and Glass Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[14]			! "Frame And Glass"
			tabIcons[actIdx] = "uiTab_CW_framesash_flat(1)"
			idTab_FrameAndGlass = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 303 then		! Built-in Frame and Door Leaf Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[16]			! "Frame And Door Leaf"
			tabIcons[actIdx] = "uiTab_CW_door_frame_flat(1)"
			idTab_FrameAndDoorLeaf = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 400 then		! Built-in Door Leaf Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[4]			! "Door Leaf Settings"
			tabIcons[actIdx] = "uiTab_CW_door_leaf2_flat(1)"
			idTab_DoorLeaf = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 401 then		! Built-in Door Leaf 1 Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[9]			! "Door Leaf 1 Settings"
			tabIcons[actIdx] = "uiTab_CW_door_leaf2_flat(1)"
			idTab_DoorLeaf1 = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 402 then		! Built-in Door Leaf 2 Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[10]			! "Door Leaf 2 Settings"
			tabIcons[actIdx] = "uiTab_CW_door_leaf2_flat(1)"
			idTab_DoorLeaf2 = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 410 then		! Built-in Parapet Sash Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[5]		! "Sash Settings"
			tabIcons[actIdx] = "uiTab_CW_windowGrill_flat(1)"
			idTab_WindowSash = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 800 then		! Built-in Additional Leaf Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[8]			! "Additional Leaf Settings"
			tabIcons[actIdx] = "uiTab_CW_door_leaf2_flat(1)"
			idTab_AdditionalLeaf = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 600 then		! Built-in Listing Settings
			tabIDs[actIdx] = actIdx
			tabNames[actIdx] = stTabpageTitles[7]			! "Parameters for Listing"
			tabIcons[actIdx] = "uiTab_Description_flat(1)"
			idTab_ListSettings = actIdx

			actIdx = actIdx + 1
		endif
		if gs_idUI[i] = 500 then		! Built-in Opening Lines Settings
			tabIDs[actIdx] = actIdx
			if bDoor then
				tabNames[actIdx] = stTabpageTitles[17]			! "Opening"
				tabIcons[actIdx] = "uiTab_CW_door_leaf3_flat(1)"
			else
				tabNames[actIdx] = stTabpageTitles[18]			! "Opening Lines"
				tabIcons[actIdx] = "uiTab_CW_windowOpline_flat(1)"
			endif
			idTab_OpeningSettings = actIdx

			actIdx = actIdx + 1
		endif
	endif
next i

lastPageId = actIdx - 1
for i=lastPageId + 1 to 20
	tabIDs[i]	= 0
	tabIcons[i]	= ""
	tabNames[i]	= ""
next i

for i=j to 20
	customPageIdx[i] = 0
next i

if lastPageId < gs_ui_current_page then
	tabIDs[lastPageId]				= 0
	tabIDs[gs_ui_current_page]		= gs_ui_current_page
	tabIcons[gs_ui_current_page]	= tabIcons[lastPageId]
	tabNames[gs_ui_current_page]	= tabNames[lastPageId]
	gs_ui_current_page = lastPageId
endif

file_dependence	"uiTab_CW_general_flat(1)"
file_dependence	"uiTab_CW_door_general_flat(1)"
file_dependence	"uiTab_CW_windowGeneral_flat(1)"
file_dependence	"uiTab_Attributes_flat(1)"
file_dependence	"uiTab_Dimensions_flat(1)"
file_dependence	"uiTab_Attributes_flat(1)"
file_dependence	"uiTab_CW_door_frame_flat(1)"
file_dependence	"uiTab_CW_framesash_flat(1)"
file_dependence	"uiTab_CW_door_leaf2_flat(1)"
file_dependence	"uiTab_CW_windowGrill_flat(1)"
file_dependence	"uiTab_Description_flat(1)"
file_dependence	"uiTab_CW_door_leaf3_flat(1)"
file_dependence	"uiTab_CW_windowOpline_flat(1)"

ui_current_page gs_ui_current_page


! =============================================================================
! Tabpage Selector Control
! =============================================================================

ui_page gs_ui_current_page	! Place it on every page

px = 30
py = 20
cx = px
cy = py

ui_style 0, 1
ui_infield{3} "gs_ui_current_page", 0,0, 295, cy+5,
	2, "",
	0, 0,
	cx, cy, px, py,
	tabIcons[1],	tabNames[1],	tabIDs[1],
	tabIcons[2],	tabNames[2],	tabIDs[2],
	tabIcons[3],	tabNames[3],	tabIDs[3],
	tabIcons[4],	tabNames[4],	tabIDs[4],
	tabIcons[5],	tabNames[5],	tabIDs[5],
	tabIcons[6],	tabNames[6],	tabIDs[6],
	tabIcons[7],	tabNames[7],	tabIDs[7],
	tabIcons[8],	tabNames[8],	tabIDs[8],
	tabIcons[9],	tabNames[9],	tabIDs[9],
	tabIcons[10],	tabNames[10],	tabIDs[10],
	tabIcons[11],	tabNames[11],	tabIDs[11],
	tabIcons[12],	tabNames[12],	tabIDs[12],
	tabIcons[13],	tabNames[13],	tabIDs[13],
	tabIcons[14],	tabNames[14],	tabIDs[14],
	tabIcons[15],	tabNames[15],	tabIDs[15],
	tabIcons[16],	tabNames[16],	tabIDs[16],
	tabIcons[17],	tabNames[17],	tabIDs[17],
	tabIcons[18],	tabNames[18],	tabIDs[18],
	tabIcons[19],	tabNames[19],	tabIDs[19],
	tabIcons[20],	tabNames[20],	tabIDs[20] ui_tooltip `Выбор Вкладки`

ui_button ui_prev, "<<", 305,2, 32,21, gs_ui_current_page - 1 ui_tooltip `Предыдущая Вкладка`	! Previous
ui_button ui_next, ">>", 338,2, 32,21, gs_ui_current_page + 1 ui_tooltip `Следующая Вкладка`	    ! Next

ui_separator 0,28, 444,28


! =============================================================================
! Tabpages for CW Elements
! =============================================================================


! -----------------------------------------------------------------------------
! General Settings Tabpage
! -----------------------------------------------------------------------------

if idTab_GeneralSettings > 0 then
	ui_page idTab_GeneralSettings

	x1 = 10
	x2 = 280
	xpic = 32
	dy = 24

	if iPanelType = PANEL_FIX then
		ui_pict 1, xpic, y0, 206, 65, 1				!"ui_gen_fix"
		y = y0 + 85
	endif

	if iPanelType = PANEL_CORNER then
		ui_style 0, 0
		ui_outfield `Внутри`, x1, y0+30, 50, 15, 1
		ui_outfield `Наружу`, x1, y0+49, 50, 15, 1
		if sSpecEdgeSetting_m = 0 then
			ui_pict 26, xpic+35, y0+4, 157, 65, 1				!"ui_gen_corner_nospec"26
			y = y0 + 85
		else
			if sSpecEdgeSetting_m = 1 or sSpecEdgeSetting_m = 2 then
				ui_outfield `Угол`, x1+120, y0-4, 60, 15, 1
				ui_pict 27, xpic+35, y0+16, 155, 50, 1			!"ui_gen_corner_mittered"
			else
				ui_outfield `Смещение`, x1+193, y0+49, 60, 15
				ui_pict 28, xpic+35, y0+4, 135, 65, 1				!"ui_gen_corner_butted"
			endif
			y = y0 + 85
		endif
	endif

	if iPanelType = PANEL_CUSTOM then
		ui_pict 2, xpic, y0, 206, 65, 1				!"ui_gen_custom"
		y = y0 + 85
	endif

	if iPanelType = PANEL_WINDOW then
		if gs_opening_dir_m = 1 then
			ui_pict 3, xpic, y0, 206, 65, 1			!"ui_gen_win_in"
		else
			ui_pict 4, xpic, y0, 206, 65, 1			!"ui_gen_win_out"
		endif
		y = y0 + 85
	endif

	if iPanelType = PANEL_WINDOW2 then
		if gs_opening_dir_m = 1 then
			ui_pict 5, xpic, y0, 206, 65, 1			!"ui_gen_win2_in"
		else
			ui_pict 6, xpic, y0, 206, 65, 1			!"ui_gen_win2_out"
		endif
		y = y0 + 85
	endif

	if iPanelType = PANEL_BOX then
		ui_pict 7, xpic, y0, 206, 114, 1				!"ui_gen_box"
		y = y0 + 230
	endif

	if iPanelType = PANEL_DOOR then
		if gs_opening_dir_m = 1 then
			ui_pict 8, xpic, y0, 206, 65, 1			!"ui_gen_door_in"
		else
			ui_pict 9, xpic, y0, 206, 65, 1			!"ui_gen_door_out"
		endif
			y = y0 + 85
		endif

	if iPanelType = PANEL_DOOR2 then
		if gs_opening_dir_m = 1 then
			ui_pict 10, xpic, y0, 206, 65, 1		!"ui_gen_door2_in"
			y = y0 + 85
		else
			ui_pict 11, xpic, y0, 206, 65, 1		!"ui_gen_door2_out"
			y = y0 + 85
		endif
	endif

	if iPanelType = PANEL_DOOR2_ASSYM then
		if gs_opening_dir_m = 1 then
			ui_pict 24, xpic, y0, 206, 65, 1		!"ui_gen_door2_in_assym"
			y = y0 + 95
		else
			ui_pict 25, xpic, y0, 206, 65, 1		!"ui_gen_door2_out_assym"
			y = y0 + 95
		endif
		ui_style 0,0
		ui_infield "gs_leafWidth1", xpic + 40, y0+70, 65, 19 ui_tooltip `Ширина Полотна 1`
	endif

	if iPanelType = PANEL_DOOR_SLIDING2 then
		if gs_opening_dir_m = 1 then
			if iFixPanelPosition = 1 then
				ui_pict 46, xpic, y0, 206, 65, 1		!"ui_gen_slide2_in_left"
			else
				ui_pict 12, xpic, y0, 206, 65, 1		!"ui_gen_slide2_in_right"
			endif
			y = y0 + 85
		else
			if iFixPanelPosition = 1 then
				ui_pict 45, xpic, y0, 206, 65, 1		!"ui_gen_slide2_out_left"
			else
				ui_pict 13, xpic, y0, 206, 65, 1		!"ui_gen_slide2_out_right"
			endif
			y = y0 + 85
		endif
	endif

	if iPanelType = PANEL_DOOR_SLIDING4 then
		if gs_opening_dir_m = 1 then
			ui_pict 14, xpic, y0, 206, 65, 1		!"ui_gen_slide4_in"
		else
			ui_pict 15, xpic, y0, 206, 65, 1		!"ui_gen_slide4_out"
		endif
		y = y0 + 85
	endif

	if iPanelType = PANEL_DOOR_REVOLVING then
		ui_pict 16, xpic, y0, 206, 119, 1		!"ui_gen_rev"
		y = y0 + 130
	endif

	if bDoor or bWindow then
		if iPanelType <> PANEL_DOOR_REVOLVING then
			ui_style 0, 1
			ui_outfield `Открывание`, x1, y, 135, 15
			ui_style 0, 0
			UI_INFIELD{3}	"gs_opening_dir_m",	x1+140,		y-4,	100,	19,
					8, "", 2, 1,
					0, 0, 0, 0,
					1, `Внутри`, 1,
					2, `Наружу`, 2
		endif
		y = y + dy
	endif

	if bDoor or bWindow or iPanelType = PANEL_BOX then
		if iPanelType = PANEL_BOX then y = 200
		ui_style 0, 0
		ui_outfield `Расположение Верха`, x1, y, 135, 15
		ui_infield "gs_updirection", x1+140, y-4, 100, 19
		y = y + dy
	endif
	if iPanelType = PANEL_DOOR_SLIDING2 or iPanelType = PANEL_DOOR_SLIDING4 then
		ui_style 0, 1
		ui_outfield `Количество Панелей`, x1, y, 135, 15
		ui_style 0, 0
		ui_infield{3} "nPanels", x1+140, y-4, 100, 19,
				8, "",
				0, 0,
				0, 0, 0, 0,
				"", "2", 2,
				"", "4", 4				

		y = y + dy
		ui_style 0, 0
		ui_outfield `Фиксация Полотна`, x1, y, 135, 15, 4*(iPanelType = PANEL_DOOR_SLIDING4)
		UI_INFIELD{3}	"iFixPanelPosition", x1+140, y-4, 100, 19,
				8, "",
				0, 0,
				0, 0, 0, 0,
				"", `Слева`, 1,
				"", `Справа`, 2

	endif

	if iPanelType = PANEL_DOOR_REVOLVING then
		ui_style 0, 0
		ui_outfield `Тип Полотна`, x1, y, 135, 15
		UI_INFIELD{3}	"iLeafType", x1+140, y-4, 100, 19,
				8, "",
				0, 0,
				0, 0, 0, 0,
				"", `Остекленная Рама`, 1,
				"", `Остекление`, 2

	endif

	if bEnableThreshold then
		ui_style 0, 0
		ui_infield{3} "bTreshold", x1, y-4, 125, 19,
				7, "",
				0, 0,
				0, 0, 0, 0,
				"", `Порог`, 0,
				"", `Порог`, 1
		y = y + dy
	endif

	if iPanelType = PANEL_DOOR or iPanelType = PANEL_WINDOW then
		ui_style 0, 1
		ui_outfield `Тип Открывания`, x1, y, 135, 15
		ui_style 0, 0
		UI_INFIELD{3}	"gs_optype_m",	x1+140,		y-4,	100,	19,
				8, "",
				0, 0,
				0, 0, 0, 0,
				"", `Распашная`, 2,
				"", `Распашная Зеркальная`, 3,
				"", `Нижнеподвесная`, 4,
				"", `Верхнеподвесная`, 5,
				"", `Наклонно-Поворотная `, 6,
				"", `Наклонно-Поворотная Зеркальная`, 7
	endif
	y = y + dy


	if not(bPanel) and iPanelType <> PANEL_BOX and iPanelType <> PANEL_DOOR_REVOLVING \
	and iPanelType <> PANEL_DOOR2_ASSYM then
		ui_style 0, 0
		ui_separator x1, y, x2-10, y
		y = y + dy/3

		if iPanelType = PANEL_DOOR or iPanelType = PANEL_DOOR2 then
			ui_outfield `Угол Открывания в 2D`, x1, y, 135, 15
			ui_infield "opAngle_2d", x1+140, y-4, 100, 19
			y = y + dy
			ui_outfield `Угол Открывания в 3D`, x1, y, 135, 15
			ui_infield "opAngle_horizontal", x1+140, y-4, 100, 19
		endif
		if iPanelType = PANEL_WINDOW or iPanelType = PANEL_WINDOW2 then
			ui_outfield `Открывание по Гориз.`, x1, y, 135, 15, 4*(gs_optype_m = 4 or gs_optype_m = 5)
			ui_infield "opAngle_horizontal", x1+140, y-4, 100, 19
			y = y + dy
		endif
		if iPanelType = PANEL_WINDOW then
			ui_outfield `Угол по Вертикали`, x1, y, 135, 15, 4*(gs_optype_m = 2 or gs_optype_m = 3)
			ui_infield "opAngle_vertical", x1+140, y-4, 100, 19
		endif
		if iPanelType = PANEL_DOOR_SLIDING2 or iPanelType = PANEL_DOOR_SLIDING4 then
			ui_outfield `Открывание в 2D`, x1, y, 135, 15
			ui_infield "opWidth2d", x1+140, y-4, 100, 19
			y = y + dy
			ui_outfield `Открывание в 3D`, x1, y, 135, 15
			ui_infield "opWidth3d", x1+140, y-4, 100, 19
		endif
	endif

	if iPanelType = PANEL_FIX then
		ui_pict 44, 130, 125, 171, 116, 1
		ui_separator 272, 35, 272, 110
		ui_separator x1, 115, 440, 115
		ui_style 0, 0

		ui_infield "panelThk", 305, 180, 60, 19 ui_tooltip `Толщина Панели`
		ui_infield "CoatingThk", 65, 197, 60, 19 ui_tooltip `Толщина Облицовки`
		ui_infield "panelBackAngle", 220, 245, 60, 19 ui_tooltip `Задний Угол Панели`
	endif

	if iPanelType = PANEL_CORNER then
		x1 = 10
		x2c = 100
		x3c = 210

		x4c = 240
		x5c = 330
		x6c = 440

		y = 115
		dy = 24
		ui_style 0, 1
		UI_INFIELD{3}	"sSpecEdgeSetting_m",	x1, y-4, 245, 19,
				8, "",
				0, 0,
				0, 0, 0, 0,
				"", `Без Специальных Торцов`, 0,
				"", `Соединение на Ус Одного Торца`, 1,
				"", `Соединение на Ус Двух Торцов`, 2,
				"", `Соединение Встык Одного Торца`, 3,
				"", `Соединение Встык Двух Торцов`, 4
		ui_style 0, 0

		ui_separator 272, 35, 272, 135
		y = y + dy

		if sSpecEdgeSetting_m > 0 then
			ui_separator x1, y, 440, y
			y = y  + 10
		endif

		if sSpecEdgeSetting_m > 0 then
			ui_style 0, 1
			ui_outfield `Торец 1`, x1, y, x3c-x1, 15
			ui_style 0, 0
		endif
		if sSpecEdgeSetting_m = 2 or sSpecEdgeSetting_m = 4 then
			ui_style 0, 1
			ui_outfield `Торец 2`, x4c, y, x6c-x4c, 15
			ui_style 0, 0
		endif

		if sSpecEdgeSetting_m = 1 or sSpecEdgeSetting_m = 2 then
			y = y + dy

			ui_outfield `Направление:`, x1, y, x2c-x1-2, 15
			ui_infield "aSpecialEdge1", x2c, y-4, x3c-x2c, 19
			y = y + dy
			ui_outfield `Угол`, x1, y, x2c-x1-2, 15
			ui_infield "aMitterAngle1", x2c, y-4, x3c-x2c, 19
			y = y + 2*dy
			ui_style 0, 0
			ui_outfield `Направление:`, x1, y, x2c-x1-2, 15
			ui_style 0, 0
			ui_outfield `Ориентация Торца по линии привязки Навесной Стены`, x2c, y, x6c-x2c-2, 15
		endif

		if sSpecEdgeSetting_m = 2 then
			y = 115 + 2*dy + 10
			ui_outfield `Направление:`, x4c, y, x5c-x4c-2, 15
			ui_infield "aSpecialEdge2", x5c, y-4, x6c-x5c, 19
			y = y + dy
			ui_outfield `Угол`, x4c, y, x5c-x4c-2, 15
			ui_infield "aMitterAngle2", x5c, y-4, x6c-x5c, 19
		endif

		if sSpecEdgeSetting_m = 3 or sSpecEdgeSetting_m = 4 then
			y = y + dy

			ui_outfield `Направление:`, x1, y, x2c-x1-2, 15
			ui_infield "aSpecialEdge1", x2c, y-4, x3c-x2c, 19
			y = y + dy
			ui_outfield `Тип Смещения`, x1, y, x2c-x1-2, 15
			ui_infield "sButtedTyp1", x2c, y-4, x3c-x2c, 19
			y = y + dy
			if sButtedTyp1_m = 0 then
				ui_outfield `Смещение`, x1, y, x2c-x1-2, 15
				ui_infield "lOffset1", x2c, y-4, x3c-x2c, 19
			else
				ui_outfield `Соединение`, x1, y, x2c-x1-2, 15
				ui_infield "aMitterAngle1", x2c, y-4, x3c-x2c, 19
			endif
			y = y + dy
			ui_style 0, 0
			ui_outfield `Направление:`, x1, y, x2c-x1-2, 15
			ui_style 0, 0
			ui_outfield `Ориентация Торца по линии привязки Навесной Стены`, x2c, y, x6c-x2c-2, 15
		endif

		if sSpecEdgeSetting_m = 4 then
			y = 115 + 2*dy + 10
			ui_outfield `Направление:`, x4c, y, x5c-x4c-2, 15
			ui_infield "aSpecialEdge2", x5c, y-4, x6c-x5c, 19
			y = y + dy
			ui_outfield `Тип Смещения`, x4c, y, x5c-x4c-2, 15
			ui_infield "sButtedTyp2", x5c, y-4, x6c-x5c, 19
			y = y + dy
			if sButtedTyp2_m = 0 then
				ui_outfield `Смещение`, x4c, y, x5c-x4c-2, 15
				ui_infield "lOffset2", x5c, y-4, x6c-x5c, 19
			else
				ui_outfield `Соединение`, x4c, y, x5c-x4c-2, 15
				ui_infield "aMitterAngle2", x5c, y-4, x6c-x5c, 19
			endif
			y = y + dy
		endif
	endif

	if not(bPanel) then
		ui_separator 272, 35, 272, 260
	endif

	ui_style 0, 1
	ui_outfield `2D-детализация`, x2, y0, 160, 15
	ui_style 0, 0

	y = y0 + dy
	UI_INFIELD{3}	"gs_detlevel_2d_m",x2+30, y-4, 130, 19,
			8, "",
			0, 0,
			0, 0, 0, 0,
			"", `по ПМВ` , 1,
			"", `Зависит от Масштаба` , -1,
			"", `1:50`, 50,
			"", `1:100`, 100,
			"", `1:200`, 200,
			"", `Нет`, 0

	if bDoor then
		y = y + dy
		ui_style 0, 1
		ui_outfield `3D-детализация`, x2, y, 160, 15
		ui_style 0, 0

		y = y + dy
		UI_INFIELD{3}	"gs_detlevel_3D_m", x2+30, y-4, 130, 19,
				8, "",
				0, 0,
				0, 0, 0, 0,
				"", `Детальный` , 2,
				"", `Простой`, 1,
				"", `Нет`, 0

	endif

	y = y + dy
	ui_style 0, 0
	ui_infield{3} "gs_shadow", x2, y, 160, 19,
				7, "",
				0, 0,
				0, 0, 0, 0,
				"", `Отбрасывание Теней`, 0,
				"", `Отбрасывание Теней`, 1

	if bDoor then
		y = y + dy
		ui_style 0, 0
		ui_outfield `Аппроксимация`, 	x2, 	y, 90, 15
		ui_infield "gs_resol", 		x2+95,  y-4, 65, 19
	endif
endif


! -----------------------------------------------------------------------------
! Appearance
! -----------------------------------------------------------------------------

if idTab_AppearanceSettings > 0 then
	ui_page idTab_AppearanceSettings
	x1 = 10
	x2 = 40
	x3 = 170
	x4 = 212
	xEnd = 440
	dy = 23
	y0 = 40
	ui_style 0,1
	ui_outfield `Перо Контура`, x1, y0, x3-x1-2, 18
	ui_style 0,0
	ui_infield "gs_cont_pen", x3, y0-2, x4-x3, 22
	y = y0 + dy
	ui_separator x1, y+5, xEnd, y+5
	y = y + dy -10
	ui_separator 222, y , 222, y + 5.5*dy

	st_outfields[1] = `Облицовка`
	st_outfields[2] = `Тип Штриховки`
	st_outfields[3] = `Перо Штриховки`
	st_outfields[4] = `Перо Фона`
	st_outfields[5] = `Наружу`

	st_infields[1] = ""
	st_infields[2] = "coatingFill"
	st_infields[3] = "coatingFillPen"
	st_infields[4] = "coatingFillPenBg"
	st_infields[5] = "matCoating"

	for i = 1 to 2
		y = y0 + 1.5*dy
		ui_style 0,1
		ui_outfield st_outfields[1], x1, y, x3-x1-2, 18
		ui_style 0,0
		y = y + dy

		ui_pict 21, x1, y-1, 13, 17, 1			!"ui_fill_type"
		ui_outfield st_outfields[2], x2, y, x3-x2-2, 18
		y = y + dy
		ui_infield st_infields[2], x3-95, y-2, x4-x3+95, 22
		y = y + dy + 5

		ui_pict 22, x1, y-1, 24, 17, 1			!"ui_fill_pen"
		ui_outfield st_outfields[3], x2, y, x3-x2-2, 18
		ui_infield st_infields[3],  x3, y-2, x4-x3, 22
		y = y + dy

		ui_pict 23, x1, y-1, 24, 17, 1			!"ui_back_pen"
		ui_outfield st_outfields[4], x2, y, x3-x2-2, 18
		ui_infield st_infields[4],  x3, y-2, x4-x3, 22
		y = y + 3*dy
		ui_outfield st_outfields[5], x1, y, x3-x2-77, 18
		ui_infield st_infields[5],  x3-75, y-2, x4-x3+75, 24

		xMod = 227
		x1 = 10 + xMod
		x2 = 40 + xMod
		x3 = 170 + xMod
		x4 = 212 + xMod

		st_outfields[1] = `Внутри`
		st_outfields[5] = `Внутри`

		st_infields[2] = "internalFill_1"
		st_infields[3] = "internalFillPen_1"
		st_infields[4] = "internalFillPenBg_1"
		st_infields[5] = "matInsideLayer"
	next i
	y = y0 + 7*dy - 5
	ui_separator 10, y+10, xEnd, y+10
	y = y + 20
	ui_style 0,1
	ui_outfield `Покрытия`, 10, y, x3-x1-2, 18
	ui_style 0,0
endif

! -----------------------------------------------------------------------------
! Dimensions
! -----------------------------------------------------------------------------

if idTab_DimensionSettings > 0 then
	ui_page idTab_DimensionSettings
	x1 = 10
	x2 = 40
	x3 = 170
	x4 = 212
	xEnd = 440
	dy = 23
	y0 = 40

	ui_pict 44, 130, 70, 171, 116, 1
	ui_style 0, 0

	ui_infield "panelThk", 305, 125, 60, 18 ui_tooltip `Толщина Панели`
	ui_infield "CoatingThk", 65, 142, 60, 18 ui_tooltip `Толщина Облицовки`
	ui_infield "panelBackAngle", 220, 190, 60, 18 ui_tooltip `Задний Угол Панели`
endif


! -----------------------------------------------------------------------------
! Top and Bottom Attributes tabpage
! -----------------------------------------------------------------------------

if idTab_TopAndBottomAttributes> 0 then
	ui_page idTab_TopAndBottomAttributes
	y = 35
	x2 = 40
	x3 = 170
	x4 = 212
	dy = 24

	ui_separator 225, 35, 225, 260

	ui_style 0, 1
	ui_outfield `Верх`, x1, y, x4-x1-2, 20
	ui_style 0, 0
	y = y + dy
	st_outfields[1] = `Перо Контура`
	st_outfields[2] = `Тип Штриховки`
	st_outfields[3] = `Перо Штриховки`
	st_outfields[4] = `Перо Фона Штриховки`

	st_infields[1] = "penTop"
	st_infields[2] = "fillTop"
	st_infields[3] = "fillPenTop"
	st_infields[4] = "fillPenBgTop"

	gosub "attributes"
	dy = 24
	y = y + dy

	ui_separator x1, y+5, x4, y+5
	y = y + 15
	ui_style 0, 1
	ui_outfield `Штриховка Поверхности`, x1, y, x4-x1-2, 20
	ui_style 0, 0
	y = y + dy

	st_infields[2] = "fillCover"
	st_infields[3] = "fillPenCover"
	st_infields[4] = "fillPenBgCover"

	ui_pict 21, x1, y-1, 13, 17, 1			!"ui_fill_type"
	ui_outfield st_outfields[2], x2, y, x3-x2-2-65, 18
	ui_infield st_infields[2], x3-65, y-2, x4-x3+65, 22
	y = y + dy

	ui_pict 22, x1, y-1, 24, 17, 1			!"ui_fill_pen"
	ui_outfield st_outfields[3], x2, y, x3-x2-2, 18
	ui_infield st_infields[3],  x3, y-2, x4-x3, 22
	y = y + dy

	ui_pict 23, x1, y-1, 24, 17, 1			!"ui_back_pen"
	ui_outfield st_outfields[4], x2, y, x3-x2-2, 18
	ui_infield st_infields[4],  x3, y-2, x4-x3, 22

	xMod = 230
	x1 = 10 + xMod
	x2 = 40 + xMod
	x3 = 170 + xMod
	x4 = 212 + xMod
	x5 = 322
	y = 35
	dy = 24

	ui_style 0, 1
	ui_outfield `Низ`, x1, y, x4-x1-2, 20
	ui_style 0, 0
	y = y + dy

	st_infields[1] = "penBottom"
	st_infields[2] = "fillBottom"
	st_infields[3] = "fillPenBottom"
	st_infields[4] = "fillPenBgBottom"

	gosub "attributes"
	y = y + dy

	ui_separator x1, y+5, x4, y+5
	y = y + 15

	ui_style 0, 1
	ui_outfield `Покрытия`, x1, y, x4-x1-2, 20
	ui_style 0, 0
	dy = 28
	y = y + dy

	ui_outfield `Верх`, x1, y, x5-x1-2, 20
	ui_infield "matTop", x5, y-4, x4-x5, 24
	y = y + dy

	ui_outfield `Низ`, x1, y, x5-x1-2, 20
	ui_infield "matBottom", x5, y-4, x4-x5, 24
endif

! -----------------------------------------------------------------------------
! Frame and Glass tabpage
! -----------------------------------------------------------------------------

if idTab_FrameAndGlass> 0 then
	ui_page idTab_FrameAndGlass

	if gs_ui_sub_tabpage < 1 then gs_ui_sub_tabpage = 1
	if gs_ui_sub_tabpage > 2 then gs_ui_sub_tabpage = 2

	ui_infield{3} "gs_ui_sub_tabpage", 380,0, 64,25,
		4, 19, 2, 1,			! ui_sub_tabpage.png
		0,0, 28,21,
		1, "",	1,
		2, "",	2

	if gs_ui_sub_tabpage = 1 then

		ui_pict 47, 130, 45, 172, 188, 1

		ui_infield "offsetPanel", 75, 115, 50, 18 ui_tooltip `Смещение Объема Панели`
		ui_infield "frameThk", 75, 195, 50, 18 ui_tooltip `Толщина Коробки`
		ui_infield "frameWidth", 150, 235, 50, 18 ui_tooltip `Ширина Коробки`
		ui_infield "thkGlass", 220, 235, 50, 18 ui_tooltip `Толщина Остекления`
		ui_infield "panelDepth", 305, 160, 50, 18 ui_tooltip `Глубина Панели`

	else
		y = y0
		x1 = 10
		x2 = 40
		x3 = 173
		x4 = 212
		dy = 24

		ui_separator 225, 35, 225, 260

		ui_style 0, 1
		ui_outfield `Коробка`, x1, y, x4-x1-2, 20
		ui_style 0, 0
		y = y + dy
		st_outfields[1] = `Перо Сечения`
		st_outfields[2] = `Штриховка Сечения`
		st_outfields[3] = `Перо Штриховки Сечения`
		st_outfields[4] = `Перо Фона Штриховки Сечения`

		st_infields[1] = "penFrame"
		st_infields[2] = "fillFrame"
		st_infields[3] = "fillPenFrame"
		st_infields[4] = "fillPenBgFrame"

		gosub "attributes"

		dy = 24
		y = y + dy + 10

		st_outfields[1] = `Перо Видимого Контура`
		st_outfields[2] = `Видимая`
		st_outfields[3] = `Перо Штриховки Видимых Поверхностей`
		st_outfields[4] = `Перо Фона Штриховки Видимых Поверхностей`

		st_infields[1] = "penFrameCover"
		st_infields[2] = "fillFrameCover"
		st_infields[3] = "fillPenFrameCover"
		st_infields[4] = "fillPenBgFrameCover"

		gosub "attributes"
		dy = 24
		xMod = 230
		x1 = 10 + xMod
		x2 = 40 + xMod
		x3 = 170 + xMod
		x4 = 212 + xMod
		x5 = 322
		y = 35

		ui_style 0, 1
		ui_outfield `Остекление`, x1, y, x4-x1-2, 20
		ui_style 0, 0
		y = y + dy

		st_outfields[1] = `Перо Контура`
		st_outfields[2] = `Тип Штриховки`
		st_outfields[3] = `Перо Штриховки`
		st_outfields[4] = `Перо Фона Штриховки`

		st_infields[1] = "penGlass"
		st_infields[2] = "fillGlass"
		st_infields[3] = "fillPenGlass"
		st_infields[4] = "fillPenBgGlass"

		gosub "attributes"
		y = y + dy
		ui_separator x1, y+5, x4, y+5
		y = y + 15

		ui_style 0, 1
		ui_outfield `Покрытия`, x1, y, x4-x1-2, 20
		ui_style 0, 0
		dy = 28
		y = y + dy

		ui_outfield `Коробка`, x1, y, x5-x1-2, 20
		ui_infield "matFrame", x5, y-4, x4-x5, 24
		y = y + dy

		ui_outfield `Остекление`, x1, y, x5-x1-2, 20
		ui_infield "matGlass", x5, y-4, x4-x5, 24
	endif
endif

! -----------------------------------------------------------------------------
! Frame Settings Tabpage
! -----------------------------------------------------------------------------

if idTab_FrameSettings > 0 then
	ui_page idTab_FrameSettings

	if gs_ui_sub_tabpage < 1 then gs_ui_sub_tabpage = 1
	if gs_ui_sub_tabpage > 2 then gs_ui_sub_tabpage = 2

	ui_infield{3} "gs_ui_sub_tabpage", 380,0, 64,25,
		4, 19, 2, 1,			! ui_sub_tabpage.png
		0,0, 28,21,
		1, "",	1,
		2, "",	2

	if gs_ui_sub_tabpage = 1 then
		x1 = 10
		x2 = 145
		x3 = 205
		x4 = 295
		dy = 24

		if iPanelType = PANEL_WINDOW or iPanelType = PANEL_WINDOW2 then
			ui_style 0, 1
			ui_outfield `Тип Коробки`, x1, y0, x2-x1-2, 20
			ui_style 0, 0
!			ui_infield "frameType", x2, y0-2, x4-x2, 22
			UI_INFIELD{3}	"iFrameType",	x2, y0-2, x4-x2, 20,
					8, "", 2, 1,
					0, 0, 0, 0,
					1, `Суб-рама`, 1,
					2, `Адаптер`, 2
		endif
		y = y0 + dy

		ui_outfield `Смещение Панели`, x1, y, x2-x1-2, 20
		ui_infield "offsetPanel", x2, y-2, x3-x2, 22
		y = y + dy
		y = y + dy

		ui_separator x3+10, y-3, x3+10, 256
		y = y + dy

		if iPanelType = PANEL_DOOR_SLIDING2 or iPanelType = PANEL_DOOR_SLIDING4 then
			xPic1 = 60
			xPic2 = 245
			yPic = y

			if grill_m >= 4 and grill_m <= 6 then					!glass types
				ui_pict 36, xPic1, yPic, 142, 102, 1				!"ui_sliding_frame_glass"
				ui_pict 33, xPic2, yPic, 142, 102, 1				!"ui_sliding_leaf_glass"
			else
				if grill_m = 7 then 								!editable glass field
					ui_pict 52, xPic1, yPic, 142, 102, 1			!"ui_sliding_frame_edit_glass"
					ui_pict 34, xPic2, yPic, 142, 102, 1			!"ui_sliding_leaf_edit_glass"
				else
					ui_pict 37, xPic1, yPic, 133, 102, 1				!"ui_sliding_frame"
					ui_pict 35, xPic2, yPic, 142, 102, 1			!"ui_sliding_leaf"
					ui_infield "sashWidth", xPic2+75, yPic-22, 45, 20  ui_tooltip `Ширина Обвязки Полотна`
				endif
			endif
			ui_infield "frameWidth", xPic1+45, yPic+103, 45, 20  ui_tooltip `Ширина Коробки`
			ui_infield "frameThk", xPic1-15, yPic+103, 55, 20  ui_tooltip `Толщина Коробки`

			ui_infield "sashThk", xPic2-18, yPic+103, 45, 20  ui_tooltip `Толщина Обвязки Полотна`
			ui_infield "glassThk", xPic2+145, yPic+42, 45, 20 ui_tooltip `Толщина Остекления`
		endif
		if iPanelType = PANEL_WINDOW or iPanelType = PANEL_WINDOW2 then
			xPic1 = 30
			xPic2 = 245
			yPic = y

			if iFrameType = 2 then
				ui_pict 17, xPic1, yPic, 155, 102, 1			!"ui_adapter_frame"
				ui_pict 50, xPic2, yPic, 142, 102, 1			!"ui_adapter_leaf"

				ui_infield "sashWidth", xPic2+73, yPic-22, 45, 20  ui_tooltip `Ширина Обвязки Полотна`
				ui_infield "adapterThk", xPic1-18, yPic-22, 45, 20  ui_tooltip `Толщина Адаптера`
				ui_infield "adapterWidth", xPic1+15, yPic+103, 45, 20  ui_tooltip `Ширина Адаптера`

				ui_infield "frameWidth", xPic1+65, yPic+103, 45, 20  ui_tooltip `Ширина Коробки`
				ui_infield "frameThk", xPic1+130, yPic+103, 45, 20  ui_tooltip `Толщина Коробки`

				ui_infield "recessWidth", xPic1+65, yPic-22, 45, 20 ui_tooltip `Ширина Паза`
				ui_infield "recessThk", xPic1+117, yPic-22, 45, 20  ui_tooltip `Глубина Паза`
			else
				ui_pict 18, xPic1, yPic, 142, 102, 1				! "ui_subframe_frame"
				ui_pict 31, xPic2, yPic, 142, 102, 1			! "ui_subframe_leaf"

				ui_infield "sashWidth", xPic2+73, yPic-22, 45, 20  ui_tooltip `Ширина Обвязки Полотна`
				ui_infield "frameThk", xPic1-18, yPic+103, 45, 20  ui_tooltip `Толщина Коробки`
				ui_infield "frameWidth", xPic1+52, yPic+103, 45, 20  ui_tooltip `Ширина Коробки`
				ui_infield "recessWidth", xPic1+65, yPic-22, 45, 20 ui_tooltip `Ширина Паза`
				ui_infield "recessThk", xPic1+117, yPic-22, 45, 20  ui_tooltip `Глубина Паза`
			endif
			ui_infield "sashThk", xPic2-18, yPic+103, 45, 20  ui_tooltip `Толщина Обвязки Полотна`
			ui_infield "glassThk", xPic2+145, yPic+55, 45, 20 ui_tooltip `Толщина Остекления`
			ui_infield "offsetGlass", xPic2+145, yPic+75, 45, 20  ui_tooltip `Смещение Остекления`
		endif
	else
		x2 = 40
		x3 = 170
		x4 = 212
		dy = 24
		x5 = 230
		x6 = 310
		xEnd = 440

		st_infields[1] = "penFrame"
		st_infields[2] = "fillFrame"
		st_infields[3] = "fillPenFrame"
		st_infields[4] = "fillPenBgFrame"

		ui_separator 222, y0, 222, 256
		ui_style 0,1
		ui_outfield `Реквизиты`, x1, y0, x4-x1-2, 18
		ui_style 0,0
		y = y0 + dy

		gosub "attributes"
		gosub "frameElement"

		st_outfields[1] = `Коробка`
		st_infields[1] = "matFrame"
		outfield_flags[1] = 0

		if iPanelType = PANEL_DOOR_SLIDING2 or iPanelType = PANEL_DOOR_SLIDING4 then
			st_outfields[2] = `Фиксатор`
			st_infields[2] = "matClamp"
			outfield_flags[2] = 0
			nMat = 2
		endif

		if iPanelType = PANEL_WINDOW or iPanelType = PANEL_WINDOW2 then
			st_outfields[2] = `Адаптер`
			st_outfields[3] = `Фиксатор`
			st_infields[2] = "matAdapter"
			st_infields[3] = "matClamp"
			outfield_flags[2] = 4*(iFrameType = 1)
			outfield_flags[3] = 0
			nMat = 3
		endif
		dy  = 28
		gosub "materials"
	endif
endif


! -----------------------------------------------------------------------------
! Frame and Threshold Tabpage
! -----------------------------------------------------------------------------

if idTab_FrameAndThreshold > 0 then
	ui_page idTab_FrameAndThreshold

	if gs_ui_sub_tabpage < 1 then gs_ui_sub_tabpage = 1
	if gs_ui_sub_tabpage > 2 then gs_ui_sub_tabpage = 2

	ui_infield{3} "gs_ui_sub_tabpage", 380,0, 64,25,
		4, 19, 2, 1,			! ui_sub_tabpage.png
		0,0, 28,21,
		1, "",	1,
		2, "",	2

	if gs_ui_sub_tabpage = 1 then
		x1 = 10
		x2 = 145
		x3 = 205
		x4 = 295
		dy = 24
		xPic1 = 30
		xPic2 = 245

		ui_style 0, 1
		ui_outfield `Тип Коробки`, x1, y0, x2-x1-2, 20
		ui_style 0, 0
!		ui_infield "frameType", x2, y0-2, x4-x2, 22
		UI_INFIELD{3}	"iFrameType",	x2, y0-2, x4-x2, 20,
				8, "", 2, 1,
				0, 0, 0, 0,
				1, `Суб-рама`, 1,
				2, `Адаптер`, 2

		y = y0 + dy
		ui_outfield `Высота Порога`, x1, y, x2-x1-2, 20, 4*not(bTreshold)
		ui_infield "tresholdHeight", x2, y-2, x3-x2, 22
		y = y + dy
		ui_outfield `Смещение Панели`, x1, y, x2-x1-2, 20
		ui_infield "offsetPanel", x2, y-2, x3-x2, 22

		if iPanelType = PANEL_DOOR2_ASSYM then
			ui_outfield `Выбор Полотна`, xPic2-18, y, 120, 20
			UI_INFIELD{3}	"sashToEdit_m",	xPic2+122-18, y-2, 440-xPic2-122+18, 18,
					8, "", 2, 1,
					0, 0, 0, 0,
					1, `Полотно 1`, 1,
					2, `Полотно 2`, 2
		endif
		y = y + dy

		ui_separator x3+10, y-3, x3+10, 256
		y = y + dy

		yPic = y
		if iFrameType = 2 then
			if iPanelType = PANEL_DOOR2_ASSYM then
				if sashToEdit_m = 1 then
					if grill_m1 >= 4 and grill_m1 <= 6 then					!glass types
						ui_pict 51, xPic1, yPic, 155, 102, 1				!"ui_adapter_frame_glass"
						ui_pict 48, xPic2, yPic, 142, 102, 1				!"ui_adapter_leaf_glass"
					else
						ui_pict 17, xPic1, yPic, 155, 102, 1				!"ui_adapter_frame"
						if grill_m1 = 7 then 								!editable glass field
							ui_pict 49, xPic2, yPic, 142, 102, 1			!"ui_adapter_leaf_edit_glass"
						else
							ui_pict 50, xPic2, yPic, 142, 102, 1			!"ui_adapter_leaf"
							ui_infield "sashWidth1", xPic2+73, yPic-22, 45, 20  ui_tooltip `Ширина Обвязки Полотна 1`
						endif
					endif
				else
					if grill_m2 >= 4 and grill_m2 <= 6 then					!glass types
						ui_pict 51, xPic1, yPic, 155, 102, 1				!"ui_adapter_frame_glass"
						ui_pict 48, xPic2, yPic, 142, 102, 1				!"ui_adapter_leaf_glass"
					else
						ui_pict 17, xPic1, yPic, 155, 102, 1				!"ui_adapter_frame"
						if grill_m2 = 7 then 								!editable glass field
							ui_pict 49, xPic2, yPic, 142, 102, 1			!"ui_adapter_leaf_edit_glass"
						else
							ui_pict 50, xPic2, yPic, 142, 102, 1			!"ui_adapter_leaf"
							ui_infield "sashWidth2", xPic2+73, yPic-22, 45, 20  ui_tooltip `Ширина Обвязки Полотна 2`
						endif
					endif
				endif
			else
				if grill_m >= 4 and grill_m <= 6 then					!glass types
					ui_pict 51, xPic1, yPic, 155, 102, 1				!"ui_adapter_frame_glass"
					ui_pict 48, xPic2, yPic, 142, 102, 1				!"ui_adapter_leaf_glass"
				else
					ui_pict 17, xPic1, yPic, 155, 102, 1				!"ui_adapter_frame"
					if grill_m = 7 then 								!editable glass field
						ui_pict 49, xPic2, yPic, 142, 102, 1			!"ui_adapter_leaf_edit_glass"
					else
						ui_pict 50, xPic2, yPic, 142, 102, 1			!"ui_adapter_leaf"
						ui_infield "sashWidth", xPic2+73, yPic-22, 45, 20  ui_tooltip `Ширина Обвязки Полотна`
					endif
				endif
			endif
			ui_infield "adapterThk", xPic1-18, yPic-22, 45, 20  ui_tooltip `Толщина Адаптера`
			ui_infield "adapterWidth", xPic1+15, yPic+103, 45, 20  ui_tooltip `Ширина Адаптера`

			ui_infield "frameWidth", xPic1+65, yPic+103, 45, 20  ui_tooltip `Ширина Коробки`
			ui_infield "frameThk", xPic1+130, yPic+103, 45, 20  ui_tooltip `Толщина Коробки`

			ui_infield "recessWidth", xPic1+65, yPic-22, 45, 20 ui_tooltip `Ширина Паза`
			ui_infield "recessThk", xPic1+117, yPic-22, 45, 20  ui_tooltip `Глубина Паза`
		else
			if iPanelType = PANEL_DOOR2_ASSYM then
				if sashToEdit_m = 1 then
					if grill_m1 >= 4 and grill_m1 <= 6 then 				!glass types
						ui_pict 32, xPic1, yPic, 142, 102, 1				!"ui_subframe_frame_glass"
						ui_pict 29, xPic2, yPic, 142, 102, 1				!"ui_subframe_leaf_glass"
					else
						ui_pict 18, xPic1, yPic, 142, 102, 1				! "ui_subframe_frame"
						if grill_m1 = 7 then 								!editable glass field
								ui_pict 30, xPic2, yPic, 142, 102, 1		! "ui_subframe_leaf_edit_glass"
						else
							ui_pict 31, xPic2, yPic, 142, 102, 1			! "ui_subframe_leaf"
							ui_infield "sashWidth1", xPic2+73, yPic-22, 45, 20  ui_tooltip `Ширина Обвязки Полотна 1`
						endif
					endif
				else
					if grill_m2 >= 4 and grill_m2 <= 6 then 				!glass types
						ui_pict 32, xPic1, yPic, 142, 102, 1				!"ui_subframe_frame_glass"
						ui_pict 29, xPic2, yPic, 142, 102, 1				!"ui_subframe_leaf_glass"
					else
						ui_pict 18, xPic1, yPic, 142, 102, 1				! "ui_subframe_frame"
						if grill_m2 = 7 then 								!editable glass field
								ui_pict 30, xPic2, yPic, 142, 102, 1		! "ui_subframe_leaf_edit_glass"
						else
							ui_pict 31, xPic2, yPic, 142, 102, 1			! "ui_subframe_leaf"
							ui_infield "sashWidth2", xPic2+73, yPic-22, 45, 20  ui_tooltip `Ширина Обвязки Полотна 2`
						endif
					endif
				endif
			else
				if grill_m >= 4 and grill_m <= 6 then 					!glass types
					ui_pict 32, xPic1, yPic, 142, 102, 1				!"ui_subframe_frame_glass"
					ui_pict 29, xPic2, yPic, 142, 102, 1				!"ui_subframe_leaf_glass"
				else
					ui_pict 18, xPic1, yPic, 142, 102, 1				! "ui_subframe_frame"
					if grill_m = 7 then 								!editable glass field
							ui_pict 30, xPic2, yPic, 142, 102, 1		! "ui_subframe_leaf_edit_glass"
					else
						ui_pict 31, xPic2, yPic, 142, 102, 1			! "ui_subframe_leaf"
						ui_infield "sashWidth", xPic2+73, yPic-22, 45, 20  ui_tooltip `Ширина Обвязки Полотна`
					endif
				endif
			endif
			ui_infield "frameThk", xPic1-18, yPic+103, 45, 20  ui_tooltip `Толщина Коробки`
			ui_infield "frameWidth", xPic1+52, yPic+103, 45, 20  ui_tooltip `Ширина Коробки`
			ui_infield "recessWidth", xPic1+65, yPic-22, 45, 20 ui_tooltip `Ширина Паза`
			ui_infield "recessThk", xPic1+117, yPic-22, 45, 20  ui_tooltip `Глубина Паза`
		endif
		ui_infield "sashThk", xPic2-18, yPic+103, 45, 20  ui_tooltip `Толщина Обвязки Полотна`
		ui_infield "glassThk", xPic2+145, yPic+55, 45, 20 ui_tooltip `Толщина Остекления`
		ui_infield "offsetGlass", xPic2+145, yPic+75, 45, 20  ui_tooltip `Смещение Остекления`
	else	! attributes tabpage
		x2 = 40
		x3 = 170
		x4 = 212
		dy = 24
		x5 = 230
		x6 = 310
		xEnd = 440

		st_infields[1] = "penFrame"
		st_infields[2] = "fillFrame"
		st_infields[3] = "fillPenFrame"
		st_infields[4] = "fillPenBgFrame"

		ui_separator 222, y0, 222, 256
		ui_style 0,1
		ui_outfield `Реквизиты`, x1, y0, x4-x1-2, 18
		ui_style 0,0

		y = y0 + dy

		gosub "attributes"
		y = y + dy/2
		ui_separator x1, y+14, x4, y+14
		y = y + dy

		st_outfields[1] = `Перо Порога`

		st_infields[1] = "penThreshold"
		st_infields[2] = "fillThreshold"
		st_infields[3] = "fillPenThreshold"
		st_infields[4] = "fillPenBgThreshold"

		gosub "attributes"

		gosub "frameElement"

		st_outfields[1] = `Коробка`
		st_outfields[2] = `Адаптер`
		st_outfields[3] = `Порог`
		st_outfields[4] = `Фиксатор`

		st_infields[1] = "matFrame"
		st_infields[2] = "matAdapter"
		st_infields[3] = "matTreshold"
		st_infields[4] = "matClamp"

		outfield_flags[1] = 0
		outfield_flags[2] = 4*(iFrameType = 1)
		outfield_flags[3] = 4*not(bTreshold)
		outfield_flags[4] = 0

		nMat = 4
		dy  = 26
		gosub "materials"
	endif
endif

! -----------------------------------------------------------------------------
! Frame and Door Leaf
! -----------------------------------------------------------------------------

if idTab_FrameAndDoorLeaf > 0 then
	ui_page idTab_FrameAndDoorLeaf

	x1 = 10
	x2 = 150
	x3 = 232
	dy = 20
	xPic = 70
	if gs_ui_sub_tabpage < 1 then gs_ui_sub_tabpage = 1
	if gs_ui_sub_tabpage > 2 then gs_ui_sub_tabpage = 2

	ui_infield{3} "gs_ui_sub_tabpage", 380,0, 64,25,
		4, 19, 2, 1,			! ui_sub_tabpage.png
		0,0, 28,21,
		1, "",	1,
		2, "",	2

	if gs_ui_sub_tabpage = 1 then
		ui_outfield `Смещение Панели`, x1, y0, x2-x1-2, 18
		ui_infield "offsetPanel", x2, y0-2, 65, 22

		if iPanelType = PANEL_DOOR_REVOLVING then
			y = y0 + dy
			y = y + dy
			ui_infield "frameThk", x2-35, y-2, 55, 22 ui_tooltip `Толщина Коробки`
			if iLeafType = 1 then			! glazed frame
				ui_infield "sashWidth", x2+45, y-2, 55, 22 ui_tooltip `Ширина Полотна`
				y = y + dy
				ui_pict 41, xPic, y, 248, 88, 1
				ui_pict 42, xPic, y+88, 82, 75, 1
				ui_pict 43, xPic+248-111, y+88, 111, 75, 1
			else
				y = y + dy
				ui_pict 38, xPic, y, 249, 86, 1
				ui_pict 39, xPic, y+86, 82, 76, 1
				ui_pict 40, xPic+249-96, y+86, 96, 76, 1
			endif
			ui_infield "glassThk", xPic+84, y+88, 50, 22 ui_tooltip `Толщина Остекления`
			ui_infield "sashThk", xPic+250, y+28, 55, 22 ui_tooltip `Толщина Полотна`
		endif
	else
		x2 = 40
		x3 = 170
		x4 = 212
		x5 = 230
		x6 = 310
		xEnd = 440
		dy = 24

		st_infields[1] = "penFrame"
		st_infields[2] = "fillFrame"
		st_infields[3] = "fillPenFrame"
		st_infields[4] = "fillPenBgFrame"

		ui_separator 222, y0, 222, 256
		ui_style 0,1
		ui_outfield `Реквизиты`, x1, y0, x4-x1-2, 18
		ui_style 0,0
		y = y0 + dy

		gosub "attributes"
		y = y + dy/2
		ui_separator x1, y+14, x4, y+14
		y = y + dy

		st_outfields[1] = `Перо Полотна`

		st_infields[1] = "penSash"
		st_infields[2] = "fillSash"
		st_infields[3] = "fillPenSash"
		st_infields[4] = "fillPenBgSash"

		gosub "attributes"
		gosub "frameElement"

		st_outfields[1] = `Коробка`
		st_outfields[2] = `Полотно`
		st_outfields[3] = `Стекло`
		st_outfields[4] = `Фиксатор`

		st_infields[1] = "matFrame"
		st_infields[2] = "matSash"
		st_infields[3] = "matGlass"
		st_infields[4] = "matClamp"
		nMat = 4
		dy = 28
		gosub "materials"
	endif
endif


! -----------------------------------------------------------------------------
! Door Leaf Tabpage
! -----------------------------------------------------------------------------

if idTab_DoorLeaf > 0 then
	ui_page idTab_DoorLeaf

	if gs_ui_sub_tabpage < 1 then gs_ui_sub_tabpage = 1
	if gs_ui_sub_tabpage > 2 then gs_ui_sub_tabpage = 2

	ui_infield{3} "gs_ui_sub_tabpage", 380,0, 64,25,
		4, 19, 2, 1,			! ui_sub_tabpage.png
		0,0, 28,21,
		1, "",	1,
		2, "",	2

	if gs_ui_sub_tabpage = 1 then
		x1 = 150
		x2 = 230
		x3 = 295
		x4 = 300
		x5 = 360
		dy = 20
		xEnd = 440
		ui_infield{3} "grill_m", 10, 40, 131, 220,
			1, "CW_DoorWindow_Types(13)", 9, 3,
			55, 105, 44, 65,
			1, `Без Раскладки`, 0,
			2, `Г/В-Раскладка`, 1,
			3, `Редактируемая Раскладка`, 2,
			4, `Разделение Средником`, 3,
			5, `Тип Стекла 1`, 4,
			6, `Тип Стекла 2`, 5,
			7, `Тип Стекла 3`, 6,
			8, `Редактируемое Остекление`, 7,
			9, `Специальное Полотно Двери`, 99

		st_infields[1] = "gs_han_height"
		st_infields[2] = "gs_han_pos"
!		st_infields[3] = "gs_handle_typ"
		st_infields[4] = "gs_cust_handle"
		leaf = 0
		outfieldFlag = 4*(gs_handle_typ_m = 0)
		gosub "handle"

		ui_style 0, 1

		if grill_m = 99 then
			ui_outfield `Имя Полотна Двери`, x1, y+20, x3-x1-5, 18
			ui_infield "gs_cust_panel", x3+5, y+20, xEnd-x3-5, 18
		else
			if grill_m >= 4 and grill_m <= 6 then
				ui_style 0, 1
				ui_outfield `Рама Полотна`, x1, y, x3-x1-2, 18
				ui_style 0, 0
				y = y + dy
				ui_outfield `Ширина`, x1, y, x4-x1-2, 18
				ui_infield "sashWidth", x4, y-2, x5-x4, 18
			endif
			if grill_m = 7 then
				dy = 25
				ui_style 0, 1
				ui_outfield `Расположение Стекла`, x1, y, x3-x1-2, 18
				ui_style 0, 0
				y = y + dy
				ui_outfield `Слева`, x1, y, x4-x1-2, 18
				ui_infield "glassFromLeft", x4, y-2, x5-x4, 18
				y = y + dy
				ui_outfield `Справа`, x1, y, x4-x1-2, 18
				ui_infield "glassFromRight", x4, y-2, x5-x4, 18
				y = y + dy
				ui_outfield `Сверху`, x1, y, x4-x1-2, 18
				ui_infield "glassFromTop", x4, y-2, x5-x4, 18
				y = y + dy
				ui_outfield `Снизу`, x1, y, x4-x1-2, 18
				ui_infield "glassFromBottom", x4, y-2, x5-x4, 18
			endif
			if grill_m = 1 or grill_m = 2 then
				x5 = 330
				x6 = xEnd-55
				ui_style 0, 1
				ui_outfield `Ширина Раскладки`, x1, y, x3-x1-2, 18
				ui_style 0, 0

				ui_outfield `Положение Раскладки`, x4, y, xEnd-x4, 15
				y = y + dy
!				ui_infield "grillPosition", x4+30, y-5, xEnd-x4-30, 18

				UI_INFIELD{3}	"grillPosition_m",	x4+30,	y-5, xEnd-x4-30, 20,
						8, "", 3, 1,
						0, 0, 0, 0,
						1, `Наружу`, 1,
						2, `Внутри`, 2,
						3, `Посередине`, 3

				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18
				ui_infield "grillWidth_hor_1", x2, y-2, x3-x2, 18
				y = y + dy
				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18
				ui_infield "grillWidth_vert_1", x2, y-2, x3-x2, 18

				ui_outfield `Толщина`, x4, y, x6-x4-2, 18
				ui_infield "grillThk", x6, y-2, xEnd-x6, 18

				y = y + dy
				ui_separator x1, y, xEnd, y
				y = y + 5

				ui_style 0, 1
				ui_outfield `Количество Стекол`, x1, y, x3-x1-2, 18
				ui_style 0, 0

				y = y + dy
				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18
				ui_infield "nHorPanel_1", x2, y-2, x3-x2, 18
				y = y + dy
				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18
				ui_infield "nVertPanel_1", x2, y-2, x3-x2, 18

			endif
		endif
	else
		x2 = 40
		x3 = 170
		x4 = 212
		dy = 24
		x5 = 230
		x6 = 310
		xEnd = 440

		st_outfields[1] = `Перо Полотна`
		st_outfields[2] = `Тип Штриховки`
		st_outfields[3] = `Перо Штриховки`
		st_outfields[4] = `Перо Фона`
		st_outfields[5] = `Перо Остекления`

		st_infields[1] = "penSash"
		st_infields[2] = "fillSash"
		st_infields[3] = "fillPenSash"
		st_infields[4] = "fillPenBgSash"
		st_infields[5] = "penGlass"

		gosub "attributes2"

		x5 = 230
		x6 = 295
		xEnd = 440
		dy = 22
		y = 35
		ui_style 0,1
		ui_outfield `Покрытия`, x5, y, xEnd-x5-2, 18
		ui_style 0,0
		y = y + 19

		st_outfields[1] = `Полотно`
		st_outfields[2] = `Сетка`
		st_outfields[3] = `Остекление`
		st_outfields[4] = `Ручка`
		st_outfields[5] = `Аксессуар Ручки`

		st_infields[1] = "matSash"
		st_infields[2] = "matGrill"
		st_infields[3] = "matGlass"
		st_infields[4] = "matHandle"
		st_infields[5] = "matHandleAcc"

		outfield_flags[1] = 0
		outfield_flags[2] = 4*(grill_m <> 1 & grill_m <> 2)
		outfield_flags[3] = 0
		outfield_flags[4] = 4*(gs_handle_typ_m = 0)
		outfield_flags[5] = 4*(gs_handle_typ_m = 0)


		for i = 1 to 5
			ui_outfield st_outfields[i], x5, y, xEnd-x5-2, 15, outfield_flags[i]
			y = y + 19
			ui_infield st_infields[i], x6, y-3, xEnd-x6, 24
			y = y + dy
		next i
	endif
endif


! -----------------------------------------------------------------------------
! Door Leaf 1 Tabpage
! -----------------------------------------------------------------------------

if idTab_DoorLeaf1 > 0 then
	ui_page idTab_DoorLeaf1

	if gs_ui_sub_tabpage < 1 then gs_ui_sub_tabpage = 1
	if gs_ui_sub_tabpage > 2 then gs_ui_sub_tabpage = 2

	ui_infield{3} "gs_ui_sub_tabpage", 380,0, 64,25,
		4, 19, 2, 1,			! ui_sub_tabpage.png
		0,0, 28,21,
		1, "",	1,
		2, "",	2

	if gs_ui_sub_tabpage = 1 then
		x1 = 150
		x2 = 230
		x3 = 295
		x4 = 300
		x5 = 360
		dy = 20
		xEnd = 440
		ui_infield{3} "grill_m1", 10, 40, 131, 220,
			1,"CW_DoorWindow_Types(13)", 9, 3,
			55,105,44,65,
			1, `Без Раскладки`, 0,
			2, `Г/В-Раскладка`, 1,
			3, `Редактируемая Раскладка`, 2,
			4, `Разделение Средником`, 3,
			5, `Тип Стекла 1`, 4,
			6, `Тип Стекла 2`, 5,
			7, `Тип Стекла 3`, 6,
			8, `Редактируемое Остекление`, 7,
			9, `Специальное Полотно Двери`, 99

		st_infields[1] = "gs_han_height1"
		st_infields[2] = "gs_han_pos1"
!		st_infields[3] = "gs_handle_typ1"
		st_infields[4] = "gs_cust_handle1"
		leaf = 1
		outfieldFlag = 4*(gs_handle_typ_m1 = 0)
		gosub "handle"

		ui_style 0, 1
		x6 = xEnd-60
		x5 = 330

		if grill_m1 = 99 then
			ui_outfield `Имя Полотна Двери`, x1, y+20, x3-x1-5, 18
			ui_infield "gs_cust_panel1", x3+5, y+20, xEnd-x3-5, 18
		else
			if grill_m1 >= 4 and grill_m1 <= 6 then
				ui_style 0, 1
				ui_outfield `Рама Полотна`, x1, y, x3-x1-2, 18
				ui_style 0, 0
				y = y + dy
				ui_outfield `Ширина`, x1, y, x2-x1-2, 18
				ui_infield "sashWidth1", x2, y-2, x3-x2, 18
				y = y + dy
				y = y + dy
				ui_separator x1, y, xEnd, y
				y = y + 5
			endif
			if grill_m1 = 7 then
				dy = 21
				x6 = xEnd-65
				ui_style 0, 1
				ui_outfield `Расположение Стекла`, x1, y, x3-x1-2, 18
				ui_style 0, 0
				y = y + dy
				ui_outfield `Слева`, x1, y, x2-x1-2, 18
				ui_infield "glassFromLeft1", x2, y-2, x3-x2, 18

				ui_outfield `Сверху`, x4, y, x6-x4-2, 18
				ui_infield "glassFromTop1", x6, y-2, xEnd-x6, 18

				y = y + dy
				ui_outfield `Справа`, x1, y, x2-x1-2, 18
				ui_infield "glassFromRight1", x2, y-2, x3-x2, 18

				ui_outfield `Снизу`, x4, y, x6-x4-2, 18
				ui_infield "glassFromBottom1", x6, y-2, xEnd-x6, 18

				y = y + dy
				ui_separator x1, y, xEnd, y
				y = y + 5
			endif
			if grill_m1 = 0 or (grill_m1 >= 3 and grill_m1 <= 7) then
				dy = 20

				ui_style 0, 1
				ui_outfield `Угол Открывания`, x1, y, x3-x1-2, 18
				ui_style 0, 0

				y = y + dy
				ui_outfield `2D`, x1, y, x2-x1-2, 18
				ui_infield "opAngle_2d1", x2, y-2, x3-x2, 18
				y = y + dy

				ui_outfield `3D`, x1, y, x2-x1-2, 18
				ui_infield "opAngle_horizontal", x2, y-2, x3-x2, 18
			endif
			if grill_m1 = 1 or grill_m1 = 2 then
				x6 = xEnd-60
				ui_style 0, 1
				ui_outfield `Ширина Раскладки`, x1, y, x3-x1-2, 18
				ui_style 0, 0

				ui_outfield `Положение Раскладки`, x4, y, xEnd-x4, 15
				y = y + dy
				UI_INFIELD{3}	"grillPosition_m1",	x4+30,	y-5, xEnd-x4-30, 20,
						8, "", 3, 1,
						0, 0, 0, 0,
						1, `Наружу`, 1,
						2, `Внутри`, 2,
						3, `Посередине`, 3

				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18
				ui_infield "grillWidth_hor_1", x2, y-2, x3-x2, 18
				y = y + dy
				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18
				ui_infield "grillWidth_vert_1", x2, y-2, x3-x2, 18

				ui_outfield `Толщина`, x4, y, x6-x4-2, 18
				ui_infield "grillThk1", x6, y-2, xEnd-x6, 18

				y = y + dy
				ui_separator x1, y, xEnd, y
				y = y + 5
				x6 = xEnd-65

				ui_style 0, 1
				ui_outfield `Количество Стекол`, x1, y, x3-x1-2, 18
				ui_outfield `Угол Открывания`, x4, y, 440-x4, 18
				ui_style 0, 0

				y = y + dy
				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18
				ui_infield "nVertPanel_1", x2, y-2, x3-x2, 18

				ui_outfield `2D`, x4, y, x6-x4-2, 18
				ui_infield "opAngle_2d1", x6, y-2, xEnd-x6, 18
				y = y + dy

				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18
				ui_infield "nHorPanel_1", x2, y-2, x3-x2, 18

				ui_outfield `3D`, x4, y, x6-x4-2, 18
				ui_infield "opAngle_horizontal", x6, y-2, xEnd-x6, 18
			endif
		endif
	else
		x1 = 10
		x2 = 220
		xEnd = 380
		dy = 28
		y = 35

		st_outfields[1] = `Полотно`
		st_outfields[2] = `Сетка`
		st_outfields[3] = `Остекление`
		st_outfields[4] = `Ручка`
		st_outfields[5] = `Аксессуар Ручки`

		st_infields[1] = "matSash1"
		st_infields[2] = "matGrill1"
		st_infields[3] = "matGlass1"
		st_infields[4] = "matHandle1"
		st_infields[5] = "matHandleAcc1"

		outfield_flags[1] = 4 * 0
		outfield_flags[2] = 4 * (grill_m1 <> 1 and grill_m1 <> 2)
		outfield_flags[3] = 4 * 0
		outfield_flags[4] = 4 * (gs_handle_typ_m1 = 0)
		outfield_flags[5] = 4 * (gs_handle_typ_m1 = 0)

		gosub "materials2"
	endif
endif


! -----------------------------------------------------------------------------
! Door Leaf 2 Tabpage
! -----------------------------------------------------------------------------

if idTab_DoorLeaf2 > 0 then
	ui_page idTab_DoorLeaf2

	if gs_ui_sub_tabpage < 1 then gs_ui_sub_tabpage = 1
	if gs_ui_sub_tabpage > 2 then gs_ui_sub_tabpage = 2

	ui_infield{3} "gs_ui_sub_tabpage", 380,0, 64,25,
		4, 19, 2, 1,			! ui_sub_tabpage.png
		0,0, 28,21,
		1, "",	1,
		2, "",	2

	if gs_ui_sub_tabpage = 1 then
		x1 = 150
		x2 = 230
		x3 = 295
		x4 = 300
		x5 = 360
		dy = 20
		xEnd = 440
		ui_infield{3} "grill_m2", 10, 40, 131, 220,
			1,"CW_DoorWindow_Types(13)", 9, 3,
			55,105,44,65,
			1, `Без Раскладки`, 0,
			2, `Г/В-Раскладка`, 1,
			3, `Редактируемая Раскладка`, 2,
			4, `Разделение Средником`, 3,
			5, `Тип Стекла 1`, 4,
			6, `Тип Стекла 2`, 5,
			7, `Тип Стекла 3`, 6,
			8, `Редактируемое Остекление`, 7,
			9, `Специальное Полотно Двери`, 99

		st_infields[1] = "gs_han_height2"
		st_infields[2] = "gs_han_pos2"
!		st_infields[3] = "gs_handle_typ2"
		st_infields[4] = "gs_cust_handle2"
		leaf = 2
		outfieldFlag = 4*(gs_handle_typ_m2 = 0)
		gosub "handle"

		ui_style 0, 1
		x6 = xEnd-60
		x5 = 330

		if grill_m2 = 99 then
			ui_outfield `Имя Полотна Двери`, x1, y+20, x3-x1-5, 18
			ui_infield "gs_cust_panel2", x3+5, y+20, xEnd-x3-5, 18
		else
			if grill_m2 >= 4 and grill_m2 <= 6 then
				ui_style 0, 1
				ui_outfield `Рама Полотна`, x1, y, x3-x1-2, 18
				ui_style 0, 0
				y = y + dy
				ui_outfield `Ширина`, x1, y, x2-x1-2, 18
				ui_infield "sashWidth2", x2, y-2, x3-x2, 18
				y = y + dy
				y = y + dy
				ui_separator x1, y, xEnd, y
				y = y + 5
			endif
			if grill_m2 = 7 then
				dy = 21
				x6 = xEnd-65
				ui_style 0, 1
				ui_outfield `Расположение Стекла`, x1, y, x3-x1-2, 18
				ui_style 0, 0
				y = y + dy
				ui_outfield `Слева`, x1, y, x2-x1-2, 18
				ui_infield "glassFromLeft2", x2, y-2, x3-x2, 18

				ui_outfield `Сверху`, x4, y, x6-x4-2, 18
				ui_infield "glassFromTop2", x6, y-2, xEnd-x6, 18

				y = y + dy
				ui_outfield `Справа`, x1, y, x2-x1-2, 18
				ui_infield "glassFromRight2", x2, y-2, x3-x2, 18

				ui_outfield `Снизу`, x4, y, x6-x4-2, 18
				ui_infield "glassFromBottom2", x6, y-2, xEnd-x6, 18

				y = y + dy
				ui_separator x1, y, xEnd, y
				y = y + 5
			endif
			if grill_m2 = 0 or (grill_m2 >= 3 and grill_m2 <= 7) then
				dy = 20

				ui_style 0, 1
				ui_outfield `Угол Открывания`, x1, y, x3-x1-2, 18
				ui_style 0, 0

				y = y + dy
				ui_outfield `2D`, x1, y, x2-x1-2, 18
				ui_infield "opAngle_2d2", x2, y-2, x3-x2, 18
				y = y + dy

				ui_outfield `3D`, x1, y, x2-x1-2, 18
				ui_infield "opAngle_horizontal2", x2, y-2, x3-x2, 18
			endif
			if grill_m2 = 1 or grill_m2 = 2 then
				x6 = xEnd-60
				ui_style 0, 1
				ui_outfield `Ширина Раскладки`, x1, y, x3-x1-2, 18
				ui_style 0, 0

				ui_outfield `Положение Раскладки`, x4, y, xEnd-x4, 15
				y = y + dy
!				ui_infield "grillPosition2", x4+30, y-5, xEnd-x4-30, 18
				UI_INFIELD{3}	"grillPosition_m2",	x4+30,	y-5, xEnd-x4-30, 20,
						8, "", 3, 1,
						0, 0, 0, 0,
						1, `Наружу`, 1,
						2, `Внутри`, 2,
						3, `Посередине`, 3

				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18
				ui_infield "grillWidth_hor_2", x2, y-2, x3-x2, 18
				y = y + dy
				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18
				ui_infield "grillWidth_vert_2", x2, y-2, x3-x2, 18

				ui_outfield `Толщина`, x4, y, x6-x4-2, 18
				ui_infield "grillThk2", x6, y-2, xEnd-x6, 18

				y = y + dy
				ui_separator x1, y, xEnd, y
				y = y + 5
				x6 = xEnd-65

				ui_style 0, 1
				ui_outfield `Количество Стекол`, x1, y, x3-x1-2, 18
				ui_outfield `Угол Открывания`, x4, y, 440-x4, 18
				ui_style 0, 0

				y = y + dy
				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18
				ui_infield "nVertPanel_2", x2, y-2, x3-x2, 18

				ui_outfield `2D`, x4, y, x6-x4-2, 18
				ui_infield "opAngle_2d2", x6, y-2, xEnd-x6, 18
				y = y + dy

				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18
				ui_infield "nHorPanel_2", x2, y-2, x3-x2, 18

				ui_outfield `3D`, x4, y, x6-x4-2, 18
				ui_infield "opAngle_horizontal2", x6, y-2, xEnd-x6, 18
			endif
		endif
	else
		x1 = 10
		x2 = 220
		xEnd = 380
		dy = 28
		y = 35

		st_outfields[1] = `Полотно`
		st_outfields[2] = `Сетка`
		st_outfields[3] = `Остекление`
		st_outfields[4] = `Ручка`
		st_outfields[5] = `Аксессуар Ручки`

		st_infields[1] = "matSash2"
		st_infields[2] = "matGrill2"
		st_infields[3] = "matGlass2"
		st_infields[4] = "matHandle2"
		st_infields[5] = "matHandleAcc2"

		outfield_flags[1] = 4*gs_bSameMaterials
		outfield_flags[2] = 4*((grill_m2 <> 1 and grill_m2 <> 2) or gs_bSameMaterials)
		outfield_flags[3] = 4*gs_bSameMaterials
		outfield_flags[4] = 4*((gs_handle_typ_m2 = 0) or gs_bSameMaterials)
		outfield_flags[5] = 4*((gs_handle_typ_m2 = 0) or gs_bSameMaterials)

		gosub "materials2"
	endif
endif


! -----------------------------------------------------------------------------
! Window Sash Tabpage
! -----------------------------------------------------------------------------

if idTab_WindowSash > 0 then
	ui_page idTab_WindowSash

	if gs_ui_sub_tabpage < 1 then gs_ui_sub_tabpage = 1
	if gs_ui_sub_tabpage > 2 then gs_ui_sub_tabpage = 2

	ui_infield{3} "gs_ui_sub_tabpage", 380,0, 64,25,
		4, 19, 2, 1,			! ui_sub_tabpage.png
		0,0, 28,21,
		1, "",	1,
		2, "",	2

	if gs_ui_sub_tabpage = 1 then
		x1 = 155
		x2 = 300
		y = 40
		dy = 24
		xEnd = 440
		ui_infield "grill", 10, 40, 131, 220,
			1,"Window_Types(13)",6,2,
			55,105,44,65,
			1, `Без Раскладки`,
			3, `Г/В-Раскладка`,
			4, `Редактируемая Раскладка`,
			5, `Специальная Створка`

		ui_style 0, 1

		if grill_m = 99 then
			ui_outfield `Имя Створки Окна`, x1, y+20, x2-x1-5, 18
			ui_infield "gs_cust_panel", x2, y+20, xEnd-x2, 18
		else
			outfieldFlag = 0
			if (grill_m <> 1 & grill_m <> 2) then outfieldFlag = 4
			if iPanelType = PANEL_WINDOW then
				ui_style 0, 1
				ui_outfield `Количество Стекол`, x1, y, x2-x1-2, 18
				ui_style 0, 0
				y = y + dy

				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18, outfieldFlag
				ui_infield "nVertPanel_1", x2, y, 60, 18
				y = y + dy

				ui_style 0, 0
				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18, outfieldFlag
				ui_infield "nHorPanel_1", x2, y, 60, 18
				y = y + dy

				ui_separator x1, y+5, 440, y+5
				y = y + 15

				ui_style 0, 1
				ui_outfield `Ширина Раскладки`, x1, y, x2-x1-2, 18
				y = y + dy

				ui_style 0, 0
				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18, outfieldFlag
				ui_infield "grillWidth_hor_1", x2, y, 60, 18
				y = y + dy

				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18, outfieldFlag
				ui_infield "grillWidth_vert_1", x2, y, 60, 18
			else			!window 2
				x1 = 155
				x2 = 230
				x3 = 290

				x4 = 305
				x5 = 380
				xEnd = 440
				ui_style 0, 1
				ui_outfield `Стекол Слева`, x1, y, x4-x1-2, 18
				ui_outfield `Стекол Справа`, x4, y, xEnd-x4-2, 18
				ui_style 0, 0
				y = y + dy

				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18, outfieldFlag
				ui_infield "nVertPanel_1", x2, y, x3-x2, 18

				ui_outfield `Вертик.`, x4, y, x5-x4-2, 18, outfieldFlag
				ui_infield "nVertPanel_2", x5, y, xEnd-x5, 18
				y = y + dy

				ui_style 0, 0
				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18, outfieldFlag
				ui_infield "nHorPanel_1", x2, y, x3-x2, 18

				ui_outfield `Горизонт.`, x4, y, x5-x4-2, 18, outfieldFlag
				ui_infield "nHorPanel_2", x5, y, xEnd-x5, 18

				y = y + dy
				ui_separator x1, y+5, 440, y+5
				y = y + 15

				ui_style 0, 1
				ui_outfield `Ширина Сетки Слева`, x1, y, x4-x1-2, 18
				ui_outfield `Ширина Сетки Справа`, x4, y, xEnd-x4-2, 18
				ui_style 0, 0
				y = y + dy

				ui_style 0, 0
				ui_outfield `Горизонт.`, x1, y, x2-x1-2, 18, outfieldFlag
				ui_infield "grillWidth_hor_1", x2, y, x3-x2, 18

				ui_outfield `Горизонт.`, x4, y, x5-x4-2, 18, outfieldFlag
				ui_infield "grillWidth_hor_2", x5, y, xEnd-x5, 18
				y = y + dy

				ui_outfield `Вертик.`, x1, y, x2-x1-2, 18, outfieldFlag
				ui_infield "grillWidth_vert_1", x2, y, x3-x2, 18

				ui_outfield `Вертик.`, x4, y, x5-x4-2, 18, outfieldFlag
				ui_infield "grillWidth_vert_2", x5, y, xEnd-x5, 18
				x2 = 305
			endif
			y = y + dy
			ui_separator x1, y+5, 440, y+5
			y = y + 15

			ui_outfield `Толщина`, x1, y, x2-x1-2, 18, outfieldFlag
			ui_infield "grillThk", x2, y, 65, 18
			y = y + dy

			ui_outfield `Положение Раскладки`, x1, y, x2-x1-2, 18, outfieldFlag
!			ui_infield "grillPosition", x2, y, 115, 18
			UI_INFIELD{3}	"grillPosition_m",	x2, y, 115, 20,
					8, "", 3, 1,
					0, 0, 0, 0,
					1, `Наружу`, 1,
					2, `Внутри`, 2,
					3, `Посередине`, 3
		endif
	else
		x1 = 10
		x2 = 40
		x3 = 170
		x4 = 212
		x5 = 230
		x6 = 260
		x7 = 290
		x8 = 398
		xEnd = 440

		y = y0
		dy = 26

		st_outfields[1] = `Перо Створки`
		st_outfields[2] = `Тип Штриховки`
		st_outfields[3] = `Перо Штриховки`
		st_outfields[4] = `Перо Фона`
		st_outfields[5] = `Перо Остекления`

		st_infields[1] = "penSymbol"
		st_infields[2] = "fillSash"
		st_infields[3] = "fillPenSash"
		st_infields[4] = "fillPenBgSash"
		st_infields[5] = "penGlass"

		gosub "attributes2"

		y = y0
		x5 = 230
		x6 = 260
		x7 = 290
		x8 = 398

		ui_pict 21, x5, y-1, 13, 17, 1			!"ui_fill_type"
		ui_outfield `Тип Штриховки Видимых Поверхностей`, x6, y, xEnd-x6-2, 18
		y = y + dy
		ui_infield "fillCover", x7, y-2, xEnd-x7, 22
		y = y + dy + 5

		ui_pict 22, x5, y-1, 24, 17, 1			!"ui_fill_pen"
		ui_outfield `Перо Штриховки Видимых Поверхностей`, x6, y, x8-x6-2, 18
		ui_infield "fillPenCover",  x8, y-2, xEnd-x8, 22
		y = y + dy

		ui_pict 23, x5, y-1, 24, 17, 1			!"ui_back_pen"
		ui_outfield `Перо Фона`, x6, y, x8-x6-2, 18
		ui_infield "fillPenBgCover",  x8, y-2, xEnd-x8, 22

		y = y + dy
		ui_separator x5, y, xEnd, y
		y = y + 10

		st_outfields[1] = `Створка`
		st_outfields[2] = `Сетка`
		st_outfields[3] = `Остекление`

		st_infields[1] = "matSash"
		st_infields[2] = "matGrill"
		st_infields[3] = "matGlass"

		outfield_flags[1] = 0
		outfield_flags[2] = 4*(grill_m <> 1 & grill_m <> 2)
		outfield_flags[3] = 0
		nMat = 3
		dy  = 26
		x6 = 310
		gosub "materials"
	endif
endif


! -----------------------------------------------------------------------------
! Additional Leaf Settings Tabpage kész
! -----------------------------------------------------------------------------

if idTab_AdditionalLeaf > 0 then
	ui_page idTab_AdditionalLeaf

	x1 = 10
	x2 = 40
	x3 = 170
	x4 = 212
	dy = 26
	y = y0
	st_outfields[1] = `Перо Полотна`
	st_outfields[2] = `Тип Штриховки`
	st_outfields[3] = `Перо Штриховки`
	st_outfields[4] = `Перо Фона`
	st_outfields[5] = `Перо Остекления`

	st_infields[1] = "penSash"
	st_infields[2] = "fillSash"
	st_infields[3] = "fillPenSash"
	st_infields[4] = "fillPenBgSash"
	st_infields[5] = "penGlass"

	gosub "attributes2"
endif


! -----------------------------------------------------------------------------
! List Settings Tabpage
! -----------------------------------------------------------------------------

if idTab_ListSettings > 0 then
	ui_page idTab_ListSettings

	dx = 222
	ui_style 0, 0
	ui_separator dx, 40, dx, 266

! --- 1. column ---

	dy = 45

	ui_outfield `Цена`, 10, dy, 120, 20
	ui_infield "gs_list_cost", 131, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Производитель`, 10, dy, 120, 20
	ui_infield "gs_list_manufacturer", 131, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Расположение`, 10, dy, 120, 20
	ui_infield "gs_list_location", 131, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Аксессуары`, 10, dy, 120, 20
	ui_infield "gs_list_accessories", 131, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Стекло`, 10, dy, 120, 20
	ui_infield "gs_list_glazing", 131, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Тип Операции`, 10, dy, 120, 20
	ui_infield "gs_list_optype", 131, dy-5, 80, 20
	dy = dy + 18

	ui_separator 7, dy, dx-3, dy
	dy = dy + 9

	ui_outfield `Данные о Перемычке`, 10, dy, 120, 20
	ui_infield "gs_list_headdet", 131, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Данные об Откосах`, 10, dy, 120, 20
	ui_infield "gs_list_jambdet", 131, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Деталь Отлива`, 10, dy, 120, 20
	ui_infield "gs_list_silldet", 131, dy-5, 80, 20
	dy = dy + 18

! --- 2. column ---

	dy = 45
	dx = dx + 10

	ui_outfield `Общая Площадь Остекления`, dx, dy, 120, 20
	ui_infield "gs_list_glassarea", dx+121, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Общий Периметр Остекления`, dx, dy, 120, 20
	ui_infield "gs_list_glassperimeter", dx+121, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `U-значение`, dx, dy, 120, 20
	ui_infield "gs_list_heattransfer", dx+121, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Огнестойкость`, dx, dy, 120, 20
	ui_infield "gs_list_firerating", dx+121, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Шумозащита`, dx, dy, 120, 20
	ui_infield "gs_list_acousticrating", dx+121, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Вентиляция`, dx, dy, 120, 20
	ui_infield "gs_list_ventilation", dx+121, dy-5, 80, 20
	dy = dy + 18

	ui_separator dx-3, dy, 444, dy
	dy = dy + 9

	ui_outfield `Спец. Значение 1`, dx, dy, 120, 20
	ui_infield "gs_list_custom1", dx+121, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Спец. Значение 2`, dx, dy, 120, 20
	ui_infield "gs_list_custom2", dx+121, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Спец. Значение 3`, dx, dy, 120, 20
	ui_infield "gs_list_custom3", dx+121, dy-5, 80, 20
	dy = dy + 21

	ui_outfield `Спец. Значение 4`, dx, dy, 120, 20
	ui_infield "gs_list_custom4", dx+121, dy-5, 80, 20
	dy = dy + 21
endif

! =============================================================================
! Opening and MVO Override Settings Tabpage
! =============================================================================
if idTab_OpeningSettings > 0 then

	ui_page idTab_OpeningSettings
	call "OpeningOptions" parameters	bWindow					= bWindow,
										iLineShapeCategory		= iLineShapeCategory,
										iLineShapeSwingEnable	= iLineShapeSwingEnable,
										iLineShapeSlidingEnable	= iLineShapeSlidingEnable,
										gs_leaf_optype_m		= gs_leaf_optype_m,
										b2ColumnsOnOplineUI		= b2ColumnsOnOplineUI,
										bHideOplineStyle		= bHideOplineStyle,
										bLockOplineStyle		= bLockOplineStyle,
										bDisable2DOverride		= bDisable2DOverride,
										bDisable3DOverride		= bDisable3DOverride,
										bDisableSwingType		= bDisableSwingType,
										iOpeningParamType		= iOpeningParamType,
										bOverride_MVO_3D		= bOverride_MVO_3D,
										bOverride_MVO_2D		= bOverride_MVO_2D,
										or_bOplines3d			= or_bOplines3d,
										or_iOpLineType3dIn		= or_iOpLineType3dIn,
										or_iOpLineType3dOut		= or_iOpLineType3dOut,
										or_iOplineStyle			= or_iOplineStyle,
										or_opLinePen			= or_opLinePen,
										or_iSwingType			= or_iSwingType,
										or_iSlidingType			= or_iSlidingType,
										bEnableSecondaryOpLineTypes = 0,
										pageStartY				= 35


endif


end customPageIdx[1],
	customPageIdx[2],
	customPageIdx[3],
	customPageIdx[4],
	customPageIdx[5]



"attributes":
!	x2 = 40
!	x3 = 170
!	x4 = 212
!	dy = 24

	ui_pict 20, x1, y-1, 26, 17, 1			!"ui_frame_pen"
	ui_outfield st_outfields[1], x2, y, x3-x2-2, 18
	ui_infield st_infields[1], x3, y-2, x4-x3, 22
	y = y + dy

	ui_pict 21, x1, y-1, 13, 17, 1			!"ui_fill_type"
	ui_outfield st_outfields[2], x2, y, x3-x2-2-65, 18
	ui_infield st_infields[2], x3-65, y-2, x4-x3+65, 22
	y = y + dy

	ui_pict 22, x1, y-1, 24, 17, 1			!"ui_fill_pen"
	ui_outfield st_outfields[3], x2, y, x3-x2-2, 18
	ui_infield st_infields[3],  x3, y-2, x4-x3, 22
	y = y + dy

	ui_pict 23, x1, y-1, 24, 17, 1			!"ui_back_pen"
	ui_outfield st_outfields[4], x2, y, x3-x2-2, 18
	ui_infield st_infields[4],  x3, y-2, x4-x3, 22
return

"attributes2":
	ui_separator 222, 35, 222, 260
	y = 35
	dy = 27
	ui_style 0, 1
	ui_outfield `Реквизиты`, x1, y, x4-x1, 20
	y = y + dy

	ui_style 0, 0
	ui_pict 20, x1, y-1, 26, 17, 1			!"ui_frame_pen"
	ui_outfield st_outfields[1], x2, y, x3-x2-2, 18
	ui_infield st_infields[1], x3, y-2, x4-x3, 22
	y = y + dy

	ui_pict 21, x1, y-1, 13, 17, 1			!"ui_fill_type"
	ui_outfield st_outfields[2], x2, y, x4-x2, 18
	y = y + dy

	ui_infield st_infields[2], x1 + 60, y-2, x4-x1-60, 22
	y = y + dy

	ui_pict 22, x1, y-1, 24, 17, 1			!"ui_fill_pen"
	ui_outfield st_outfields[3],  x2, y, x3-x2-2, 18
	ui_infield st_infields[3], x3, y-2, x4-x3, 22
	y = y + dy

	ui_pict 23, x1, y-1, 24, 17, 1			!"ui_back_pen"
	ui_outfield st_outfields[4], x2, y, x3-x2-2, 18
	ui_infield st_infields[4], x3, y-2, x4-x3, 22
	y = y + dy

	ui_separator x1, y+10, 222-x1, y+10
	y = y + dy

	ui_pict 20, x1, y-1, 26, 17, 1			!"ui_frame_pen"
	ui_outfield st_outfields[5],  x2, y, x3-x2-2, 18
	ui_infield st_infields[5], x3, y-2, x4-x3, 22
return

"frameElement":
!	x2 = 40
!	x3 = 170
!	x4 = 212
!	dy = 24
!	x5 = 230
!	x6 = 310
!	xEnd = 440

	ui_style 0,1
	ui_outfield `Соединения Коробки`, x5, y0, xEnd-x5-2, 18
	ui_style 0,0
	y = y0 + dy
!	ui_infield "gs_SashText_typ", x6, y, xEnd-x6, 22
	UI_INFIELD{3}	"gs_SashText_typ_m", x6, y, xEnd-x6, 20,
			8, "", 2, 1,
			0, 0, 0, 0,
			1, `Угловое Соединение`, 1,
			2, `Соединение Встык`, 2

	y = y + 1.5*dy
	ui_separator x5, y, xEnd, y
	y = y + 0.5*dy
return


"materials":
!	x5 = 230
!	x6 = 310
!	xEnd = 440
!	dy = 27

	ui_style 0,1
	ui_outfield `Покрытия`, x5, y, xEnd-x5-2, 18
	ui_style 0,0
	y = y + dy

	for i = 1 to nMat
		ui_outfield st_outfields[i], x5, y, x6-x5-2, 18, outfield_flags[i]
		ui_infield st_infields[i], x6, y-3, xEnd-x6, 24
		y = y + dy
	next i
return

"materials2":
	ui_style 0,1
	ui_outfield `Покрытия`, x1, y, x2-x1-2, 18
	ui_style 0,0
	y = y + dy

	ui_infield{3} "gs_bSameMaterials", x1, y, xEnd-x1, 18,
			7, "",
			2,
			1, 20, 20, 20, 20,
			0, `Одинаковые Покрытия Обоих Полотен`, 0,
			1, `Одинаковые Покрытия Обоих Полотен`, 1

	y = y + dy
	for i = 1 to 5
		ui_outfield st_outfields[i], x1, y, x2-x1-2, 15, outfield_flags[i]
		ui_infield st_infields[i], x2, y-3, xEnd-x2, 24
		y = y + dy
	next i
return


"handle":
!!!		x1 = 150
!!!		x2 = 230
!!!		x3 = 295
!!!		x4 = 300
!!!		dy = 20
!!!		xEnd = 440

	ui_style 0, 1
	ui_outfield `Ручка`, x1, y0, x3-x1-2, 15
	ui_style 0, 0
	y = y0 + dy

	ui_outfield `Высота`, x1, y, x2-x1-2, 15, outfieldFlag
	ui_infield st_infields[1], x2, y-2, x3-x2, 18
	y = y + dy

	ui_outfield `Расположение`, x1, y, x2-x1-2, 15, outfieldFlag
	ui_infield st_infields[2], x2, y-2, x3-x2, 18

  yHandle = y0
  if iPanelType = PANEL_DOOR2 or iPanelType = PANEL_DOOR_SLIDING4 then
    yHandle = y0-4
  endif
  
	if leaf = 0 then
		ui_infield{3} "gs_handle_typ", x4, yHandle, xEnd-x4, 64,
				2, "Handle_Types_N(14)", 18, 6,
				60, 60, 50, 50,
				16,stHandleType[1],stHandleType[1],					!!Off
				1,stHandleType[2],stHandleType[2],					!!Style 1
				2,stHandleType[3],stHandleType[3],					!!Style 2
				3,stHandleType[4],stHandleType[4],					!!Style 3
				4,stHandleType[5],stHandleType[5],					!!Style 4
				5,stHandleType[6],stHandleType[6],					!!Style 5
				6,stHandleType[7],stHandleType[7],					!!Style 6
				7,stHandleType[8],stHandleType[8],					!!Style 7
				8,stHandleType[9],stHandleType[9],					!!Style 8
				9,stHandleType[10],stHandleType[10],				!!Style 9
				12,stHandleType[11],stHandleType[11],				!!Style 10
				13,stHandleType[12],stHandleType[12],				!!Style 11
				14,stHandleType[13],stHandleType[13],				!!Style 12
				15,stHandleType[14],stHandleType[14],				!!Style 13
				10,stHandleType[16],stHandleType[16],				!!Style 14
				11,stHandleType[17],stHandleType[17],				!!Style 15
				17,stHandleType[15],stHandleType[15]				!!Custom Handle
	else
		if leaf = 1 then
			ui_infield{3} "gs_handle_typ1", x4, yHandle, xEnd-x4, 64,
					2, "Handle_Types_N(14)", 18, 6,
					60, 60, 50, 50,
					16,stHandleType[1],stHandleType[1],					!!Off
					1,stHandleType[2],stHandleType[2],					!!Style 1
					2,stHandleType[3],stHandleType[3],					!!Style 2
					3,stHandleType[4],stHandleType[4],					!!Style 3
					4,stHandleType[5],stHandleType[5],					!!Style 4
					5,stHandleType[6],stHandleType[6],					!!Style 5
					6,stHandleType[7],stHandleType[7],					!!Style 6
					7,stHandleType[8],stHandleType[8],					!!Style 7
					8,stHandleType[9],stHandleType[9],					!!Style 8
					9,stHandleType[10],stHandleType[10],				!!Style 9
					12,stHandleType[11],stHandleType[11],				!!Style 10
					13,stHandleType[12],stHandleType[12],				!!Style 11
					14,stHandleType[13],stHandleType[13],				!!Style 12
					15,stHandleType[14],stHandleType[14],				!!Style 13
					10,stHandleType[16],stHandleType[16],				!!Style 14
					11,stHandleType[17],stHandleType[17],				!!Style 15
					17,stHandleType[15],stHandleType[15]				!!Custom Handle
		else
			ui_infield{3} "gs_handle_typ2", x4, yHandle, xEnd-x4, 64,
					2, "Handle_Types_N(14)", 18, 6,
					60, 60, 50, 50,
					16,stHandleType[1],stHandleType[1],					!!Off
					1,stHandleType[2],stHandleType[2],					!!Style 1
					2,stHandleType[3],stHandleType[3],					!!Style 2
					3,stHandleType[4],stHandleType[4],					!!Style 3
					4,stHandleType[5],stHandleType[5],					!!Style 4
					5,stHandleType[6],stHandleType[6],					!!Style 5
					6,stHandleType[7],stHandleType[7],					!!Style 6
					7,stHandleType[8],stHandleType[8],					!!Style 7
					8,stHandleType[9],stHandleType[9],					!!Style 8
					9,stHandleType[10],stHandleType[10],				!!Style 9
					12,stHandleType[11],stHandleType[11],				!!Style 10
					13,stHandleType[12],stHandleType[12],				!!Style 11
					14,stHandleType[13],stHandleType[13],				!!Style 12
					15,stHandleType[14],stHandleType[14],				!!Style 13
					10,stHandleType[16],stHandleType[16],				!!Style 14
					11,stHandleType[17],stHandleType[17],				!!Style 15
					17,stHandleType[15],stHandleType[15]				!!Custom Handle
		endif
	endif
	y = y + dy
	if iPanelType = PANEL_DOOR2 or iPanelType = PANEL_DOOR_SLIDING4 then
		ui_infield{3} "b2Handles", x1, y+2, xEnd-x1-1, 18,
					7, "",
					2,
					1, 20, 20, 20, 20,
					0, `Ручки на Обеих Дверях`, 0,
					1, `Ручки на Обеих Дверях`, 1

		y = y + dy + 2
	else
		y = y + dy
	endif
	ui_outfield `Имя Спец. Ручки`, x1, y, x3-x1-1, 15
	ui_infield st_infields[4], x4, y-2, xEnd-x4, 18
	y = y + dy
	ui_separator x1, y, xEnd, y
	y = y + 5
return

