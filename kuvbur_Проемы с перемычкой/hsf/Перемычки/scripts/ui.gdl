
if main_name = "" then 
	UI_dialog `Пар-ры перемычки`,444,340
	pId = 1
else
	pId = 903
endif
UI_PAGE pId, -1, "Перемычки"
sx = 0 : sy = 0
b_pg=444
sx=int(b_pg/vardim1(perem_qty_type))-20
n_use=0
for i=1 to 4
	UI_OUTFIELD	`Тип `+str("%.0",i),	sx-10,	sy,	30,15
	UI_INFIELD{3} perem_qty_type[i], sx, sy+18, 15, 15
	if perem_qty_type[i]>EPS then
		n_use=n_use+1
		UI_OUTFIELD	`Зазор`,	sx-int(b_pg/4)/2-10,	sy,	40,15
		UI_INFIELD{3} perem_zazor_type[i], sx-int(b_pg/4)+25, sy+18, 38, 15 UI_tooltip "Величина зазора в мм"
		if main_name<>"" and WALL_COMPS_NAME_<>"" then
			UI_OUTFIELD	`(`,sx-int(b_pg/4)/2+15,	sy+18,	3,15
			UI_INFIELD{3} perem_zazor_by_layer[i], sx-int(b_pg/4)+75, sy+18, 20, 15 UI_tooltip "Номер слоя для"
			UI_OUTFIELD	`)`,sx-int(b_pg/4)/2+40,	sy+18,	5,15
		endif
	endif
	sx=sx+int(b_pg/4)
next i
sx = 5 : sys = 40
if n_use<EPS then
	UI_OUTFIELD	`Перемычки не используются`,sx+130,	sys+60,	180,15
	end
endif
th_txt = "
hx = int((b_pg-5*n_use)/n_use)
hxf = hx-10

i=1
if perem_qty_type[i]>EPS then 
	gosub "t_1"
	sx=sx+hx+5
endif
i=2
if perem_qty_type[i]>EPS then
	gosub "t_2"
	sx=sx+hx+5
endif
i=3
if perem_qty_type[i]>EPS then
	gosub "t_3"
	sx=sx+hx+5
endif
i=4
if perem_qty_type[i]>EPS then
	gosub "t_4"
	sx=sx+hx+5
endif
UI_INFIELD	"perem_config", 5, 270+30, b_pg-10, 20 UI_tooltip "Строка конфигурации"

UI_PAGE pId+1, pId, "Общие параметры"
UI_BUTTON UI_LINK, "Версия "+version, 0,0,85,20,0,help_url

un_f = 44
un = un_f + 1
ui_listfield un_f, 0, 25, 444, 340
ui_listitem un, un_f, "use_spec", 1 : un = un + 1

ui_listitem un, un_f, "perem_marka", 0 : un = un + 1
ui_listitem un, un_f, "perem_mul", 0 : un = un + 1
ui_listitem un, un_f, "perem_reverse", 0 : un = un + 1

ui_listitem un, un_f, "", 0, "", "Сброс данных" : un = un + 1
ui_listitem un, un_f, "perem_pos_reset", 1 : un = un + 1
if not(use_spec) then 
	ui_listitem un, un_f, "perem_marka_reset", 1 : un = un + 1
	ui_listitem un, un_f, "perem_reset", 1 : un = un + 1
endif

ui_listitem un, un_f, "", 0, "", "Минимальное опирание" : un = un + 1
if perem_qty_type[1]>EPS then ui_listitem un, un_f, "perem_min_opir_1", 1 : un = un + 1
if perem_qty_type[2]>EPS then ui_listitem un, un_f, "perem_min_opir_2", 1 : un = un + 1
if perem_qty_type[3]>EPS then ui_listitem un, un_f, "perem_min_opir_3", 1 : un = un + 1
if perem_qty_type[4]>EPS then ui_listitem un, un_f, "perem_min_opir_4", 1 : un = un + 1
ui_listitem un, un_f, "", 0, "", "Материалы" : un = un + 1
ui_listitem un, un_f, "perem_empt_material", 1 : un = un + 1
ui_listitem un, un_f, "perem_utepl_spec", 1 : un = un + 1
if perem_qty_type[1]>EPS then ui_listitem un, un_f, "perem_material_1", 1 : un = un + 1
if perem_qty_type[2]>EPS then ui_listitem un, un_f, "perem_material_2", 1 : un = un + 1
if perem_qty_type[3]>EPS then ui_listitem un, un_f, "perem_material_3", 1 : un = un + 1
if perem_qty_type[4]>EPS then ui_listitem un, un_f, "perem_material_4", 1 : un = un + 1

if has_ARM then
	ui_listitem un, un_f, "", 0, "", "Параметры рядовых и монолитных перемычек" : un = un + 1
	ui_listitem un, un_f, "perem_concr", 1 : un = un + 1
	ui_listitem un, un_f, "perem_diam", 1 : un = un + 1
	ui_listitem un, un_f, "perem_shag_osn", 1 : un = un + 1
	ui_listitem un, un_f, "perem_class", 1 : un = un + 1
	if has_CONC then
		ui_listitem un, un_f, "perem_diam_dop", 1 : un = un + 1
		ui_listitem un, un_f, "perem_shag_dop", 1 : un = un + 1
		ui_listitem un, un_f, "perem_class_dop", 1 : un = un + 1
	endif
endif
if main_name="" then
	ui_listitem un, un_f, "", 0, "", "Спецификация" : un = un + 1
	ui_listitem un, un_f, "manual_elev", 1 : un = un + 1
	ui_listitem un, un_f, "n_elev", 1 : un = un + 1
endif

UI_PAGE pId+2, pId, "Подбор по нагрузке"
UI_BUTTON UI_LINK, "Версия "+version, 0,0,85,20,0,help_url

UI_STYLE 0, 0
sx = 10 : sy = 25
UI_OUTFIELD	`Высота стены над перемычкой, мм`,sx,	sy,	90,30
	UI_INFIELD	"perem_h_wall", sx+100, sy-5, 70, 15
	UI_INFIELD	"perem_h_type", sx+100, sy+15, 70, 15
sy = sy + 35
UI_OUTFIELD	`Плотность стены, кг/куб.м.`,sx,	sy,	80,30
	UI_INFIELD	"perem_dens_wall", sx+100, sy+10, 70, 15
sx = 190 : sy = 0
UI_OUTFIELD	`Нагрузка от плит, кг/м`,sx,	sy,	80,30
	UI_INFIELD	"perem_load_up", sx+100, sy+10, 70, 15
sy = sy + 30
UI_OUTFIELD	`Толщина стены (сумма толщин несущ. перем.), мм`,sx,	sy,	130,35
	UI_OUTFIELD	str("%.0mm",t_sum)+" мм", sx+140, sy+10, 80, 15
sy = sy + 30
UI_OUTFIELD	`Верхний предел подбора, кг/м`,sx,	sy,	80,30
	UI_INFIELD	"perem_nagr_range", sx+100, sy+10, 70, 15

sx = 0 : sy = 35*2+25
for i=1 to vardim1(perem_qty_type)
	if perem_qty_type[i]>EPS and perem_dlin[i]>EPS then
		UI_STYLE 0, 0
		ttxt = ""
		if perem_load[i][4]>perem_nagr_elem[i] then
			ttxt = ttxt + "!НАГРУЗКА!"
			UI_STYLE 0, 1
		endif
		if ac_wallhole_width>(perem_dlin[i]+perem_min_opir[i]*2) then
			ttxt = ttxt + "!КОРОТКАЯ!"
			UI_STYLE 0, 1
		endif
		if strlen(ttxt)=0 then
			if perem_podbor[i] = 1 then
				if perem_nagr_type[i]=NAGR_NO then ttxt = " по длине"
				if perem_nagr_type[i]<>NAGR_NO then ttxt = " по длине и нагрузке"
			else
				ttxt = " ручн. выбор"
			endif
		endif
		UI_GROUPBOX "Тип "+str("%.0",i) + " " + ttxt, sx, sy, 150, 27*7
		sy = sy + 20
		UI_INFIELD{3} perem_nagr_type[i], sx+10, sy, 130, 15, 8,"",3, 1,10,10,10,10,t_perem_nagr_type,t_perem_nagr_type, i_perem_nagr_type UI_tooltip "Несущий элемент"
		sy = sy + 40
		UI_STYLE 0, 0
		if i=1 then
			UI_INFIELD	"perem_profile_1", sx+5, sy, 80, 15
			UI_INFIELD	"perem_qty_by_type_1", sx+90, sy, 40, 15
			UI_INFIELD	"perem_podbor_1", sx+5, sy-20, 20, 15
		endif
		if i=2 then
			UI_INFIELD	"perem_profile_2", sx+5, sy, 80, 15
			UI_INFIELD	"perem_qty_by_type_2", sx+90, sy, 40, 15
			UI_INFIELD	"perem_podbor_2", sx+5, sy-20, 20, 15
		endif
		if i=3 then
			UI_INFIELD	"perem_profile_3", sx+5, sy, 80, 15
			UI_INFIELD	"perem_qty_by_type_3", sx+90, sy, 40, 15
			UI_INFIELD	"perem_podbor_3", sx+5, sy-20, 20, 15
		endif
		if i=4 then
			UI_INFIELD	"perem_profile_4", sx+5, sy, 80, 15
			UI_INFIELD	"perem_qty_by_type_4", sx+90, sy, 40, 15
			UI_INFIELD	"perem_podbor_4", sx+5, sy-20, 20, 15
		endif
		UI_OUTFIELD	`Автоподбор`,sx+25,	sy-20,80,15
		UI_OUTFIELD	`шт`,sx+130,	sy,18,15
		UI_STYLE 0, 1
		sy = sy + 18
		UI_OUTFIELD "Макс.нагрузка= "+ str("%.0",perem_nagr_elem[i])+ " кг/м", sx+3, sy, 145, 15
		sy = sy + 16
		UI_OUTFIELD "Расч.нагрузка= "+ str("%.2",perem_load[i][4])+ " кг/м", sx+3, sy, 145, 15
		sy = sy + 16
		UI_STYLE 1, 1
		UI_OUTFIELD str("%.0mm",perem_dlin[i]) + " x " + str("%.0mm",perem_t[i]) + " х " + str("%.0mm",perem_h[i]) + "(h)  " + str("%.1",perem_ves[i])+ " кг", sx+3, sy, 145, 15
		sy = sy + 16
		UI_OUTFIELD "Собств. вес ед. = "+str("%.2",1.1*(perem_ves[i]/perem_dlin[i]))+ " кг/м", sx+3, sy, 145, 15
		sy = sy + 16
		UI_OUTFIELD "От кладки = "+ str("%.2",perem_dens_wall*perem_load[i][3] * perem_load[i][2] * 1.1)+ " кг/м", sx+3, sy, 145, 15
		sy = sy + 16
		UI_OUTFIELD "1.1x" +str("%.1",perem_dens_wall)+ " x "+str("%.2",perem_load[i][3])+ "(t) x " + str("%.3",perem_load[i][2])+"(h)" , sx+3, sy, 145, 15
		sy = sy + 16
		if n_NAGR>0 then
			UI_OUTFIELD "От перекрытия = "+ str("%.2",1.2*(perem_load_up / n_NAGR))+ " кг/м", sx+3, sy, 145, 15
			sy = sy + 16
			UI_OUTFIELD "1.2 x "+str("%.2",perem_load_up)+ " / " + str("%.0",n_NAGR), sx+3, sy, 145, 15
		else
			UI_OUTFIELD "От перекрытия = 0 кг/м", sx+3, sy, 145, 15
		endif
		sx = sx + 160
		sy = 35*2+25
	endif
next i



goto 235
"t_1":
	sy = sys
	UI_GROUPBOX "Тип "+str("%.0",i), sx, sy, hx, 225+28
	sy = sy + 15 : UI_INFIELD	"perem_pos_1", sx+45, sy, hxf-70, 20 UI_tooltip "Позиция элемента"
				   UI_OUTFIELD	`Поз`,sx+20,	sy+3,	25,15
	dx=0 : if n_use<3 then dx = 95
	sy = sy + 23 : UI_INFIELD	"perem_dh_1", sx+23+dx, sy, hxf-40-dx, 20 UI_tooltip "Смещение по вертикали в мм"
				   UI_INFIELD	"perem_dhf_1", sx+5, sy+3, 15, 15 UI_tooltip "Сместить первый элемент?"
				   UI_INFIELD	"perem_dhe_1", sx+hxf-6, sy+3, 15, 15 UI_tooltip "Сместить последний элемент?"
	if dx>EPS then UI_OUTFIELD	`Смещение верт.`,sx+23,	sy+3,	dx-5,15
	sy = sy + 23
	dx=0 : if n_use<3 then dx = 50
	UI_INFIELD	"perem_type_1", sx+5+dx, sy, hxf-dx, 20 UI_tooltip "Тип перемычки "+str("%.0",i)
	if dx>EPS then UI_OUTFIELD	`Тип`,sx+5,	sy+3,	dx-5,15
	if perem_type[i]=iType_SB then
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_subtype_1", sx+5+dx, sy, hxf-dx, 20 UI_tooltip "Ограничение выбора"
		if dx>EPS then UI_OUTFIELD	`Подтип`,sx+5,	sy+3,	dx-5,15
		dx=28 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_t_1", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ ширины в мм"
		ttx=`B,мм` : if n_use<3 then ttx=`Ширина`
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		ttx=`Н,мм` : if n_use<3 then ttx=`Высота`
		sy = sy + 23 : UI_INFIELD	"perem_h_1", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ высоты в мм"
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		sy = sy + 23 : UI_INFIELD	"perem_podbor_1", sx+5, sy, 15, 15 UI_tooltip "Автоподбор"
		ttx=`Авто` : if n_use<3 then ttx=`Автоподбор`
					   UI_OUTFIELD	ttx,sx+23,	sy+0,	25+(n_use<3)*35,15
		UI_INFIELD{3} perem_nagr_type[i], sx+50+(n_use<3)*35, sy, 50+(n_use<3)*35, 15, 8,"",3, 1,10,10,10,10,t_perem_nagr_type,t_perem_nagr_type, i_perem_nagr_type UI_tooltip "Несущий элемент"
		sy = sy + 23 : UI_INFIELD	"perem_profile_1", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_qty_by_type_1", sx+5+dx, sy, hxf-60-dx, 20 UI_tooltip "Кол-во элементов"
					   UI_OUTFIELD	`шт`,sx+hxf-52,	sy+3,	20,15
		if dx>EPS then UI_OUTFIELD	`Кол-во`,sx+5,	sy+3,	dx-5,15
		if main_name<>"" and WALL_COMPS_NAME_<>"" then
			UI_OUTFIELD	`(`,sx+hxf-35,	sy+3,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy+3, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy+3,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_CONC or perem_type[i]=iType_ARM or perem_type[i]=iType_UTEPL then
		dx=28 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_t_1", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ ширины в мм"
		ttx=`B,мм` : if n_use<3 then ttx=`Ширина`
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		ttx=`Н,мм` : if n_use<3 then ttx=`Высота`
		sy = sy + 23 : UI_INFIELD	"perem_h_1", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ высоты в мм"
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		sy = sy + 25 : UI_INFIELD	"perem_profile_1", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 :  UI_OUTFIELD	"L= "+STR("%.0mm",perem_dlin[i])+" мм", sx+10, sy, hxf-10, 20 UI_tooltip "Элемент"
		sy = sy + 25
		if main_name<>"" and WALL_COMPS_NAME_<>"" then 
			UI_OUTFIELD	`(`,sx+hxf-35,	sy,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_UG or perem_type[i]=iType_UGMIRR or perem_type[i]=iType_UGx2 then
		sy = sy + 25 : UI_INFIELD	"perem_profile_1", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 :  UI_OUTFIELD	"L= "+STR("%.0mm",perem_dlin[i])+" мм", sx+10, sy, hxf-10, 20 UI_tooltip "Элемент"
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_zazor_1", sx+5+dx, sy, hxf-75-dx, 20 UI_tooltip "Зазор между элементами в мм"
					   UI_OUTFIELD	`мм`,sx+hxf-67,	sy+3,	20,15
		if dx>EPS then UI_OUTFIELD	`Отступ`,sx+5,	sy+3,	dx-5,15
		sy = sy + 25
		if main_name<>"" and WALL_COMPS_NAME_<>"" then 
			UI_OUTFIELD	`(`,sx+hxf-35,	sy,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_PROF then
		sy = sy + 25 : UI_INFIELD	"perem_archprofile_1", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 : UI_INFIELD	"perem_ves_p_1", sx+50, sy, hxf-45, 20 UI_tooltip "Вес погонного метра, кг"
					   UI_OUTFIELD	`Вес кг/м`,sx+3,	sy+3,	46,15
		sy = sy + 25 : UI_INFIELD	"perem_profile_1", sx+5, sy, hxf, 20 UI_tooltip "Наименование элемента"
	endif
	if perem_qty_by_type_1>1 then
		sy = sy + 23 : UI_INFIELD	"perem_zazor_1", sx+5+dx, sy, hxf-75-dx, 20 UI_tooltip "Зазор между элементами в мм"
					   UI_OUTFIELD	`мм`,sx+hxf-67,	sy+3,	20,15
	endif
return
"t_2":
	sy = sys
	UI_GROUPBOX "Тип "+str("%.0",i), sx, sy, hx, 225+28
	sy = sy + 15 : UI_INFIELD	"perem_pos_2", sx+45, sy, hxf-70, 20 UI_tooltip "Позиция элемента"
				   UI_OUTFIELD	`Поз`,sx+20,	sy+3,	25,15
	dx=0 : if n_use<3 then dx = 95
	sy = sy + 23 : UI_INFIELD	"perem_dh_2", sx+23+dx, sy, hxf-40-dx, 20 UI_tooltip "Смещение по вертикали в мм"
				   UI_INFIELD	"perem_dhf_2", sx+5, sy+3, 15, 15 UI_tooltip "Сместить первый элемент?"
				   UI_INFIELD	"perem_dhe_2", sx+hxf-6, sy+3, 15, 15 UI_tooltip "Сместить последний элемент?"
	if dx>EPS then UI_OUTFIELD	`Смещение верт.`,sx+23,	sy+3,	dx-5,15
	sy = sy + 23
	dx=0 : if n_use<3 then dx = 50
	UI_INFIELD	"perem_type_2", sx+5+dx, sy, hxf-dx, 20 UI_tooltip "Тип перемычки "+str("%.0",i)
	if dx>EPS then UI_OUTFIELD	`Тип`,sx+5,	sy+3,	dx-5,15
	if perem_type[i]=iType_SB then
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_subtype_2", sx+5+dx, sy, hxf-dx, 20 UI_tooltip "Ограничение выбора"
		if dx>EPS then UI_OUTFIELD	`Подтип`,sx+5,	sy+3,	dx-5,15
		dx=28 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_t_2", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ ширины в мм"
		ttx=`B,мм` : if n_use<3 then ttx=`Ширина`
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		ttx=`Н,мм` : if n_use<3 then ttx=`Высота`
		sy = sy + 23 : UI_INFIELD	"perem_h_2", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ высоты в мм"
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		sy = sy + 23 : UI_INFIELD	"perem_podbor_2", sx+5, sy, 15, 15 UI_tooltip "Автоподбор"
		ttx=`Авто` : if n_use<3 then ttx=`Автоподбор`
					   UI_OUTFIELD	ttx,sx+23,	sy+0,	25+(n_use<3)*35,15
		UI_INFIELD{3} perem_nagr_type[i], sx+50+(n_use<3)*35, sy, 50+(n_use<3)*35, 15, 8,"",3, 1,10,10,10,10,t_perem_nagr_type,t_perem_nagr_type, i_perem_nagr_type UI_tooltip "Несущий элемент"
		sy = sy + 23 : UI_INFIELD	"perem_profile_2", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_qty_by_type_2", sx+5+dx, sy, hxf-60-dx, 20 UI_tooltip "Кол-во элементов"
					   UI_OUTFIELD	`шт`,sx+hxf-52,	sy+3,	20,15
		if dx>EPS then UI_OUTFIELD	`Кол-во`,sx+5,	sy+3,	dx-5,15
		if main_name<>"" and WALL_COMPS_NAME_<>"" then
			UI_OUTFIELD	`(`,sx+hxf-35,	sy+3,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy+3, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy+3,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_CONC or perem_type[i]=iType_ARM or perem_type[i]=iType_UTEPL  then
		dx=28 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_t_2", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ ширины в мм"
		ttx=`B,мм` : if n_use<3 then ttx=`Ширина`
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		ttx=`Н,мм` : if n_use<3 then ttx=`Высота`
		sy = sy + 23 : UI_INFIELD	"perem_h_2", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ высоты в мм"
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		sy = sy + 25 : UI_INFIELD	"perem_profile_2", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 :  UI_OUTFIELD	"L= "+STR("%.0mm",perem_dlin[i])+" мм", sx+10, sy, hxf-10, 20 UI_tooltip "Элемент"
		sy = sy + 25
		if main_name<>"" and WALL_COMPS_NAME_<>"" then 
			UI_OUTFIELD	`(`,sx+hxf-35,	sy,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_UG or perem_type[i]=iType_UGMIRR or perem_type[i]=iType_UGx2 then
		sy = sy + 25 : UI_INFIELD	"perem_profile_2", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 :  UI_OUTFIELD	"L= "+STR("%.0mm",perem_dlin[i])+" мм", sx+10, sy, hxf-10, 20 UI_tooltip "Элемент"
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_zazor_2", sx+5+dx, sy, hxf-75-dx, 20 UI_tooltip "Зазор между элементами в мм"
					   UI_OUTFIELD	`мм`,sx+hxf-67,	sy+3,	20,15
		if dx>EPS then UI_OUTFIELD	`Отступ`,sx+5,	sy+3,	dx-5,15
		sy = sy + 25
		if main_name<>"" and WALL_COMPS_NAME_<>"" then 
			UI_OUTFIELD	`(`,sx+hxf-35,	sy,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_PROF then
		sy = sy + 25 : UI_INFIELD	"perem_archprofile_2", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 : UI_INFIELD	"perem_ves_p_2", sx+50, sy, hxf-45, 20 UI_tooltip "Вес погонного метра, кг"
					   UI_OUTFIELD	`Вес кг/м`,sx+3,	sy+3,	46,15
		sy = sy + 25 : UI_INFIELD	"perem_profile_2", sx+5, sy, hxf, 20 UI_tooltip "Наименование элемента"
	endif
	if perem_qty_by_type_2>1 then
		sy = sy + 23 : UI_INFIELD	"perem_zazor_2", sx+5+dx, sy, hxf-75-dx, 20 UI_tooltip "Зазор между элементами в мм"
					   UI_OUTFIELD	`мм`,sx+hxf-67,	sy+3,	20,15
	endif
return
"t_3":
	sy = sys
	UI_GROUPBOX "Тип "+str("%.0",i), sx, sy, hx, 225+28
	sy = sy + 15 : UI_INFIELD	"perem_pos_3", sx+45, sy, hxf-70, 20 UI_tooltip "Позиция элемента"
				   UI_OUTFIELD	`Поз`,sx+20,	sy+3,	25,15
	dx=0 : if n_use<3 then dx = 95
	sy = sy + 23 : UI_INFIELD	"perem_dh_3", sx+23+dx, sy, hxf-40-dx, 20 UI_tooltip "Смещение по вертикали в мм"
				   UI_INFIELD	"perem_dhf_3", sx+5, sy+3, 15, 15 UI_tooltip "Сместить первый элемент?"
				   UI_INFIELD	"perem_dhe_3", sx+hxf-6, sy+3, 15, 15 UI_tooltip "Сместить последний элемент?"
	if dx>EPS then UI_OUTFIELD	`Смещение верт.`,sx+23,	sy+3,	dx-5,15
	sy = sy + 23
	dx=0 : if n_use<3 then dx = 50
	UI_INFIELD	"perem_type_3", sx+5+dx, sy, hxf-dx, 20 UI_tooltip "Тип перемычки "+str("%.0",i)
	if dx>EPS then UI_OUTFIELD	`Тип`,sx+5,	sy+3,	dx-5,15
	if perem_type[i]=iType_SB then
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_subtype_3", sx+5+dx, sy, hxf-dx, 20 UI_tooltip "Ограничение выбора"
		if dx>EPS then UI_OUTFIELD	`Подтип`,sx+5,	sy+3,	dx-5,15
		dx=28 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_t_3", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ ширины в мм"
		ttx=`B,мм` : if n_use<3 then ttx=`Ширина`
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		ttx=`Н,мм` : if n_use<3 then ttx=`Высота`
		sy = sy + 23 : UI_INFIELD	"perem_h_3", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ высоты в мм"
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		sy = sy + 23 : UI_INFIELD	"perem_podbor_3", sx+5, sy, 15, 15 UI_tooltip "Автоподбор"
		ttx=`Авто` : if n_use<3 then ttx=`Автоподбор`
					   UI_OUTFIELD	ttx,sx+23,	sy+0,	25+(n_use<3)*35,15
		UI_INFIELD{3} perem_nagr_type[i], sx+50+(n_use<3)*35, sy, 50+(n_use<3)*35, 15, 8,"",3, 1,10,10,10,10,t_perem_nagr_type,t_perem_nagr_type, i_perem_nagr_type UI_tooltip "Несущий элемент"
		sy = sy + 23 : UI_INFIELD	"perem_profile_3", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_qty_by_type_3", sx+5+dx, sy, hxf-60-dx, 20 UI_tooltip "Кол-во элементов"
					   UI_OUTFIELD	`шт`,sx+hxf-52,	sy+3,	20,15
		if dx>EPS then UI_OUTFIELD	`Кол-во`,sx+5,	sy+3,	dx-5,15
		if main_name<>"" and WALL_COMPS_NAME_<>"" then
			UI_OUTFIELD	`(`,sx+hxf-35,	sy+3,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy+3, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy+3,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_CONC or perem_type[i]=iType_ARM or perem_type[i]=iType_UTEPL then
		dx=28 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_t_3", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ ширины в мм"
		ttx=`B,мм` : if n_use<3 then ttx=`Ширина`
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		ttx=`Н,мм` : if n_use<3 then ttx=`Высота`
		sy = sy + 23 : UI_INFIELD	"perem_h_3", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ высоты в мм"
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		sy = sy + 25 : UI_INFIELD	"perem_profile_3", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 :  UI_OUTFIELD	"L= "+STR("%.0mm",perem_dlin[i])+" мм", sx+10, sy, hxf-10, 20 UI_tooltip "Элемент"
		sy = sy + 25
		if main_name<>"" and WALL_COMPS_NAME_<>"" then 
			UI_OUTFIELD	`(`,sx+hxf-35,	sy,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_UG or perem_type[i]=iType_UGMIRR or perem_type[i]=iType_UGx2 then
		sy = sy + 25 : UI_INFIELD	"perem_profile_3", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 :  UI_OUTFIELD	"L= "+STR("%.0mm",perem_dlin[i])+" мм", sx+10, sy, hxf-10, 20 UI_tooltip "Элемент"
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_zazor_3", sx+5+dx, sy, hxf-75-dx, 20 UI_tooltip "Зазор между элементами в мм"
					   UI_OUTFIELD	`мм`,sx+hxf-67,	sy+3,	20,15
		if dx>EPS then UI_OUTFIELD	`Отступ`,sx+5,	sy+3,	dx-5,15
		sy = sy + 25
		if main_name<>"" and WALL_COMPS_NAME_<>"" then 
			UI_OUTFIELD	`(`,sx+hxf-35,	sy,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_PROF then
		sy = sy + 25 : UI_INFIELD	"perem_archprofile_3", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 : UI_INFIELD	"perem_ves_p_3", sx+50, sy, hxf-45, 20 UI_tooltip "Вес погонного метра, кг"
					   UI_OUTFIELD	`Вес кг/м`,sx+3,	sy+3,	46,15
		sy = sy + 25 : UI_INFIELD	"perem_profile_3", sx+5, sy, hxf, 20 UI_tooltip "Наименование элемента"
	endif
	if perem_qty_by_type_3>1 then
		sy = sy + 23 : UI_INFIELD	"perem_zazor_3", sx+5+dx, sy, hxf-75-dx, 20 UI_tooltip "Зазор между элементами в мм"
					   UI_OUTFIELD	`мм`,sx+hxf-67,	sy+3,	20,15
	endif
return
"t_4":
	sy = sys
	UI_GROUPBOX "Тип "+str("%.0",i), sx, sy, hx, 225+28
	sy = sy + 15 : UI_INFIELD	"perem_pos_4", sx+45, sy, hxf-70, 20 UI_tooltip "Позиция элемента"
				   UI_OUTFIELD	`Поз`,sx+20,	sy+3,	25,15
	dx=0 : if n_use<3 then dx = 95
	sy = sy + 23 : UI_INFIELD	"perem_dh_4", sx+23+dx, sy, hxf-40-dx, 20 UI_tooltip "Смещение по вертикали в мм"
				   UI_INFIELD	"perem_dhf_4", sx+5, sy+3, 15, 15 UI_tooltip "Сместить первый элемент?"
				   UI_INFIELD	"perem_dhe_4", sx+hxf-6, sy+3, 15, 15 UI_tooltip "Сместить последний элемент?"
	if dx>EPS then UI_OUTFIELD	`Смещение верт.`,sx+23,	sy+3,	dx-5,15
	sy = sy + 23
	dx=0 : if n_use<3 then dx = 50
	UI_INFIELD	"perem_type_4", sx+5+dx, sy, hxf-dx, 20 UI_tooltip "Тип перемычки "+str("%.0",i)
	if dx>EPS then UI_OUTFIELD	`Тип`,sx+5,	sy+3,	dx-5,15
	if perem_type[i]=iType_SB then
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_subtype_4", sx+5+dx, sy, hxf-dx, 20 UI_tooltip "Ограничение выбора"
		if dx>EPS then UI_OUTFIELD	`Подтип`,sx+5,	sy+3,	dx-5,15
		dx=28 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_t_4", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ ширины в мм"
		ttx=`B,мм` : if n_use<3 then ttx=`Ширина`
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		ttx=`Н,мм` : if n_use<3 then ttx=`Высота`
		sy = sy + 23 : UI_INFIELD	"perem_h_4", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ высоты в мм"
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		sy = sy + 23 : UI_INFIELD	"perem_podbor_4", sx+5, sy, 15, 15 UI_tooltip "Автоподбор"
		ttx=`Авто` : if n_use<3 then ttx=`Автоподбор`
					   UI_OUTFIELD	ttx,sx+23,	sy+0,	25+(n_use<3)*35,15
		UI_INFIELD{3} perem_nagr_type[i], sx+50+(n_use<3)*35, sy, 50+(n_use<3)*35, 15, 8,"",3, 1,10,10,10,10,t_perem_nagr_type,t_perem_nagr_type, i_perem_nagr_type UI_tooltip "Несущий элемент"
		sy = sy + 23 : UI_INFIELD	"perem_profile_4", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_qty_by_type_4", sx+5+dx, sy, hxf-60-dx, 20 UI_tooltip "Кол-во элементов"
					   UI_OUTFIELD	`шт`,sx+hxf-52,	sy+3,	20,15
		if dx>EPS then UI_OUTFIELD	`Кол-во`,sx+5,	sy+3,	dx-5,15
		if main_name<>"" and WALL_COMPS_NAME_<>"" then
			UI_OUTFIELD	`(`,sx+hxf-35,	sy+3,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy+3, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy+3,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_CONC or perem_type[i]=iType_ARM or perem_type[i]=iType_UTEPL then
		dx=28 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_t_4", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ ширины в мм"
		ttx=`B,мм` : if n_use<3 then ttx=`Ширина`
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		ttx=`Н,мм` : if n_use<3 then ttx=`Высота`
		sy = sy + 23 : UI_INFIELD	"perem_h_4", sx+dx+5, sy, hxf-dx, 20 UI_tooltip "ОГРАНИЧЕНИЕ высоты в мм"
					   UI_OUTFIELD	ttx,sx+3,	sy+3,	dx,15
		sy = sy + 25 : UI_INFIELD	"perem_profile_4", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 :  UI_OUTFIELD	"L= "+STR("%.0mm",perem_dlin[i])+" мм", sx+10, sy, hxf-10, 20 UI_tooltip "Элемент"
		sy = sy + 25
		if main_name<>"" and WALL_COMPS_NAME_<>"" then 
			UI_OUTFIELD	`(`,sx+hxf-35,	sy,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif

	if perem_type[i]=iType_UG or perem_type[i]=iType_UGMIRR or perem_type[i]=iType_UGx2 then
		sy = sy + 25 : UI_INFIELD	"perem_profile_4", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 :  UI_OUTFIELD	"L= "+STR("%.0mm",perem_dlin[i])+" мм", sx+10, sy, hxf-10, 20 UI_tooltip "Элемент"
		dx=0 : if n_use<3 then dx = 50
		sy = sy + 23 : UI_INFIELD	"perem_zazor_4", sx+5+dx, sy, hxf-75-dx, 20 UI_tooltip "Зазор между элементами в мм"
					   UI_OUTFIELD	`мм`,sx+hxf-67,	sy+3,	20,15
		if dx>EPS then UI_OUTFIELD	`Отступ`,sx+5,	sy+3,	dx-5,15
		sy = sy + 25
		if main_name<>"" and WALL_COMPS_NAME_<>"" then 
			UI_OUTFIELD	`(`,sx+hxf-35,	sy,	3,15
			UI_INFIELD{3} perem_th_by_layer[i], sx+hxf-29, sy, 20, 15 UI_tooltip "Номер слоя стены для расчёта ширины"
			UI_OUTFIELD	`)`,sx+hxf-5,	sy,	3,15
			gosub "get_th" : if strlen(th_txt)>0 then UI_OUTFIELD	th_txt,sx+hxf-35, sy+20,	40,15 UI_tooltip "Толщина слоя в мм"
		endif
	endif
	if perem_type[i]=iType_PROF then
		sy = sy + 25 : UI_INFIELD	"perem_archprofile_4", sx+5, sy, hxf, 20 UI_tooltip "Элемент"
		sy = sy + 25 : UI_INFIELD	"perem_ves_p_4", sx+50, sy, hxf-45, 20 UI_tooltip "Вес погонного метра, кг"
					   UI_OUTFIELD	`Вес кг/м`,sx+3,	sy+3,	46,15
		sy = sy + 25 : UI_INFIELD	"perem_profile_4", sx+5, sy, hxf, 20 UI_tooltip "Наименование элемента"
	endif
	if perem_qty_by_type_4>1 then
		sy = sy + 23 : UI_INFIELD	"perem_zazor_4", sx+5+dx, sy, hxf-75-dx, 20 UI_tooltip "Зазор между элементами в мм"
					   UI_OUTFIELD	`мм`,sx+hxf-67,	sy+3,	20,15
	endif
return

"get_th":
	th_txt = ""
	if perem_th_by_layer[i]>EPS then
		if main_name="" then
			th = max_t
		else
			if WALL_COMPS_NAME_<>"" then
				th=WALL_SKINS_PARAMS_[perem_th_by_layer[i]][2]
			else
				th=WALL_THICKNESS_
			endif
		endif
	endif
	if th>0.00000001 then th_txt = str("%.0mm", th)
return
235:
