<?xml version="1.0" encoding="UTF-8"?>
<Symbol IsArchivable="true" IsPlaceable="true" MainGUID="15CB6D8A-EF64-45AB-AC1B-838AE9624833" MigrationValue="Normal" Owner="1196638531" Signature="1196644685" Version="43">
<Ancestry SectVersion="1" SectionFlags="0" SubIdent="0" Template="false">
	<MainGUID>F938E33A-329D-4A36-BE3E-85E126820996</MainGUID>
	<MainGUID>B176ABF1-5813-478F-926B-28EE7C5DC1F7</MainGUID>
	<MainGUID>4FD10D67-2F29-4844-A65A-6597589B0CB5</MainGUID>
	<MainGUID>B3A106BF-6277-456E-8657-65B5C2D1C315</MainGUID>
	<MainGUID>9C0F3C78-D2CB-4528-ADA2-703C8A09FC1A</MainGUID>
</Ancestry>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_FWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
]]>
</Script_FWM>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_BWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
]]>
</Script_BWM>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_2D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
otobr = 0
if annot[1] = 0 then 
	otobr = 1
else
	for i=1 to vardim1(annot)
		if annot[i] = GLOB_SCALE then otobr = 1
	next i
endif
if not(otobr) then end

if (asotv and show_asotv and ((B+porog)>min_h_otv) and (A>min_b_otv) and (GLOB_STRUCTURE_DISPLAY = upr_n) or (upr_n<0)) or not(asotv) then
	goto 23
else
	end
endif
23:
type_renovation=""
type_wall=""
type_renovation_mark = ""

dim _parentProperties[]
n = REQUEST ("Properties_Of_Parent", "", _parentProperties)
for i = 1 to vardim1(_parentProperties) / 4
	PROPERTY_TYPE		= _parentProperties[4 * (i - 1) + 2]
	if PROPERTY_TYPE<>"IFC" then
		PROPERTY_NAME			= _parentProperties[4 * (i - 1) + 4]
		PROPERTY_ID		= _parentProperties[4 * (i - 1) + 1]
		if STRSTR(PROPERTY_NAME, "Тип замены заполнения")>0 then n = REQUEST ("Property_Value_Of_Parent", PROPERTY_ID, _typeValue, dim1, dim2, type_renovation)
		if STRSTR(PROPERTY_NAME, "Тип стены")>0 then n = REQUEST ("Property_Value_Of_Parent", PROPERTY_ID, _typeValue, dim1, dim2, type_wall)
	endif
next i
if STRSTR(type_renovation, "закладываемый")>0 then type_renovation_mark = ""
if STRSTR(type_renovation, "пробиваемый")>0 then type_renovation_mark = "пр"
if STRSTR(type_renovation, "расширяемый")>0 then type_renovation_mark = "р"

dim	parentPropertiesArray[]
n = request ("Properties_Of_Parent", "", parentPropertiesArray)

if type_renovation_mark = "пр" or type_renovation_mark = "р" then
	fill AC_MarkerFill
	POLY2_B 4, 2+4, 1, 0,AC_WIDO_A_SIZE/2,0,1,	AC_WIDO_A_SIZE/2,-AC_WALL_THICKNESS,1,	AC_WIDO_A_SIZE*0.8,-AC_WALL_THICKNESS,1,	AC_WIDO_A_SIZE*0.8,0,1
	POLY2_B 4, 2+4, 1, 0,-AC_WIDO_A_SIZE/2,0,1,	-AC_WIDO_A_SIZE/2,-AC_WALL_THICKNESS,1,	-AC_WIDO_A_SIZE*0.8,-AC_WALL_THICKNESS,1,	-AC_WIDO_A_SIZE*0.8,0,1
endif

mark_type = 0 : success = LIBRARYGLOBAL ("Libraryflobals-as", "mark_type", mark_type)
mark_num = 0 : success = LIBRARYGLOBAL ("Libraryflobals-as", "mark_num", mark_num)
if mark_type = 1 or mark_num = 0 then mark_num = GLOB_STRUCTURE_DISPLAY+1

show_firest_winddoor = 0 : success = LIBRARYGLOBAL ("Libraryflobals-as", "show_firest_winddoor", show_firest_winddoor)
show_egress_winddoor = 0 : success = LIBRARYGLOBAL ("Libraryflobals-as", "show_egress_winddoor", show_egress_winddoor)
show_renov_winddoor = 0 : success = LIBRARYGLOBAL ("Libraryflobals-as", "show_renov_winddoor", show_renov_winddoor) 
if show_egress_winddoor and GLOB_ELEM_TYPE=5 then 
	nd1 = request("Assoclp_parvalue", "ac_egress_width", namindd1, typed1, flagd1, dim1d1, dim2d1, ac_egress_width)
	nd1 = request("Assoclp_parvalue", "ac_egress_height", namindd1, typed1, flagd1, dim1d1, dim2d1, ac_egress_height)
	ac_egress_width = STR("%.0mm",ac_egress_width)
	ac_egress_height = STR("%.0mm",ac_egress_height)
	size_egress = ac_egress_width+"x"+ac_egress_height + "(h)"
else
	size_egress = ""
	if not(show_renov_winddoor) then type_renovation_mark = ""
endif

PAPER_TO_MODEL = GLOB_SCALE / 1000	! Convert paper size to model size

unID=2

ipos = mark_num
if show_firest_winddoor or show_egress_winddoor then ipos = 5

r = request ("View_Rotangle", "", _angleViewRot)
_totalRotate	= (WALL_DIRECTION) MOD 360
add2 0,-AC_WALL_THICKNESS/2
if not(auto_rot[ipos]) then
	rot2 _totalRotate * (SYMB_MIRRORED - not(SYMB_MIRRORED))
else
	if (_totalRotate > (90 + EPS) & _totalRotate < (270 + EPS)) then
		rot2 180
	endif
endif

angl_txt = 0
if (_angleViewRot > (90 + EPS) & _angleViewRot < (270 + EPS)) then
	angl_txt = 180
endif
if zerk[ipos] then
	mul2 1,-1
	angl_txt = angl_txt - 180
endif

DEFINE STYLE "cистемный" AC_TextFont_1, AC_TextSize_1, 5, AC_TextStyle_1
SET STYLE "cистемный"

txt_vin_t = ""
param_name_1 = param_otobr[mark_num][2]
param_name = param_name_1
if show_firest_winddoor or show_egress_winddoor then param_name = ""
GOSUB "read_param" : txt_vin_1 = txt_vin_t
if show_egress_winddoor then  txt_vin_1 = size_egress


txtv = txt_vin_1 : tblockname = "mark_1" : name_style = "cистемный" : angl_txt_a = angl_txt : gosub "get_block"
if isCircle then r_circle = max(r_circle,width/2+0.5, height/2+0.5)
add_x = max(height/6, r_circle)*PAPER_TO_MODEL+AC_WALL_THICKNESS/2+(height/2*PAPER_TO_MODEL)*zerk[ipos]
add2 0,add_x

if txt_vin_1 <> "Нет" then
	pos_xy[ipos][1] = pos_xys[ipos][1]*PAPER_TO_MODEL
	pos_xy[ipos][2] = pos_xys[ipos][2]*PAPER_TO_MODEL
	HOTSPOT2 pos_xy[ipos][1], 0, unID, pos_xy[ipos][2], 1+128+1024,pos_xys[ipos][2]: unID=unID+1
	HOTSPOT2 pos_xy[ipos][1], pos_xy[ipos][2], unID, pos_xy[ipos][2], 2+1024,pos_xys[ipos][2]: unID=unID+1
	HOTSPOT2 pos_xy[ipos][1],-1, unID, pos_xy[ipos][2], 3+1024,pos_xys[ipos][2]: unID=unID+1

	HOTSPOT2 0, pos_xy[ipos][2], unID, pos_xy[ipos][1], 1+128+1024, pos_xys[ipos][1]: unID=unID+1
	HOTSPOT2 pos_xy[ipos][1], pos_xy[ipos][2], unID, pos_xy[ipos][1], 2+1024, pos_xys[ipos][1]: unID=unID+1
	HOTSPOT2 -1, pos_xy[ipos][2], unID, pos_xy[ipos][1], 3+1024, pos_xys[ipos][1]: unID=unID+1

	RICHTEXT2 pos_xy[ipos][1], pos_xy[ipos][2]+dx, tblockname
	if isRect then
		l = (stw (txt_vin_1 + ".") + l_mun)*PAPER_TO_MODEL
		t = (height*0.6 + l_mun/2)*PAPER_TO_MODEL
		add2 pos_xy[ipos][1], pos_xy[ipos][2] + (Shrift_razm*PAPER_TO_MODEL)/2
		fill GLOB_FILL_INDEX_BACKGROUND
		poly2 5,1+2+4,
		-l/2,-t,
		l/2,-t,
		l/2,t,
		-l/2,t,
		-l/2,-t
		del 1
	endif
	if isCircle then 
		circle2  pos_xy[ipos][1]-height*sin(angl_txt)/4*PAPER_TO_MODEL, pos_xy[ipos][2]+height*cos(angl_txt)/4*PAPER_TO_MODEL,max(r_circle,width/2, height/2)*PAPER_TO_MODEL
	endif
endif

del 1
mul2 1,-1

txt_vin_t = ""
param_name_2 = param_otobr[mark_num][3]
param_name = param_name_2
if show_firest_winddoor or show_egress_winddoor then param_name = "firest"
GOSUB "read_param" : txt_vin_2 = txt_vin_t

txtv = txt_vin_2 : tblockname = "mark_2" : name_style = "cистемный" : angl_txt_a = angl_txt+180 : gosub "get_block"

if isCircle then r_circle = max(r_circle,width/2+0.5, height/2+0.5)
add_x = max(height/2+1, r_circle+1)*PAPER_TO_MODEL+AC_WALL_THICKNESS/2*(not(zerk[ipos]))
add2 0,add_x

if txt_vin_2 <> "Нет" then
	pos_xy[ipos][3] = pos_xys[ipos][3]*PAPER_TO_MODEL
	pos_xy[ipos][4] = pos_xys[ipos][4]*PAPER_TO_MODEL
	HOTSPOT2 pos_xy[ipos][3], 0, unID, pos_xy[ipos][4], 1+128+1024,pos_xys[ipos][4]: unID=unID+1
	HOTSPOT2 pos_xy[ipos][3], pos_xy[ipos][4], unID, pos_xy[ipos][4], 2+1024,pos_xys[ipos][4]: unID=unID+1
	HOTSPOT2 pos_xy[ipos][3], -1, unID, pos_xy[ipos][4], 3+1024,pos_xys[ipos][4]: unID=unID+1

	HOTSPOT2 0, pos_xy[ipos][4], unID, pos_xy[ipos][3], 1+128+1024,pos_xys[ipos][3]: unID=unID+1
	HOTSPOT2 pos_xy[ipos][3], pos_xy[ipos][4], unID, pos_xy[ipos][3], 2+1024,pos_xys[ipos][3]: unID=unID+1
	HOTSPOT2 -1, pos_xy[ipos][4], unID, pos_xy[ipos][3], 3+1024,pos_xys[ipos][3]: unID=unID+1

	RICHTEXT2 pos_xy[ipos][3], pos_xy[ipos][4], "mark_2"
	if isRect then
		l = (stw (txt_vin_2 + ".") + l_mun)*PAPER_TO_MODEL
		t = (height*0.6 + l_mun/2)*PAPER_TO_MODEL
		add2 pos_xy[ipos][3], pos_xy[ipos][4] + (Shrift_razm*PAPER_TO_MODEL)/2
		fill GLOB_FILL_INDEX_BACKGROUND
		poly2 5,1+2+4,
		-l/2,-t-height*PAPER_TO_MODEL*0.25,
		l/2,-t-height*PAPER_TO_MODEL*0.25,
		l/2,t-height*PAPER_TO_MODEL*0.25,
		-l/2,t-height*PAPER_TO_MODEL*0.25,
		-l/2,-t-height*PAPER_TO_MODEL*0.25
		del 1
	endif
	if isCircle then
		circle2  pos_xy[ipos][1]-height*sin(angl_txt)/4*PAPER_TO_MODEL, pos_xy[ipos][2]+height*cos(angl_txt)/4*PAPER_TO_MODEL,max(r_circle,width/2, height/2)*PAPER_TO_MODEL
	endif
endif

end

"read_param":	
	if not(hide_on_error) then
		if STRSUB(param_name, 1, 1) = "H" then
			hide_on_error = 1
			param_name = STRSUB(param_name, 2, strlen(param_name))
		else
			hide_on_error = 0
		endif
	endif
	isRect = 0
	if STRSUB(param_name, 1, 1) = "R" then
		isRect = 1
		param_name = STRSUB(param_name, 2, strlen(param_name))
	else
		if param_name_1 = "firest" then isRect = 1
	endif
	if STRSUB(param_name, 2, 1) = "R" then
		isRect = 1
		param_name = STRSUB(param_name, 1, 1) + STRSUB(param_name, 3, strlen(param_name))
	endif

	isCircle = 0
	if STRSUB(param_name, 1, 1) = "C" then
		isCircle = 1
		param_name = STRSUB(param_name, 2, strlen(param_name))	
	else
		if r_circle>0 and param_name = "ID" and not(show_egress_winddoor) then isCircle = 1
	endif
	if STRSUB(param_name, 1, 1) = "C" then
		isCircle = 1
		param_name = STRSUB(param_name, 1, 1) + STRSUB(param_name, 3, strlen(param_name))	
	endif

	if param_name = "otm_niz" then 
		if success1 and nd1 then
			txt_vin_t = "Отм. низа " + txt_vin_t
		else
			aaz = AC_GLOB_ELEVATION + WALL_POSITION[3]
			if abs(aaz)<EPS then
				az = "0.000"
				znak1 = ""
			 else
				az = str("%.3m", abs(aaz))
				if aaz < EPS then 
					znak1 = "-"
				else
					znak1 = "+"
				endif
			endif
			txt_vin_t = znak1 + az
		endif
	endif
	if param_name = "otm_verh" and not(success1 and nd1) then 
		aaz = AC_GLOB_ELEVATION + WALL_POSITION[3] + AC_WIDO_B_SIZE
		if abs(aaz)<EPS then
			az = "0.000"
			znak1 = ""
		 else
			az = str("%.3m", abs(aaz))
			if aaz < EPS then 
				znak1 = "-"
			else
				znak1 = "+"
			endif
		endif
		txt_vin_t = znak1 + az
	endif
	if param_name = "ID" then txt_vin_t = AC_WIDO_ID + type_renovation_mark
	if txt_vin_t = "" then
		if STRSTR(param_name, "%")=0 and STRSTR(param_name, " ")=0 then param_name = "%" + param_name + "%"
		mgp_error_char = "" : if hide_on_error then mgp_error_char = "@@"
		call "macro_get_param" parameters mgp_in_str=param_name,
											mgp_prim1="",
											mgp_prim2="",
											mgp_prim3="",
											mgp_prim4="",
											mgp_prim5="",
											mgp_qty=1, mgp_error_char = mgp_error_char,
											mgp_ld="%.0mm", RETURNED_PARAMETERS mgp_out_str
		txt_vin_t = mgp_out_str
	endif
	if vartype(txt_vin_t) <> 2 then txt_vin_t = STR("%.0", txt_vin_t)
	if hide_on_error and STRSTR(txt_vin_t, "@@")>EPS then txt_vin_t = "Нет"
	if txt_vin_t = "!" then txt_vin_t = "Нет"
	if param_name = "" then txt_vin_t = "Нет"
return

"get_block":
	paragraph tblockname+"p" 2,
			0, 0, 0,
			1
			style name_style
			txtv
	endparagraph
	TEXTBLOCK tblockname 0, 5, angl_txt_a, AC_TextCharWidthFactor_1, AC_TextCharSpaceFactor_1, 1,tblockname+"p"
	height = 0 : descent = 0 : leading = 0
	sss=request("Height_of_style", name_style, height, descent, leading)
	dx = (height/2-descent-leading-AC_TextSize_1/2)*PAPER_TO_MODEL*0.5
	n = REQUEST("TEXTBLOCK_INFO", tblockname, width, height)
	width = width * PAPER_TO_MODEL
	height = height * PAPER_TO_MODEL
return


]]>
</Script_2D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_VL SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
dim stShapes[4]
	stShapes[1] = `Окружность`
	stShapes[2] = `Прямоугольник`
	stShapes[3] = `Треугольник`
	stShapes[4] = `Нет`

dim stCustomText[3]
	stCustomText[1] = `Номер ID`
	stCustomText[2] = `Измеряемое значение`
	stCustomText[3] = `Специальный текст`

parameters param_otobr[1][1] = "Вся модель"
parameters param_otobr[2][1] = "Только ядро"
parameters param_otobr[3][1] = "Без отделки"

if GLOB_MODPAR_NAME <> "" then
	if GLOB_MODPAR_NAME = "pos_xy" then
		for i = 1 to vardim1(pos_xy)
			for j=1 to 4
				pos_xys[i][j] = pos_xy[i][j]*1000
			next j
		next i
		PARAMETERS pos_xys = pos_xys
	else
		for i = 1 to vardim1(pos_xy)
			for j=1 to 4
				pos_xy[i][j] = pos_xys[i][j]/1000
			next j
		next i
		PARAMETERS pos_xy = pos_xy
	endif
endif

if vardim1(pos_xy)<=5 then
	for i=vardim1(pos_xy) to 6
		for j = 1 to 4
			pos_xy[i][j] = 0
		next j
	next i
	PARAMETERS pos_xy = pos_xy
endif

inx = 0
for i = 1 to vardim1(copy_from)
	if copy_from[i] then inx = i
next i
if inx>0 then
	for i=1 to inx-1
		for j=1 to 4
			PARAMETERS pos_xy[i][j] = pos_xy[inx][j]
			PARAMETERS pos_xys[i][j] = pos_xys[inx][j]
		next j
		PARAMETERS zerk[i] = zerk[inx]
		PARAMETERS auto_rot[i] = auto_rot[inx]
	next i
	if inx<5 then
		for i=inx+1 to 4
			for j=1 to 4
				PARAMETERS pos_xy[i][j] = pos_xy[inx][j]
				PARAMETERS pos_xys[i][j] = pos_xys[inx][j]
			next j
			PARAMETERS zerk[i] = zerk[inx]
			PARAMETERS auto_rot[i] = auto_rot[inx]
		next i
	endif
	PARAMETERS copy_from[inx] = 0
endif

]]>
</Script_VL>

<ParamSection SectVersion="27" SectionFlags="0" SubIdent="0">
	<ParamSectHeader>
		<AutoHotspots>false</AutoHotspots>
		<StatBits>
			<STBit_UIDefault/>
			<STBit_FixSize/>
			<STBit_UIUseHierarchicalPages/>
		</StatBits>
		<WDLeftFrame>0</WDLeftFrame>
		<WDRightFrame>0</WDRightFrame>
		<WDTopFrame>0</WDTopFrame>
		<WDBotFrame>0</WDBotFrame>
		<LayFlags>65535</LayFlags>
		<WDMirrorThickness>0</WDMirrorThickness>
		<WDWallInset>0</WDWallInset>
	</ParamSectHeader>
	<Parameters>
		<Length Name="A">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Length Name="B">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<String Name="param_otobr">
			<Description><![CDATA["Отображаемые параметры"]]></Description>
			<ArrayValues FirstDimension="4" SecondDimension="3">
				<AVal Column="1" Row="1"><![CDATA["Вся модель"]]></AVal>
				<AVal Column="2" Row="1"><![CDATA["ID"]]></AVal>
				<AVal Column="3" Row="1"><![CDATA["firest"]]></AVal>
				<AVal Column="1" Row="2"><![CDATA["Только ядро"]]></AVal>
				<AVal Column="2" Row="2"><![CDATA["naen_otv"]]></AVal>
				<AVal Column="3" Row="2"><![CDATA["marka"]]></AVal>
				<AVal Column="1" Row="3"><![CDATA["Без отделки"]]></AVal>
				<AVal Column="2" Row="3"><![CDATA["razm"]]></AVal>
				<AVal Column="3" Row="3"><![CDATA["otm_niz"]]></AVal>
				<AVal Column="1" Row="4"><![CDATA[""]]></AVal>
				<AVal Column="2" Row="4"><![CDATA[""]]></AVal>
				<AVal Column="3" Row="4"><![CDATA[""]]></AVal>
			</ArrayValues>
		</String>
		<Integer Name="annot">
			<Description><![CDATA["Отображать в маштабах"]]></Description>
			<ArrayValues FirstDimension="6" SecondDimension="0">
				<AVal Row="1">0</AVal>
				<AVal Row="2">0</AVal>
				<AVal Row="3">0</AVal>
				<AVal Row="4">0</AVal>
				<AVal Row="5">0</AVal>
				<AVal Row="6">0</AVal>
			</ArrayValues>
		</Integer>

		<!-- mod_sp1: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="mod_sp1">
			<Description><![CDATA["Положение надписи"]]></Description>
		</Title>
		<Length Name="pos_xy">
			<Description><![CDATA["Положение выносной надписи"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<ArrayValues FirstDimension="6" SecondDimension="4">
				<AVal Column="1" Row="1">0</AVal>
				<AVal Column="2" Row="1">0</AVal>
				<AVal Column="3" Row="1">0</AVal>
				<AVal Column="4" Row="1">0</AVal>
				<AVal Column="1" Row="2">0</AVal>
				<AVal Column="2" Row="2">0</AVal>
				<AVal Column="3" Row="2">0</AVal>
				<AVal Column="4" Row="2">0</AVal>
				<AVal Column="1" Row="3">0</AVal>
				<AVal Column="2" Row="3">0</AVal>
				<AVal Column="3" Row="3">0</AVal>
				<AVal Column="4" Row="3">0</AVal>
				<AVal Column="1" Row="4">0</AVal>
				<AVal Column="2" Row="4">0</AVal>
				<AVal Column="3" Row="4">0</AVal>
				<AVal Column="4" Row="4">0</AVal>
				<AVal Column="1" Row="5">0</AVal>
				<AVal Column="2" Row="5">0</AVal>
				<AVal Column="3" Row="5">0</AVal>
				<AVal Column="4" Row="5">0</AVal>
				<AVal Column="1" Row="6">0</AVal>
				<AVal Column="2" Row="6">0</AVal>
				<AVal Column="3" Row="6">0</AVal>
				<AVal Column="4" Row="6">0</AVal>
			</ArrayValues>
		</Length>
		<RealNum Name="pos_xys">
			<Description><![CDATA["Положение выносной надписи"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<ArrayValues FirstDimension="6" SecondDimension="4">
				<AVal Column="1" Row="1">0</AVal>
				<AVal Column="2" Row="1">0</AVal>
				<AVal Column="3" Row="1">0</AVal>
				<AVal Column="4" Row="1">0</AVal>
				<AVal Column="1" Row="2">0</AVal>
				<AVal Column="2" Row="2">0</AVal>
				<AVal Column="3" Row="2">0</AVal>
				<AVal Column="4" Row="2">0</AVal>
				<AVal Column="1" Row="3">0</AVal>
				<AVal Column="2" Row="3">0</AVal>
				<AVal Column="3" Row="3">0</AVal>
				<AVal Column="4" Row="3">0</AVal>
				<AVal Column="1" Row="4">0</AVal>
				<AVal Column="2" Row="4">0</AVal>
				<AVal Column="3" Row="4">0</AVal>
				<AVal Column="4" Row="4">0</AVal>
				<AVal Column="1" Row="5">0</AVal>
				<AVal Column="2" Row="5">0</AVal>
				<AVal Column="3" Row="5">0</AVal>
				<AVal Column="4" Row="5">0</AVal>
				<AVal Column="1" Row="6">0</AVal>
				<AVal Column="2" Row="6">0</AVal>
				<AVal Column="3" Row="6">0</AVal>
				<AVal Column="4" Row="6">0</AVal>
			</ArrayValues>
		</RealNum>
		<Boolean Name="zerk">
			<Description><![CDATA["Зеркально"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<ArrayValues FirstDimension="5" SecondDimension="0">
				<AVal Row="1">0</AVal>
				<AVal Row="2">0</AVal>
				<AVal Row="3">0</AVal>
				<AVal Row="4">0</AVal>
				<AVal Row="5">0</AVal>
			</ArrayValues>
		</Boolean>
		<Boolean Name="auto_rot">
			<Description><![CDATA["Повернуть вдоль стены (для разных режимов)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<ArrayValues FirstDimension="6" SecondDimension="0">
				<AVal Row="1">0</AVal>
				<AVal Row="2">0</AVal>
				<AVal Row="3">0</AVal>
				<AVal Row="4">0</AVal>
				<AVal Row="5">0</AVal>
				<AVal Row="6">0</AVal>
			</ArrayValues>
		</Boolean>
		<RealNum Name="r_circle">
			<Description><![CDATA["Размер кружка маркера (0=нет)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>3</Value>
		</RealNum>
		<RealNum Name="l_mun">
			<Description><![CDATA["Размер рамки"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<Angle Name="angl">
			<Description><![CDATA["Поворот маркера во всех режимах"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Angle>
		<Boolean Name="hide_on_error">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>

		<!-- _sp0: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="_sp0">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
		</Title>
		<Boolean Name="copy_from">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<ArrayValues FirstDimension="5" SecondDimension="0">
				<AVal Row="1">0</AVal>
				<AVal Row="2">0</AVal>
				<AVal Row="3">0</AVal>
				<AVal Row="4">0</AVal>
				<AVal Row="5">0</AVal>
			</ArrayValues>
		</Boolean>
		<String Name="AC_MarkerText_1">
			<Description><![CDATA["Значение ID"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["W03"]]></Value>
		</String>
		<String Name="AC_MarkerText_2">
			<Description><![CDATA["Значение ширины проема"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["1 450"]]></Value>
		</String>
		<String Name="AC_MarkerText_3">
			<Description><![CDATA["Значение высоты проема"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["1 800"]]></Value>
		</String>
		<Boolean Name="GS_UniTextFormat">
			<Description><![CDATA["Одинаковый формат текста"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Boolean>
		<String Name="AC_MarkerText_4">
			<Description><![CDATA["Значение подоконника"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Порог/подоконник 0"]]></Value>
		</String>
		<String Name="AC_TextFont_1">
			<Description><![CDATA["Тип текста м. 1 (по умолч.)"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Arial Cyrillic"]]></Value>
		</String>
		<Integer Name="AC_TextStyle_1">
			<Description><![CDATA["Стиль текста м.1 (по умолч.)"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Integer>
		<Integer Name="AC_TextAlignment_1">
			<Description><![CDATA["Выравнивание Текста Маркера 1 (по умолчанию)"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<RealNum Name="AC_TextLeading_1">
			<Description><![CDATA["Межстрочное Расстояние Текста Маркера 1 (по умолчанию)"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</RealNum>
		<RealNum Name="AC_TextCharWidthFactor_1">
			<Description><![CDATA["Фактор Ширины Символов Текста Маркера 1 (по умолчанию)"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</RealNum>
		<RealNum Name="AC_TextCharSpaceFactor_1">
			<Description><![CDATA["Фактор Межсимвольного Расстояния Текста Маркера 1 (по умолчанию)"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</RealNum>
		<PenColor Name="AC_TextPen_1">
			<Description><![CDATA["Перо текста м. 1 (по умолч.)"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>7</Value>
		</PenColor>
		<RealNum Name="AC_TextSize_1">
			<Description><![CDATA["Разм.текста м. 1 (по умолч.)"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</RealNum>
		<String Name="AC_TextFont_2">
			<Description><![CDATA["Тип текста маркера 2"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Arial Cyrillic"]]></Value>
		</String>
		<Integer Name="AC_TextStyle_2">
			<Description><![CDATA["Стиль текста маркера 2"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Integer>
		<PenColor Name="AC_TextPen_2">
			<Description><![CDATA["Перо текста маркера 2"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>7</Value>
		</PenColor>
		<RealNum Name="AC_TextSize_2">
			<Description><![CDATA["Размер текста маркера 2"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</RealNum>
		<String Name="AC_TextFont_3">
			<Description><![CDATA["Тип текста маркера 3"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Arial Cyrillic"]]></Value>
		</String>
		<Integer Name="AC_TextStyle_3">
			<Description><![CDATA["Стиль текста маркера 3"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Integer>
		<PenColor Name="AC_TextPen_3">
			<Description><![CDATA["Перо текста маркера 3"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>7</Value>
		</PenColor>
		<RealNum Name="AC_TextSize_3">
			<Description><![CDATA["Размер текста маркера 3"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</RealNum>
		<String Name="AC_TextFont_4">
			<Description><![CDATA["Тип текста маркера 4"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Arial Cyrillic"]]></Value>
		</String>
		<Integer Name="AC_TextStyle_4">
			<Description><![CDATA["Стиль текста маркера 4"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Integer>
		<PenColor Name="AC_TextPen_4">
			<Description><![CDATA["Перо текста маркера 4"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>7</Value>
		</PenColor>
		<RealNum Name="AC_TextSize_4">
			<Description><![CDATA["Размер текста маркера 4"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</RealNum>
		<String Name="GS_Separator">
			<Description><![CDATA["Разд. между шир.и высотой"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["на"]]></Value>
		</String>
		<RealNum Name="AC_MarkerSize">
			<Description><![CDATA["Размер маркера"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>10</Value>
		</RealNum>
		<Boolean Name="AC_Readable">
			<Description><![CDATA["Читаемый текст"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Boolean>
		<String Name="AC_WIDO_ID">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["W03"]]></Value>
		</String>
		<Length Name="AC_WIDO_A_SIZE">
			<Description><![CDATA["Ширина окна"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1.45</Value>
		</Length>
		<Length Name="AC_WIDO_B_SIZE">
			<Description><![CDATA["Высота окна"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1.8</Value>
		</Length>
		<Boolean Name="AC_WIDO_REVEAL_SIDE">
			<Description><![CDATA["Со стороны четверти"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="AC_SILL_TO_CURR_STORY">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="AC_SILL_TO_ANCHOR_LEVEL">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="AC_GLOB_ELEVATION">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="AC_WIDO_SUBFL_THICKNESS">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Boolean Name="AC_WIDO_REVEAL_SIDE_2">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Angle Name="AC_SYMB_ROTANGLE">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Angle>
		<Boolean Name="AC_WIDO_MIRRORED">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="AC_WALL_THICKNESS">
			<Description><![CDATA["Толщина стенки"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0.3</Value>
		</Length>
		<FillPattern Name="AC_MarkerFill">
			<Description><![CDATA["Штриховка маркера"]]></Description>
			<Fix/>
			<Value>1</Value>
		</FillPattern>
	</Parameters>
</ParamSection>

<CalledMacros SectVersion="2" SectionFlags="0" SubIdent="0">
	<Macro>
		<MName><![CDATA["macro_get_param"]]></MName>
		<MainGUID>7E78907B-4B76-4507-B54E-F469D8A39C4D</MainGUID>
	</Macro>
	<Macro>
		<MName><![CDATA["Libraryflobals-as"]]></MName>
		<MainGUID>A92312CB-4BB0-4C60-AD15-6ADCA079C655</MainGUID>
	</Macro>
</CalledMacros>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_1D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
EPS = 0.0001

dim show_type[] : i=0
i=i+1 : show_type[i] = "Вся модель"
i=i+1 : show_type[i] = "Только ядро"
i=i+1 : show_type[i] = "Без отделки"


show_asotv = 1 : min_h_otv = 0.01 : min_b_otv = 0.01
success1 = LIBRARYGLOBAL ("Libraryflobals-as", "show_asotv", tshow_asotv)
if success1 then show_asotv = tshow_asotv
success = LIBRARYGLOBAL ("Libraryflobals-as", "min_h_otv", tmin_h_otv)
if success then min_h_otv = tmin_h_otv
success = LIBRARYGLOBAL ("Libraryflobals-as", "min_b_otv", tmin_b_otv)
if success then min_b_otv = tmin_b_otv

asotv = 1 : B=min_h_otv+0.5 : A=min_b_otv+0.5 : upr_n = -1 : porog = 0
nd = request("Assoclp_parvalue", "asotv", namindd1, typed1, flagd1, dim1d1, dim2d1, tasotv)
if nd then asotv = tasotv
nd = request("Assoclp_parvalue", "B", namindd1, typed1, flagd1, dim1d1, dim2d1, tB)
if nd then B = tB
nd = request("Assoclp_parvalue", "A", namindd1, typed1, flagd1, dim1d1, dim2d1, tA)
if nd then A = tA
nd1 = request("Assoclp_parvalue", "upr_n", namindd1, typed1, flagd1, dim1d1, dim2d1, tupr_n)
if nd1 then upr_n = tupr_n
nd = request("Assoclp_parvalue", "porog", namindd1, typed1, flagd1, dim1d1, dim2d1, tporog)
if nd then porog = tporog

]]>
</Script_1D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_3D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_3D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_PR SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_PR>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_UI SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
UI_dialog `Пар-ры маркера`,444,260
UI_PAGE 1, -1, "Расположение"
sy = 0

sx = 5
UI_GROUPBOX "Данные для отображения", 1, sy, 440, 120
sy = sy + 12
UI_OUTFIELD "Параметр 1", sx+130, sy, 120, 20
UI_OUTFIELD "Параметр 2", sx+310, sy, 120, 20
sy = sy + 20
for i=1 to 3
	sy = sy + 23*(i>1): UI_OUTFIELD	show_type[i],	sx,	sy+3,	68,	20
				  UI_INFIELD{3} param_otobr[i][2], sx+80, sy, 170, 20
				  UI_INFIELD{3} param_otobr[i][3], sx+80+180, sy, 170, 20
next i
sy = sy + 25
UI_OUTFIELD "Шаблон строки, имена и параметры обрамлять знаком %", sx+90, sy, 360, 15

sy = sy + 20

UI_GROUPBOX "Отступы, в мм макета", 1, sy, 440, 118
sy = sy + 12
UI_OUTFIELD "Параметр 1", sx+90, sy, 80, 15
UI_OUTFIELD "Параметр 2", sx+180, sy, 80, 15
sy = sy + 18
UI_OUTFIELD "От", sx+90, sy, 20, 15
UI_OUTFIELD "Вдоль", sx+90+30, sy, 40, 15

UI_OUTFIELD "От", sx+90+90, sy, 20, 15
UI_OUTFIELD "Вдоль", sx+90+30+90, sy, 40, 15

UI_OUTFIELD "Зерк.", sx+90+90+90, sy-2, 50, 15
UI_OUTFIELD "По стене", sx+90+90+90+60, sy-2, 50, 15
UI_OUTFIELD "Копир.", sx+90+90+90+120, sy-2, 40, 15
sy = sy + 15
for i=1 to 3
	sy = sy + 23*(i>1): UI_OUTFIELD	show_type[i],	sx,	sy+3,	68,	20
				  UI_INFIELD{3} pos_xys[i][2], sx+80, sy, 35, 20
				  UI_INFIELD{3} pos_xys[i][1], sx+80+40, sy, 35, 20

				  UI_INFIELD{3} pos_xys[i][4], sx+80+40+50, sy, 35, 20
				  UI_INFIELD{3} pos_xys[i][3], sx+80+40+50+40, sy, 35, 20

				  UI_INFIELD{3} zerk[i], sx+80+40+50+100, sy, 45, 20
				  UI_INFIELD{3} auto_rot[i], sx+80+40+50+180, sy, 20, 20
				  UI_INFIELD{3} copy_from[i], sx+80+40+50+230, sy, 20, 20

next i
sy = sy + 28
UI_OUTFIELD "Показ. при масштабе", sx, sy+3, 120, 15
UI_INFIELD{3} annot, sx+125, sy, 20, 20

UI_OUTFIELD "Круг", sx+160, sy+3, 25, 15
UI_INFIELD{3} r_circle, sx+185, sy+3, 35, 15

UI_OUTFIELD "Рамка", sx+190+45, sy+3, 32, 15
UI_INFIELD{3} l_mun, sx+190+45+35, sy+3, 35, 15

UI_OUTFIELD "Скрыть пустые", sx+310, sy+3, 80, 15
UI_INFIELD{3} hide_on_error, sx+230+170, sy, 35, 20
]]>
</Script_UI>

<Picture MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="0" length_in_bytes="380" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D494844520000007E0000
	007E02030000009F4D4D1B00000009504C5445FFFFFF000040000000E545F160
	0000012449444154785EEDD4316AC5300C80E15F2682D02943B267EC31D4A1BB
	87E83E3E4AC7D253B618DEF04A2CD1F675CB3F7FC8602CF3A8AEAEAED48D28AF
	84608310A8C5402A3138888192802501620958898158025612600910123065A0
	264048C09481250396002101D39FC192014B80004F1FEF6330016F94168127E0
	790816D881128106D046C02800EC63308B1E1CF30008ECAAAE5EC6A06D9BAA5A
	3B0713345FC56404160AAF1DEC63A05F40190063EE60658E410DC1A62F360002
	33FD1E2C02729C0275EF801E1DB8DB3D9822007A037A03157E081628C066B0FF
	1AD0A05668A7C072003B78A5300433E207F31814C456F631A0294A0BC0AE68E1
	140870DBCD00F4ED8E40FF1F4200FC16F8F71E7F84F87D3F9CA0EE77E0E4D99F
	65FC6F575757579F4D454DF5E0ACCE5D0000000049454E44AE426082
	]]>
</Picture>

<Comment SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Comment>

<Copyright SectVersion="1" SectionFlags="0" SubIdent="0">
	<Author></Author>
	<License>
		<Type>CC0</Type>
		<Version>1.0</Version>
	</License>
</Copyright>

<Keywords SectVersion="1" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Keywords>

</Symbol>
