<?xml version="1.0" encoding="UTF-8"?>
<Symbol IsArchivable="false" IsPlaceable="false" MainGUID="EB05A8B0-2AEC-4357-B7DA-C1A1629D957F" MigrationValue="Normal" Owner="1196638531" Signature="1196644685" Version="43">
<Ancestry SectVersion="1" SectionFlags="0" SubIdent="0" Template="false">
	<MainGUID>F938E33A-329D-4A36-BE3E-85E126820996</MainGUID>
	<MainGUID>103E8D2C-8230-42E1-9597-46F84CCE28C0</MainGUID>
	<MainGUID>B2970E4C-8680-4061-8670-2F4B638F3953</MainGUID>
</Ancestry>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_3D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
! Gen Tank support
! Zsolt Feke


PEN gs_cont_pen
MATERIAL supMat
RESOL res

unID = hptsID
supWidth = 2*SQR(tankRad^2-(tankRad-tankDeepening)^2)
alphaTankDeepening = 180-2*ATN((supWidth/2)/tankDeepening)

aa = footWidth/2-footThick-(supWidth/2+supThick*SIN(alphaTankDeepening))
bb = supHeight-supThick*COS(alphaTankDeepening)-footThick
alphaSup = ATN(aa/bb)


XL = -footWidth/2+footThick+supThick/COS(alphaSup)
YL = -(supHeight-tankDeepening+tankRad-footThick)
M = TAN(90-alphaSup)

Ae = M^2+1
Be = 2*M*YL-2*(M^2)*XL
Ce = (M^2)*(XL^2)-2*M*XL*YL+YL^2-(tankRad+supThick)^2

IP_X = (-Be-SQR(Be^2-4*Ae*Ce))/(2*Ae)
IP_Y = M*(IP_X-XL)+YL+supHeight-tankDeepening+tankRad


ROTx 90

PUT	0, supHeight-tankDeepening+tankRad, 979,
	tankRad, 360, 4079

CUTPOLYA NSP/3, 2, 0,

	GET(NSP)

PUT	-footWidth/2, 0, 15
PUT	footWidth/2, 0, 15
PUT	footWidth/2, footThick, 15
IF gs_detlevel_3D THEN PUT	footWidth/2-footThick, footThick, 15
IF gs_detlevel_3D THEN PUT	supWidth/2+supThick*SIN(alphaTankDeepening), supHeight-supThick*COS(alphaTankDeepening), 15
PUT	supWidth/2, supHeight, 15
PUT	-supWidth/2, supHeight, 15
IF gs_detlevel_3D THEN PUT	-supWidth/2-supThick*SIN(alphaTankDeepening), supHeight-supThick*COS(alphaTankDeepening), 15
IF gs_detlevel_3D THEN PUT	-footWidth/2+footThick, footThick, 15
PUT	-footWidth/2, footThick, 15
PUT	-footWidth/2, 0, -1

IF gs_detlevel_3D THEN
	PUT	-supThick/2, footThick, 15
	PUT	-supThick/2, supHeight-tankDeepening-supThick+(tankRad+supThick-SQR((tankRad+supThick)^2-(supThick/2)^2)), 79
	PUT	0, supHeight-tankDeepening+tankRad, 979
	PUT	IP_X, IP_Y, 3015
	PUT	-footWidth/2+footThick+supThick/COS(alphaSup), footThick, 15
	PUT	-supThick/2, footThick, -1
	PUT	supThick/2, footThick, 15
	PUT	supThick/2, supHeight-tankDeepening-supThick+(tankRad+supThick-SQR((tankRad+supThick)^2-(supThick/2)^2)), 79
	PUT	0, supHeight-tankDeepening+tankRad, 979
	PUT	-IP_X, IP_Y, 3015
	PUT	footWidth/2-footThick-supThick/COS(alphaSup), footThick, 15
	PUT	supThick/2, footThick, -1
ENDIF

PRISM_ NSP/3, supLen,

	GET(NSP)

CUTEND

DEL 1

HOTSPOT footWidth/2, 0, 0, unID: unID=unID+1
HOTSPOT -footWidth/2, 0, 0, unID: unID=unID+1
HOTSPOT footWidth/2, -supLen, 0, unID: unID=unID+1
HOTSPOT -footWidth/2, -supLen, 0, unID: unID=unID+1
]]>
</Script_3D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_2D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
! Gen Tank support
! Zsolt Feke


PEN gs_cont_pen
SET FILL gs_fill_type

unID = hptsID
HOTSPOT2 footWidth/2, 0, unID: unID=unID+1
HOTSPOT2 -footWidth/2, 0, unID: unID=unID+1
HOTSPOT2 footWidth/2, -supLen, unID: unID=unID+1
HOTSPOT2 -footWidth/2, -supLen, unID: unID=unID+1

POLY2_B 5, 1+2+4+64, gs_fill_pen, gs_back_pen,
	footWidth/2, 0, 1,
	footWidth/2, -supLen, 1,
	tankRad, -supLen, 1,
	tankRad, 0, 1,
	footWidth/2, 0, -1

POLY2_B 5, 1+2+4+64, gs_fill_pen, gs_back_pen,
	-footWidth/2, 0, 1,
	-footWidth/2, -supLen, 1,
	-tankRad, -supLen, 1,
	-tankRad, 0, 1,
	-footWidth/2, 0, -1

IF footWidth/2-footThick > tankRad THEN
	LINE2 footWidth/2-footThick, 0, footWidth/2-footThick, -supLen
	LINE2 -footWidth/2+footThick, 0, -footWidth/2+footThick, -supLen
ENDIF
]]>
</Script_2D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_1D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
EPS = 0.0001

tankRad = tankDia/2
]]>
</Script_1D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_PR SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_PR>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_UI SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_UI>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_VL SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[

VALUES "typ" 1, 2
VALUES "tankPos" 0, 1

VALUES "gs_detlevel_3D" 0, 1
]]>
</Script_VL>

<Comment SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Comment>

<ParamSection SectVersion="26" SectionFlags="0" SubIdent="0">
	<ParamSectHeader>
		<AutoHotspots>false</AutoHotspots>
		<StatBits>
			<STBit_FixSize/>
		</StatBits>
		<WDLeftFrame>0</WDLeftFrame>
		<WDRightFrame>0</WDRightFrame>
		<WDTopFrame>0</WDTopFrame>
		<WDBotFrame>0</WDBotFrame>
		<LayFlags>65535</LayFlags>
		<WDMirrorThickness>0</WDMirrorThickness>
		<WDWallInset>0</WDWallInset>
	</ParamSectHeader>
	<Parameters>
		<Length Name="A">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Length Name="B">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Length Name="ZZYZX">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Boolean Name="AC_show2DHotspotsIn3D">
			<Description><![CDATA["Show 2D Hotspots in 3D"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="ac_bottomlevel">
			<Description><![CDATA["Bottom Level"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Length>
		<Length Name="ac_toplevel">
			<Description><![CDATA["Top Level"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="supLen">
			<Description><![CDATA["Support Length"]]></Description>
			<Value>0.1</Value>
		</Length>
		<Length Name="supHeight">
			<Description><![CDATA["Support Height"]]></Description>
			<Value>1</Value>
		</Length>
		<Length Name="supThick">
			<Description><![CDATA["Support Thickness"]]></Description>
			<Value>0.05</Value>
		</Length>
		<Length Name="footWidth">
			<Description><![CDATA["Foot Width"]]></Description>
			<Value>1.8</Value>
		</Length>
		<Length Name="footThick">
			<Description><![CDATA["Foot Thickness"]]></Description>
			<Value>0.1</Value>
		</Length>
		<Length Name="tankDia">
			<Description><![CDATA["Tank Diameter"]]></Description>
			<Value>1.4</Value>
		</Length>
		<Length Name="tankDeepening">
			<Description><![CDATA["Tank Deepening"]]></Description>
			<Value>0.25</Value>
		</Length>
		<Integer Name="gs_detlevel_3D">
			<Description><![CDATA["Detailed Model"]]></Description>
			<Value>1</Value>
		</Integer>
		<Integer Name="res">
			<Description><![CDATA["Resolution"]]></Description>
			<Value>32</Value>
		</Integer>

		<!-- gs_2D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_2D_representation">
			<Description><![CDATA["2D Representation"]]></Description>
		</Title>
		<PenColor Name="gs_cont_pen">
			<Description><![CDATA["Contour Pen"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</PenColor>
		<PenColor Name="gs_fill_pen">
			<Description><![CDATA["Fill Pen"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</PenColor>
		<PenColor Name="gs_back_pen">
			<Description><![CDATA["Fill Background Pen"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</PenColor>
		<FillPattern Name="gs_fill_type">
			<Description><![CDATA["Fill Type"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>65</Value>
		</FillPattern>
		<Material Name="supMat">
			<Description><![CDATA["Support Surface"]]></Description>
			<Value>45</Value>
		</Material>
		<Integer Name="hptsID">
			<Description><![CDATA["Hotspot ID"]]></Description>
			<Value>1</Value>
		</Integer>

		<!-- mep_par_h: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="mep_par_h">
			<Description><![CDATA["Скрытые параметры"]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
		</Title>
		<Boolean Name="mun_elev">
			<Description><![CDATA["Ручной этаж"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Integer Name="n_elev">
			<Description><![CDATA["Номер этажа"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Integer>
		<Length Name="otm_elem">
			<Description><![CDATA["Отметка оси элемента"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="otm_elem_abs">
			<Description><![CDATA["Отметка оси элемента абсолютная"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Boolean Name="show_el">
			<Description><![CDATA["Показ элемента"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Integer Name="tConToolType">
			<Description><![CDATA["Тип инструмента"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Integer>

		<!-- mep_par_geom: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="mep_par_geom">
			<Description><![CDATA["Геометрия"]]></Description>
		</Title>
		<Length Name="mep_th_elem">
			<Description><![CDATA["Толщина стенки"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<String Name="mep_razm">
			<Description><![CDATA["Размер сечения (BxH), мм"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="mep_razm_abs">
			<Description><![CDATA["Размер сечения (MAXxMIN), мм"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<RealNum Name="mep_vol">
			<Description><![CDATA["Внутренний объём, куб.м."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<RealNum Name="mep_s_el">
			<Description><![CDATA["Наружная площадь, кв.м."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<RealNum Name="mep_s_in">
			<Description><![CDATA["Площадь сечения, кв.м."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>

		<!-- mep_par_spec: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="mep_par_spec">
			<Description><![CDATA["Спецификация"]]></Description>
		</Title>
		<String Name="type_spec">
			<Description><![CDATA["Тип спецификации"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="syst_name">
			<Description><![CDATA["Имя системы"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="spec_add_param">
			<Description><![CDATA["Доп.параметры в смету"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="subpos">
			<Description><![CDATA["Входит в сборку"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="naen">
			<Description><![CDATA["Наименование"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="obozn">
			<Description><![CDATA["Обозначение"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<Integer Name="eq_code">
			<Description><![CDATA["Код"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Integer>
		<String Name="eq_plant">
			<Description><![CDATA["Завод-изготовитель"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="komment">
			<Description><![CDATA["Единица измерения"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<RealNum Name="kol_vo_spec">
			<Description><![CDATA["Кол-во"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<RealNum Name="ves">
			<Description><![CDATA["Масса ед., кг."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<RealNum Name="mep_m_ves">
			<Description><![CDATA["Вес п.м., кг."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<RealNum Name="mep_l">
			<Description><![CDATA["Длина, м"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<RealNum Name="mep_s_ins">
			<Description><![CDATA["Площадь изоляции, кв.м."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<RealNum Name="mep_s_pokr">
			<Description><![CDATA["Площадь покрытия, кв.м."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<Material Name="mep_m_ins">
			<Description><![CDATA["Материал изоляции"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Material>
		<Material Name="mep_m_pokr">
			<Description><![CDATA["Материал покрытия"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Material>
		<RealNum Name="mep_ra">
			<Description><![CDATA["Расход"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<String Name="mep_m_gost">
			<Description><![CDATA["ГОСТ на материал"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="mep_gost">
			<Description><![CDATA["ГОСТ на элемент"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
	</Parameters>
</ParamSection>

<CalledMacros SectVersion="2" SectionFlags="0" SubIdent="0">
</CalledMacros>

<Copyright SectVersion="1" SectionFlags="0" SubIdent="0">
	<Author>GRAPHISOFT</Author>
	<License>
		<Type>CC BY-ND</Type>
		<Version>3.0</Version>
	</License>
</Copyright>

</Symbol>
