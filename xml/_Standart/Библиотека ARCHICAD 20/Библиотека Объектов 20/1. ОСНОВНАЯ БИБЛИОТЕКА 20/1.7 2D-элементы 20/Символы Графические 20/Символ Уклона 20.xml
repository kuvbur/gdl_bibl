<?xml version="1.0" encoding="UTF-8"?>
<Symbol IsArchivable="false" IsPlaceable="true" MainGUID="5564BE00-5D91-4432-B7C7-7F7318D53F4A" MigrationValue="Normal" Owner="1196638531" Signature="1196644685" Version="43">
<Ancestry SectVersion="1" SectionFlags="0" SubIdent="0" Template="false">
	<MainGUID>F938E33A-329D-4A36-BE3E-85E126820996</MainGUID>
	<MainGUID>B176ABF1-5813-478F-926B-28EE7C5DC1F7</MainGUID>
	<MainGUID>4FD10D67-2F29-4844-A65A-6597589B0CB5</MainGUID>
</Ancestry>

<CalledMacros SectVersion="2" SectionFlags="0" SubIdent="0">
</CalledMacros>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_3D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_3D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_2D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
define style textStyle fontType,fsz,7,
			gs_text_style_bold + 2 * gs_text_style_italic + 4 * gs_text_style_underline

style textStyle

paperToModel = GLOB_SCALE/1000

! --- Oriented View ------------------------------ [

angleViewRot = 0
if dt then
	rrr = REQUEST ("View_Rotangle", "", angleViewRot)
endif
totalRotate = (SYMB_ROTANGLE + angleViewRot) MOD 360

! --- Oriented View ------------------------------ ]

pen gs_cont_pen

unID = 1
HOTSPOT2 0,0,unID :	unID=unID+1

	HOTSPOT2 0,0,unID,a,1+128 :unID=unID+1
	HOTSPOT2 a,0,unID,a,2 :unID=unID+1
	HOTSPOT2 -1,0,unID,a,3 :unID=unID+1

HOTSPOT2 a/2,0,unID :	unID=unID+1

if iSlopeSymbolStyle = SYMBOL_STYLE_1 or iSlopeSymbolStyle = SYMBOL_STYLE_4 or iSlopeSymbolStyle = SYMBOL_STYLE_5 or iSlopeSymbolStyle = SYMBOL_STYLE_6 then valt=a
if iSlopeSymbolStyle = SYMBOL_STYLE_2 then valt=a-arrowx
if iSlopeSymbolStyle = SYMBOL_STYLE_3 then valt=a-(arrowx*2/3)
	line2 0,0,valt,0


If iSlopeSymbolStyle = SYMBOL_STYLE_1 then
	line2 a-arrowx,arrowy/2,a,0
	line2 a-arrowx,-arrowy/2,a,0

endif

If iSlopeSymbolStyle = SYMBOL_STYLE_2 then
	line2 a-arrowx,arrowy/2,a,0
	line2 a-arrowx,-arrowy/2,a,0
	line2 a-arrowx,-arrowy/2,a-arrowx,arrowy/2

	fill gs_fill_type

	POLY2_b 4, 2,gs_fill_pen,gs_back_pen,
		a,0,0,
		a-arrowx,arrowy/2,0,
		a-arrowx,-arrowy/2,0,
		a,0,-1

endif

If iSlopeSymbolStyle = SYMBOL_STYLE_3 then
	line2 a-arrowx,arrowy/2,a,0
	line2 a-arrowx,-arrowy/2,a,0
	line2 a-arrowx,arrowy/2,a-(arrowx*2/3),0
	line2 a-arrowx,-arrowy/2,a-(arrowx*2/3),0

	fill gs_fill_type

	POLY2_b 5, 2,gs_fill_pen,gs_back_pen,
		a,0,0,
		a-arrowx,arrowy/2,0,
		a-(arrowx*2/3),0,0,
		a-arrowx,-arrowy/2,0,
		a,0,-1

endif

If iSlopeSymbolStyle = SYMBOL_STYLE_4 then
	line2 a-arrowx,arrowy/2,a,0

endif

If iSlopeSymbolStyle = SYMBOL_STYLE_5 then
	line2 a-arrowx,arrowy/2,a,0
	line2 a-arrowx,arrowy/2,a-arrowx,0

	fill gs_fill_type

	POLY2_b 4, 2,gs_fill_pen,gs_back_pen,
		a,0,0,
		a-arrowx,arrowy/2,0,
		a-arrowx,0,0,
		a,0,-1

endif

If iSlopeSymbolStyle = SYMBOL_STYLE_6 then
	line2 a-arrowx,arrowy/2,a,0
	line2 a-arrowx,arrowy/2,a-(arrowx*2/3),0

	fill gs_fill_type

	POLY2_b 4, 2,gs_fill_pen,gs_back_pen,
		a,0,0,
		a-arrowx,arrowy/2,0,
		a-(arrowx*2/3),0,0,
		a,0,-1

endif


! ======================================================================
! 2D TEXT
! ======================================================================
nTrans = 0
if dt then
	pen tpen

	style textStyle
	nnn = request ("Height_of_style", "textStyle", textHeight)
	textHeight = textHeight * paperToModel
	textWidth = stw(txt) * paperToModel

	add2 txtx,txty
	nTrans = nTrans + 1

	! Text Rotation - Readable / Always Horizontal / Align with Symbol
	! ----------------------------------------------------------------------
	if typeTextRotation_m = 2 then								! Readable
		if (totalRotate > (gs_readable_angle + eps) & totalRotate < (gs_readable_angle + 180 + eps)) then
			rot2 180
			add2 -textWidth ,-textHeight
			nTrans = nTrans + 2
		endif
	else
		if typeTextRotation_m = 1 then							! Horizontal
			rot2 totalRotate * (SYMB_MIRRORED - not(SYMB_MIRRORED)) ! 1/-1
			nTrans = nTrans + 1
		endif
	endif
	! ----------------------------------------------------------------------
	Text2 0,0,txt
	del nTrans

	!Text hotspots

	HOTSPOT2 0, txty, unID,  txtx,  1+128   : unID=unID+1
	HOTSPOT2 txtx, txty, unID,  txtx,  2    : unID=unID+1
	HOTSPOT2 -1, txty, unID,  txtx,  3    : unID=unID+1

	HOTSPOT2 txtx, 0, unID,  txty,  1+128   : unID=unID+1
	HOTSPOT2 txtx, txty, unID,  txty,  2    : unID=unID+1
	HOTSPOT2 txtx, -1, unID,  txty,  3    : unID=unID+1

endif

]]>
</Script_2D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_1D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
EPS = 0.00001

! const values for parameter: iSlopeSymbolStyle
SYMBOL_STYLE_1 = 1
SYMBOL_STYLE_2 = 2
SYMBOL_STYLE_3 = 3
SYMBOL_STYLE_4 = 4
SYMBOL_STYLE_5 = 5
SYMBOL_STYLE_6 = 6
]]>
</Script_1D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_PR SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_PR>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_UI SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_UI>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_VL SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
values "typeTextRotation" `Читаемый`,`Всегда Горизонтально`,`Выровнять по Символу`
values "typeTextRotation_m" 2, 1, 0

if GLOB_MODPAR_NAME = "typeTextRotation" then
	if typeTextRotation = `Читаемый`			then typeTextRotation_m = 2
	if typeTextRotation = `Всегда Горизонтально`	then typeTextRotation_m = 1
	if typeTextRotation = `Выровнять по Символу`	then typeTextRotation_m = 0
	parameters typeTextRotation_m = typeTextRotation_m
else
	if typeTextRotation_m = 2					then typeTextRotation = `Читаемый`
	if typeTextRotation_m = 1					then typeTextRotation = `Всегда Горизонтально`
	if typeTextRotation_m = 0					then typeTextRotation = `Выровнять по Символу`
	parameters typeTextRotation = typeTextRotation
endif

if not(dt) then
	lock	"txt", "tpen", "fontType", "fsz", "fsz_point",
			"gs_text_style_bold", "gs_text_style_italic", "gs_text_style_underline",
			"txtx", "txty", "typeTextRotation"
	hideparameter	"txt", "tpen", "fontType", "fsz", "fsz_point",
			"gs_text_style_bold", "gs_text_style_italic", "gs_text_style_underline",
			"txtx", "txty", "typeTextRotation"
endif

values "fsz" range (0,]

if tpen=0 then parameters tpen=46
if gs_cont_pen=0 then parameters gs_cont_pen=2

values{2} "iSlopeSymbolStyle" 	SYMBOL_STYLE_1, `Стиль 1`,
								SYMBOL_STYLE_2, `Стиль 2`,
								SYMBOL_STYLE_3, `Стиль 3`,
								SYMBOL_STYLE_4, `Стиль 4`,
								SYMBOL_STYLE_5, `Стиль 5`,
								SYMBOL_STYLE_6, `Стиль 6`

if iSlopeSymbolStyle = SYMBOL_STYLE_1 or iSlopeSymbolStyle = SYMBOL_STYLE_4 then lock "gs_fill_type","gs_fill_pen","gs_back_pen"


VALUES "A" RANGE [arrowx,)

Dot_in_mm = 25.4 / 72

! Synhronized mm and point in marker width
if GLOB_MODPAR_NAME = "fsz_point" then
	parameters fsz = fsz_point * Dot_in_mm
	fsz = fsz_point * Dot_in_mm
else
	parameters fsz_point = fsz / Dot_in_mm
	fsz_point = fsz / Dot_in_mm
endif
]]>
</Script_VL>

<Comment SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[Различные типы 2D-знака наклона с дополнительным текстом.]]>
</Comment>

<Keywords SectVersion="1" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Keywords>

<ParamSection SectVersion="22" SectionFlags="0" SubIdent="0">
	<ParamSectHeader>
		<AutoHotspots>false</AutoHotspots>
		<StatBits>
			<STBit_FixSize/>
		</StatBits>
		<WDLeftFrame>0</WDLeftFrame>
		<WDRightFrame>0</WDRightFrame>
		<WDTopFrame>0</WDTopFrame>
		<WDBotFrame>0</WDBotFrame>
		<LayFlags>65535</LayFlags>
		<WDMirrorThickness>0</WDMirrorThickness>
		<WDWallInset>0</WDWallInset>
	</ParamSectHeader>
	<Parameters>
		<Length Name="A">
			<Description><![CDATA["Размер 1"]]></Description>
			<Fix/>
			<Value>3</Value>
		</Length>
		<Length Name="B">
			<Description><![CDATA["Размер 2"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Length>
		<Integer Name="iSlopeSymbolStyle">
			<Description><![CDATA["Тип"]]></Description>
			<Value>2</Value>
		</Integer>
		<Length Name="arrowx">
			<Description><![CDATA["Ширина Стрелки"]]></Description>
			<Value>0.2</Value>
		</Length>
		<Length Name="arrowy">
			<Description><![CDATA["Высота Стрелки"]]></Description>
			<Value>0.2</Value>
		</Length>

		<!-- dt: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Boolean Name="dt">
			<Description><![CDATA["Показ Текста"]]></Description>
			<Flags>
				<ParFlg_BoldName/>
			</Flags>
			<Value>1</Value>
		</Boolean>
		<PenColor Name="tpen">
			<Description><![CDATA["Перо Текста"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>46</Value>
		</PenColor>
		<String Name="txt">
			<Description><![CDATA["Текст"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Наклон 2%"]]></Value>
		</String>
		<String Name="fontType">
			<Description><![CDATA["Тип Шрифта"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Arial"]]></Value>
		</String>
		<RealNum Name="fsz">
			<Description><![CDATA["Размер Шрифта (мм)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>4</Value>
		</RealNum>
		<RealNum Name="fsz_point">
			<Description><![CDATA["Размер Шрифта (пт)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>11.3385826772</Value>
		</RealNum>
		<Boolean Name="gs_text_style_bold">
			<Description><![CDATA["Жирный Шрифт"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Boolean Name="gs_text_style_italic">
			<Description><![CDATA["Курсивный Шрифт"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Boolean Name="gs_text_style_underline">
			<Description><![CDATA["Подчеркнутый Шрифт"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="txtx">
			<Description><![CDATA["Позиция Текста по X"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="txty">
			<Description><![CDATA["Позиция Текста по Y"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<String Name="typeTextRotation">
			<Description><![CDATA["Ориентация Текста в Символе"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Читаемый"]]></Value>
		</String>
		<Integer Name="typeTextRotation_m">
			<Description><![CDATA["Ориентация Текста в Символе"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>2</Value>
		</Integer>

		<!-- gs_2D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_2D_representation">
			<Description><![CDATA["2D-отображение"]]></Description>
		</Title>
		<PenColor Name="gs_cont_pen">
			<Description><![CDATA["Перо Контура"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</PenColor>
		<FillPattern Name="gs_fill_type">
			<Description><![CDATA["Тип Штриховки"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>64</Value>
		</FillPattern>
		<PenColor Name="gs_fill_pen">
			<Description><![CDATA["Перо Штриховки"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</PenColor>
		<PenColor Name="gs_back_pen">
			<Description><![CDATA["Перо Фона Штриховки"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>
		<Angle Name="gs_readable_angle">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>90</Value>
		</Angle>
	</Parameters>
</ParamSection>

<Picture MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="0" length_in_bytes="644" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D49484452000000800000
	0080040300000031107CF800000018504C5445FFFFFFFCFCFC010101F5F5F50A
	0A0AEDEDED1111110000008004AA0C0000021D49444154785EEDD3BD4E233114
	05E07362A2B4E73288B48389706B2F4F9050B8655F611BDA30B2F0EBEF842688
	35D24ED2FAD3952BFB5CCB3FF82F5DD7755DD7755DD7755D278906398254A4B0
	9073949C1011610ECB0922C857C299E671310E0996121441731096923833C1E1
	152661A968A7A23990090ECBC59B503400CF1B8FB47AC0525AD512DEF12AEECA
	3B2B16D3DCF46E02B41DE9552418D1124D6871A7F20379BF8F4FDB17D36F080D
	0986A644414F10B747869B478816D1C09828B43C3BDD0738AE1EB40BA8EF34B4
	0888681920F82344DBF987DDEDF41449B424B5034C76BB33C5C495DFBC7C6873
	746831B4C1C1BDEDCD06CE5663E5ED189B9D143D5A28BB2B7210057914AD46A1
	4921A345CA2341C224AF8ACD9E428331D4A348403C87CEB029B966A7C46135BA
	BB5020A80196273F826B40F84ABFC22E54C001DB4730EF131D5AAC4C3E1BE0C0
	EF176C80330D118C308A110D11D5EFEA2146C9CEA13362A09380846846809235
	C0BD155F26BFE6C07F2E08A40C03068AD49A68206AF5D34739DAF717E9244490
	8664910E129AE80F3EE7EC479E1BD4590921D743F535783FE55C8A0F536DF17E
	AE5915CE012721D43AD5E973C6A71F03823F6DA28AB84C9E571F0EFE485C84A8
	D3E721F2CBAFB405E0FEF85C4258D3119788984A09078B92E1222AA17E7FCA5C
	002EFBF367BA80A9D6230C8088CB848C6B2806E11A866B25455C43C09501C90C
	D74830E22AC9849F755DD7755DD7E12F8FD171FD3D83D09E0000000049454E44
	AE426082
	]]>
</Picture>

<Copyright SectVersion="1" SectionFlags="0" SubIdent="0">
	<Author>GRAPHISOFT</Author>
	<License>
		<Type>CC BY-ND</Type>
		<Version>3.0</Version>
	</License>
</Copyright>

<MigrationTable SectVersion="1" SectionFlags="0" SubIdent="0">
	<MigrationTableElement>
		<MainGUID>7EA2CAF8-5E62-4055-8133-52D4373C8DF4</MainGUID>
		<Version>19</Version>
		<Name><![CDATA[""]]></Name>
		<AutoMigration>true</AutoMigration>
	</MigrationTableElement>
</MigrationTable>

</Symbol>
