<?xml version="1.0" encoding="UTF-8"?>
<Symbol IsArchivable="false" IsPlaceable="false" MainGUID="AE58A972-1F66-4CDE-A654-AAC4D09FD56B" MigrationValue="Normal" Owner="1196638531" Signature="1196644685" Version="38">
<Ancestry SectVersion="1" SectionFlags="0" SubIdent="0" Template="false">
	<MainGUID>F938E33A-329D-4A36-BE3E-85E126820996</MainGUID>
	<MainGUID>103E8D2C-8230-42E1-9597-46F84CCE28C0</MainGUID>
	<MainGUID>C76BC373-89AE-4368-A490-BB2485825242</MainGUID>
	<MainGUID>18C30D24-45D7-4E35-8916-EBF00542D4AF</MainGUID>
</Ancestry>

<CalledMacros SectVersion="2" SectionFlags="0" SubIdent="0">
</CalledMacros>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_3D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_3D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_2D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
pen gs_cont_pen
fill gs_fill_type

gosub "playField"


if abs (winner) < EPS then
	gosub "fieldHotspots"
endif


gosub "fieldLogic"


gosub "showTexts"


! ===============================================================================
end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end
! ===============================================================================


! -------------------------------------------------------------------------------
"playField":
! -------------------------------------------------------------------------------

	poly2_b 4, 1+2+4+64, gs_fill_pen, gs_back_pen,
		0, 0, 1,
		3, 0, 1,
		3, 3, 1,
		0, 3, 1

	line2 1, 0, 1, 3
	line2 2, 0, 2, 3
	line2 0, 1, 3, 1
	line2 0, 2, 3, 2

	unID = 1000000
	hotspot2 0, 0, unID : unID = unID + 1
	hotspot2 3, 0, unID : unID = unID + 1
	hotspot2 3, 3, unID : unID = unID + 1
	hotspot2 0, 3, unID : unID = unID + 1
return


! -------------------------------------------------------------------------------
"fieldHotspots":
! -------------------------------------------------------------------------------
	unID = 1000

	if abs (ownedFields[1][1]) < EPS then
		add2 0.5, 2.5
		hotspot2 0,						0, unID, editValuesForPlay11, 1 + 128	: unID = unID + 1
		hotspot2 editValuesForPlay11,	0, unID, editValuesForPlay11, 2			: unID = unID + 1
		hotspot2 -1,					0, unID, editValuesForPlay11, 3			: unID = unID + 1
		del 1
	endif
	if abs (ownedFields[1][2]) < EPS then
		add2 1.5, 2.5
		hotspot2 0,						0, unID, editValuesForPlay12, 1 + 128	: unID = unID + 1
		hotspot2 editValuesForPlay12,	0, unID, editValuesForPlay12, 2			: unID = unID + 1
		hotspot2 -1,					0, unID, editValuesForPlay12, 3			: unID = unID + 1
		del 1
	endif
	if abs (ownedFields[1][3]) < EPS then
		add2 2.5, 2.5
		hotspot2 0,						0, unID, editValuesForPlay13, 1 + 128	: unID = unID + 1
		hotspot2 editValuesForPlay13,	0, unID, editValuesForPlay13, 2			: unID = unID + 1
		hotspot2 -1,					0, unID, editValuesForPlay13, 3			: unID = unID + 1
		del 1
	endif
	if abs (ownedFields[2][1]) < EPS then
		add2 0.5, 1.5
		hotspot2 0,						0, unID, editValuesForPlay21, 1 + 128	: unID = unID + 1
		hotspot2 editValuesForPlay21,	0, unID, editValuesForPlay21, 2			: unID = unID + 1
		hotspot2 -1,					0, unID, editValuesForPlay21, 3			: unID = unID + 1
		del 1
	endif
	if abs (ownedFields[2][2]) < EPS then
		add2 1.5, 1.5
		hotspot2 0,						0, unID, editValuesForPlay22, 1 + 128	: unID = unID + 1
		hotspot2 editValuesForPlay22,	0, unID, editValuesForPlay22, 2			: unID = unID + 1
		hotspot2 -1,					0, unID, editValuesForPlay22, 3			: unID = unID + 1
		del 1
	endif
	if abs (ownedFields[2][3]) < EPS then
		add2 2.5, 1.5
		hotspot2 0,						0, unID, editValuesForPlay23, 1 + 128	: unID = unID + 1
		hotspot2 editValuesForPlay23,	0, unID, editValuesForPlay23, 2			: unID = unID + 1
		hotspot2 -1,					0, unID, editValuesForPlay23, 3			: unID = unID + 1
		del 1
	endif
	if abs (ownedFields[3][1]) < EPS then
		add2 0.5, 0.5
		hotspot2 0,						0, unID, editValuesForPlay31, 1 + 128	: unID = unID + 1
		hotspot2 editValuesForPlay31,	0, unID, editValuesForPlay31, 2			: unID = unID + 1
		hotspot2 -1,					0, unID, editValuesForPlay31, 3			: unID = unID + 1
		del 1
	endif
	if abs (ownedFields[3][2]) < EPS then
		add2 1.5, 0.5
		hotspot2 0,						0, unID, editValuesForPlay32, 1 + 128	: unID = unID + 1
		hotspot2 editValuesForPlay32,	0, unID, editValuesForPlay32, 2			: unID = unID + 1
		hotspot2 -1,					0, unID, editValuesForPlay32, 3			: unID = unID + 1
		del 1
	endif
	if abs (ownedFields[3][3]) < EPS then
		add2 2.5, 0.5
		hotspot2 0,						0, unID, editValuesForPlay33, 1 + 128	: unID = unID + 1
		hotspot2 editValuesForPlay33,	0, unID, editValuesForPlay33, 2			: unID = unID + 1
		hotspot2 -1,					0, unID, editValuesForPlay33, 3			: unID = unID + 1
		del 1
	endif

return


! -------------------------------------------------------------------------------
"fieldLogic":
! -------------------------------------------------------------------------------
	add2 0.5, 2.5

	for i = 1 to vardim2(ownedFields)
		for j = 1 to vardim1(ownedFields)
!			text2 0, 0, ownedFields[i][j]
			if ownedFields[i][j] = 1 then gosub "drawCircle"
			if ownedFields[i][j] = 2 then gosub "drawX"
			add2 1, 0
		next j
		del vardim1(ownedFields)
		add2 0, -1
	next i
	del vardim2(ownedFields) + 1

return


! -------------------------------------------------------------------------------
"showTexts":
! -------------------------------------------------------------------------------
	define style "textstyle001" fontType, 250/GLOB_SCALE, 7, 2

	set style "textstyle001"

	text2 0, 3.8, `Tic-Tac-Toe Game`

	if abs(winner) < EPS & nTurns < 9 then
		if bFirstPlayersTurn then
			text2 0, 3.2, `Next turn: Player X`
		else
			text2 0, 3.2, `Next turn: Player O`
		endif
	endif

	if abs (winner) < EPS & nTurns = 9 then
		text2 0, 3.2, `Draw game.`
	endif
	if abs (winner - 1) < EPS then
		text2 0, 3.2, `The winner is Player O!`
	endif
	if abs (winner - 2) < EPS then
		text2 0, 3.2, `The winner is Player X!`
	endif

return


! -------------------------------------------------------------------------------
"drawCircle":
! -------------------------------------------------------------------------------
	circle2 0, 0, 0.25

return


! -------------------------------------------------------------------------------
"drawX":
! -------------------------------------------------------------------------------
	line2 -0.25, -0.25, 0.25,  0.25
	line2 -0.25,  0.25, 0.25, -0.25

return
]]>
</Script_2D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_1D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
EPS = 0.0001

nTurns = 0
for i = 1 to vardim1 (ownedFields)
	for j = 1 to vardim2 (ownedFields)
		if ownedFields[j][i] > EPS then nTurns = nTurns + 1
	next j
next i

bFirstPlayersTurn = 0
bSecondPlayersTurn = 0

if nTurns = 0 | nTurns = 2 | nTurns = 4 | nTurns = 6 | nTurns = 8 then
	bFirstPlayersTurn = 1
else
	bSecondPlayersTurn = 1
endif

winner = 0
for i = 1 to 2
	if 	nTurns > 0 & \
		(	ownedFields[1][1] = i & ownedFields[1][2] = i & ownedFields[1][3] = i | \
			ownedFields[2][1] = i & ownedFields[2][2] = i & ownedFields[2][3] = i | \
			ownedFields[3][1] = i & ownedFields[3][2] = i & ownedFields[3][3] = i | \

			ownedFields[1][1] = i & ownedFields[2][1] = i & ownedFields[3][1] = i | \
			ownedFields[1][2] = i & ownedFields[2][2] = i & ownedFields[3][2] = i | \
			ownedFields[1][3] = i & ownedFields[2][3] = i & ownedFields[3][3] = i | \

			ownedFields[1][1] = i & ownedFields[2][2] = i & ownedFields[3][3] = i | \
			ownedFields[1][3] = i & ownedFields[2][2] = i & ownedFields[3][1] = i \
		) then
		winner = i
	endif
next i

]]>
</Script_1D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_PR SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_PR>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_UI SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_UI>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_VL SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[


if GLOB_MODPAR_NAME = "editValuesForPlay11" then
	if bFirstPlayersTurn then
		ownedFields[1][1] = 1
	else
		ownedFields[1][1] = 2
	endif
	parameters ownedFields[1][1] = ownedFields[1][1]
endif
if GLOB_MODPAR_NAME = "editValuesForPlay12" then
	if bFirstPlayersTurn then
		ownedFields[1][2] = 1
	else
		ownedFields[1][2] = 2
	endif
	parameters ownedFields[1][2] = ownedFields[1][2]
endif
if GLOB_MODPAR_NAME = "editValuesForPlay13" then
	if bFirstPlayersTurn then
		ownedFields[1][3] = 1
	else
		ownedFields[1][3] = 2
	endif
	parameters ownedFields[1][3] = ownedFields[1][3]
endif

if GLOB_MODPAR_NAME = "editValuesForPlay21" then
	if bFirstPlayersTurn then
		ownedFields[2][1] = 1
	else
		ownedFields[2][1] = 2
	endif
	parameters ownedFields[2][1] = ownedFields[2][1]
endif
if GLOB_MODPAR_NAME = "editValuesForPlay22" then
	if bFirstPlayersTurn then
		ownedFields[2][2] = 1
	else
		ownedFields[2][2] = 2
	endif
	parameters ownedFields[2][2] = ownedFields[2][2]
endif
if GLOB_MODPAR_NAME = "editValuesForPlay23" then
	if bFirstPlayersTurn then
		ownedFields[2][3] = 1
	else
		ownedFields[2][3] = 2
	endif
	parameters ownedFields[2][3] = ownedFields[2][3]
endif

if GLOB_MODPAR_NAME = "editValuesForPlay31" then
	if bFirstPlayersTurn then
		ownedFields[3][1] = 1
	else
		ownedFields[3][1] = 2
	endif
	parameters ownedFields[3][1] = ownedFields[3][1]
endif
if GLOB_MODPAR_NAME = "editValuesForPlay32" then
	if bFirstPlayersTurn then
		ownedFields[3][2] = 1
	else
		ownedFields[3][2] = 2
	endif
	parameters ownedFields[3][2] = ownedFields[3][2]
endif
if GLOB_MODPAR_NAME = "editValuesForPlay33" then
	if bFirstPlayersTurn then
		ownedFields[3][3] = 1
	else
		ownedFields[3][3] = 2
	endif
	parameters ownedFields[3][3] = ownedFields[3][3]
endif

if bRestart then
	for i = 1 to 3
		for j = 1 to 3
			ownedFields[i][j] = 0
			parameters ownedFields[i][j] = 0
		next j
	next i
	parameters editValuesForPlay11 = 0
	parameters editValuesForPlay12 = 0
	parameters editValuesForPlay13 = 0
	parameters editValuesForPlay21 = 0
	parameters editValuesForPlay22 = 0
	parameters editValuesForPlay23 = 0
	parameters editValuesForPlay31 = 0
	parameters editValuesForPlay32 = 0
	parameters editValuesForPlay33 = 0
	parameters bRestart = 0
endif

]]>
</Script_VL>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Comment SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Comment>

<ParamSection SectVersion="26" SectionFlags="0" SubIdent="0">
	<ParamSectHeader>
		<Version>26</Version>
		<AutoHotspots>false</AutoHotspots>
		<StatBits>
			<STBit_FixSize/>
		</StatBits>
		<WDLeftFrame>0</WDLeftFrame>
		<WDRightFrame>0</WDRightFrame>
		<WDTopFrame>0</WDTopFrame>
		<WDBotFrame>0</WDBotFrame>
		<LayFlags>65535</LayFlags>
		<WDMirrorThickness>0</WDMirrorThickness>
		<WDWallInset>0</WDWallInset>
		<SymbolColor>0</SymbolColor>
	</ParamSectHeader>
	<Parameters>
		<Length Name="A">
			<Description><![CDATA["Dimension 1"]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Length Name="B">
			<Description><![CDATA["Dimension 2"]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Length Name="ZZYZX">
			<Description><![CDATA["Height"]]></Description>
			<Fix/>
			<Value>1</Value>
		</Length>
		<Boolean Name="AC_show2DHotspotsIn3D">
			<Description><![CDATA["Show 2D Hotspots in 3D"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Boolean>
		<Length Name="ac_bottomlevel">
			<Description><![CDATA["Bottom Level"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Length>
		<Length Name="ac_toplevel">
			<Description><![CDATA["Top Level"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="gs_seat_height">
			<Description><![CDATA["Seat Height"]]></Description>
			<Fix/>
			<Value>0.4</Value>
		</Length>

		<!-- gs_2D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_2D_representation">
			<Description><![CDATA["2D Representation"]]></Description>
			<Fix/>
		</Title>
		<Integer Name="ownedFields">
			<Description><![CDATA[""]]></Description>
			<ArrayValues FirstDimension="3" SecondDimension="3">
				<AVal Column="1" Row="1">0</AVal>
				<AVal Column="2" Row="1">0</AVal>
				<AVal Column="3" Row="1">0</AVal>
				<AVal Column="1" Row="2">0</AVal>
				<AVal Column="2" Row="2">0</AVal>
				<AVal Column="3" Row="2">0</AVal>
				<AVal Column="1" Row="3">0</AVal>
				<AVal Column="2" Row="3">0</AVal>
				<AVal Column="3" Row="3">0</AVal>
			</ArrayValues>
		</Integer>
		<Length Name="editValuesForPlay11">
			<Description><![CDATA[""]]></Description>
			<Value>0</Value>
		</Length>
		<Length Name="editValuesForPlay12">
			<Description><![CDATA[""]]></Description>
			<Value>0</Value>
		</Length>
		<Length Name="editValuesForPlay13">
			<Description><![CDATA[""]]></Description>
			<Value>0</Value>
		</Length>
		<Length Name="editValuesForPlay21">
			<Description><![CDATA[""]]></Description>
			<Value>0</Value>
		</Length>
		<Length Name="editValuesForPlay22">
			<Description><![CDATA[""]]></Description>
			<Value>0</Value>
		</Length>
		<Length Name="editValuesForPlay23">
			<Description><![CDATA[""]]></Description>
			<Value>0</Value>
		</Length>
		<Length Name="editValuesForPlay31">
			<Description><![CDATA[""]]></Description>
			<Value>0</Value>
		</Length>
		<Length Name="editValuesForPlay32">
			<Description><![CDATA[""]]></Description>
			<Value>0</Value>
		</Length>
		<Length Name="editValuesForPlay33">
			<Description><![CDATA[""]]></Description>
			<Value>0</Value>
		</Length>
		<Boolean Name="bRestart">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Unique/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<PenColor Name="gs_cont_pen">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Value>20</Value>
		</PenColor>
		<FillPattern Name="gs_fill_type">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Value>65</Value>
		</FillPattern>
		<PenColor Name="gs_fill_pen">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Value>19</Value>
		</PenColor>
		<PenColor Name="gs_back_pen">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Value>19</Value>
		</PenColor>

		<!-- gs_material: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_material">
			<Description><![CDATA["Surfaces"]]></Description>
			<Fix/>
		</Title>
		<Material Name="gs_frame_mat">
			<Description><![CDATA["Frame"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>15</Value>
		</Material>
		<Material Name="gs_seat_mat">
			<Description><![CDATA["Seating"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>66</Value>
		</Material>
		<Material Name="gs_back_mat">
			<Description><![CDATA["Backrest"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>66</Value>
		</Material>
		<String Name="fontType">
			<Description><![CDATA[""]]></Description>
			<Value><![CDATA["Arial"]]></Value>
		</String>

		<!-- gs_list: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_list">
			<Description><![CDATA["Parameters for Listing"]]></Description>
			<Fix/>
		</Title>
		<RealNum Name="gs_list_cost">
			<Description><![CDATA["Cost"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<String Name="gs_list_manufacturer">
			<Description><![CDATA["Manufacturer"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_note">
			<Description><![CDATA["Note/Remarks"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_location">
			<Description><![CDATA["Location"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_accessories">
			<Description><![CDATA["Accessories"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="FM_Type">
			<Description><![CDATA["Group Type"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Мебель"]]></Value>
		</String>
		<Integer Name="iFMType">
			<Description><![CDATA["Group Type"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>16</Value>
		</Integer>
		<String Name="FM_InventoryNumber">
			<Description><![CDATA["Inventory Number"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="FM_SerialNumber">
			<Description><![CDATA["Serial Number"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="FM_ProductionYear">
			<Description><![CDATA["Production Year"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<RealNum Name="FM_ObjectWeight">
			<Description><![CDATA["Object Weight"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<String Name="FM_ObjectWeightUnit">
			<Description><![CDATA["Object Weight Unit"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["кг"]]></Value>
		</String>
		<String Name="gs_list_custom1">
			<Description><![CDATA["User Defined 1"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom2">
			<Description><![CDATA["User Defined 2"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom3">
			<Description><![CDATA["User Defined 3"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom4">
			<Description><![CDATA["User Defined 4"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom5">
			<Description><![CDATA["User Defined 5"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
	</Parameters>
</ParamSection>

<Copyright SectVersion="1" SectionFlags="0" SubIdent="0">
	<Author>GRAPHISOFT</Author>
	<License>
		<Type>CC BY-ND</Type>
		<Version>3.0</Version>
	</License>
</Copyright>

</Symbol>
