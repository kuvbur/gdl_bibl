<?xml version="1.0" encoding="UTF-8"?>
<Symbol IsArchivable="false" IsPlaceable="false" MainGUID="A9DAB5B8-E5A4-4A9D-AD56-5C12BA1F900E" MigrationValue="Normal" Owner="1196638531" Signature="1196644685" Version="43">
<Ancestry SectVersion="1" SectionFlags="0" SubIdent="0" Template="false">
	<MainGUID>F938E33A-329D-4A36-BE3E-85E126820996</MainGUID>
	<MainGUID>103E8D2C-8230-42E1-9597-46F84CCE28C0</MainGUID>
	<MainGUID>2BE37B56-E4CC-412B-BA03-C60B6C3F0D5C</MainGUID>
	<MainGUID>F14D8497-D0A3-4AFB-AE53-ACBBC289B577</MainGUID>
</Ancestry>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_3D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
! ==============================================================================
! bollard_m
! ==============================================================================


if gs_detlevel_3D_m = 0 then end
if not (gs_shadow) then shadow off

if GLOB_CONTEXT > 20 & GLOB_CONTEXT < 40 then
	gs_resol = 6
	gs_detlevel_3D_m = 1
endif

if gs_detlevel_3D_m = 1 then resol 6
if gs_detlevel_3D_m = 2 then resol gs_resol

pen gs_cont_pen


! ==============================================================================
! 3D Hotspots
! ==============================================================================

Unid = bollardUnID
if not(bPartOfLayout) then
	hotspot 0,0,0,unID, ZZYZX,1+256 : unID=unID+1
	hotspot 0,0,-1,unID, ZZYZX,3 : unID=unID+1
	hotspot 0,0,ZZYZX,unID, ZZYZX,2 : unID=unID+1
endif

if bPartOfLayout then
	if bRotableLayout then
		if gs_terra_m = LENGTHWISE_SLOPE then
			ADDz max(bollardDepth/2,bollardDia/2)*tan(gs_terrx)
			ROTx gs_terrx
		endif
		if gs_terra_m = SIDEWISE_SLOPE then
			ADDz max(bollardWidth/2,bollardDia/2)*tan(gs_terry)
			ROTy gs_terry
		endif
	endif

	hotspot 0, yBollardPos, 0, unID, xBollardPos, 1+128 		: unID=unID+1
	hotspot -1, yBollardPos, 0, unID, xBollardPos, 3 			: unID=unID+1
	hotspot xBollardPos, yBollardPos, 0, unID, xBollardPos, 2	: unID=unID+1

	hotspot xBollardPos, 0, 0, unID, yBollardPos, 1+128 		: unID=unID+1
	hotspot xBollardPos, -1, 0, unID, yBollardPos, 3 			: unID=unID+1
	hotspot xBollardPos, yBollardPos, 0, unID, yBollardPos, 2 	: unID=unID+1

	if bRotableLayout then
		if gs_terra_m = LENGTHWISE_SLOPE or gs_terra_m = SIDEWISE_SLOPE then del 2
	endif
endif


! ==============================================================================
! Bollard Types 3D
! ==============================================================================

if bPartOfLayout then
	bollardOffsetRatX = 1
	bollardOffsetRatY = 1
	bollardOffsetZ = 0
	if bRotableLayout then
		if gs_terra_m = LENGTHWISE_SLOPE then
			bollardOffsetRatX = 1
			bollardOffsetRatY = cos(gs_terrx)
			bollardOffsetZ = yBollardPos*sin(gs_terrx)
		else
			if gs_terra_m = SIDEWISE_SLOPE then
				bollardOffsetRatX = cos(gs_terry)
				bollardOffsetRatY = 1
				bollardOffsetZ = -xBollardPos*sin(gs_terry)
			endif
		endif
	endif
	add xBollardPos*bollardOffsetRatX, yBollardPos*bollardOffsetRatY, bollardOffsetZ
endif

if iBollardType = BOLLARD_SPHERE then
	material BollardMat
	baseHeight = A/6
	baseDiameter = A/2
	baseAngle = asn(baseDiameter/A)

	roty -90
	revolve 2, 360, 1+2+4,
		0, baseDiameter/2, 0,
		baseHeight, baseDiameter/2, 0

	revolve 3, 360, 1+2+4,
		baseHeight, baseDiameter/2, 1,
		baseHeight + A/2*cos(baseAngle), 0, 900,
		baseHeight + A/2*cos(baseAngle) + A/2, 0, 3001
	del 1
endif

if iBollardType = BOLLARD_PRISM then
	material BollardMat
	add -A/2, -B/2, 0
	block A, B, ZZYZX
	del 1
endif

if iBollardType = BOLLARD_CYLINDER then
	material BollardMat
	recessWidth = A/6
	roty -90
	revolve 6, 360, 1+2+4,
		0, A/2, 0,
		ZZYZX*0.85, A/2, 0,
		ZZYZX*0.85, A/2 - recessWidth/2, 0,
		ZZYZX*0.85 + recessWidth, A/2 - recessWidth/2, 0,
		ZZYZX*0.85 + recessWidth, A/2, 0,
		ZZYZX, A/2, 0
	del 1
endif

if iBollardType = BOLLARD_TRUNCATEDCONE then
	material BollardMat
	recessWidth = A/6
	roty -90
	revolve 6, 360, 1+2+4,
		0, bollardBaseDia/2, 0,
		ZZYZX*0.85, bollardTopDia/2 + (bollardBaseDia - bollardTopDia)/2 * 0.15, 0,
		ZZYZX*0.85, bollardTopDia/2 + (bollardBaseDia - bollardTopDia)/2 * 0.15 - recessWidth/2, 0,
		ZZYZX*0.85 + recessWidth, bollardTopDia/2 + (bollardBaseDia - bollardTopDia)/2 * 0.15 - recessWidth/2, 0,
		ZZYZX*0.85 + recessWidth, bollardTopDia/2 + (bollardBaseDia - bollardTopDia)/2 * (0.15 - recessWidth/ZZYZX), 0,
		ZZYZX, bollardTopDia/2, 0
	del 1
endif

material BollardMat1
if iBollardType > BOLLARD_TRUNCATEDCONE then
	if gs_detlevel_3D_m = 0 then

		CYLIND zzyzx,A*0.5

	else

		if bBollardBase = 1 then
			CYLIND zzyzx*0.01,A*0.7
			tempHgt=0.01
		else
			tempHgt=0
		endif

		! --- Type 1 ---------------------------------------------------------------

		if iBollardType = BOLLARD_TYPE1 then

			ADDz zzyzx*tempHgt
			CYLIND zzyzx-0.145-zzyzx*tempHgt,A*0.25
			DEL 1

			ADDz zzyzx
			MUL A/0.1,A/0.1, 1
			ROTy 90

			REVOLVE 18, 360, 1+2+4,
				   0.001 ,   0.0001,                 1,
				   0.145, 0.0000000001,         1,
				   0.145,0.02949594285609,      1,
				   0.141,0.02949594285609,        1,
				   0.141,0.02636781867606,      1,
				   0.135,0.02636781867606,       1,
				   0.133,0.04999999999999,      1,
				   0.1277043968093,0.05,                  1,
				   0.1277043968093,0.04688230007212,      1,
				   0.09898875908975,0.02796603793029,      1,
				   0.04856068701758,0.01348711227696,      1,
				   0.02415895317025,0.01267898454638,      1,
				   0.02415895317025,0.02231266503429,      1,
				   0.01503087782967,0.02231266503429,      1,
				   0.01503087782967,0.01341089212763,      1,
				   0.01136079606199,0.01079271410895,      1,
				   0.0000000000001,0.003531173253517,      1,
				   0.00000000001,  0.000000000001,      1

			DEL 3

		endif

		! --- Type 2 ---------------------------------------------------------------

		if iBollardType = BOLLARD_TYPE2 then

			addz zzyzx*tempHgt
			CYLIND  zzyzx-zzyzx*tempHgt-0.04, A*0.35


			addz zzyzx-zzyzx*tempHgt-0.04
			ELLIPS 0.04, A*0.5
			ADDZ -0.075
			CYLIND  0.075, A*0.5
			ADDZ -0.075-0.025
			CYLIND  0.075, A*0.45
			ADDZ -0.075-0.025
			CYLIND  0.075, A*0.45
			ADDZ -0.075-0.025
			CYLIND  0.075, A*0.45

			DEL 6

		endif

		! --- Type 3 ---------------------------------------------------------------

		if iBollardType = BOLLARD_TYPE3 then

			ADDz zzyzx*tempHgt
			CYLIND zzyzx-zzyzx*tempHgt-A*0.8-0.14+0.06896245097668,a*0.5
			DEL 1

			ADDz zzyzx-A*0.8
			MUL a/0.2, a/0.2, 1
			ROTy 90

			ADDx -0.06896245097668
			REVOLVE 6, 360, 1+2+4,
					0.14,            0.01,      1 ,
					0.14, 0.1,      1,
					0.1301432187996, 0.1,      1 ,
					0.09539887997368, 0.1,    900,
							   0.01, -139.0414119842,   4001,
					0.06896245097668, 0.07455668617625,      1
			DEL 1

			DEL 3
			ADDz zzyzx-A/2
			SPHERE A/2
			DEL 1

		ENDIf

		! --- Type 4 ---------------------------------------------------------------

		if iBollardType = BOLLARD_TYPE4 then

			ADDz zzyzx*tempHgt
			CYLIND zzyzx-zzyzx*tempHgt-A*0.89-0.14,a*0.5
			DEL 1

			ADDz zzyzx-A*0.89
			MUL	a/0.2,a/0.2,1
			ROTy 90

			REVOLVE 20, 360, 1+2+4,
					 0.03632480476879, 0.0738421979779,      1,
					0.03282599448956, 0.06963492522465,    900,
							   0.01, 99.94210149313,   4001,
					0.02807782369099, 0.07235479497483,      1,
					0.02376250601043, 0.05968814172672,      1,
					0.01163340452885, 0.06385584721941,    900,
							   0.01, -135.9362136203,   4001,
					1.937721942044E-005, 0.05841532872571,      1,
					-1.942890293094E-016,            0.01,      1,
					0.14,            0.01,      1,
					0.14, 0.1,      1,
					0.1301432187996, 0.1,      1,
					0.09539887997368, 0.1,    900,
							   0.01, -139.0414119842,   4001,
					0.06896245097668, 0.07455668617625,      1,
					0.06897242213698, 0.08537452940194,      1,
					0.05264861342848, 0.08537452940194,    900,
							   0.01, 174.8627863352,   4001,
					0.03639037552697, 0.08683618294823,      1,
					0.03632480476879, 0.0738421979779,      1
			DEL 3
			ADDz zzyzx-A/2
			SPHERE A/2
			DEL 1

		endif

		! --- Type 5 ---------------------------------------------------------------

		if iBollardType = BOLLARD_TYPE5 then

			MATERIAL BollardMat1

			CYLIND zzyzx-a*0.4, a*0.4

			ADDz zzyzx*tempHgt
			CYLIND zzyzx-a*0.4-zzyzx*tempHgt,a*0.4

			DEL 1

			addz zzyzx-a*0.4
			CONE a*0.4, a*0.4, 0, 90, 90

			DEL 1

			MATERIAL BollardMat2
			addz zzyzx-a*0.4-0.05
			CYLIND 0.02, a*0.5
			addz -0.075
			CYLIND 0.02, a*0.5
			DEL 2
		endif

		! --- Type 6 ---------------------------------------------------------------

		if iBollardType = BOLLARD_TYPE6 then

			add 0,a*0.5, zzyzx
			cutplane 45
			del 1
			ADDz zzyzx*tempHgt
			cylind zzyzx-zzyzx*tempHgt,a*0.5
			DEL 1
			cutend

			MATERIAL BollardMat2
			ADDz zzyzx*tempHgt
			cylind zzyzx-zzyzx*tempHgt, a*0.45
			DEL 1

		endif


		! --- Type 7 ---------------------------------------------------------------

		if iBollardType = BOLLARD_TYPE7 then

			MATERIAL BollardMat1

			ADDz zzyzx*tempHgt
			CYLIND zzyzx-zzyzx*tempHgt-0.15,a*0.5
			DEL 1

			ADDz zzyzx-0.15
			MATERIAL BollardMat2
			CYLIND 0.05,a*0.4
			ADDz 0.05
			MATERIAL BollardMat1
			CYLIND 0.1,a*0.5
			DEL 2

		endif

		! --- Type 8 ---------------------------------------------------------------

		if iBollardType = BOLLARD_TYPE8 then

			MATERIAL BollardMat1
			addz zzyzx*tempHgt
			put a*0.485, 0, 79
			put a*0.25*cos(45/2), a*0.25*sin(45/2), 900
			put 0, 10, 4079
			for alfa=45/2 to 360 step 360/8/2
				put a*0.485*cos(alfa), a*0.485*sin(alfa), 1079
			next alfa
			resol gs_resol*2
			PRISM_ nsp/3, zzyzx-zzyzx*tempHgt-a*0.5,
				use(nsp)

			del 1
			body -1

			addz zzyzx-a*0.5
			FPRISM_ BollardMat1, BollardMat1, BollardMat1, BollardMat1,
					nsp/3, a*0.5, 0,a*0.5,
					use(nsp)
		endif

	endif	! --- End of Detailed Model
endif

if bPartOfLayout then del 1
]]>
</Script_3D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_2D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
! ==============================================================================
! bollard_m
! ==============================================================================


pen gs_cont_pen
fill gs_fill_type


! ==============================================================================
! Bollard Types 2D
! ==============================================================================

if bPartOfLayout then add2 xBollardPos, yBollardPos

if iBollardType > BOLLARD_TRUNCATEDCONE & bBollardBase = 1 then

	if iBollardType = BOLLARD_TYPE2 | iBollardType = BOLLARD_TYPE4 then
		NN=0.6
	else
		NN=0.7
	endif

	poly2_b 2, 1+2+64, gs_fill_pen, gs_back_pen,
		0,0,900,
		A*NN,360,4001

endif

if iBollardType = BOLLARD_PRISM then

	poly2_b 5, 1+2+64, gs_fill_pen, gs_back_pen,
		-A/2, -B/2, 1,
		A/2, -B/2, 1,
		A/2, B/2, 1,
		-A/2, B/2, 1,
		-A/2, -B/2, -1

else

	poly2_b 2, 1+2+64, gs_fill_pen, gs_back_pen,
		0,0,900,
		A*0.5,360,4001

endif

if bPartOfLayout then del 1


! ==============================================================================
! Hotspots 2D
! ==============================================================================

unID = bollardUnID

if not(bPartOfLayout) then

	if iBollardType > BOLLARD_TRUNCATEDCONE then

		HOTSPOT2 0,0,unID :	unID=unID+1

		HOTSPOT2 0, 0, unID, temp_a, 1+128, A:	unID=unID+1
		HOTSPOT2 -1, 0, unID, temp_a, 3+128, A: unID=unID+1
		HOTSPOT2 temp_a, 0, unID, temp_a, 2, A: unID=unID+1

		ROT2 90
			HOTSPOT2 0, 0, unID, temp_a, 1+128, A:	unID=unID+1
			HOTSPOT2 -1, 0, unID, temp_a, 3+128, A: unID=unID+1
			HOTSPOT2 temp_a, 0, unID, temp_a, 2, A: unID=unID+1
		DEL 1

		ROT2 180
			HOTSPOT2 0, 0, unID, temp_a, 1+128, A:	unID=unID+1
			HOTSPOT2 -1, 0, unID, temp_a, 3+128, A: unID=unID+1
			HOTSPOT2 temp_a, 0, unID, temp_a, 2, A: unID=unID+1
		DEL 1

		ROT2 270
			HOTSPOT2 0, 0, unID, temp_a, 1+128, A:	unID=unID+1
			HOTSPOT2 -1, 0, unID, temp_a, 3+128, A: unID=unID+1
			HOTSPOT2 temp_a, 0, unID, temp_a, 2, A: unID=unID+1
		DEL 1
	endif

	if iBollardType > BOLLARD_TYPE1 & bBollardBase = 1 then

		HOTSPOT2 A*NN, 0, unID: unID=unID+1
		HOTSPOT2 -A*NN, 0, unID: unID=unID+1

		HOTSPOT2 0, A*NN,  unID: unID=unID+1
		HOTSPOT2 0, -A*NN,  unID: unID=unID+1

	endif

endif

if bPartOfLayout then
	hotspot2 0, yBollardPos, unID, xBollardPos, 1+128 		: unID=unID+1
	hotspot2 -1, yBollardPos, unID, xBollardPos, 3 			: unID=unID+1
	hotspot2 xBollardPos, yBollardPos, unID, xBollardPos, 2 : unID=unID+1

	hotspot2 xBollardPos, 0, unID, yBollardPos, 1+128 		: unID=unID+1
	hotspot2 xBollardPos, -1, unID, yBollardPos, 3 			: unID=unID+1
	hotspot2 xBollardPos, yBollardPos, unID, yBollardPos, 2 : unID=unID+1
endif
]]>
</Script_2D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_1D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
! ==============================================================================
! bollard_m
! ==============================================================================


eps = 0.00001

BOLLARD_SPHERE = 1
BOLLARD_PRISM = 2
BOLLARD_CYLINDER = 3
BOLLARD_TRUNCATEDCONE = 4
BOLLARD_TYPE1 = 5
BOLLARD_TYPE2 = 6
BOLLARD_TYPE3 = 7
BOLLARD_TYPE4 = 8
BOLLARD_TYPE5 = 9
BOLLARD_TYPE6 = 10
BOLLARD_TYPE7 = 11
BOLLARD_TYPE8 = 12

if bPartOfLayout then
	if iBollardType <> BOLLARD_PRISM then
		A = bollardDia
	endif
	if iBollardType = BOLLARD_PRISM then
		A = bollardWidth
		B = bollardDepth
	endif
	ZZYZX = bollardHeight
endif

NO_SLOPE			= 1
LENGTHWISE_SLOPE	= 2
SIDEWISE_SLOPE		= 3
]]>
</Script_1D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_PR SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_PR>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_UI SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
! ==============================================================================
! bollard_m
! Macro for bollard object
! ==============================================================================


if not(bPartOfLayout) then

	TABID_ROOT 			= -1
	TABID_GENERAL		= 1
	
	ui_current_page gs_ui_current_page
	
	!!!!!!!!!!!!!!!!!!!!!!!!!!! *** Page 1 *** !!!!!!!!!!!!!!!!!!!!
	ui_page TABID_GENERAL, TABID_ROOT, `Параметры Столбика Ограждения`, "uiTab_Style_flat(1)"
	
	pageStartY = 5

	pos_x=15 		! start Position X Coordinate
	pos_y=pageStartY	! start Position Y Coordinate
	OutfieldHgt=16	! height of Outfield
	cell1_x=254		! width of 1.cell
	cell1_y=230		! height of 1.cell

	ui_separator 0, 0, 444, 266

	ui_style 0,1
	ui_outfield `Тип Столбика`, pos_x,pos_y, 254, OutfieldHgt
	ui_style 0,0

	ui_infield "BollardType",pos_x,pos_y+20,cell1_x,cell1_y,
		1,"ui_BollardTypes(13)",8,2,
		58,110,55,90,
		1,`Тип 1`,
		2,`Тип 2`,
		3,`Тип 3`,
		4,`Тип 4`,
		5,`Тип 5`,
		6,`Тип 6`,
		7,`Тип 7`,
		8,`Тип 8`

	CellX1=254		! 1. Column Width
	DistCell=20		! Dist. between Columns

	OutfieldWidth=140						! general width of Outfield
	InfieldHgt=20							! height of Infield
	InfieldWidth=60							! general width of Infield
	Outfield2X=OutfieldWidth-InfieldWidth	! with2 of Outfield
	YY=20									! distance between Outfiled

	StartCell3X=pos_x+254+DistCell			! Start Position of 3. Column
	Outfield3X=OutfieldWidth-35				! width3 of outfield

	ii=-1
	ui_style 0,1
	ui_outfield `Основание`, StartCell3X+20,pos_y+(ii+1)*YY, OutfieldWidth-20,OutfieldHgt
	ui_style 0,0
	ui_infield "BollardBase",	StartCell3X,	pos_y+(ii+1)*YY-2,	20,		20

	ii=ii+1
	ui_style 0,1
	ui_outfield `2D-отображение`, StartCell3X,pos_y+(ii+1)*YY, OutfieldWidth,OutfieldHgt
	ui_style 0,0
	ii=ii+1
	ui_outfield `Перо Контура`,	StartCell3X,	pos_y+(ii+1)*YY,	Outfield3X,OutfieldHgt
	ui_infield "gs_cont_pen",	StartCell3X+OutfieldWidth-35,	pos_y+(ii+1)*YY-2,	35,		20
	ii=ii+1
	ui_outfield `Тип Штриховки`,	StartCell3X,	pos_y+(ii+1)*YY,	Outfield3X,OutfieldHgt
	ui_infield "gs_fill_type",	StartCell3X+OutfieldWidth-35,	pos_y+(ii+1)*YY-2,	35,		20
	ii=ii+1
	ui_outfield `Перо Штриховки`,		StartCell3X,	pos_y+(ii+1)*YY,	Outfield3X,OutfieldHgt
	ui_infield "gs_fill_pen",	StartCell3X+OutfieldWidth-35,	pos_y+(ii+1)*YY-2,	35,		20
	ii=ii+1
	ui_outfield `Перо Фона Штр.`,	StartCell3X,	pos_y+(ii+1)*YY,	Outfield3X,OutfieldHgt
	ui_infield "gs_back_pen",	StartCell3X+OutfieldWidth-35,	pos_y+(ii+1)*YY-2,	35,		20

	ii=ii+1
	ui_style 0,1
	ui_outfield `3D-отображение`, StartCell3X,pos_y+(ii+1)*YY, OutfieldWidth,OutfieldHgt
	ui_style 0,0
	ii=ii+1
	ui_outfield `3D`,	StartCell3X,	pos_y+(ii+1)*YY,	Outfield2X,OutfieldHgt
	ui_infield "gs_detlevel_3D",	StartCell3X+OutfieldWidth-InfieldWidth,	pos_y+(ii+1)*YY-2,	InfieldWidth,		20
	ii=ii+1
	ui_outfield `Аппроксимация`,		StartCell3X,	pos_y+(ii+1)*YY,	Outfield2X,OutfieldHgt
	ui_infield "gs_resol",	StartCell3X+OutfieldWidth-InfieldWidth,	pos_y+(ii+1)*YY-2,	InfieldWidth,		20
	ii=ii+1
	ui_outfield `Отбрасывание Теней`,	StartCell3X+20,	pos_y+(ii+1)*YY,	OutfieldWidth-20,OutfieldHgt
	ui_infield "gs_shadow",	StartCell3X,	pos_y+(ii+1)*YY-2,	20,		20

	ii=ii+1
	ui_style 0,1
	ui_outfield `Покрытия`,	StartCell3X,	pos_y+(ii+1)*YY,	OutfieldWidth,OutfieldHgt
	ui_style 0,0
	ii=ii+1
	ui_outfield `Столбик`,		StartCell3X,	pos_y+(ii+1)*YY,	Outfield3X-42,OutfieldHgt
	ui_infield "BollardMat1",	StartCell3X+OutfieldWidth-77,	pos_y+(ii+1)*YY-2,	77,		20
	ii=ii+1
	ui_outfield `Аксессуары`,	StartCell3X,	pos_y+(ii+1)*YY,	Outfield3X-42,OutfieldHgt
	ui_infield "BollardMat2",	StartCell3X+OutfieldWidth-77,	pos_y+(ii+1)*YY-2,	77,		20

endif
]]>
</Script_UI>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_VL SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
! ==============================================================================
! bollard_m
! ==============================================================================


dim stBollardTypes[12]
	stBollardTypes[1]	= `Сфера`
	stBollardTypes[2]	= `Призма`
	stBollardTypes[3]	= `Цилиндр`
	stBollardTypes[4]	= `Усеченный Конус`
if bPartOfLayout then
	stBollardTypes[5]	= `Дизайнерский 1`
	stBollardTypes[6]	= `Дизайнерский 2`
	stBollardTypes[7]	= `Дизайнерский 3`
	stBollardTypes[8]	= `Дизайнерский 4`
	stBollardTypes[9]	= `Дизайнерский 5`
	stBollardTypes[10]	= `Дизайнерский 6`
	stBollardTypes[11]	= `Дизайнерский 7`
	stBollardTypes[12]	= `Дизайнерский 8`
else
	stBollardTypes[5]	= `Тип 1`
	stBollardTypes[6]	= `Тип 2`
	stBollardTypes[7]	= `Тип 3`
	stBollardTypes[8]	= `Тип 4`
	stBollardTypes[9]	= `Тип 5`
	stBollardTypes[10]	= `Тип 6`
	stBollardTypes[11]	= `Тип 7`
	stBollardTypes[12]	= `Тип 8`
endif

! enableBollardTypes - possible values
!	2		- enable Sphere
!	4		- enable Prism
!	8		- enable Cylinder
!	16		- enable Truncated Cone
!	32		- enable Type 1
!	64		- enable Type 2
!	128		- enable Type 3
!	256		- enable Type 4
!	512		- enable Type 5
!	1024	- enable Type 6
!	2048	- enable Type 7
!	4096	- enable Type 8

if enableBollardTypes < EPS then enableBollardTypes = 1 + 2 + 4 + 8 + 16 + 32 + 64 + 128 + 256 + 512 + 1024 + 2048 + 4096

dim bollardTypeValueList[]
j = 1
for i = 1 to vardim1(stBollardTypes)
	if bittest(enableBollardTypes, i) then
		if i = 1 then put 1			! Sphere
		if i = 2 then put 2			! Prism
		if i = 3 then put 3			! Cylinder
		if i = 4 then put 4			! Truncated Cone
		if i = 5 then put 5			! Type 1
		if i = 6 then put 6			! Type 2
		if i = 7 then put 7			! Type 3
		if i = 8 then put 8			! Type 4
		if i = 9 then put 9			! Type 5
		if i = 10 then put 10		! Type 6
		if i = 11 then put 11		! Type 7
		if i = 12 then put 12		! Type 8

		bollardTypeValueList[j] = stBollardTypes[i]
		j = j + 1
	endif
next i

values "bollardType" bollardTypeValueList
values "iBollardType" get(NSP)

if GLOB_MODPAR_NAME = "BollardType" then
	for hi = 1 to vardim1(stBollardTypes)
		if bollardType = stBollardTypes[hi] then
			iBollardType = hi
		endif
	next hi
	parameters iBollardType = iBollardType
else
	bollardType = stBollardTypes[max(1, min(iBollardType, vardim1(stBollardTypes)))]
	parameters bollardType = bollardType
endif


! ==============================================================================
! Macro for Bollard object
! ==============================================================================

if not(bPartOfLayout) then

	call "FM_types" parameters all

	dim stDetail_3D[3]
		stDetail_3D[1] = `Откл.`
		stDetail_3D[2] = `Простой`
		stDetail_3D[3] = `Детальный`

	values "gs_detlevel_3D" stDetail_3D[3], stDetail_3D[2], stDetail_3D[1]
	values "gs_detlevel_3D_m" 2, 1, 0

	if GLOB_MODPAR_NAME = "gs_detlevel_3D" then
		gs_detlevel_3D_m = 2
		if gs_detlevel_3D = stDetail_3D[1] then gs_detlevel_3D_m = 0
		if gs_detlevel_3D = stDetail_3D[2] then gs_detlevel_3D_m = 1
		parameters gs_detlevel_3D_m = gs_detlevel_3D_m
	else
		gs_detlevel_3D = stDetail_3D[3]
		if gs_detlevel_3D_m = 0 then gs_detlevel_3D = stDetail_3D[1]
		if gs_detlevel_3D_m = 1 then gs_detlevel_3D = stDetail_3D[2]
		parameters gs_detlevel_3D = gs_detlevel_3D
	endif

	if gs_detlevel_3D_m = 1 then lock "bBollardBase", "BollardMat2"
	if iBollardType = BOLLARD_TYPE1 | iBollardType = BOLLARD_TYPE2 | iBollardType = BOLLARD_TYPE3 |\
		iBollardType = BOLLARD_TYPE4 | iBollardType = BOLLARD_TYPE8 then
			lock "BollardMat2"
	endif

	if gs_cont_pen = 0 then parameters gs_cont_pen=2
	if gs_fill_pen = 0 then parameters gs_fill_pen=91

	values "A" range (0,)
	values "B" range (0,)
	values "temp_a" range (0,)
	values "gs_resol" range [3,)

	if iBollardType = BOLLARD_TYPE1 then values "ZZYZX" range [0.01*bBollardBase+0.145+0.01,)
	if iBollardType = BOLLARD_TYPE2 then values "ZZYZX" range [0.01*bBollardBase+0.4+0.04+0.01,)
	if iBollardType = BOLLARD_TYPE3 then values "ZZYZX" range [0.01*bBollardBase+A*0.89+0.14+0.01,)
	if iBollardType = BOLLARD_TYPE4 then values "ZZYZX" range [0.01*bBollardBase+A*0.89+0.15+0.01,)
	if iBollardType = BOLLARD_TYPE5 then values "ZZYZX" range [0.01*bBollardBase+A+0.1+0.01,)
	if iBollardType = BOLLARD_TYPE6 then values "ZZYZX" range [0.01*bBollardBase+0.15+0.01,)
	if iBollardType = BOLLARD_TYPE7 then values "ZZYZX" range [0.01*bBollardBase+0.15+0.01,)
	if iBollardType = BOLLARD_TYPE8 then values "ZZYZX" range (0,)

	if GLOB_MODPAR_NAME = "A" then
		B = A
		parameters B = B
	else
		A = B
		parameters A = A
	endif
	if GLOB_MODPAR_NAME = "temp_a" then
		A = temp_a * 2
		parameters A = A
	else
		temp_a = A/2
		parameters temp_a = temp_a
	endif
	if GLOB_MODPAR_NAME = "B" then
		temp_a = B/2
		parameters temp_a = temp_a
	else
		B = temp_a * 2
		parameters B = B
	endif

	values "gs_ui_current_page" 1
endif


! ==============================================================================
! Macro for Parking object
! ==============================================================================

if bPartOfLayout then

	values "bollardDia" range (0, )
	values "bollardWidth" range (0, )
	values "bollardDepth" range (0, )
	values "bollardBaseDia" range (0, )
	values "bollardTopDia" range (0, )

	if iBollardType < BOLLARD_TYPE1 then values "bollardHeight" range [0.1,)
	if iBollardType = BOLLARD_TYPE1 then values "bollardHeight" range [0.01*bBollardBase+0.145+0.01,)
	if iBollardType = BOLLARD_TYPE2 then values "bollardHeight" range [0.01*bBollardBase+0.4+0.04+0.01,)
	if iBollardType = BOLLARD_TYPE3 then values "bollardHeight" range [0.01*bBollardBase+A*0.89+0.14+0.01,)
	if iBollardType = BOLLARD_TYPE4 then values "bollardHeight" range [0.01*bBollardBase+A*0.89+0.15+0.01,)
	if iBollardType = BOLLARD_TYPE5 then values "bollardHeight" range [0.01*bBollardBase+A+0.1+0.01,)
	if iBollardType = BOLLARD_TYPE6 then values "bollardHeight" range [0.01*bBollardBase+0.15+0.01,)
	if iBollardType = BOLLARD_TYPE7 then values "bollardHeight" range [0.01*bBollardBase+0.15+0.01,)
	if iBollardType = BOLLARD_TYPE8 then values "bollardHeight" range (0,)

	if	iBollardType = BOLLARD_SPHERE | iBollardType = BOLLARD_PRISM |\
		iBollardType = BOLLARD_CYLINDER | iBollardType = BOLLARD_TRUNCATEDCONE then
		lock "BollardMat1", "BollardMat2"
		hideparameter "BollardMat1", "BollardMat2"
	else
		if iBollardType <> BOLLARD_TYPE5 & iBollardType <> BOLLARD_TYPE6 & iBollardType <> BOLLARD_TYPE7 then
			lock "BollardMat2"
			hideparameter "BollardMat2"
		endif
		lock "BollardMat"
		hideparameter "BollardMat"
	endif

	if iBollardType = BOLLARD_PRISM | iBollardType = BOLLARD_TRUNCATEDCONE then
		lock "bollardDia"
		hideparameter "bollardDia"
	endif

	if iBollardType <> BOLLARD_PRISM then
		lock "bollardWidth", "bollardDepth"
		hideparameter "bollardWidth", "bollardDepth"
	endif

	if iBollardType <> BOLLARD_TRUNCATEDCONE then
		lock "bollardBaseDia", "bollardTopDia"
		hideparameter "bollardBaseDia", "bollardTopDia"
	endif

	if iBollardType = BOLLARD_SPHERE then
		lock "bollardHeight"
		hideparameter "bollardHeight"
	endif

	if iBollardType < BOLLARD_TYPE1 then
		lock "bBollardBase"
		hideparameter "bBollardBase"
	endif
endif
]]>
</Script_VL>

<Comment SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Comment>

<ParamSection SectVersion="22" SectionFlags="0" SubIdent="0">
	<ParamSectHeader>
		<AutoHotspots>false</AutoHotspots>
		<StatBits>
			<STBit_UIDefault/>
			<STBit_FixSize/>
			<STBit_UIUseHierarchicalPages/>
		</StatBits>
		<WDLeftFrame>0</WDLeftFrame>
		<WDRightFrame>0</WDRightFrame>
		<WDTopFrame>0</WDTopFrame>
		<WDBotFrame>0</WDBotFrame>
		<LayFlags>65535</LayFlags>
		<WDMirrorThickness>0</WDMirrorThickness>
		<WDWallInset>0</WDWallInset>
	</ParamSectHeader>
	<Parameters>
		<Length Name="A">
			<Description><![CDATA["Post Diameter"]]></Description>
			<Fix/>
			<Value>0.12</Value>
		</Length>
		<Length Name="B">
			<Description><![CDATA["Post Diameter"]]></Description>
			<Fix/>
			<Value>0.12</Value>
		</Length>
		<Length Name="temp_a">
			<Description><![CDATA["Post Radius"]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0.06</Value>
		</Length>
		<Length Name="ZZYZX">
			<Description><![CDATA["Height"]]></Description>
			<Fix/>
			<Value>0.75</Value>
		</Length>
		<Boolean Name="AC_show2DHotspotsIn3D">
			<Description><![CDATA["Show 2D Hotspots in 3D"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="ac_bottomlevel">
			<Description><![CDATA["Bottom Level"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Length>
		<Length Name="ac_toplevel">
			<Description><![CDATA["Top Level"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Boolean Name="bPartOfLayout">
			<Description><![CDATA["Enable Parking Objects"]]></Description>
			<Value>0</Value>
		</Boolean>
		<Boolean Name="bRotableLayout">
			<Description><![CDATA["Enable Slopes"]]></Description>
			<Value>0</Value>
		</Boolean>
		<Integer Name="gs_terra_m">
			<Description><![CDATA["Terrain Slope"]]></Description>
			<Value>1</Value>
		</Integer>
		<Angle Name="gs_terrx">
			<Description><![CDATA["Lengthwise Angle"]]></Description>
			<Value>0</Value>
		</Angle>
		<Angle Name="gs_terry">
			<Description><![CDATA["Sidewise Angle"]]></Description>
			<Value>0</Value>
		</Angle>
		<Integer Name="enableBollardTypes">
			<Description><![CDATA["Enable Bollard Types"]]></Description>
			<Value>8190</Value>
		</Integer>
		<String Name="BollardType">
			<Description><![CDATA["Bollard Types"]]></Description>
			<Value><![CDATA["Сфера"]]></Value>
		</String>
		<Integer Name="iBollardType">
			<Description><![CDATA["Bollard Types"]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<Length Name="bollardDia">
			<Description><![CDATA["Diameter"]]></Description>
			<Value>0.2</Value>
		</Length>
		<Length Name="bollardWidth">
			<Description><![CDATA["Width"]]></Description>
			<Value>0.2</Value>
		</Length>
		<Length Name="bollardDepth">
			<Description><![CDATA["Depth"]]></Description>
			<Value>0.2</Value>
		</Length>
		<Length Name="bollardBaseDia">
			<Description><![CDATA["Base Diameter"]]></Description>
			<Value>0.2</Value>
		</Length>
		<Length Name="bollardTopDia">
			<Description><![CDATA["Top Diameter"]]></Description>
			<Value>0.1</Value>
		</Length>
		<Length Name="bollardHeight">
			<Description><![CDATA["Height"]]></Description>
			<Value>0.75</Value>
		</Length>
		<Boolean Name="bBollardBase">
			<Description><![CDATA["Base"]]></Description>
			<Value>1</Value>
		</Boolean>
		<Length Name="xBollardPos">
			<Description><![CDATA["Sidewise Offset"]]></Description>
			<Value>0</Value>
		</Length>
		<Length Name="yBollardPos">
			<Description><![CDATA["Lengthwise Offset"]]></Description>
			<Value>0</Value>
		</Length>
		<Integer Name="bollardUnID">
			<Description><![CDATA["UnID"]]></Description>
			<Value>1</Value>
		</Integer>

		<!-- gs_3D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_3D_representation">
			<Description><![CDATA["3D Representation"]]></Description>
		</Title>
		<String Name="gs_detlevel_3D">
			<Description><![CDATA["3D"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Детальный"]]></Value>
		</String>
		<Integer Name="gs_detlevel_3D_m">
			<Description><![CDATA["3D"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>2</Value>
		</Integer>
		<Integer Name="gs_resol">
			<Description><![CDATA["Resolution"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>12</Value>
		</Integer>
		<Boolean Name="gs_shadow">
			<Description><![CDATA["Shadow"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Boolean>

		<!-- gs_2D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_2D_representation">
			<Description><![CDATA["2D Representation"]]></Description>
			<Fix/>
		</Title>
		<PenColor Name="gs_cont_pen">
			<Description><![CDATA["Contour Pen"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>4</Value>
		</PenColor>
		<FillPattern Name="gs_fill_type">
			<Description><![CDATA["Fill Type"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>65</Value>
		</FillPattern>
		<PenColor Name="gs_fill_pen">
			<Description><![CDATA["Fill Pen"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>
		<PenColor Name="gs_back_pen">
			<Description><![CDATA["Fill Background Pen"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>

		<!-- gs_materials: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_materials">
			<Description><![CDATA["Surfaces"]]></Description>
		</Title>
		<Material Name="BollardMat">
			<Description><![CDATA["Bollard"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>53</Value>
		</Material>
		<Material Name="BollardMat1">
			<Description><![CDATA["Bollard"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>11</Value>
		</Material>
		<Material Name="BollardMat2">
			<Description><![CDATA["Accessories"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>40</Value>
		</Material>
		<Integer Name="gs_ui_current_page">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Integer>

		<!-- gs_list: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_list">
			<Description><![CDATA["Parameters for Listing"]]></Description>
			<Fix/>
		</Title>
		<RealNum Name="gs_list_cost">
			<Description><![CDATA["Cost"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<String Name="gs_list_manufacturer">
			<Description><![CDATA["Manufacturer"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_note">
			<Description><![CDATA["Note/Remarks"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_location">
			<Description><![CDATA["Location"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_accessories">
			<Description><![CDATA["Accessories"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="FM_Type">
			<Description><![CDATA["Group Type"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Наружные Объекты"]]></Value>
		</String>
		<Integer Name="iFMType">
			<Description><![CDATA["Group Type"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>19</Value>
		</Integer>
		<String Name="FM_InventoryNumber">
			<Description><![CDATA["Inventory Number"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="FM_SerialNumber">
			<Description><![CDATA["Serial Number"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="FM_ProductionYear">
			<Description><![CDATA["Production Year"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<RealNum Name="FM_ObjectWeight">
			<Description><![CDATA["Object Weight"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<String Name="FM_ObjectWeightUnit">
			<Description><![CDATA["Object Weight Unit"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["кг"]]></Value>
		</String>
		<String Name="gs_list_custom1">
			<Description><![CDATA["User Defined 1"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom2">
			<Description><![CDATA["User Defined 2"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom3">
			<Description><![CDATA["User Defined 3"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom4">
			<Description><![CDATA["User Defined 4"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom5">
			<Description><![CDATA["User Defined 5"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
	</Parameters>
</ParamSection>

<CalledMacros SectVersion="2" SectionFlags="0" SubIdent="0">
	<Macro>
		<MName><![CDATA["FM_types"]]></MName>
		<MainGUID>2759D2DF-AA8E-44D1-AD1D-261581266B34</MainGUID>
	</Macro>
</CalledMacros>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_FWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_FWM>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_BWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_BWM>

<Copyright SectVersion="1" SectionFlags="0" SubIdent="0">
	<Author>GRAPHISOFT</Author>
	<License>
		<Type>CC BY-ND</Type>
		<Version>3.0</Version>
	</License>
</Copyright>

</Symbol>
