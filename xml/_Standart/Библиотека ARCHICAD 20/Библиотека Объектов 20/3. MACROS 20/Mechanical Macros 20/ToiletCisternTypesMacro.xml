<?xml version="1.0" encoding="UTF-8"?>
<Symbol IsArchivable="false" IsPlaceable="false" MainGUID="97C0A36D-9CEA-45B1-9529-97934630EB43" MigrationValue="Normal" Owner="1196638531" Signature="1196644685" Version="43">
<Ancestry SectVersion="1" SectionFlags="0" SubIdent="0" Template="false">
	<MainGUID>F938E33A-329D-4A36-BE3E-85E126820996</MainGUID>
	<MainGUID>103E8D2C-8230-42E1-9597-46F84CCE28C0</MainGUID>
	<MainGUID>B2970E4C-8680-4061-8670-2F4B638F3953</MainGUID>
</Ancestry>

<CalledMacros SectVersion="2" SectionFlags="0" SubIdent="0">
</CalledMacros>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_3D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
if gs_detlevel_3d_m = DETLEV_3D_OFF then end


!================================================================================
! Attributes
!================================================================================

pen gs_cont_pen
material gs_tank_mat


!================================================================================
! Normal WC Cisterns
!================================================================================

if iWCType = WC_NORMAL then

	if iFlushType = CISTERN then
		if iCisternType = CISTERN_TYPE_1 then gosub "CISTERN_1"
		if iCisternType = CISTERN_TYPE_2 then gosub "CISTERN_2"
		if iCisternType = CISTERN_TYPE_3 then gosub "CISTERN_3"
		if iCisternType = CISTERN_TYPE_4 then gosub "CISTERN_4"
		if iCisternType = CISTERN_TYPE_5 then gosub "CISTERN_5"
	endif

	if iFlushType = ELEVATED_CISTERN then
		if iElevatedCisternType = ELEV_CISTERN_TYPE_1 then gosub "ELEV_CISTERN_1"
		if iElevatedCisternType = ELEV_CISTERN_TYPE_2 then gosub "ELEV_CISTERN_2"
		if iElevatedCisternType = ELEV_CISTERN_TYPE_3 then gosub "ELEV_CISTERN_3"
	endif

endif


!================================================================================
! Corner WC Cisterns
!================================================================================

if iWCType = WC_CORNER then

	if iCornerCisternType = CORNER_CISTERN_TYPE_1 then gosub "CORNER_CISTERN_1"
	if iCornerCisternType = CORNER_CISTERN_TYPE_2 then gosub "CORNER_CISTERN_2"
	if iCornerCisternType = CORNER_CISTERN_TYPE_3 then gosub "CORNER_CISTERN_3"

endif


! --- Emptying Stack ---

for ss=1 to NSP
	emptyStack = get(1)
next ss




!================================================================================
end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end ! end
!================================================================================


!================================================================================
"CISTERN_1":
!================================================================================

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 32
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 16
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 8


	addz gs_seat_height

	mulx cisternWidth / 0.435
	muly cisternDepth / 0.18105

	h_top = 0.05

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED or gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		addy -0.645
		ruled 25, 1+2+4+16+32,
					0.000001,     0.518214,     1,
					0.040757,     0.517192,     1,
					0.08141,      0.514131,     1,
					0.121859,     0.509037,     1,
					0.162002,     0.501924,     1,
					0.168528,     0.502061,     1,
					0.174366,     0.504981,     1,
					0.178389,     0.51012,     	1,
					0.179822,     0.516488,     1,
					0.172647,     0.548616,     1,
					0.165467,     0.580744,     1,
					0.158288,     0.612872,     1,
					0.151113,     0.645,     	0,
				   -0.151111,     0.645,     	0,
				   -0.158288,     0.612872,     1,
				   -0.165466,     0.580744,     1,
				   -0.172643,     0.548616,     1,
				   -0.179821,     0.516488,     1,
				   -0.178387,     0.51012,     	1,
				   -0.174364,     0.504981,     1,
				   -0.168526,     0.502061,     1,
				   -0.162,        0.501924,     1,
				   -0.121857,     0.509037,     1,
				   -0.081408,     0.514131,     1,
				   -0.040755,     0.517192,     1,

					0.000001,     0.480535,     cisternHeight,
					0.038869,     0.479561,     cisternHeight,
					0.07764,      0.476642,     cisternHeight,
					0.116216,     0.471784,     cisternHeight,
					0.154501,     0.465,     	cisternHeight,
					0.177571,     0.465484,     cisternHeight,
					0.198209,     0.475806,     cisternHeight,
					0.212433,     0.493976,     cisternHeight,
					0.217501,     0.516488,     cisternHeight,
					0.215547,     0.549751,     cisternHeight,
					0.209711,     0.582556,     cisternHeight,
					0.200074,     0.614452,     cisternHeight,
					0.186769,     0.645,     	cisternHeight,
				   -0.186767,     0.645,     	cisternHeight,
				   -0.200072,     0.614452,     cisternHeight,
				   -0.209709,     0.582556,     cisternHeight,
				   -0.215545,     0.549751,     cisternHeight,
				   -0.217499,     0.516488,     cisternHeight,
				   -0.212431,     0.493976,     cisternHeight,
				   -0.198207,     0.475806,     cisternHeight,
				   -0.177569,     0.465484,     cisternHeight,
				   -0.154499,     0.465,     	cisternHeight,
				   -0.116214,     0.471784,     cisternHeight,
				   -0.077638,     0.476642,     cisternHeight,
				   -0.038868,     0.479561,     cisternHeight
		del 1
	endif


	if gs_detlevel_3D_m = DETLEV_3D_DETAILED then
		addy -0.075
		addz cisternHeight
			cylind 0.01, 0.015
		del 2
	endif


	if gs_detlevel_3D_m = DETLEV_3D_DRAFT then
		addy -0.645
		ruled 4, 1+2+4+16+32,
					0.174366,     0.504981,     0,
					0.174364,     0.645,     	0,
				   -0.174364,     0.645,     	0,
				   -0.174364,     0.504981,     0,

					0.215545,     0.475806,     cisternHeight,
					0.215545,     0.645,     	cisternHeight,
				   -0.215545,     0.645,     	cisternHeight,
				   -0.215545,     0.475806,     cisternHeight
		del 1
	endif


	del 2
	del 1


return



!================================================================================
"CISTERN_2":
!================================================================================


	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 48
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 24
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 16


	addz gs_seat_height

	mulx cisternWidth / 0.271
	muly cisternDepth / 0.094

	addy 0.15323

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED then
		sweep 17, 5, 0, 0.95, 1+2+16+32,
					0.121439,   -0.153231, 	1,
					0.121439,   -0.158231,	901,
					0.0,     	-82.2079,	4001,
					0.126393,   -0.157553,  1,
					0.135426,   -0.223563,  1,
					0.125518,   -0.224919,	901,
					0.0,     	-97.7921,	4001,
					0.125518,   -0.234919,  1,
					0,     		 0.4,		901,
				   -0.125518,   -0.234919,  3001,
				   -0.125518,   -0.224919,	901,
					0.0,     	-97.7921,	4001,
				   -0.135426,   -0.223563,  1,
				   -0.126393,   -0.157553,  1,
				   -0.121439,   -0.158231,	901,
					0.0,     	-82.2079,	4001,
				   -0.121439,   -0.153231,  1,

					0,	-0.16,	0,
					0,	-0.16,	0.17/0.282*cisternHeight,
					0,	-0.16,	0.22/0.282*cisternHeight,
					0,	-0.16,	0.25/0.282*cisternHeight,
					0,	-0.16,	0.27/0.282*cisternHeight

		addz 0.27/0.282*cisternHeight
		sweep 18, 4, 0, 0.7, 1+2+16+32,
					0.098104,   -0.154487,      1,
					0.098104,   -0.159487,    	900,
					0.0,     	-82.2077,   	4001,
					0.103057,   -0.158809,      1,
					0.110305,   -0.211773,      1,
					0.102235,   -0.212877,    	900,
					0.0,     	-78.2337,   	4001,
					0.104962,   -0.220552,      1,
				   -0.000241,    0.320157,    	900,
					0.0,     	-21.9711,   	4001,
				   -0.104979,   -0.220642,      1,
				   -0.102188,   -0.212933,    	900,
					0.0,     	-78.2337,   	4001,
				   -0.110305,   -0.211773,      1,
				   -0.103058,   -0.158809,      1,
				   -0.098104,   -0.159486,    	900,
					0.0,     	-82.2082,   	4001,
				   -0.098104,   -0.154486,      1,

					0,	-0.16,	0,
					0,	-0.16,	0.007/0.282*cisternHeight,
					0,	-0.16,	0.010/0.282*cisternHeight,
					0,	-0.16,	0.012/0.282*cisternHeight
		del 1
	endif



	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		sweep 9, 3, 0, 0.903, 1+2+16+32,
					0.121439,   -0.153231, 	1,
					0.126393,   -0.157553,  1,
					0.135426,   -0.223563,  1,
					0.125518,   -0.234919,  1,
					0,     		 0.4,		901,
				   -0.125518,   -0.234919,  3001,
				   -0.135426,   -0.223563,  1,
				   -0.126393,   -0.157553,  1,
				   -0.121439,   -0.153231,  1,

					0,	-0.16,	0,
					0,	-0.16,	0.17/0.282*cisternHeight,
					0,	-0.16,	0.27/0.282*cisternHeight

		addz 0.27/0.282*cisternHeight
		sweep 10, 2, 0, 0.7^3, 1+2+16+32,
					0.098104,   -0.154487,      1,
					0.103057,   -0.158809,      1,
					0.110305,   -0.211773,      1,
					0.104962,   -0.220552,      1,
				   -0.000241,    0.320157,    	900,
					0.0,     	-21.9711,   	4001,
				   -0.104979,   -0.220642,      1,
				   -0.110305,   -0.211773,      1,
				   -0.103058,   -0.158809,      1,
				   -0.098104,   -0.154486,      1,

					0,	-0.16,	0,
					0,	-0.16,	0.012/0.282*cisternHeight
		del 1
	endif


	if gs_detlevel_3D_m = DETLEV_3D_DRAFT then
		sweep 9, 2, 0, 0.82, 1+2+16+32,
					0.121439,   -0.153231, 	1,
					0.126393,   -0.157553,  1,
					0.135426,   -0.223563,  1,
					0.125518,   -0.234919,  1,
					0,     		 0.4,		901,
				   -0.125518,   -0.234919,  3001,
				   -0.135426,   -0.223563,  1,
				   -0.126393,   -0.157553,  1,
				   -0.121439,   -0.153231,  1,

					0,	-0.16,	0,
					0,	-0.16,	0.27/0.282*cisternHeight

		addz 0.27/0.282*cisternHeight
		sweep 10, 2, 0, 0.7^3, 1+2+16+32,
					0.098104,   -0.154487,      1,
					0.103057,   -0.158809,      1,
					0.110305,   -0.211773,      1,
					0.104962,   -0.220552,      1,
				   -0.000241,    0.320157,    	900,
					0.0,     	-21.9711,   	4001,
				   -0.104979,   -0.220642,      1,
				   -0.110305,   -0.211773,      1,
				   -0.103058,   -0.158809,      1,
				   -0.098104,   -0.154486,      1,

					0,	-0.16,	0,
					0,	-0.16,	0.012/0.282*cisternHeight
		del 1
	endif

	del 4

return



!================================================================================
"CISTERN_3":
!================================================================================


	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 32
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 16
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 8


	addz gs_seat_height

	mulx cisternWidth/0.374
	muly cisternDepth/0.1886

	rotz -90

	h  = cisternHeight-0.03

	if gs_detlevel_3d_m = DETLEV_3D_DETAILED then

		x  = 0.07619
		y  = 0.03828
		m  = 0.75
		mm = 1.1

		addz h
		mulz -1
		ruled 18, 1+2+4+16+32,
				0, 			 4.1933*y, 1,
				0.0398*x, 	 4.3307*y, 1,
				0.1486*x, 	 4.4222*y, 1,
				0.2895*x, 	 4.4405*y, 1,
				0.4161*x, 	 4.3801*y, 1,
				1.9144*x, 	 3.0483*y, 1,
				2.0952*x, 	 2.8356*y, 1,
				2.2111*x, 	 2.5799*y, 1,
				2.2500*x, 	 2.3009*y, 1,
				2.2500*x, 	-2.3009*y, 1,
				2.2111*x, 	-2.5799*y, 1,
				2.0952*x, 	-2.8356*y, 1,
				1.9144*x, 	-3.0483*y, 1,
				0.4161*x, 	-4.3801*y, 1,
				0.2895*x, 	-4.4405*y, 1,
				0.1486*x, 	-4.4222*y, 1,
				0.0398*x, 	-4.3307*y, 1,
				0, 			-4.1933*y, 1,

				0, 				 3.6366*y*m, h,
				0.0802*x*m, 	 3.9082*y*m, h,
				0.2952*x*m, 	 4.0927*y*m, h,
				0.5758*x*m, 	 4.1308*y*m, h,
				0.8322*x*m, 	 4.0103*y*m, h,
				1.2431*x*m, 	 3.6450*y*m, h,
				1.7817*x*m, 	 3.0130*y*m, h,
				2.1325*x*m, 	 2.2412*y*m, h,
				2.2500*x*m, 	 1.4028*y*m, h,
				2.2500*x*m, 	-1.4028*y*m, h,
				2.1325*x*m, 	-2.2412*y*m, h,
				1.7817*x*m, 	-3.0130*y*m, h,
				1.2431*x*m, 	-3.6450*y*m, h,
				0.8322*x*m, 	-4.0103*y*m, h,
				0.5758*x*m, 	-4.1308*y*m, h,
				0.2952*x*m, 	-4.0927*y*m, h,
				0.0802*x*m, 	-3.9082*y*m, h,
				0, 				-3.6366*y*m, h
		del 2

		addz h
		fprism_	gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
				18, 0.03, 60, 0.015,
						0, 				 4.1933*y*mm, 79,
						0.0398*x*mm, 	 4.3307*y*mm, 79,
						0.1486*x*mm, 	 4.4222*y*mm, 79,
						0.2895*x*mm, 	 4.4405*y*mm, 79,
						0.4161*x*mm, 	 4.3801*y*mm, 79,
						1.9144*x*mm, 	 3.0483*y*mm, 79,
						2.0952*x*mm, 	 2.8356*y*mm, 79,
						2.2111*x*mm, 	 2.5799*y*mm, 79,
						2.2500*x*mm, 	 2.3009*y*mm, 79,
						2.2500*x*mm, 	-2.3009*y*mm, 79,
						2.2111*x*mm, 	-2.5799*y*mm, 79,
						2.0952*x*mm, 	-2.8356*y*mm, 79,
						1.9144*x*mm, 	-3.0483*y*mm, 79,
						0.4161*x*mm, 	-4.3801*y*mm, 79,
						0.2895*x*mm, 	-4.4405*y*mm, 79,
						0.1486*x*mm,	-4.4222*y*mm, 79,
						0.0398*x*mm, 	-4.3307*y*mm, 79,
						0, 				-4.1933*y*mm, 79
		del 1

		addx 0.05
		addz cisternHeight
		cylind 0.01, 0.015
		del 2
	endif


	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		addz h
		mulz -1
		sweep	4, 2, 0, 0.75, 1+2+16+32,
				0, 		 	 0.374/2, 		0,
				0.1886,      0.374*0.26, 	0,
				0.1886, 	-0.374*0.26, 	0,
				0, 			-0.374/2, 		0,

				0,	0,	0,
				0,	0,	h
		del 2

		addz cisternHeight-0.03
		prism_ 4, 0.03,
				0, 		 	 0.374/2, 		15,
				0.1886,      0.374*0.26, 	15,
				0.1886, 	-0.374*0.26, 	15,
				0, 			-0.374/2, 		15
		del 1
	endif


	if gs_detlevel_3D_m = DETLEV_3D_DRAFT then
		addz cisternHeight
		mulz -1
		sweep 4, 2, 0, 0.75, 1+2+16+32,
				0, 		 	 0.374/2, 		0,
				0.1886,      0.374*0.26, 	0,
				0.1886, 	-0.374*0.26, 	0,
				0, 			-0.374/2, 		0,

				0,	0,	0,
				0,	0,	cisternHeight
		del 2
	endif

	del 4

return



!================================================================================
"CISTERN_4":
!================================================================================


	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 48
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 24
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 12


	addz gs_seat_height

	mulx cisternWidth/0.400
	muly cisternDepth/0.140
	mulz cisternHeight/0.440

	group "c4_bottom"
		prism_ 8, 0.353,
					 0.2,   -0.095,      		15,
					 0.2,    0,      			15,
					-0.2,    0,      			15,
					-0.2,   -0.095+EPS,      	15,
					-0.2,   -0.095,      		79,
					 0, 	 0.3269444444444,   900,
					 0, 	 50.72153396728,   	4015,
					 0.2,   -0.095,      		15
	endgroup


	group "c4_bottomcut"
		rotx 90
		s1 = 13
		prism_ 13, 0.140,
				-0.15,     0,      		79,
				-0.15,     0.05,    	900,
				 0,       -90,   		4000+s1,
				-0.2,      0.05,      	79,
				-0.3,      0.05,      	s1,
				-0.3,     -0.1,      	s1,
				 0.3,     -0.1,      	s1,
				 0.3,      0.05,      	s1,
				 0.2,      0.05,      	79,
				 0.15,     0.05,    	900,
				 0,       -90,   		4000+s1,
				 0.15,     0,      		79,
				-0.15,     0,      		79
		del 1
	endgroup

	placegroup subgroup("c4_bottom", "c4_bottomcut")

	killgroup "c4_bottom"
	killgroup "c4_bottomcut"


	group "c4_top"
		if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
			put		0.4,            	EPS,      				1,
					0.4,            	EPS*2,      			1,
					0.4,        		0.035-EPS,      		1,
					0.4,        		0.035,      			0,
					0.4-EPS,        	0.035,      			1,
					0.352180778016, 	0.05450558103975,      	1,
					0.3025, 			0.06861111111113,      	1,
					0.2515653875922, 	0.0771440438851,      	1,
					0.2, 				0.08,      				1,
					0.1484346124078, 	0.07714404388511,      	1,
					0.09745, 			0.06861111111112,      	1,
					0.04781922198408, 	0.05450558103975,      	1,
					EPS*2,        		0.035,      			0,
					EPS,        		0.035,      			1,
					EPS,        		0.035-EPS,      		1,
					EPS,            	EPS*2,      			1,
					EPS,            	EPS,      				1
		endif

		if gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
			put		0.4,            	EPS,      				1,
					0.4,            	EPS*2,      			1,
					0.4,        		0.035-EPS,      		1,
					0.4,        		0.035,      			0,
					0.4-EPS,        	0.035,      			1,
					0.3025, 			0.06861111111113,      	1,
					0.2, 				0.08,      				1,
					0.09745, 			0.06861111111112,      	1,
					EPS*2,        		0.035,      			0,
					EPS,        		0.035,      			1,
					EPS,        		0.035-EPS,      		1,
					EPS,            	EPS*2,      			1,
					EPS,            	EPS,      				1
		endif

		if gs_detlevel_3d_m = DETLEV_3D_DRAFT then
			put		0.4,            	EPS,      				1,
					0.4,            	EPS*2,      			1,
					0.4,        		0.035-EPS,      		1,
					0.4,        		0.035,      			0,
					0.4-EPS,        	0.035,      			1,
					0.2, 				0.08,      				1,
					EPS*2,        		0.035,      			0,
					EPS,        		0.035,      			1,
					EPS,        		0.035-EPS,      		1,
					EPS,            	EPS*2,      			1,
					EPS,            	EPS,      				1
		endif


		addx -0.2
		addy -0.06
		addz 0.355
		muly -1

		revolve NSP/3, 90, 1+2+16+0,
			get(NSP)

		del 4


		hh = 0.06

		if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
			put		0.4,            	EPS,      				0,
					0.4,            	EPS*2,      			1,
					0.4,        		0.035-EPS,      		1,
					0.4,        		0.035,      			0,
					0.4-EPS,        	0.035,      			1,
					0.352180778016, 	0.05450558103975,      	1,
					0.3025, 			0.06861111111113,      	1,
					0.2515653875922, 	0.0771440438851,      	1,
					0.2, 				0.08,      				1,
					0.1484346124078, 	0.07714404388511,      	1,
					0.09745, 			0.06861111111112,      	1,
					0.04781922198408, 	0.05450558103975,      	1,
					EPS*2,        		0.035,      			1,
					EPS,        		0.035,      			0,
					EPS,        		0.035-EPS,      		1,
					EPS,            	EPS*2,      			1,
					EPS,            	EPS,      				0,
					0.4,            	EPS,      				0,

					0.4,            	EPS,      					hh,
					0.4,            	EPS*2,      				hh,
					0.4,        		0.005+0.035-EPS,      		hh,
					0.4,        		0.005+0.035,      			hh,
					0.4-EPS,        	0.005+0.035,      			hh,
					0.352180778016, 	0.005+0.05450558103975,     hh,
					0.3025, 			0.005+0.06861111111113,     hh,
					0.2515653875922, 	0.005+0.0771440438851,     	hh,
					0.2, 				0.005+0.08,      			hh,
					0.1484346124078, 	0.005+0.07714404388511,     hh,
					0.09745, 			0.005+0.06861111111112,     hh,
					0.04781922198408, 	0.005+0.05450558103975,     hh,
					EPS*2,        		0.005+0.035,      			hh,
					EPS,        		0.005+0.035,      			hh,
					EPS,        		0.005+0.035-EPS,      		hh,
					EPS,            	EPS*2,      				hh,
					EPS,            	EPS,      					hh,
					0.4,            	EPS,      					hh
		endif

		if gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
			put		0.4,            	EPS,      				0,
					0.4,            	EPS*2,      			1,
					0.4,        		0.035-EPS,      		1,
					0.4,        		0.035,      			0,
					0.4-EPS,        	0.035,      			1,
					0.3025, 			0.06861111111113,      	1,
					0.2, 				0.08,      				1,
					0.09745, 			0.06861111111112,      	1,
					EPS*2,        		0.035,      			1,
					EPS,        		0.035,      			0,
					EPS,        		0.035-EPS,      		1,
					EPS,            	EPS*2,      			1,
					EPS,            	EPS,      				0,
					0.4,            	EPS,      				0,

					0.4,            	EPS,      					hh,
					0.4,            	EPS*2,      				hh,
					0.4,        		0.005+0.035-EPS,      		hh,
					0.4,        		0.005+0.035,      			hh,
					0.4-EPS,        	0.005+0.035,      			hh,
					0.3025, 			0.005+0.06861111111113,     hh,
					0.2, 				0.005+0.08,      			hh,
					0.09745, 			0.005+0.06861111111112,     hh,
					EPS*2,        		0.005+0.035,      			hh,
					EPS,        		0.005+0.035,      			hh,
					EPS,        		0.005+0.035-EPS,      		hh,
					EPS,            	EPS*2,      				hh,
					EPS,            	EPS,      					hh,
					0.4,            	EPS,      					hh
		endif

		if gs_detlevel_3d_m = DETLEV_3D_DRAFT then
			put		0.4,            	EPS,      				0,
					0.4,            	EPS*2,      			1,
					0.4,        		0.035-EPS,      		1,
					0.4,        		0.035,      			0,
					0.4-EPS,        	0.035,      			1,
					0.2, 				0.08,      				1,
					EPS*2,        		0.035,      			1,
					EPS,        		0.035,      			0,
					EPS,        		0.035-EPS,      		1,
					EPS,            	EPS*2,      			1,
					EPS,            	EPS,      				0,
					0.4,            	EPS,      				0,

					0.4,            	EPS,      					hh,
					0.4,            	EPS*2,      				hh,
					0.4,        		0.005+0.035-EPS,      		hh,
					0.4,        		0.005+0.035,      			hh,
					0.4-EPS,        	0.005+0.035,      			hh,
					0.2, 				0.005+0.08,      			hh,
					EPS*2,        		0.005+0.035,      			hh,
					EPS,        		0.005+0.035,      			hh,
					EPS,        		0.005+0.035-EPS,      		hh,
					EPS,            	EPS*2,      				hh,
					EPS,            	EPS,      					hh,
					0.4,            	EPS,      					hh
		endif


		add -0.2, -0.06, 0.355
		rotx 90
		mulz -1

		ruled NSP/6, 1+2+0+32,
			get(NSP)

		del 3
	endgroup


	group "c4_topcut"
		addy -0.05
		prism_ 36, 1,
			-0.02871010254294, 	-0.006238436810879,     s1,
			-0.02247014749181, 	-0.0199190095898,    	900,
			 0, 				 106.082713556,   		4000+s1,
			-0.03388667855007, 	-0.02970460763974,      s1,
			-0.01141439422985, 	-0.05592227268,      	s1,
			 0, 				-0.04613850619727,    	900,
			 0, 				 98.79741070997,   		4000+s1,
			 0.01141439422984, 	-0.05592227267999,      s1,
			 0.03388667855007, 	-0.02970460763974,      s1,
			 0.0224701474918, 	-0.0199190095898,    	900,
			 0, 				 106.0827208292,   		4000+s1,
			 0.02871010080631, 	-0.006238436018776,     s1,
			 0, 				-0.0691830428068,    	900,
			 0, 				 24.51853187702,   		4000+s1,
			 0,            		 0,      				s1,
			 0, 				-0.0691830428068,    	900,
			 0, 				 24.5185334578,   		4000+s1,
			-0.02871010254294, 	-0.006238436810879,     -1,

			-0.0330140171014, 	-0.02758556597106,      s1,
			-0.02247014749181, 	-0.0199190095898,    	900,
			 0, 				-101.5027117344,   		4000+s1,
			-0.02788012462856, 	-0.008058089706804,     s1,
			 0, 				-0.0691830428068,    	900,
			 0, 				-24.51853084972,   		4000+s1,
			 0, 				-0.002,      			s1,
			 0, 				-0.0691830428068,    	900,
			 0, 				-24.51853082742,   		4000+s1,
			 0.02788012460477, 	-0.00805808969595,      s1,
			 0.02247014749181, 	-0.0199190095898,    	900,
			 0, 				-101.5027118493,   		4000+s1,
			 0.0330140171014, 	-0.02758556597106,      s1,
			 0.009994190732108, -0.05444203006856,      s1,
			 0, 				-0.04613850619727,    	900,
			 0, 				-100.5580195327,   		4000+s1,
			-0.009994190732108, -0.05444203006856,      s1,
			-0.0330140171014, 	-0.02758556597106,     	-1
		del 1
	endgroup


	placegroup subgroup("c4_top", "c4_topcut")

	killgroup "c4_top"
	killgroup "c4_topcut"

	del 4

return



!================================================================================
"CISTERN_5":
!================================================================================


	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 32
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 12
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 4


	addz gs_seat_height

	mulx cisternWidth/0.400
	muly cisternDepth/0.168
	mulz cisternHeight/0.405


	hh = 0.315

	if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
		put		-0.2,       		-0.138,      			1,
				-0.1994235584121, 	-0.1438527096605,      	1,
				-0.1977163859753, 	-0.149480502971,      	1,
				-0.1949440883691, 	-0.1546671069906,      	1,
				-0.1912132034356, 	-0.1592132034356,      	1,
				-0.1866671069906, 	-0.1629440883691,      	1,
				-0.181480502971, 	-0.1657163859753,      	1,
				-0.1758527096605, 	-0.1674235584121,      	1,
				-0.17,       		-0.168,      			1,
				 0.17,       		-0.168,      			1,
				 0.1758527096605, 	-0.1674235584121,      	1,
				 0.181480502971, 	-0.1657163859753,      	1,
				 0.1866671069906, 	-0.1629440883691,      	1,
				 0.1912132034356, 	-0.1592132034356,      	1,
				 0.1949440883691, 	-0.1546671069906,      	1,
				 0.1977163859753, 	-0.149480502971,      	1,
				 0.1994235584121, 	-0.1438527096605,      	1,
				 0.2,       		-0.138,      			1,
				 0.2,        		-0.03,      			1,
				 0.1994235584121, 	-0.02414729033951,      1,
				 0.1977163859753, 	-0.01851949702905,      1,
				 0.1949440883691, 	-0.01333289300941,     	1,
				 0.1912132034356, 	-0.008786796564404,     1,
				 0.1866671069906, 	-0.005055911630923,     1,
				 0.181480502971, 	-0.002283614024663,     1,
				 0.1758527096605, 	-0.0005764415879028,    1,
				 0.17,            	 0,      				1,
				-0.17,            	 0,      				1,
				-0.1758527096605, 	-0.0005764415879028,    1,
				-0.181480502971, 	-0.002283614024662,     1,
				-0.1866671069906, 	-0.005055911630923,     1,
				-0.1912132034356, 	-0.008786796564405,     1,
				-0.1949440883691, 	-0.01333289300941,      1,
				-0.1977163859753, 	-0.01851949702904,      1,
				-0.1994235584121, 	-0.02414729033952,      1,
				-0.2,        		-0.03,      			1,

				-0.185,      		-0.1365,      			hh,
				-0.1846157056087, 	-0.1404018064374,      	hh,
				-0.1834775906525, 	-0.1441536686417,      	hh,
				-0.1816293922511, 	-0.1476114046529,      	hh,
				-0.1791421356305, 	-0.1506421356135,      	hh,
				-0.1761114046704, 	-0.153129392235,      	hh,
				-0.1726536686609, 	-0.1549775906396,      	hh,
				-0.1689018064576, 	-0.1561157055991,      	hh,
				-0.165,   			-0.1565,      			hh,
				 0.165,   			-0.1565,      			hh,
				 0.1689018064576, 	-0.1561157055991,      	hh,
				 0.1726536686609, 	-0.1549775906396,      	hh,
				 0.1761114046704, 	-0.153129392235,      	hh,
				 0.1791421356305, 	-0.1506421356135,      	hh,
				 0.1816293922511, 	-0.1476114046529,      	hh,
				 0.1834775906525, 	-0.1441536686417,      	hh,
				 0.1846157056087, 	-0.1404018064374,      	hh,
				 0.185,      		-0.1365,      			hh,
				 0.185,      		-0.0315,      			hh,
				 0.1846157056087, 	-0.02759819356263,      hh,
				 0.1834775906525, 	-0.02384633135826,      hh,
				 0.1816293922511, 	-0.02038859534712,      hh,
				 0.1791421356305, 	-0.0173578643865,      	hh,
				 0.1761114046704, 	-0.01487060776497,      hh,
				 0.1726536686609, 	-0.01302240936041,      hh,
				 0.1689018064576, 	-0.01188429440093,      hh,
				 0.165,   			-0.0115,      			hh,
				-0.165,   			-0.0115,      			hh,
				-0.1689018064576, 	-0.01188429440093,      hh,
				-0.1726536686609, 	-0.01302240936041,      hh,
				-0.1761114046704, 	-0.01487060776496,      hh,
				-0.1791421356305, 	-0.0173578643865,      	hh,
				-0.1816293922511, 	-0.02038859534712,      hh,
				-0.1834775906525, 	-0.02384633135826,      hh,
				-0.1846157056087, 	-0.02759819356263,      hh,
				-0.185,      		-0.0315,      			hh
	endif

	if gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
		put		-0.2,       		-0.138,      			1,
				-0.1912132034356, 	-0.1592132034356,      	1,
				-0.17,       		-0.168,      			1,
				 0.17,       		-0.168,      			1,
				 0.1912132034356, 	-0.1592132034356,      	1,
				 0.2,       		-0.138,      			1,
				 0.2,        		-0.03,      			1,
				 0.1912132034356, 	-0.008786796564404,     1,
				 0.17,            	 0,      				1,
				-0.17,            	 0,      				1,
				-0.1912132034356, 	-0.008786796564405,     1,
				-0.2,        		-0.03,      			1,

				-0.185,      		-0.1365,      			hh,
				-0.1791421356305, 	-0.1506421356135,      	hh,
				-0.165,   			-0.1565,      			hh,
				 0.165,   			-0.1565,      			hh,
				 0.1791421356305, 	-0.1506421356135,      	hh,
				 0.185,      		-0.1365,      			hh,
				 0.185,      		-0.0315,      			hh,
				 0.1791421356305, 	-0.0173578643865,      	hh,
				 0.165,   			-0.0115,      			hh,
				-0.165,   			-0.0115,      			hh,
				-0.1791421356305, 	-0.0173578643865,      	hh,
				-0.185,      		-0.0315,      			hh
	endif

	if gs_detlevel_3d_m = DETLEV_3D_DRAFT then
		put		-0.2,       		-0.168,      			0,
				 0.2,       		-0.168,      			0,
				 0.2,        		 0,      				0,
				-0.2,            	 0,      				0,

				-0.185,   			-0.1565,      			hh,
				 0.185,   			-0.1565,      			hh,
				 0.185,   			-0.0115,      			hh,
				-0.185,   			-0.0115,      			hh
	endif


	addz hh+0.02
	mulz -1

	ruled NSP/6, 1+2+4+16+0,
			get(NSP)
	del 2


	! --- Bottom ---

	if GLOB_CONTEXT = 4 or GLOB_CONTEXT = 24 or GLOB_CONTEXT = 44 then
		s1 = 64+14
	else
		s1 = 64+10
	endif

	if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
		put		-0.185,      		-0.1365,      			s1,
				-0.1846157056087, 	-0.1404018064374,      	s1,
				-0.1834775906525, 	-0.1441536686417,      	s1,
				-0.1816293922511, 	-0.1476114046529,      	s1,
				-0.1791421356305, 	-0.1506421356135,      	s1,
				-0.1761114046704, 	-0.153129392235,      	s1,
				-0.1726536686609, 	-0.1549775906396,      	s1,
				-0.1689018064576, 	-0.1561157055991,      	s1,
				-0.165,   			-0.1565,      			s1,
				 0.165,   			-0.1565,      			s1,
				 0.1689018064576, 	-0.1561157055991,      	s1,
				 0.1726536686609, 	-0.1549775906396,      	s1,
				 0.1761114046704, 	-0.153129392235,      	s1,
				 0.1791421356305, 	-0.1506421356135,      	s1,
				 0.1816293922511, 	-0.1476114046529,      	s1,
				 0.1834775906525, 	-0.1441536686417,      	s1,
				 0.1846157056087, 	-0.1404018064374,      	s1,
				 0.185,      		-0.1365,      			s1,
				 0.185,      		-0.0315,      			s1,
				 0.1846157056087, 	-0.02759819356263,      s1,
				 0.1834775906525, 	-0.02384633135826,      s1,
				 0.1816293922511, 	-0.02038859534712,      s1,
				 0.1791421356305, 	-0.0173578643865,      	s1,
				 0.1761114046704, 	-0.01487060776497,      s1,
				 0.1726536686609, 	-0.01302240936041,      s1,
				 0.1689018064576, 	-0.01188429440093,      s1,
				 0.165,   			-0.0115,      			s1,
				-0.165,   			-0.0115,      			s1,
				-0.1689018064576, 	-0.01188429440093,     	s1,
				-0.1726536686609, 	-0.01302240936041,     	s1,
				-0.1761114046704, 	-0.01487060776496,      s1,
				-0.1791421356305, 	-0.0173578643865,      	s1,
				-0.1816293922511, 	-0.02038859534712,      s1,
				-0.1834775906525, 	-0.02384633135826,      s1,
				-0.1846157056087, 	-0.02759819356263,      s1,
				-0.185,      		-0.0315,      			s1,
				-0.185,      		-0.1365,      			-1
	endif

	if gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
		put		-0.185,      		-0.1365,      			s1,
				-0.1791421356305, 	-0.1506421356135,      	s1,
				-0.165,   			-0.1565,      			s1,
				 0.165,   			-0.1565,      			s1,
				 0.1791421356305, 	-0.1506421356135,      	s1,
				 0.185,      		-0.1365,      			s1,
				 0.185,      		-0.0315,      			s1,
				 0.1791421356305, 	-0.0173578643865,      	s1,
				 0.165,   			-0.0115,      			s1,
				-0.165,   			-0.0115,      			s1,
				-0.1791421356305, 	-0.0173578643865,      	s1,
				-0.185,      		-0.0315,      			s1,
				-0.185,      		-0.1365,      			-1
	endif

	if gs_detlevel_3d_m = DETLEV_3D_DRAFT then
		put		-0.185,   			-0.1565,      			s1,
				 0.185,   			-0.1565,      			s1,
				 0.185,   			-0.0115,      			s1,
				-0.185,   			-0.0115,      			s1,
				-0.185,   			-0.1565,      			-1
	endif


	addz 0.02
	mulz -1

	hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
			NSP/3, 0.02, 0, 0.02, 1,
				get(NSP)
	del 2


	! --- Top ---

	group "c5_top"
		addz 0.338
		rotx 180
		cutplane
		del 2

		addz 0.405
		roty -90

		for s=1 to 2
			if gs_detlevel_3d_m = DETLEV_3D_DETAILED or gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
				if GLOB_CONTEXT = 4 or GLOB_CONTEXT = 24 or GLOB_CONTEXT = 44 then
					s1 = 64+14
				else
					s1 = 64+10
				endif
			endif
			if gs_detlevel_3d_m = DETLEV_3D_DRAFT    then s1 = 64+14

			put		-0.15, 				 0,      			s1,
					-0.15,       		-0.168,      		s1,
					-0.06066322496665,  -0.168,      		s1,
					-0.06066322496665,  -0.138,    			900,
					 0, 				 46.67483799053,   	4000+s1,
					-0.03883907985985, 	-0.1585841368621,   s1,
					-0.008175854893202, -0.1260737296685,   s1,
					-0.03, 				-0.1054895928064,   900,
					 0, 				 43.32516200947,   	4000+s1,
					 0, 				-0.1054895928064,   s1,
					 0,       			-0.03,      		s1,
					-0.03,       		-0.03,    			900,
					 0,           		 90,   				4000+s1,
					-0.03, 			 	 0,      			s1,
					-0.15, 				 0,      			-1


			if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
				hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
						NSP/3, 0.200, 0, 0.0295, 1,
							get(NSP)
			endif


			if gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
				hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
						NSP/3, 0.200, 0, 0.0295, 1,
							get(NSP)
			endif


			if gs_detlevel_3d_m = DETLEV_3D_DRAFT then
				prism_ NSP/3, 0.200,
							get(NSP)
			endif

			mulz -1
		next s
		del 2

		del 2

		cutend
	endgroup

	group "c5_topcut"
		addx 0.1
		addy -0.0325
		prism_ 15, 1,
				0, 		-0.07,      15,
				0.09, 	-0.07,      15,
				0.09,    0,      	15,
				0,       0,      	15,
				0, 		-0.07,      -1,

				0.003, 	-0.067,     15,
				0.087, 	-0.067,     15,
				0.087, 	-0.0365,    15,
				0.003, 	-0.0365,    15,
				0.003, 	-0.067,     -1,

				0.087,  -0.003,     15,
				0.003,  -0.003,     15,
				0.003, 	-0.0335,    15,
				0.087, 	-0.0335,    15,
				0.087,  -0.003,     -1
		del 2
	endgroup


	if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
		placegroup subgroup("c5_top","c5_topcut")
	else
		placegroup "c5_top"
	endif

	killgroup "c5_top"
	killgroup "c5_topcut"

	del 4

return



!================================================================================
"ELEV_CISTERN_1":
!================================================================================

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 32
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 16
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 8


	addz elevatedCisternElevation

	mulx cisternWidth / 0.435
	muly cisternDepth / 0.18105

	h_top = 0.05

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED or gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		addy -0.645
		ruled 25, 1+2+4+16+32,
					0.000001,     0.518214,     1,
					0.040757,     0.517192,     1,
					0.08141,      0.514131,     1,
					0.121859,     0.509037,     1,
					0.162002,     0.501924,     1,
					0.168528,     0.502061,     1,
					0.174366,     0.504981,     1,
					0.178389,     0.51012,     	1,
					0.179822,     0.516488,     1,
					0.172647,     0.548616,     1,
					0.165467,     0.580744,     1,
					0.158288,     0.612872,     1,
					0.151113,     0.645,     	0,
				   -0.151111,     0.645,     	0,
				   -0.158288,     0.612872,     1,
				   -0.165466,     0.580744,     1,
				   -0.172643,     0.548616,     1,
				   -0.179821,     0.516488,     1,
				   -0.178387,     0.51012,     	1,
				   -0.174364,     0.504981,     1,
				   -0.168526,     0.502061,     1,
				   -0.162,        0.501924,     1,
				   -0.121857,     0.509037,     1,
				   -0.081408,     0.514131,     1,
				   -0.040755,     0.517192,     1,

					0.000001,     0.480535,     cisternHeight,
					0.038869,     0.479561,     cisternHeight,
					0.07764,      0.476642,     cisternHeight,
					0.116216,     0.471784,     cisternHeight,
					0.154501,     0.465,     	cisternHeight,
					0.177571,     0.465484,     cisternHeight,
					0.198209,     0.475806,     cisternHeight,
					0.212433,     0.493976,     cisternHeight,
					0.217501,     0.516488,     cisternHeight,
					0.215547,     0.549751,     cisternHeight,
					0.209711,     0.582556,     cisternHeight,
					0.200074,     0.614452,     cisternHeight,
					0.186769,     0.645,     	cisternHeight,
				   -0.186767,     0.645,     	cisternHeight,
				   -0.200072,     0.614452,     cisternHeight,
				   -0.209709,     0.582556,     cisternHeight,
				   -0.215545,     0.549751,     cisternHeight,
				   -0.217499,     0.516488,     cisternHeight,
				   -0.212431,     0.493976,     cisternHeight,
				   -0.198207,     0.475806,     cisternHeight,
				   -0.177569,     0.465484,     cisternHeight,
				   -0.154499,     0.465,     	cisternHeight,
				   -0.116214,     0.471784,     cisternHeight,
				   -0.077638,     0.476642,     cisternHeight,
				   -0.038868,     0.479561,     cisternHeight
		del 1
	endif


	if gs_detlevel_3D_m = DETLEV_3D_DRAFT then
		addy -0.645
		ruled 4, 1+2+4+16+32,
					0.174366,     0.504981,     0,
					0.174364,     0.645,     	0,
				   -0.174364,     0.645,     	0,
				   -0.174364,     0.504981,     0,

					0.215545,     0.475806,     cisternHeight,
					0.215545,     0.645,     	cisternHeight,
				   -0.215545,     0.645,     	cisternHeight,
				   -0.215545,     0.475806,     cisternHeight
		del 1
	endif

	del 3


	! --- Pipe ---

	addy -cisternDepth/3

	gosub "ELEV_PIPE"

	del 1

return



!================================================================================
"ELEV_CISTERN_2":
!================================================================================

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 48
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 24
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 12


	addz elevatedCisternElevation

	mulx cisternWidth/0.340
	muly cisternDepth/0.135
	mulz cisternHeight/0.425

	if gs_detlevel_3D_m = DETLEV_3D_DRAFT then

			rotx 90
			s1 = 13
			prism_ 10, 0.150,
					 0,            		 0,      				15,
					 0, 				 0.4303571428571,    	900,
					 0, 				 23.26726799788,   		4000+15,
					 0.17,        		 0.035,      			15,
					 0.17,        		 0.425,      			15,
					-0.17,        		 0.425,      			15,
					-0.17,       	 	 0.035,      			15,
					 0, 				 0.4303571428571,    	900,
					 0, 				 23.26726799788,   		4000+15,
					 0,            		 0,      				15
			del 1

	else

		! --- Front arch cut ---

		group "ec2_archcut"
			s1 = 79
			prism_ 9, 1,
					 0.27,      -0.205,      		s1,
					 0.27,      -0.105,      		s1,
					 0.17,      -0.105,      		s1,
					 0, 		 0.3616666666667,   900,
					 0, 		-40.03191920577,   	4000+s1,
					-0.17,      -0.105,      		s1,
					-0.27,      -0.105,      		s1,
					-0.27,      -0.205,      		s1,
					 0.27,      -0.205,      		s1
		endgroup


		! --- Body ---

		group "ec2_body"
			rotx 90
			s1 = 13
			prism_ 23, 0.150,
					 0,            		 0,      				s1,
					 0, 				 0.4303571428571,    	900,
					 0, 				 23.26726799788,   		4000+s1,
					 0.17,        		 0.035,      			15,
					 0.17,        		 0.385-EPS,      		15,
					 0.17,        		 0.385,      			s1,
					 0.17,        		 0.035,    				900,
					 0, 				 14.52963724994,   		4000+s1,
					 0.0821917333228, 	 0.3738062990901,      	s1,
					 0, 				 0.6909411708156,    	900,
					 0, 				-14.52964404252,   		4000+s1,
					 0, 				 0.3633285827013,      	s1,
					 0, 				 0.6909411708156,    	900,
					 0, 				-14.5296439815,   		4000+s1,
					-0.08219173298504, 	 0.3738062990026,      	s1,
					-0.17,        		 0.035,    				900,
					 0, 				 14.52963730706,   		4000+s1,
					-0.17,        		 0.385,      			15,
					-0.17,        		 0.035+EPS,      		15,
					-0.17,       	 	 0.035,      			s1,
					 0, 				 0.4303571428571,    	900,
					 0, 				 23.26726799788,   		4000+s1,
					 0,            		 0,      				s1
			del 1
		endgroup


		placegroup subgroup("ec2_body","ec2_archcut")

		killgroup "ec2_body"



		! --- Top ---

		group "ec2_top"
			addz 0.366-EPS
			rotx 90
			s1 = 13

			for s=1 to 2
				plane_ 4,
						-0.17, 					0.03867141986665,      	0, 		1,
						-0.17, 					0.02167141872566,      	0, 		1,
						-0.17, 					0.02167141872566,      	0.105, 	1,
						-0.17, 					0.03867141986665,      	0.105, 	1

				if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
					plane_ 19,
							-0.17, 					0.02167141872566,      	0, 1,
							-0.1478257295794, 		0.0209682821716,      	0, 1,
							-0.1257405554982, 		0.01886171501097,      	0, 1,
							-0.1038332091444, 		0.01536016857905,      	0, 1,
							-0.08219171458544, 		0.01047771343158,      	0, 1,
							-0.06193449750448, 		0.005907559531606,      0, 1,
							-0.04142843516663, 		0.002629985602512,      0, 1,
							-0.02075591510747, 		0.000658155092368,      0, 1,
							 0,            			0,      				0, 0,
							 0, 					0.05867141998703,      	0, 1,
							-0.02075591510747, 		0.0583772920533,      	0, 1,
							-0.04142843516663, 		0.05749893137854,      	0, 1,
							-0.06193449750448, 		0.05604837271959,      	0, 1,
							-0.08219171458544, 		0.05404556205864,      	0, 1,
							-0.1038332091444, 		0.05127480165377,      	0, 1,
							-0.1257405554982, 		0.04779844304002,      	0, 1,
							-0.1478257295794, 		0.04360002325172,      	0, 1,
							-0.17, 					0.03867141986665,      	0, 1,
							-0.17, 					0.02167141872566,      	0, 1
				endif

				if gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
					plane_ 7,
							-0.17, 					0.02167141872566,      	0, 1,
							-0.08219171458544, 		0.01047771343158,      	0, 1,
							 0,            			0,      				0, 0,
							 0, 					0.05867141998703,      	0, 1,
							-0.08219171458544, 		0.05404556205864,      	0, 1,
							-0.17, 					0.03867141986665,      	0, 1,
							-0.17, 					0.02167141872566,      	0, 1
				endif


				addy -EPS
				addz 0.105
				s1 = 13

				if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
					prism_ 19, 0.100,
							-0.1478257286092, 	0.03796828525831,      	s1,
							-0.17, 				0.03867141626112,      	s1,
							-0.17, 				0.02167141629731,      	s1,
							-0.1478257286092, 	0.0209682852945,      	s1,
							-0.1257405485059, 	0.01886171285031,      	s1,
							-0.1038332098411, 	0.01536016606084,      	s1,
							-0.08219171205755, 	0.01047770992363,      	s1,
							-0.06193449533074, 	0.005907558330417,      s1,
							-0.04142843135197, 	0.002629981632445,      s1,
							-0.02075591625937, 	0.0006581532695984,     s1,
							 0,           	 	0,      				s1,
							 0, 				0.017,      			s1,
							-0.02075591625937, 	0.01765815323341,      	s1,
							-0.04142843675535, 	0.01962998159625,      	s1,
							-0.06193449533074, 	0.02290755829423,      	s1,
							-0.08219171205755, 	0.02747770988744,      	s1,
							-0.1038332098411, 	0.03236016602465,      	s1,
							-0.1257405485059, 	0.03586171281412,      	s1,
							-0.1478257286092, 	0.03796828525831,      	s1
				endif

				if gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
					prism_ 7, 0.100,
							-0.17, 				0.03867141626112,      	s1,
							-0.17, 				0.02167141629731,      	s1,
							-0.08219171205755, 	0.01047770992363,      	s1,
							 0,           	 	0,      				s1,
							 0, 				0.017,      			s1,
							-0.08219171205755, 	0.02747770988744,      	s1,
							-0.17, 				0.03867141626112,      	s1
				endif


				del 2

				mulx -1
			next s
			del 2


			del 1
		endgroup


		placegroup subgroup("ec2_top","ec2_archcut")

		killgroup "ec2_top"
		killgroup "ec2_archcut"



		! --- Top surface ---

		addz 0.45
		rotx 0
		cutplane
		del 2

		addx -0.17+EPS
		roty -90
		cutplane
		del 2

		addx 0.17-EPS
		roty 90
		cutplane
		del 2

			if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
				put		-0.17, 				 0.1,      					1,
						-0.17, 				 0.02167141809426,      	1,
						-0.17+EPS, 			 0.02167141809426,      	1,
						-0.1478257290748, 	 0.02660002180335,      	1,
						-0.1257405533206, 	 0.03079844079616,      	1,
						-0.103833208194, 	 0.03427480157772,      	1,
						-0.08219171478923, 	 0.03704556234729,      	1,
						-0.06193449602754, 	 0.03904837345762,      	1,
						-0.04142843344761, 	 0.04049893180726,      	1,
						-0.02075591430728, 	 0.0413772909808,      		1,
						 0, 				 0.04167141827909,      	1,
						 0.02075591430728, 	 0.0413772909808,      		1,
						 0.04142843344761, 	 0.04049893180726,      	1,
						 0.06193449602754, 	 0.03904837345762,      	1,
						 0.08219171478923, 	 0.03704556234729,      	1,
						 0.103833208194, 	 0.03427480157772,      	1,
						 0.1257405533206, 	 0.03079844079616,      	1,
						 0.1478257290748, 	 0.02660002180335,      	1,
						 0.17-EPS, 			 0.02167141809426,      	1,
						 0.17, 				 0.02167141809426,      	1,
						 0.17, 				 0.1,      					1,
						 0.17, 				 0.1,      					1,
						 0.17-EPS, 			 0.1,      					1,
						 0.1478257290748, 	 0.1,      					1,
						 0.1257405533206, 	 0.1,      					1,
						 0.103833208194, 	 0.1,      					1,
						 0.08219171478923, 	 0.1,      					1,
						 0.06193449602754, 	 0.1,      					1,
						 0.04142843344761, 	 0.1,      					1,
						 0.02075591430728, 	 0.1,      					1,
						 0, 				 0.1,      					1,
						-0.02075591430728, 	 0.1,      					1,
						-0.04142843344761, 	 0.1,      					1,
						-0.06193449602754, 	 0.1,      					1,
						-0.08219171478923, 	 0.1,      					1,
						-0.103833208194, 	 0.1,      					1,
						-0.1257405533206, 	 0.1,      					1,
						-0.1478257290748, 	 0.1,      					1,
						-0.17+EPS, 			 0.1,      					1,

						-0.17, 				 0.1,      					0.105,
						-0.17, 				 0.02167141809426,      	0.105,
						-0.17+EPS, 			 0.02167141809426,      	0.105,
						-0.1478257290748, 	 0.0209682828857,      		0.1124908299471,
						-0.1257405533206, 	 0.01886171444381,      	0.1188196395869,
						-0.103833208194, 	 0.0153601660564,      		0.1240250485688,
						-0.08219171478923, 	 0.0104777121817,      		0.128151973059,
						-0.06193449602754, 	 0.005907558780815,      	0.1311232441913,
						-0.04142843344761, 	 0.002629985788988,      	0.1332691506912,
						-0.02075591430728, 	 0.0006581557125011,     	0.1345661135347,
						 0,            		 0,      					0.135,
						 0.02075591430728, 	 0.0006581557125011,     	0.1345661135347,
						 0.04142843344761, 	 0.002629985788988,      	0.1332691506912,
						 0.06193449602754, 	 0.005907558780815,      	0.1311232441913,
						 0.08219171478923, 	 0.0104777121817,      		0.128151973059,
						 0.103833208194, 	 0.0153601660564,      		0.1240250485688,
						 0.1257405533206, 	 0.01886171444381,      	0.1188196395869,
						 0.1478257290748, 	 0.0209682828857,      		0.1124908299471,
						 0.17-EPS, 			 0.02167141809426,      	0.105,
						 0.17, 				 0.02167141809426,      	0.105,
						 0.17, 				 0.1,      					0.105,
						 0.17, 				 0.1,      					0.105,
						 0.17-EPS, 			 0.1,      					0.105,
						 0.1478257290748, 	 0.1,      					0.1124908299471,
						 0.1257405533206, 	 0.1,      					0.1188196395869,
						 0.103833208194, 	 0.1,      					0.1240250485688,
						 0.08219171478923, 	 0.1,      					0.128151973059,
						 0.06193449602754,   0.1,      					0.1311232441913,
						 0.04142843344761,   0.1,      					0.1332691506912,
						 0.02075591430728, 	 0.1,     					0.1345661135347,
						 0,            		 0.1,      					0.135,
						-0.02075591430728, 	 0.1,     					0.1345661135347,
						-0.04142843344761, 	 0.1,      					0.1332691506912,
						-0.06193449602754, 	 0.1,      					0.1311232441913,
						-0.08219171478923, 	 0.1,      					0.128151973059,
						-0.103833208194, 	 0.1,      					0.1240250485688,
						-0.1257405533206, 	 0.1,      					0.1188196395869,
						-0.1478257290748, 	 0.1,      					0.1124908299471,
						-0.17+EPS, 			 0.1,      					0.105
			endif

			if gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
				put		-0.17, 				 0.1,      					1,
						-0.17, 				 0.02167141809426,      	1,
						-0.17+EPS, 			 0.02167141809426,      	1,
						-0.08219171478923, 	 0.03704556234729,      	1,
						 0, 				 0.04167141827909,      	1,
						 0.08219171478923, 	 0.03704556234729,      	1,
						 0.17-EPS, 			 0.02167141809426,      	1,
						 0.17, 				 0.02167141809426,      	1,
						 0.17, 				 0.1,      					1,
						 0.17, 				 0.1,      					1,
						 0.17-EPS, 			 0.1,      					1,
						 0.08219171478923, 	 0.1,      					1,
						 0, 				 0.1,      					1,
						-0.08219171478923, 	 0.1,      					1,
						-0.17+EPS, 			 0.1,      					1,

						-0.17, 				 0.1,      					0.105,
						-0.17, 				 0.02167141809426,      	0.105,
						-0.17+EPS, 			 0.02167141809426,      	0.105,
						-0.08219171478923, 	 0.0104777121817,      		0.128151973059,
						 0,            		 0,      					0.135,
						 0.08219171478923, 	 0.0104777121817,      		0.128151973059,
						 0.17-EPS, 			 0.02167141809426,      	0.105,
						 0.17, 				 0.02167141809426,      	0.105,
						 0.17, 				 0.1,      					0.105,
						 0.17, 				 0.1,      					0.105,
						 0.17-EPS, 			 0.1,      					0.105,
						 0.08219171478923, 	 0.1,      					0.128151973059,
						 0,            		 0.1,      					0.135,
						-0.08219171478923, 	 0.1,      					0.128151973059,
						-0.17+EPS, 			 0.1,      					0.105
			endif



			addz 0.383
			rotx 90

			ruled{2} NSP/6, 0+0+0+16+32,
				get(NSP)

			del 2

		cutend
		cutend
		cutend

	endif

	del 4

	! --- Pipe ---

	addy -cisternDepth/2

	gosub "ELEV_PIPE"

	del 1

return



!================================================================================
"ELEV_CISTERN_3":
!================================================================================

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 32
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 16
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 8


	addz elevatedCisternElevation

	mulx cisternWidth/0.410
	muly cisternDepth/0.128
	mulz cisternHeight/0.380



	if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
		if GLOB_CONTEXT = 4 or GLOB_CONTEXT = 24 or GLOB_CONTEXT = 44 then
			s1 = 64+14
		else
			s1 = 64+10
		endif

		put		0.36, 				 0,      			s1,
				0.02,            	 0,      			s1,
				0.02,        		-0.02,    			900,
				0,           		 90,   				4000+s1,
				0,        			-0.02,      		s1,
				0,       			-0.098,      		s1,
				0.02, 				-0.098,    			900,
				0, 					 84.16438759078,   	4000+s1,
				0.01796650700995, 	-0.1178963540945,   s1,
				0.315, 				 4.243242838714,    900,
				0, 					 3.896349532457,   	4000+s1,
				0.315,       		-0.128,      		s1,
				0.3621573896043, 	-0.1228833012877,   s1,
				0.36,       		-0.103,    			900,
				0, 					 83.80748504516,   	4000+s1,
				0.38,       		-0.103,      		s1,
				0.38,        		-0.02,      		s1,
				0.36,        		-0.02,    			900,
				0,           		 90,   				4000+s1,
				0.36, 				 0,      			-1

		roty -90

		group "ec3_box_detailed"
			hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
					NSP/3, 0.410/2, 0, 0.02, 1,
						use(NSP)

			mulz -1
			hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
					NSP/3, 0.410/2, 0, 0.02, 1,
						get(NSP)
			del 1
		endgroup

		group "ec3_cut1_detailed"
			addz -0.5
			prism_ 5, 1,
					 0.297546875,       -0.178,      15,
					 0.300546875,       -0.178,      15,
					 0.366453125,         0.05,      15,
					 0.363453125,         0.05,      15,
					 0.297546875,       -0.178,      15
			del 1
		endgroup

		placegroup subgroup("ec3_box_detailed","ec3_cut1_detailed")

		killgroup "ec3_box_detailed"
		killgroup "ec3_cut1_detailed"

		del 1
	endif


	if gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
		if GLOB_CONTEXT = 4 or GLOB_CONTEXT = 24 or GLOB_CONTEXT = 44 then
			s1 = 64+14
		else
			s1 = 64+10
		endif

		put		0.36, 				 0,      			s1,
				0.02,            	 0,      			s1,
				0,        			-0.02,      		s1,
				0,       			-0.098,      		s1,
				0.01796650700995, 	-0.1178963540945,   s1,
				0.315,       		-0.128,      		s1,
				0.3621573896043, 	-0.1228833012877,   s1,
				0.38,       		-0.103,      		s1,
				0.38,        		-0.02,      		s1,
				0.36, 				 0,      			-1


		roty -90

		group "ec3_box_simple"
			hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
					NSP/3, 0.410/2, 0, 0.02, 1,
						use(NSP)

			mulz -1
			hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
					NSP/3, 0.410/2, 0, 0.02, 1,
						get(NSP)
			del 1
		endgroup


		group "ec3_cut1_simple"
			addz -0.5
			prism_ 5, 1,
					 0.297546875,       -0.178,      15,
					 0.300546875,       -0.178,      15,
					 0.366453125,         0.05,      15,
					 0.363453125,         0.05,      15,
					 0.297546875,       -0.178,      15
			del 1
		endgroup


		placegroup subgroup("ec3_box_simple","ec3_cut1_simple")

		killgroup "ec3_box_simple"
		killgroup "ec3_cut1_simple"


		del 1
	endif


	if gs_detlevel_3d_m = DETLEV_3D_DRAFT then
		s1 = 79
		put		0.36, 				 0,      			s1,
				0.02,            	 0,      			s1,
				0,        			-0.02,      		s1,
				0,       			-0.098,      		s1,
				0.01796650700995, 	-0.1178963540945,   s1,
				0.315,       		-0.128,      		s1,
				0.3621573896043, 	-0.1228833012877,   s1,
				0.38,       		-0.103,      		s1,
				0.38,        		-0.02,      		s1,
				0.36, 				 0,      			-1


		addx 0.410/2
		roty -90

		prism_ NSP/3, 0.410,
					use(NSP)


		del 2
	endif

	del 4


	! --- Pipe ---

	addy -cisternDepth/2

	gosub "ELEV_PIPE"

	del 1

return



!================================================================================
"CORNER_CISTERN_1":
!================================================================================

! --- Existing Corner Cistern (WC High Seat Corner, WC LT Corner)

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 32
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 16
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 8


	addz gs_seat_height

	mulx cisternWidth / 0.357
	muly cisternWidth / 0.357
	mulz cisternHeight / 0.382


	material gs_tank_mat

	if gs_detlevel_3d_m = DETLEV_3D_DETAILED or gs_detlevel_3d_m = DETLEV_3D_SIMPLE then
		rotz 225

		prism_ 17, 0.35-0.018,
				0,            		0,      				79,
				0.24,            	0,      				79,
				0.24,         		0.02,    				979,
				0,           		90,   					4079,
				0.26,         		0.02,      				79,
				0.26, 				0.09455844122716,      	79,
				0.16, 				0.09455844122716,    	979,
				0,          		45,   					4079,
				0.2307106781187, 	0.1652691193458,      	79,
				0.1652691193458, 	0.2307106781187,      	79,
				0.09455844122716,   0.16,    				979,
				0,           		45,   					4079,
				0.09455844122716,   0.26,      				79,
				0.02,         		0.26,      				79,
				0.02,         		0.24,    				979,
				0,           		90,   					4079,
				0,         			0.24,      				79

		addz 0.35-0.018
		fprism_ gs_tank_mat,gs_tank_mat,gs_tank_mat,gs_tank_mat,
				17, 0.05,45,0.01,
					0,            		0,      				79,
					0.2443547125002,    0,      				79,
					0.2443441931389, 	0.01998948063866,    	979,
					0,           		90,   					4079,
					0.2643336737775,    0.02,      				79,
					0.2643336737775, 	0.09455844122716,      	79,
					0.16, 				0.09455844122716,    	979,
					0,           		45,   					4079,
					0.2337750482342, 	0.1683334894614,      	79,
					0.1683334894614, 	0.2337750482342,      	79,
					0.09455844122716,   0.16,    				979,
					0,           		45,   					4079,
					0.09455844122716, 	0.2643336737775,      	79,
					0.02433367377754, 	0.2643336737775,      	79,
					0.02433367377754,   0.24,    				979,
					0,           		90,   					4079,
					0,         			0.24,      				79


			add 0.15,0.15,0.05
			prism_	2, 0.005,
					0, 0, 979,
					0.02, 360, 4079
			del 1

		del 2

	endif

	if gs_detlevel_3d_m = DETLEV_3D_DRAFT then

		rotz 225
		prism_ 9, 0.35,
			0,            		0,      			79,
			0.24,            	0,      			79,
			0.26,         		0.02,      			79,
			0.26, 				0.09455844122716,   79,
			0.2307106781187, 	0.1652691193458,    79,
			0.1652691193458, 	0.2307106781187,    79,
			0.09455844122716,   0.26,      			79,
			0.02,         		0.26,      			79,
			0,         			0.24,      			79
		del 1

	endif

	del 4

return



!================================================================================
"CORNER_CISTERN_2":
!================================================================================

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 32
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 16
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 8


	addz gs_seat_height

	mulx cisternWidth / 0.350
	muly cisternWidth / 0.350
	mulz cisternHeight / 0.380


	material gs_tank_mat

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED then
		if GLOB_CONTEXT = 4 or GLOB_CONTEXT = 24 or GLOB_CONTEXT = 44 then
			s1 = 64+15
		else
			s1 = 64+11
		endif
	endif
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE then s1 = 64+15
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT  then s1 = 64+15


	! --- Top ---

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED or gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		put		 0.145, 			-0.2174264068712,      	s1,
				 0.145, 			-0.1874264068712,    	900,
				 0,          		 135,   				4000+s1,
				 0.1662132034356, 	-0.1662132034356,      	s1,
				 0,            		 0,      				s1,
				-0.1662132034356, 	-0.1662132034356,      	s1,
				-0.145, 			-0.1874264068712,    	900,
				 0,          		 135,   				4000+s1,
				-0.145, 			-0.2174264068712,      	s1,
				 0.145, 			-0.2174264068712,      	s1

		addz 0.35
		if gs_detlevel_3D_m = DETLEV_3D_DETAILED then
			hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
					NSP/3, 0.03, 0, 0.025, 1,
						get(NSP)
		endif
		if gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
			hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
					NSP/3, 0.03, 45, 0.005, 1,
						get(NSP)
		endif
		del 1
	endif


	! --- Body ---

	put		 0.145, 			-0.2174264068712,      	s1,
			 0.145, 			-0.1874264068712,    	900,
			 0,          		 135,   				4000+s1,
			 0.1662132034356, 	-0.1662132034356,      	s1,
			 0,            		 0,      				s1,
			-0.1662132034356, 	-0.1662132034356,      	s1,
			-0.145, 			-0.1874264068712,    	900,
			 0,          		 135,   				4000+s1,
			-0.145, 			-0.2174264068712,      	s1,
			 0.145, 			-0.2174264068712,      	s1

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then addz 0.35-0.002
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then addz 0.35-0.002
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then addz 0.38
	mulz -1
	if gs_detlevel_3D_m = DETLEV_3D_DETAILED then
		hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
				NSP/3, 0.35-0.002, 0, 0.02, 1,
					get(NSP)
	endif
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
				NSP/3, 0.35-0.002, 45, 0.02, 1,
					get(NSP)
	endif
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT then
		prism_	NSP/3, 0.38,
				get(NSP)
	endif
	del 2


	! --- Button ---

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED or gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		addy -0.13
		addz 0.38
		cylind 0.002, 0.025
		del 2
	endif

	del 4

return



!================================================================================
"CORNER_CISTERN_3":
!================================================================================

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then resol 32
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then resol 24
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then resol 16


	addz gs_seat_height

	mulx cisternWidth / 0.350
	muly cisternWidth / 0.350
	mulz cisternHeight / 0.380


	material gs_tank_mat

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED then
		if GLOB_CONTEXT = 4 or GLOB_CONTEXT = 24 or GLOB_CONTEXT = 44 then
			s1 = 64+15
		else
			s1 = 64+11
		endif
	endif
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE then s1 = 64+15
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT  then s1 = 64+15


	! --- Top ---

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED or gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		put		 0,      		 0,      		s1,
				-0.175+EPS,     -0.175+EPS,     s1,
				-0.175,     	-0.175,     	s1,
				 0, 			 0,    			900,
				 0,      		 90,   			4000+s1,
				 0.175,  		-0.175,     	s1,
				 0,      		 0,      		s1

		addz 0.35
		if gs_detlevel_3D_m = DETLEV_3D_DETAILED then
			hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
					NSP/3, 0.03, 0, 0.005, 1,
						get(NSP)
		endif
		if gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
			hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
					NSP/3, 0.03, 45, 0.005, 1,
						get(NSP)
		endif
		del 1
	endif


	! --- Body ---

	put		 0,      		 0,      		s1,
			-0.17+EPS,     	-0.17+EPS,      s1,
			-0.17,     		-0.17,     		s1,
			 0, 			 0,    			900,
			 0,      		 90,   			4000+s1,
			 0.17,  		-0.17,     		s1,
			 0,      		 0,      		s1

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED 	then addz 0.35
	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE 		then addz 0.35
	if gs_detlevel_3D_m = DETLEV_3D_DRAFT 		then addz 0.38
	mulz -1

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED then
		hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
			NSP/3, 0.35, 0, 0.02, 1,
					get(NSP)
	endif

	if gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		hprism_ gs_tank_mat, gs_tank_mat, gs_tank_mat, gs_tank_mat,
			NSP/3, 0.35, 45, 0.02, 1,
					get(NSP)
	endif

	if gs_detlevel_3D_m = DETLEV_3D_DRAFT then
		prism_ NSP/3, 0.38,
				get(NSP)
	endif

	del 2

	! --- Button ---

	if gs_detlevel_3D_m = DETLEV_3D_DETAILED or gs_detlevel_3D_m = DETLEV_3D_SIMPLE then
		addy -0.13
		addz 0.38
		cylind 0.002, 0.025
		del 2
	endif

	del 4

return


!================================================================================
"ELEV_PIPE":
!================================================================================

	material matCisternPipe

	addz gs_seat_height

	if gs_detlevel_3d_m = DETLEV_3D_DETAILED then
		h_pipe = elevatedCisternElevation-gs_seat_height-diameterPipe

		cylind h_pipe, diameterPipe/2

		addz h_pipe
		cone diameterPipe, diameterPipe*0.6, diameterPipe*0.75, 90, 90
		del 1
	else
		h_pipe = elevatedCisternElevation-gs_seat_height
		cylind h_pipe, diameterPipe/2
	endif

	del 1

return


]]>
</Script_3D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_2D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[

!================================================================================
! Attributes
!================================================================================

pen gs_cont_pen
fill gs_fill_type
resol 64

dim returnedVertArray[][3]

!================================================================================
! Normal WC Cisterns
!================================================================================

if iWCType = WC_NORMAL then

	if iFlushType = CISTERN then
		if iCisternType = CISTERN_TYPE_1 then gosub "CISTERN_1"
		if iCisternType = CISTERN_TYPE_2 then gosub "CISTERN_2"
		if iCisternType = CISTERN_TYPE_3 then gosub "CISTERN_3"
		if iCisternType = CISTERN_TYPE_4 then gosub "CISTERN_4"
		if iCisternType = CISTERN_TYPE_5 then gosub "CISTERN_5"
	endif

	if iFlushType = ELEVATED_CISTERN then
		if iElevatedCisternType = ELEV_CISTERN_TYPE_1 then gosub "ELEV_CISTERN_1"
		if iElevatedCisternType = ELEV_CISTERN_TYPE_2 then gosub "ELEV_CISTERN_2"
		if iElevatedCisternType = ELEV_CISTERN_TYPE_3 then gosub "ELEV_CISTERN_3"
	endif

endif


!================================================================================
! Corner WC Cisterns
!================================================================================

if iWCType = WC_CORNER then

	if iCornerCisternType = CORNER_CISTERN_TYPE_1 then gosub "CORNER_CISTERN_1"
	if iCornerCisternType = CORNER_CISTERN_TYPE_2 then gosub "CORNER_CISTERN_2"
	if iCornerCisternType = CORNER_CISTERN_TYPE_3 then gosub "CORNER_CISTERN_3"

endif



!================================================================================
end returnedVertArray
!================================================================================


!================================================================================
"DrawPoligonAndFillArray":
!================================================================================

	! --- Contour Polygon ---
	poly2_b NSP/3, 1+2+64, gs_fill_pen, gs_back_pen,
			use(NSP)

	! --- Polygon for Minimal Space ---

	returnedVertArray[NSP/3][3] = 0		!initialize last value

	for s = 1 to NSP/3
		returnedVertArray[s][1] = get(1)
		returnedVertArray[s][2] = get(1)
		returnedVertArray[s][3] = 0
		eee = get(1)		! drop status value
	next s

	! --- Emptying Stack ---

	for ss=1 to NSP
		emptyStack = get(1)
	next ss
return


!================================================================================
"CISTERN_1":
!================================================================================

	xscale = cisternWidth / 0.435
	yscale = cisternDepth / 0.18105

	put		-0.1867682631467 	*xscale,  	 0					*yscale,      1,
			-0.1938693581966 	*xscale, 	-0.01507880557756	*yscale,      1,
			-0.2000738475094 	*xscale, 	-0.03054813784891	*yscale,      1,
			-0.2053603698866 	*xscale, 	-0.04635473804342	*yscale,      1,
			-0.2097107245634 	*xscale, 	-0.06244418622349	*yscale,      1,
			-0.2131099338703 	*xscale, 	-0.07876108864528	*yscale,      1,
			-0.2155462948001 	*xscale, 	-0.09524926847123	*yscale,      1,
			-0.2170114192992 	*xscale, 	-0.1118519591796	*yscale,      1,
			-0.2175002631467 	*xscale, 	-0.1285120000032	*yscale,      1,
			-0.2162173727373 	*xscale, 	-0.1400495586042	*yscale,      1,
			-0.2124322594593 	*xscale, 	-0.1510238004343	*yscale,      1,
			-0.2063296959658 	*xscale, 	-0.1608990110691	*yscale,      1,
			-0.1982075826805 	*xscale, 	-0.1691931259738	*yscale,      1,
			-0.1884624056031 	*xscale, 	-0.175501262783		*yscale,      1,
			-0.1775698815996 	*xscale, 	-0.1795154858841	*yscale,      1,
			-0.1660617359879 	*xscale, 	-0.1810398384856	*yscale,      1,
			-0.1544997460369 	*xscale, 	-0.1799999083694	*yscale,      1,
			-0.1162154201973 	*xscale, 	-0.1732163040438	*yscale,      1,
			-0.07763938685731 	*xscale, 	-0.1683586765987	*yscale,      1,
			-0.03886847430811 	*xscale, 	-0.1654392189874	*yscale,      1,
			 0 					*xscale, 	-0.1644652592335	*yscale,      1,
			 0.03886847430812 	*xscale, 	-0.1654392189874	*yscale,      1,
			 0.07763938685731 	*xscale, 	-0.1683586765987	*yscale,      1,
			 0.1162154201973 	*xscale, 	-0.1732163040438	*yscale,      1,
			 0.1544997460369 	*xscale, 	-0.1799999083694	*yscale,      1,
			 0.1660617359879 	*xscale, 	-0.1810398384856	*yscale,      1,
			 0.1775698815996 	*xscale, 	-0.1795154858841	*yscale,      1,
			 0.1884624056031 	*xscale, 	-0.175501262783		*yscale,      1,
			 0.1982075826805 	*xscale, 	-0.1691931259738	*yscale,      1,
			 0.2063296959658 	*xscale, 	-0.160899011069		*yscale,      1,
			 0.2124322594593 	*xscale, 	-0.1510238004343	*yscale,      1,
			 0.2162173727373 	*xscale, 	-0.1400495586042	*yscale,      1,
			 0.2175002631467 	*xscale, 	-0.1285120000032	*yscale,      1,
			 0.2170114192992 	*xscale, 	-0.1118519591796	*yscale,      1,
			 0.2155462948001 	*xscale, 	-0.09524926847125	*yscale,      1,
			 0.2131099338703 	*xscale, 	-0.07876108864528	*yscale,      1,
			 0.2097107245634 	*xscale, 	-0.06244418622347	*yscale,      1,
			 0.2053603698866 	*xscale, 	-0.04635473804338	*yscale,      1,
			 0.2000738475094 	*xscale, 	-0.03054813784893	*yscale,      1,
			 0.1938693581966 	*xscale, 	-0.01507880557756	*yscale,      1,
			 0.1867682631467 	*xscale,  	 0					*yscale,      1,
			-0.1867682631467 	*xscale, 	 0					*yscale,      1

	gosub "DrawPoligonAndFillArray"

	mul2 xscale, yscale
	if det2d = 3 then
		circle2 0, -0.075, 0.015
	endif
	del 1

return


!================================================================================
"CISTERN_2":
!================================================================================

	xscale = cisternWidth / 0.271
	yscale = cisternDepth / 0.094

	put		-0.09581727582515	*xscale, 		-0.08695359004888	*yscale,      	1,
			-0.06400507279286	*xscale, 		-0.09085193461838	*yscale,      	1,
			-0.03204063931904	*xscale, 		-0.09319465629325	*yscale,      	1,
			 0					*xscale, 		-0.09397618311583	*yscale,      	1,
			 0.03204063931905	*xscale, 		-0.09319465629325	*yscale,      	1,
			 0.06400507279287	*xscale, 		-0.09085193461838	*yscale,      	1,
			 0.09581727582517	*xscale, 		-0.08695359004887	*yscale,      	1,
			 0.1274015858862	*xscale, 		-0.08150889445476	*yscale,      	1,
			 0.1309038051471	*xscale, 		-0.08011295831633	*yscale,      	1,
			 0.1336402625884	*xscale, 		-0.07751950923742	*yscale,      	1,
			 0.1352219932936	*xscale, 		-0.07409718467226	*yscale,      	1,
			 0.1354241672535	*xscale, 		-0.0703324399076	*yscale,      	1,
			 0.126391495034		*xscale, 		-0.004322179996089	*yscale,      	1,
			 0.1258381864181	*xscale, 		-0.002626213833701	*yscale,      	1,
			 0.1247247186317	*xscale, 		-0.001232427215529	*yscale,      	1,
			 0.1231928237657	*xscale, 		-0.0003182337086547	*yscale,      	1,
			 0.1214374950344	*xscale,         0					*yscale,      	1,
			-0.1214374950344	*xscale,         0					*yscale,      	1,
			-0.1231928237657	*xscale, 		-0.0003182337086551	*yscale,      	1,
			-0.1247247186317	*xscale, 		-0.00123242721553	*yscale,      	1,
			-0.1258381864181	*xscale, 		-0.002626213833698	*yscale,      	1,
			-0.126391495034		*xscale, 		-0.004322179996089	*yscale,      	1,
			-0.1354241672535	*xscale, 		-0.0703324399076	*yscale,      	1,
			-0.1352219932936	*xscale, 		-0.07409718467227	*yscale,      	1,
			-0.1336402625884	*xscale, 		-0.07751950923742	*yscale,      	1,
			-0.1309038051471	*xscale, 		-0.08011295831632	*yscale,      	1,
			-0.1274015858862	*xscale, 		-0.08150889445476	*yscale,      	1,
			-0.09581727582515	*xscale, 		-0.08695359004888	*yscale,      	1

	gosub "DrawPoligonAndFillArray"

	mul2 xscale, yscale
	if det2d = 3 or det2d = 2 then
		poly2_b 19, 1, gs_fill_pen, gs_back_pen,
				 0.1036445601036, 	-0.06753905702669,      1,
				 0.1026054519783, 	-0.05980717229884,   	900,
				 0, 				 91.68015275283,   		4001,
				 0.1103035459425, 	-0.05854181208929,      1,
				 0.1030561403286, 	-0.005578179996089,     1,
				 0.09885485476082, 	-0.005458258898595,    	900,
				 0, 				 90.86614863682,   		4001,
				 0.09891125312959, 	-0.001255640581896,     1,
				-0.09891125312959, 	-0.001255640581896,     1,
				-0.09885485476082, 	-0.005458258898595,    	900,
				 0, 				 90.86614863682,   		4001,
				-0.1030561403286, 	-0.005578179996089,     1,
				-0.1103035459425, 	-0.05854181208929,      1,
				-0.1026054519783, 	-0.05980717229885,    	900,
				 0, 				 91.68015275357,   		4001,
				-0.1036445601035, 	-0.06753905702671,      1,
				 0, 				 0.4688644398412,    	900,
				 0, 				 21.87199075298,   		4001,
				 0.1036445601036, 	-0.06753905702669,      1
	endif

	if det2d = 3 then
		poly2_b 19, 1, gs_fill_pen, gs_back_pen,
				-0.03364846992584, 	-0.004877862759397,     1,
				-0.03364816702244, 	-0.006592877985964,    	900,
				 0, 				 82.19939953356,   		4001,
				-0.035347353327, 	-0.006360406005967,     1,
				-0.03783282057794, 	-0.02452720486378,      1,
				-0.03504881762779, 	-0.02492517450453,    	900,
				 0, 				 78.23138069796,   		4001,
				-0.03600624660611, 	-0.02756948575946,      1,
				 0, 				 0.1587724691649,    	900,
				 0, 				 21.87259488777,   		4001,
				 0.03600624660611, 	-0.02756948575946,      1,
				 0.03504881762779, 	-0.02492517450454,    	900,
				 0, 				 78.23138069786,   		4001,
				 0.03783282057794, 	-0.02452720486378,      1,
				 0.035347353327, 	-0.006360406005967,     1,
				 0.03364816702244, 	-0.006592877985964,    	900,
				 0, 				 82.19939953356,   		4001,
				 0.03364846992584, 	-0.004877862759397,     1,
				-0.03364846992584, 	-0.004877862759397,     1
	endif
	del 1

return


!================================================================================
"CISTERN_3":
!================================================================================

	xscale = cisternWidth / 0.374
	yscale = cisternDepth / 0.1886

	put		-0.1757412030001	*xscale,         0      			*yscale,		1,
			-0.1820028296833	*xscale, 		-0.005607667197637	*yscale,      	1,
			-0.1858772907824	*xscale, 		-0.01306705398956	*yscale,      	1,
			-0.1868640639911	*xscale, 		-0.02141451939856	*yscale,      	1,
			-0.184835673		*xscale, 		-0.02957169600001	*yscale,     	1,
			-0.1188399960001	*xscale, 		-0.175619664		*yscale,      	1,
			-0.1150695055277	*xscale, 		-0.1813772026403	*yscale,      	1,
			-0.1097190291326	*xscale, 		-0.1857059728976	*yscale,      	1,
			-0.1033011521924	*xscale, 		-0.188191270702		*yscale,      	1,
			-0.09643071900005	*xscale,    	-0.188595			*yscale,      	1,
			 0.09643071900006	*xscale,    	-0.188595			*yscale,      	1,
			 0.1033011521924	*xscale, 		-0.188191270702		*yscale,      	1,
			 0.1097190291326	*xscale, 		-0.1857059728976	*yscale,      	1,
			 0.1150695055277	*xscale, 		-0.1813772026403	*yscale,      	1,
			 0.1188399960001	*xscale, 		-0.175619664		*yscale,      	1,
			 0.184835673		*xscale, 		-0.02957169600001	*yscale,      	1,
			 0.1868640639911	*xscale, 		-0.02141451939856	*yscale,      	1,
			 0.1858772907824	*xscale, 		-0.01306705398957	*yscale,      	1,
			 0.1820028296833	*xscale, 		-0.005607667197635	*yscale,      	1,
			 0.1757412030001	*xscale,         0					*yscale,      	1,
			-0.1757412030001	*xscale,         0					*yscale,      	1

	gosub "DrawPoligonAndFillArray"

	mul2 xscale, yscale
	if det2d = 3 then
		circle2 0,-0.05, 0.015
	endif
	del 1

return


!================================================================================
"CISTERN_4":
!================================================================================

	xscale = cisternWidth / 0.400
	yscale = cisternDepth / 0.140

	put		-0.1275355486417	*xscale, 		-0.1222457135401	*yscale,      	1,
			-0.1025				*xscale, 		-0.1286111111111	*yscale,      	1,
			-0.07715075274366	*xscale, 		-0.1335822926172	*yscale,      	1,
			-0.05156538759215	*xscale, 		-0.1371440438851	*yscale,      	1,
			-0.02582220789776	*xscale, 		-0.1392854642667	*yscale,      	1,
			 0					*xscale,        -0.14				*yscale,      	1,
			 0.02582220789777	*xscale, 		-0.1392854642667	*yscale,      	1,
			 0.05156538759215	*xscale, 		-0.1371440438851	*yscale,      	1,
			 0.07715075274364	*xscale, 		-0.1335822926172	*yscale,      	1,
			 0.1025				*xscale, 		-0.1286111111111	*yscale,      	1,
			 0.1275355486417	*xscale, 		-0.1222457135401	*yscale,      	1,
			 0.1521807780159	*xscale, 		-0.1145055810398	*yscale,      	1,
			 0.1763602620317	*xscale,		-0.1054144020866	*yscale,      	1,
			 0.2				*xscale,      	-0.095				*yscale,      	1,
			 0.2				*xscale,         0					*yscale,      	1,
			-0.2				*xscale,         0					*yscale,      	1,
			-0.2				*xscale,       	-0.095				*yscale,      	1,
			-0.1763602620317	*xscale, 		-0.1054144020866	*yscale,      	1,
			-0.1521807780159	*xscale, 		-0.1145055810398	*yscale,      	1,
			-0.1275355486417	*xscale, 		-0.1222457135401	*yscale,      	1

	gosub "DrawPoligonAndFillArray"

	mul2 xscale, yscale
	if det2d = 3 then
		add2 0, -0.05
		poly2_b 18, 1, gs_fill_pen, gs_back_pen,
				-0.02871010254294, 	-0.006238436810879,     1,
				-0.02247014749181, 	-0.0199190095898,    	900,
				 0, 				 106.082713556,   		4001,
				-0.03388667855007, 	-0.02970460763974,      1,
				-0.01141439422985, 	-0.05592227268,      	1,
				 0, 				-0.04613850619727,    	900,
				 0, 				 98.79741070997,   		4001,
				 0.01141439422984, 	-0.05592227267999,      1,
				 0.03388667855007, 	-0.02970460763974,      1,
				 0.0224701474918, 	-0.0199190095898,    	900,
				 0, 				 106.0827208292,   		4001,
				 0.02871010080631, 	-0.006238436018776,     1,
				 0, 				-0.0691830428068,    	900,
				 0, 				 24.51853187702,   		4001,
				 0,            		 0,      				1,
				 0, 				-0.0691830428068,    	900,
				 0, 				 24.5185334578,   		4001,
				-0.02871010254294, 	-0.006238436810879,     -1
		del 1
	endif
	del 1

return


!================================================================================
"CISTERN_5":
!================================================================================

	xscale = cisternWidth / 0.400
	yscale = cisternDepth / 0.168

	put		 0.17				*xscale,       	-0.168				*yscale,      	1,
			 0.181480502971		*xscale,	 	-0.1657163859753	*yscale,      	1,
			 0.1912132034356	*xscale, 		-0.1592132034356	*yscale,      	1,
			 0.1977163859753	*xscale, 		-0.149480502971		*yscale,      	1,
			 0.2				*xscale,      	-0.138				*yscale,      	1,
			 0.2				*xscale,        -0.03				*yscale,      	1,
			 0.1977163859753	*xscale, 		-0.01851949702905	*yscale,     	1,
			 0.1912132034356	*xscale, 		-0.008786796564405	*yscale,      	1,
			 0.181480502971		*xscale, 		-0.002283614024663	*yscale,      	1,
			 0.17				*xscale,         0					*yscale,      	1,
			-0.17				*xscale,         0					*yscale,      	1,
			-0.181480502971		*xscale, 		-0.002283614024663	*yscale,      	1,
			-0.1912132034356	*xscale, 		-0.008786796564406	*yscale,      	1,
			-0.1977163859753	*xscale, 		-0.01851949702905	*yscale,      	1,
			-0.2				*xscale,        -0.03				*yscale,      	1,
			-0.2				*xscale,       	-0.138				*yscale,      	1,
			-0.1977163859753	*xscale, 		-0.149480502971		*yscale,      	1,
			-0.1912132034356	*xscale, 		-0.1592132034356	*yscale,      	1,
			-0.1814805029709	*xscale, 		-0.1657163859753	*yscale,      	1,
			-0.17				*xscale,       	-0.168				*yscale,      	1,
			 0.17				*xscale,       	-0.168				*yscale,      	1

	gosub "DrawPoligonAndFillArray"

	mul2 xscale, yscale
	if det2d = 3 then
		add2 0.1, -0.0325
		poly2_b 5, 1, gs_fill_pen, gs_back_pen,
				0, 		-0.07,      1,
				0.09, 	-0.07,      1,
				0.09,    0,      	1,
				0,       0,      	1,
				0, 		-0.07,      -1

		line2 0, -0.035, 0.09, -0.035
		del 1
	endif
	del 1

return


!================================================================================
"ELEV_CISTERN_1":
!================================================================================

	xscale = cisternWidth / 0.435
	yscale = cisternDepth / 0.18105

	put		-0.1867682631467 	*xscale,  	 0					*yscale,      1,
			-0.1938693581966 	*xscale, 	-0.01507880557756	*yscale,      1,
			-0.2000738475094 	*xscale, 	-0.03054813784891	*yscale,      1,
			-0.2053603698866 	*xscale, 	-0.04635473804342	*yscale,      1,
			-0.2097107245634 	*xscale, 	-0.06244418622349	*yscale,      1,
			-0.2131099338703 	*xscale, 	-0.07876108864528	*yscale,      1,
			-0.2155462948001 	*xscale, 	-0.09524926847123	*yscale,      1,
			-0.2170114192992 	*xscale, 	-0.1118519591796	*yscale,      1,
			-0.2175002631467 	*xscale, 	-0.1285120000032	*yscale,      1,
			-0.2162173727373 	*xscale, 	-0.1400495586042	*yscale,      1,
			-0.2124322594593 	*xscale, 	-0.1510238004343	*yscale,      1,
			-0.2063296959658 	*xscale, 	-0.1608990110691	*yscale,      1,
			-0.1982075826805 	*xscale, 	-0.1691931259738	*yscale,      1,
			-0.1884624056031 	*xscale, 	-0.175501262783		*yscale,      1,
			-0.1775698815996 	*xscale, 	-0.1795154858841	*yscale,      1,
			-0.1660617359879 	*xscale, 	-0.1810398384856	*yscale,      1,
			-0.1544997460369 	*xscale, 	-0.1799999083694	*yscale,      1,
			-0.1162154201973 	*xscale, 	-0.1732163040438	*yscale,      1,
			-0.07763938685731 	*xscale, 	-0.1683586765987	*yscale,      1,
			-0.03886847430811 	*xscale, 	-0.1654392189874	*yscale,      1,
			 0 					*xscale, 	-0.1644652592335	*yscale,      1,
			 0.03886847430812 	*xscale, 	-0.1654392189874	*yscale,      1,
			 0.07763938685731 	*xscale, 	-0.1683586765987	*yscale,      1,
			 0.1162154201973 	*xscale, 	-0.1732163040438	*yscale,      1,
			 0.1544997460369 	*xscale, 	-0.1799999083694	*yscale,      1,
			 0.1660617359879 	*xscale, 	-0.1810398384856	*yscale,      1,
			 0.1775698815996 	*xscale, 	-0.1795154858841	*yscale,      1,
			 0.1884624056031 	*xscale, 	-0.175501262783		*yscale,      1,
			 0.1982075826805 	*xscale, 	-0.1691931259738	*yscale,      1,
			 0.2063296959658 	*xscale, 	-0.160899011069		*yscale,      1,
			 0.2124322594593 	*xscale, 	-0.1510238004343	*yscale,      1,
			 0.2162173727373 	*xscale, 	-0.1400495586042	*yscale,      1,
			 0.2175002631467 	*xscale, 	-0.1285120000032	*yscale,      1,
			 0.2170114192992 	*xscale, 	-0.1118519591796	*yscale,      1,
			 0.2155462948001 	*xscale, 	-0.09524926847125	*yscale,      1,
			 0.2131099338703 	*xscale, 	-0.07876108864528	*yscale,      1,
			 0.2097107245634 	*xscale, 	-0.06244418622347	*yscale,      1,
			 0.2053603698866 	*xscale, 	-0.04635473804338	*yscale,      1,
			 0.2000738475094 	*xscale, 	-0.03054813784893	*yscale,      1,
			 0.1938693581966 	*xscale, 	-0.01507880557756	*yscale,      1,
			 0.1867682631467 	*xscale,  	 0					*yscale,      1,
			-0.1867682631467 	*xscale, 	 0					*yscale,      1

	gosub "DrawPoligonAndFillArray"

return


!================================================================================
"ELEV_CISTERN_2":
!================================================================================

	xscale = cisternWidth / 0.340
	yscale = cisternDepth / 0.135

	put		 0.04332180684413	*xscale, 	-0.1331070177887	*yscale,     1,
			 0.08631338250814	*xscale, 	-0.1274425008796	*yscale,     1,
			 0.1286470130808	*xscale, 	-0.1180496284528	*yscale,     1,
			 0.17				*xscale,    -0.105				*yscale,     1,
			 0.17				*xscale,     0					*yscale,     1,
			-0.17				*xscale,     0					*yscale,     1,
			-0.17				*xscale,    -0.105				*yscale,     1,
			-0.1286470130809	*xscale, 	-0.1180496284528	*yscale,     1,
			-0.08631338250814	*xscale, 	-0.1274425008796	*yscale,     1,
			-0.04332180684411	*xscale, 	-0.1331070177887	*yscale,     1,
			 0					*xscale,    -0.135				*yscale,     1,
			 0.04332180684413	*xscale, 	-0.1331070177887	*yscale,     1

	gosub "DrawPoligonAndFillArray"

return


!================================================================================
"ELEV_CISTERN_3":
!================================================================================

	xscale = cisternWidth / 0.410
	yscale = cisternDepth / 0.128

	put		 0.185				*xscale,    -0.128				*yscale,	1,
			 0.1926536686473	*xscale, 	-0.1264775906502	*yscale,	1,
			 0.1991421356237	*xscale, 	-0.1221421356237	*yscale,  	1,
			 0.2034775906502	*xscale, 	-0.1156536686473	*yscale,  	1,
			 0.205				*xscale,    -0.108				*yscale,    1,
			 0.205				*xscale, 	-0.02				*yscale,    1,
			 0.2034775906502	*xscale, 	-0.0123463313527	*yscale,  	1,
			 0.1991421356237	*xscale, 	-0.005857864376272	*yscale, 	1,
			 0.1926536686473	*xscale, 	-0.001522409349775	*yscale,  	1,
			 0.185				*xscale,     0					*yscale,    1,
			-0.185				*xscale,     0					*yscale,    1,
			-0.1926536686473	*xscale, 	-0.001522409349777	*yscale, 	1,
			-0.1991421356237	*xscale, 	-0.005857864376271	*yscale,	1,
			-0.2034775906502	*xscale, 	-0.0123463313527	*yscale,    1,
			-0.205				*xscale,    -0.02				*yscale,    1,
			-0.205				*xscale,    -0.108				*yscale,    1,
			-0.2034775906502	*xscale, 	-0.1156536686473	*yscale,    1,
			-0.1991421356237	*xscale, 	-0.1221421356237	*yscale,    1,
			-0.1926536686473	*xscale, 	-0.1264775906502	*yscale,    1,
			-0.185				*xscale,    -0.128				*yscale,    1,
			 0.185				*xscale,    -0.128				*yscale,    1

	gosub "DrawPoligonAndFillArray"

return


!================================================================================
"CORNER_CISTERN_1":
!================================================================================

	xscale = cisternWidth / 0.357
	yscale = cisternWidth / 0.357

	put		 0					*xscale, 		 0					*yscale,      	1,
			-0.1727848742238	*xscale, 		-0.1727848742238	*yscale,      	1,
			-0.177051661491		*xscale, 		-0.1792882328566	*yscale,      	1,
			-0.1785561532299	*xscale, 		-0.186922612556		*yscale,      	1,
			-0.177051661491		*xscale, 		-0.1945569922555	*yscale,      	1,
			-0.1727699976004	*xscale, 		-0.2010542688478	*yscale,      	1,
			-0.1200492182139	*xscale, 		-0.2537750482342	*yscale,      	1,
			-0.1040998246005	*xscale, 		-0.2665076239039	*yscale,      	1,
			-0.08605809594844	*xscale, 		-0.2760468936382	*yscale,      	1,
			-0.06655538495751	*xscale, 		-0.2820590399957	*yscale,      	1,
			-0.04627416997966	*xscale, 		-0.2843336737775	*yscale,      	1,
			 0.04627416997994	*xscale, 		-0.2843336737775	*yscale,      	1,
			 0.06655538495751	*xscale, 		-0.2820590399957	*yscale,      	1,
			 0.08605809594844	*xscale, 		-0.2760468936382	*yscale,      	1,
			 0.1040998246005	*xscale, 		-0.2665076239039	*yscale,      	1,
			 0.1200492182137	*xscale, 		-0.2537750482343	*yscale,      	1,
			 0.1727699976002	*xscale, 		-0.201054268848		*yscale,      	1,
			 0.177051661491		*xscale, 		-0.1945569922555	*yscale,      	1,
			 0.1785561532299	*xscale, 		-0.186922612556		*yscale,      	1,
			 0.177051661491		*xscale, 		-0.1792882328566	*yscale,      	1,
			 0.1727848742238	*xscale, 		-0.1727848742238	*yscale,      	1,
			 0					*xscale, 		 0					*yscale,      	1

	gosub "DrawPoligonAndFillArray"

	mul2 xscale, yscale
	if det2d = 3 then
		add2 0,-0.2
		circle2 0,0,0.02
		del 1
	endif
	del 1

return


!================================================================================
"CORNER_CISTERN_2":
!================================================================================

	xscale = cisternWidth / 0.350
	yscale = cisternWidth / 0.350

	put		 0.145				*xscale, 		-0.2174264068712	*yscale,      	1,
			 0.1537085403176	*xscale, 		-0.2161346169432	*yscale,      	1,
			 0.1616671069906	*xscale, 		-0.2123704952403	*yscale,      	1,
			 0.1681903136009	*xscale, 		-0.2064582053961	*yscale,      	1,
			 0.1727163859753	*xscale,		-0.1989069098421	*yscale,      	1,
			 0.1748555418002	*xscale, 		-0.1903669210811	*yscale,      	1,
			 0.1744235584121	*xscale, 		-0.1815736972107	*yscale,      	1,
			 0.1714576379304	*xscale, 		-0.1732845047664	*yscale,      	1,
			 0.1662132034356	*xscale, 		-0.1662132034356	*yscale,      	1,
			 0					*xscale,         0					*yscale,      	1,
			-0.1662132034356	*xscale, 		-0.1662132034356	*yscale,      	1,
			-0.1714576379304	*xscale, 		-0.1732845047664	*yscale,      	1,
			-0.1744235584121	*xscale, 		-0.1815736972107	*yscale,      	1,
			-0.1748555418002	*xscale, 		-0.1903669210811	*yscale,      	1,
			-0.1727163859753	*xscale, 		-0.1989069098421	*yscale,      	1,
			-0.1681903136009	*xscale, 		-0.2064582053961	*yscale,      	1,
			-0.1616671069906	*xscale, 		-0.2123704952403	*yscale,      	1,
			-0.1537085403176	*xscale, 		-0.2161346169432	*yscale,      	1,
			-0.145				*xscale, 		-0.2174264068712	*yscale,      	1,
			 0.145				*xscale, 		-0.2174264068712	*yscale,      	1

	gosub "DrawPoligonAndFillArray"

	mul2 xscale, yscale
	if det2d = 3 then
		add2 0,-0.13
		circle2 0, 0, 0.025
		del 1
	endif
	del 1

return


!================================================================================
"CORNER_CISTERN_3":
!================================================================================

	xscale = cisternWidth / 0.350
	yscale = cisternWidth / 0.350

	put			-0.02425800460984	*xscale, 		-0.2462956540671	*yscale,	1,
				 0					*xscale, 		-0.2474873734153	*yscale,	1,
				 0.02425800460984	*xscale, 		-0.2462956540671	*yscale,	1,
				 0.04828239137452	*xscale, 		-0.2427319729314	*yscale,	1,
				 0.07184179231641	*xscale, 		-0.2368306502055	*yscale,	1,
				 0.09470931752559	*xscale, 		-0.2286485188534	*yscale,	1,
				 0.1166647402336	*xscale, 		-0.2182643772727	*yscale,	1,
				 0.1374966177177	*xscale, 		-0.2057782304234	*yscale,	1,
				 0.15700432761		*xscale, 		-0.1913103267253	*yscale,	1,
				 0.175				*xscale,       	-0.175				*yscale,	1,
				 0					*xscale,         0					*yscale,	1,
				-0.175				*xscale,       	-0.175				*yscale,	1,
				-0.15700432761		*xscale, 		-0.1913103267253	*yscale,	1,
				-0.1374966177177	*xscale, 		-0.2057782304234	*yscale,	1,
				-0.1166647402336	*xscale, 		-0.2182643772727	*yscale,	1,
				-0.09470931752559	*xscale, 		-0.2286485188534	*yscale,	1,
				-0.07184179231641	*xscale, 		-0.2368306502055	*yscale,	1,
				-0.04828239137452	*xscale, 		-0.2427319729314	*yscale,	1,
				-0.02425800460984	*xscale, 		-0.2462956540671	*yscale,	1

	gosub "DrawPoligonAndFillArray"

	mul2 xscale, yscale
	if det2d = 3 then
		add2 0,-0.13
		circle2 0, 0, 0.025
		del 1
	endif
	del 1

return
]]>
</Script_2D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_1D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
EPS = 0.0001

! --- WC Type ---
WC_NORMAL    = 1
WC_CORNER    = 2

! --- Flush Method ---
CISTERN 		 = 1
ELEVATED_CISTERN = 2

! --- Cistern ---
CISTERN_TYPE_1 = 1
CISTERN_TYPE_2 = 2
CISTERN_TYPE_3 = 3
CISTERN_TYPE_4 = 4
CISTERN_TYPE_5 = 5

! --- Elevated Cistern ---
ELEV_CISTERN_TYPE_1 = 1
ELEV_CISTERN_TYPE_2 = 2
ELEV_CISTERN_TYPE_3 = 3

! --- Corner Cistern ---
CORNER_CISTERN_TYPE_1 = 1
CORNER_CISTERN_TYPE_2 = 2
CORNER_CISTERN_TYPE_3 = 3

! --- 3D ---
DETLEV_3D_OFF      = 0
DETLEV_3D_SIMPLE   = 1
DETLEV_3D_DETAILED = 2
DETLEV_3D_DRAFT    = 3

cisternWidth  = A
cisternDepth  = B
cisternHeight = ZZYZX

]]>
</Script_1D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_PR SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_PR>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_UI SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_UI>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_VL SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_VL>

<Comment SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Comment>

<ParamSection SectVersion="22" SectionFlags="0" SubIdent="0">
	<ParamSectHeader>
		<AutoHotspots>false</AutoHotspots>
		<StatBits>
			<STBit_FixSize/>
		</StatBits>
		<WDLeftFrame>0</WDLeftFrame>
		<WDRightFrame>0</WDRightFrame>
		<WDTopFrame>0</WDTopFrame>
		<WDBotFrame>0</WDBotFrame>
		<LayFlags>65535</LayFlags>
		<WDMirrorThickness>0</WDMirrorThickness>
		<WDWallInset>0</WDWallInset>
	</ParamSectHeader>
	<Parameters>
		<Length Name="A">
			<Description><![CDATA["Dimension 1"]]></Description>
			<Fix/>
			<Value>0.41</Value>
		</Length>
		<Length Name="B">
			<Description><![CDATA["Dimension 2"]]></Description>
			<Fix/>
			<Value>0.128</Value>
		</Length>
		<Length Name="ZZYZX">
			<Description><![CDATA["Height"]]></Description>
			<Fix/>
			<Value>0.38</Value>
		</Length>
		<Boolean Name="AC_show2DHotspotsIn3D">
			<Description><![CDATA["Show 2D Hotspots in 3D"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Boolean>
		<Length Name="ac_bottomlevel">
			<Description><![CDATA["Bottom Level"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Length>
		<Length Name="ac_toplevel">
			<Description><![CDATA["Top Level"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Integer Name="iWCType">
			<Description><![CDATA["WC Type"]]></Description>
			<Flags>
				<ParFlg_BoldName/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<Length Name="gs_seat_height">
			<Description><![CDATA["Bowl Height"]]></Description>
			<Value>0.45</Value>
		</Length>
		<Length Name="diameterPipe">
			<Description><![CDATA["Pipe Diameter"]]></Description>
			<Value>0.05</Value>
		</Length>

		<!-- titleFlush: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="titleFlush">
			<Description><![CDATA["Flush Method"]]></Description>
		</Title>
		<Integer Name="iFlushType">
			<Description><![CDATA["Flush Type"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<Integer Name="iCisternType">
			<Description><![CDATA["Cistern Type"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<Integer Name="iElevatedCisternType">
			<Description><![CDATA["Elevated Cistern Type"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<Integer Name="iCornerCisternType">
			<Description><![CDATA["Corner Cistern Type"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<Length Name="elevatedCisternElevation">
			<Description><![CDATA["Cistern Elevation"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Length>
		<Length Name="cisternWidth2">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0.205</Value>
		</Length>
		<Length Name="cisternDepth2">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>-0.128</Value>
		</Length>

		<!-- gs_3D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_3D_representation">
			<Description><![CDATA["3D Representation"]]></Description>
		</Title>
		<Integer Name="gs_detlevel_3D_m">
			<Description><![CDATA["3D Detail Level"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<Integer Name="gs_resol">
			<Description><![CDATA["Resolution"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>32</Value>
		</Integer>
		<Boolean Name="gs_shadow">
			<Description><![CDATA["Shadow"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Boolean>

		<!-- titleMaterials: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="titleMaterials">
			<Description><![CDATA["Surfaces"]]></Description>
		</Title>
		<Material Name="gs_tank_mat">
			<Description><![CDATA["Cistern"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>18</Value>
		</Material>
		<Material Name="matCisternPipe">
			<Description><![CDATA["Cistern Pipe"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>99</Value>
		</Material>

		<!-- gs_2D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_2D_representation">
			<Description><![CDATA["2D Representation"]]></Description>
		</Title>
		<Integer Name="det2d">
			<Description><![CDATA["2D Detail Level"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<PenColor Name="gs_cont_pen">
			<Description><![CDATA["Contour Pen"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</PenColor>
		<FillPattern Name="gs_fill_type">
			<Description><![CDATA["Fill Type"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>64</Value>
		</FillPattern>
		<PenColor Name="gs_fill_pen">
			<Description><![CDATA["Fill Pen"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>
		<PenColor Name="gs_back_pen">
			<Description><![CDATA["Fill Background Pen"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>
	</Parameters>
</ParamSection>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_FWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_FWM>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_BWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_BWM>

<Copyright SectVersion="1" SectionFlags="0" SubIdent="0">
	<Author>GRAPHISOFT</Author>
	<License>
		<Type>CC BY-ND</Type>
		<Version>3.0</Version>
	</License>
</Copyright>

</Symbol>
