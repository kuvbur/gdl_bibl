<?xml version="1.0" encoding="UTF-8"?>
<Symbol IsArchivable="false" IsPlaceable="true" MainGUID="044AF111-6008-49B7-B180-81DD539CEA92" MigrationValue="Normal" Owner="1196638531" Signature="1196644685" Version="38">
<Ancestry SectVersion="1" SectionFlags="0" SubIdent="0" Template="false">
	<MainGUID>F938E33A-329D-4A36-BE3E-85E126820996</MainGUID>
	<MainGUID>103E8D2C-8230-42E1-9597-46F84CCE28C0</MainGUID>
	<MainGUID>56A4A77E-2509-450D-94D0-A816189B7DF4</MainGUID>
	<MainGUID>06BA412F-7262-4221-A9B3-1A3E410E9170</MainGUID>
	<MainGUID>4E5B3C37-FC62-45CC-A81D-6C48E85111AB</MainGUID>
	<MainGUID>4DAFFCF4-6762-4F09-B32D-718501DD0BAC</MainGUID>
	<MainGUID>5AF01AF3-98BE-4A89-81B4-FB49412DD833</MainGUID>
	<MainGUID>ACABDA3B-4E60-4C95-AC79-2CFE7E14A3B8</MainGUID>
</Ancestry>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_3D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
pen pen3D
material rm_mat


! ==============================================================================
! 2D Display Options
! ==============================================================================

!gs_2D_projection_type:
!	0 - Normal 3D
!	1 - View Edges
!	2 - View Polygons
!	3 - Overhead Edges
!	4 - Cut Lines
!	5 - Cut Polygons
!	6 - Bottom Range Cut Lines
!	7 - Top Range Cut Lines

nProjectionCut = 0
if gs_2D_projection then
	if AC_symb_show_projection_to = PROJECTION_FLOOR_PLAN_RANGE | (AC_symb_show_projection_to = PROJECTION_DISPLAY_LIMIT & gs_bottom_range_height < gs_cutplane_height) then
		addz gs_bottom_range_height
		cutplane{2} 180, 2
		nProjectionCut = nProjectionCut + 1
		del 1
	endif
	if gs_2D_projection_type <> 6 then
		addz gs_cutplane_height
		cutplane{2} 180 * (gs_2D_projection_type = 3), 1
		nProjectionCut = nProjectionCut + 1
		del 1
	endif
	if AC_symb_show_projection_to <> 3 then
		addz gs_top_range_height
		cutplane{2} 0, 2
		nProjectionCut = nProjectionCut + 1
		del 1
	endif
endif


! ==============================================================================
! 3D Hotspots
! ==============================================================================

! --- Profile Height ------------------------------------------------------------
	unID = 2000
	add (_startX1-_rafterX1+rm_ProjectedLength-_startX2+_rafterX2)/2,0, rm_RelativeHeight
		hotspot 0, 0,  0,					unID, rm_ProfileHeight, 1+128	: unID=unID+1
		hotspot 0, 0,  1,					unID, rm_ProfileHeight, 3		: unID=unID+1
		hotspot 0, 0, -rm_ProfileHeight,	unID, rm_ProfileHeight, 2		: unID=unID+1
	del 1

! --- Horizontal Length ------------------------------------------------------------
	unID = 3000
	hotspot  0,						0,	0,	unID,	rm_ProjectedLength,	1+256	: unID=unID+1
	hotspot -1,						0,	0,	unID,	rm_ProjectedLength,	3		: unID=unID+1
	hotspot  rm_ProjectedLength,	0,	0,	unID,	rm_ProjectedLength,	2		: unID=unID+1

! --- Distance from Pivot Plane ------------------------------------------------------------
	unID = 4500
	addx (_startX1-_rafterX1+rm_ProjectedLength-_startX2+_rafterX2)/2
	hotspot 0, 0,  0,					unID,	rm_RelativeHeight,	1+128	: unID=unID+1
	hotspot 0, 0, -1,					unID,	rm_RelativeHeight,	3		: unID=unID+1
	hotspot 0, 0,  rm_RelativeHeight,	unID,	rm_RelativeHeight,	2		: unID=unID+1
	del 1

! --- 1. Roof Pitch ------------------------------------------------------------
	unID = 5000
	if abs(rm_RelativeHeight) < EPS then
		add _startX1-_rafterX1,0, rm_RelativeHeight-rm_ProfileHeight
			hotspot  0,			0, 0,					unID, rm_PitchAngle_1, 6		: unID=unID+1
			hotspot  1,			0, 0,					unID, rm_PitchAngle_1, 4+128	: unID=unID+1
			hotspot _swoopX1,	0, rm_ProfileHeight,	unID, rm_PitchAngle_1, 5		: unID=unID+1
		del 1
	else
		_tempL1 = rm_RelativeHeight / sin(rm_PitchAngle_1)
		add -_rafterX1,0, 0
			hotspot  0,								0,  0,								unID, rm_PitchAngle_1, 6		: unID=unID+1
			hotspot _tempL1,						0,  0,								unID, rm_PitchAngle_1, 4+128	: unID=unID+1
			hotspot _tempL1*cos(rm_PitchAngle_1),	0, _tempL1*sin(rm_PitchAngle_1),	unID, rm_PitchAngle_1, 5		: unID=unID+1
		del 1
	endif

! --- 2. Roof Pitch ------------------------------------------------------------
	unID = 5500
	if abs(rm_RelativeHeight) < EPS then
		add rm_ProjectedLength-_startX2+_rafterX2,0, rm_RelativeHeight-rm_ProfileHeight
			hotspot  0,			0, 0,					unID, rm_PitchAngle_2, 6		: unID=unID+1
			hotspot -1,			0, 0,					unID, rm_PitchAngle_2, 4+128	: unID=unID+1
			hotspot -_swoopX2,	0, rm_ProfileHeight,	unID, rm_PitchAngle_2, 5		: unID=unID+1
		del 1
	else
		_tempL2 = rm_RelativeHeight / sin(rm_PitchAngle_2)
		add rm_ProjectedLength+_rafterX2,0,0
			hotspot  0,								0,  0,								unID, rm_PitchAngle_2, 6		: unID=unID+1
			hotspot -_tempL2,						0,  0,								unID, rm_PitchAngle_2, 4+128	: unID=unID+1
			hotspot -_tempL2*cos(rm_PitchAngle_2),	0, _tempL2*sin(rm_PitchAngle_2),	unID, rm_PitchAngle_2, 5		: unID=unID+1
		del 1
	endif

! --- Height of First Rafter ------------------------------------------------------------
	unID = 9000
	add _startX1,0, rm_RelativeHeight-rm_ProfileHeight
		hotspot  0,						0, 0, unID,rafterHeight_1_Half, 1+128,	rm_RafterHeight_1 : unID=unID+1
		hotspot  1,						0, 0, unID,rafterHeight_1_Half, 3,		rm_RafterHeight_1 : unID=unID+1
		hotspot -rafterHeight_1_Half,	0, 0, unID,rafterHeight_1_Half, 2,		rm_RafterHeight_1 : unID=unID+1
	del 1

! --- Height of Second Rafter ------------------------------------------------------------
	unID = 9500
	add rm_ProjectedLength-_startX2,0, rm_RelativeHeight-rm_ProfileHeight
		hotspot  0,						0, 0, unID,rafterHeight_2_Half, 1+128,	rm_RafterHeight_2 : unID=unID+1
		hotspot -1,						0, 0, unID,rafterHeight_2_Half, 3,		rm_RafterHeight_2 : unID=unID+1
		hotspot  rafterHeight_2_Half,	0, 0, unID,rafterHeight_2_Half, 2,		rm_RafterHeight_2 : unID=unID+1
	del 1

! --- Profile Width ------------------------------------------------------------
	unID=1
	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_LEFT then
		hotspot	_startX1-_rafterX1+_swoopX1, +rm_RafterWidth/2+rm_ProfileWidth,rm_RelativeHeight,unID	: unID=unID+1
		hotspot	rm_ProjectedLength-_startX2+_rafterX2-_swoopX2, +rm_RafterWidth/2+rm_ProfileWidth,rm_RelativeHeight,unID	: unID=unID+1
	endif
	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_RIGHT then
		hotspot	rm_ProjectedLength-_startX2+_rafterX2-_swoopX2, -rm_RafterWidth/2-rm_ProfileWidth,rm_RelativeHeight,unID	: unID=unID+1
		hotspot	_startX1-_rafterX1+_swoopX1, -rm_RafterWidth/2-rm_ProfileWidth,rm_RelativeHeight,unID	: unID=unID+1
	endif

	unID = 1000
	add _startX1-_rafterX1, 0, rm_RelativeHeight-rm_ProfileHeight

	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_LEFT then
		hotspot 0, rm_RafterWidth/2,					0, unID, rm_ProfileWidth, 1+128		: unID=unID+1
		hotspot 0, rm_RafterWidth/2-1,					0, unID, rm_ProfileWidth, 3			: unID=unID+1
		hotspot 0, rm_RafterWidth/2+rm_ProfileWidth,	0, unID, rm_ProfileWidth, 2			: unID=unID+1
	endif

	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_RIGHT then
		hotspot 0, -rm_RafterWidth/2,					0, unID, rm_ProfileWidth, 1+128		: unID=unID+1
		hotspot 0, -rm_RafterWidth/2+1,					0, unID, rm_ProfileWidth, 3			: unID=unID+1
		hotspot 0, -rm_RafterWidth/2-rm_ProfileWidth,	0, unID, rm_ProfileWidth, 2			: unID=unID+1
	endif

	del 1

	unID = 1100
	add rm_ProjectedLength-_startX2+_rafterX2, 0, rm_RelativeHeight-rm_ProfileHeight

	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_LEFT then
		hotspot 0, rm_RafterWidth/2,					0, unID, rm_ProfileWidth, 1+128		: unID=unID+1
		hotspot 0, rm_RafterWidth/2-1,					0, unID, rm_ProfileWidth, 3			: unID=unID+1
		hotspot 0, rm_RafterWidth/2+rm_ProfileWidth,	0, unID, rm_ProfileWidth, 2			: unID=unID+1
	endif

	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_RIGHT then
		hotspot 0, -rm_RafterWidth/2,					0, unID, rm_ProfileWidth, 1+128		: unID=unID+1
		hotspot 0, -rm_RafterWidth/2+1,					0, unID, rm_ProfileWidth, 3			: unID=unID+1
		hotspot 0, -rm_RafterWidth/2-rm_ProfileWidth,	0, unID, rm_ProfileWidth, 2			: unID=unID+1
	endif

	del 1


! ==============================================================================
! Roofmaker Element
! ==============================================================================
rotx 90

if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_LEFT then
	addz -rm_ProfileWidth-rm_RafterWidth/2
	gosub "drawBeam"
	del 1
endif

if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_RIGHT then
	addz rm_RafterWidth/2
	gosub "drawBeam"
	del 1
endif

del 1


! ==============================================================================
for i = 1 to nProjectionCut
	cutend
next i

END

! ------------------------------------------------------------------------------
"drawBeam":
! ------------------------------------------------------------------------------
	base
		prism 5, rm_ProfileWidth,
				_startX1-_rafterX1, rm_RelativeHeight-rm_ProfileHeight,
				rm_ProjectedLength-_startX2+_rafterX2, rm_RelativeHeight-rm_ProfileHeight,
				rm_ProjectedLength-_startX2+_rafterX2-_swoopX2, rm_RelativeHeight,
				_startX1-_rafterX1+_swoopX1, rm_RelativeHeight,
				_startX1-_rafterX1, rm_RelativeHeight-rm_ProfileHeight

		vert 0, 0, 0

		vert 1, 0, 0
		vert 0, 1, 0
		vert 0, 0, 1

		coor 2, -1, -2, -3, -4
	body 1
return
]]>
</Script_3D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_2D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
pen gs_cont_pen
line_type gs_cont_line
fill gs_fill_type

! ==============================================================================
! Roofmaker Macro
! ==============================================================================

call "RoofMaker_macro"	parameters all	bEnableRafter			= bEnableRafter,
										bEnableSymbol			= bEnableSymbol,
										bEnableResolution		= bEnableResolution,
										gs_iDisplayStandards	= gs_iDisplayStandards,
										txt_BasePointX			= rm_ProjectedLength/2,
										txt_BasePointY			= 0,
										txt_BaseAngle			= 0,
				returned_parameters 	gs_cutplane_height,
										gs_top_range_height,
										gs_bottom_range_height,
										doCutplane

! ==============================================================================
! Listing
! ==============================================================================
if GLOB_CONTEXT = 6 then
	project2{2} 4, 270, 3+32,
		gs_back_pen,0,0,0

	end
endif

! ==============================================================================
! 2D Hotspots
! ==============================================================================

! --- Centre ------------------------------------------------------------------
	hotspot2 (_startX1-_rafterX1+rm_ProjectedLength-_startX2+_rafterX2)/2, 0, 100

! --- Profile Width ------------------------------------------------------------
	unID = 1000
	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_LEFT then
		add2 _startX1-_rafterX1, rm_RafterWidth/2
		rot2 90
			hotspot2  0,				0, unID, rm_ProfileWidth, 1+128		: unID=unID+1
			hotspot2 -1,				0, unID, rm_ProfileWidth, 3			: unID=unID+1
			hotspot2  rm_ProfileWidth,	0, unID, rm_ProfileWidth, 2			: unID=unID+1
		del 2
	endif

	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_RIGHT then
		add2 _startX1-_rafterX1, -rm_RafterWidth/2
		rot2 -90
			hotspot2  0,				0, unID, rm_ProfileWidth, 1+128		: unID=unID+1
			hotspot2 -1,				0, unID, rm_ProfileWidth, 3			: unID=unID+1
			hotspot2  rm_ProfileWidth,	0, unID, rm_ProfileWidth, 2			: unID=unID+1
		del 2
	endif


	unID = 1100
	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_LEFT then
		add2 rm_ProjectedLength-_startX2+_rafterX2, rm_RafterWidth/2
		rot2 90
			hotspot2  0,				0, unID, rm_ProfileWidth, 1+128		: unID=unID+1
			hotspot2 -1,				0, unID, rm_ProfileWidth, 3			: unID=unID+1
			hotspot2  rm_ProfileWidth,	0, unID, rm_ProfileWidth, 2			: unID=unID+1
		del 2
	endif

	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_RIGHT then
		add2 rm_ProjectedLength-_startX2+_rafterX2, -rm_RafterWidth/2
		rot2 -90
			hotspot2  0,				0, unID, rm_ProfileWidth, 1+128		: unID=unID+1
			hotspot2 -1,				0, unID, rm_ProfileWidth, 3			: unID=unID+1
			hotspot2  rm_ProfileWidth,	0, unID, rm_ProfileWidth, 2			: unID=unID+1
		del 2
	endif

! --- Horizontal Length ------------------------------------------------------------
	unID = 3000
	hotspot2  0,					0, unID, rm_ProjectedLength, 1+256		: unID=unID+1
	hotspot2 -1,					0, unID, rm_ProjectedLength, 3			: unID=unID+1
	hotspot2  rm_ProjectedLength,	0, unID, rm_ProjectedLength, 2			: unID=unID+1

! --- Rafter Width ------------------------------------------------------------
	unID = 8000
	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_LEFT then
		add2 (_startX1-_rafterX1+rm_ProjectedLength-_startX2+_rafterX2)/2,0
		rot2 90
				hotspot2  0,				0, unID, rafterWidthHalf, 1+128,	rm_RafterWidth : unID=unID+1
				hotspot2 -1,				0, unID, rafterWidthHalf, 3,		rm_RafterWidth : unID=unID+1
				hotspot2  rafterWidthHalf,	0, unID, rafterWidthHalf, 2,		rm_RafterWidth : unID=unID+1
		del 2
	endif

	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_RIGHT then
		add2 (_startX1-_rafterX1+rm_ProjectedLength-_startX2+_rafterX2)/2,0
		rot2 -90
			hotspot2  0,				0, unID, rafterWidthHalf, 1+128,	rm_RafterWidth : unID=unID+1
			hotspot2 -1,				0, unID, rafterWidthHalf, 3,		rm_RafterWidth : unID=unID+1
			hotspot2  rafterWidthHalf,	0, unID, rafterWidthHalf, 2,		rm_RafterWidth : unID=unID+1
		del 2
	endif


! ==============================================================================
! Floor Plan View
! ==============================================================================

if AC_symb_display_option = DISPLAY_SYMBOLIC then

	! ----- Symbolic 2D

	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_RIGHT then
		add2 0, -rm_ProfileWidth/2-rm_RafterWidth/2
		gosub "drawBeam"
		del 1
	endif

	if rm_iCollarType = TYPE_DOUBLE | rm_iCollarType = TYPE_LEFT then
		add2 0, rm_ProfileWidth/2+rm_RafterWidth/2
		gosub "drawBeam"
		del 1
	endif

else

	! ----- View Edges ---------------------------------------------------------
	pen gs_cont_pen
	line_type gs_cont_line

	if AC_symb_display_option = DISPLAY_OVERHEAD_ALL then
		pen AC_overhead_pen
		line_type AC_overhead_linetype
	endif

	project2{3} 3,270,2 + 32 * (AC_symb_display_option = DISPLAY_OVERHEAD_ALL | not(gs_use_3D_view_attributes)), 8,
		parameters	gs_2D_projection		= doCutplane,
					gs_2D_projection_type	= 1,
					gs_cutplane_height		= gs_cutplane_height,
					gs_top_range_height		= gs_top_range_height,
					gs_bottom_range_height	= gs_bottom_range_height


	if AC_symb_display_option <> DISPLAY_OVERHEAD_ALL then
		! ----- View Polygons --------------------------------------------------
		pen gs_fill_pen
		fill gs_fill_type

		project2{3} 3,270,3+32+1024+2048, 4,
						gs_back_pen,
			parameters	gs_2D_projection		= doCutplane,
						gs_2D_projection_type	= 2,
						gs_cutplane_height		= gs_cutplane_height,
						gs_top_range_height		= gs_top_range_height,
						gs_bottom_range_height	= gs_bottom_range_height
	endif


	if AC_symb_display_option = DISPLAY_OVERHEAD_PROJ then

		! ----- Overhead View -----------------------------------------------------
		pen AC_overhead_pen
		line_type AC_overhead_linetype

		project2{3} 3,270,2+32, 2+8,
			parameters	gs_2D_projection		= doCutplane,
						gs_2D_projection_type	= 3,
						gs_cutplane_height		= gs_cutplane_height,
						gs_top_range_height		= gs_top_range_height,
						gs_bottom_range_height	= gs_bottom_range_height
	endif

	if doCutplane then

		! ----- Cut Lines ---------------------------------------------------------
		pen gs_cut_pen
		line_type AC_cut_linetype
		line_property 2

		project2{3} 3,270,2+16+32+256+4096, 2,
			parameters	gs_2D_projection		= 1,
						gs_2D_projection_type	= 4,
						gs_cutplane_height		= gs_cutplane_height,
						gs_top_range_height		= gs_top_range_height,
						gs_bottom_range_height	= gs_bottom_range_height


		! ----- Cut Polygons ------------------------------------------------------
		pen gs_cut_fill_pen
		fill gs_cut_fill_type

		project2{3} 3,270,3+32+512, 1,
						gs_cut_back_pen,
			parameters	gs_2D_projection		= 1,
						gs_2D_projection_type	= 5,
						gs_cutplane_height		= gs_cutplane_height,
						gs_top_range_height		= gs_top_range_height,
						gs_bottom_range_height	= gs_bottom_range_height
	endif
endif

END

! ------------------------------------------------------------------------------
"drawBeam":
! ------------------------------------------------------------------------------
	rect2 _startX1-_rafterX1, -rm_ProfileWidth/2, rm_ProjectedLength-_startX2+_rafterX2, rm_ProfileWidth/2
	line2 _startX1-_rafterX1+_swoopX1, -rm_ProfileWidth/2, _startX1-_rafterX1+_swoopX1, rm_ProfileWidth/2
	line2 rm_ProjectedLength-_startX2+_rafterX2-_swoopX2, -rm_ProfileWidth/2, rm_ProjectedLength-_startX2+_rafterX2-_swoopX2, rm_ProfileWidth/2

	fill gs_fill_type
	poly2_b{2}	5, 2+64,gs_fill_pen, gs_back_pen,
				0,0,0,
				_startX1-_rafterX1, -rm_ProfileWidth/2,1,
				_startX1-_rafterX1, rm_ProfileWidth/2,1,
				rm_ProjectedLength-_startX2+_rafterX2, rm_ProfileWidth/2,1,
				rm_ProjectedLength-_startX2+_rafterX2, -rm_ProfileWidth/2,1,
				_startX1-_rafterX1, -rm_ProfileWidth/2,1
return
]]>
</Script_2D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_PR SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
if rm_iCollarType = TYPE_DOUBLE then
	bdft_Quantity = 2
else
	bdft_Quantity = 1
endif

call "RoofMaker_macro" parameters	gs_iDisplayStandards	= gs_iDisplayStandards,
									gs_disable_property		= gs_disable_property,
									bdft_Length				= lumberSize,
									bdft_ProfileWidth		= rm_ProfileWidth,
									bdft_ProfileHeight		= rm_ProfileHeight,
									bdft_Quantity			= bdft_Quantity
]]>
</Script_PR>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_VL SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
! =================================================================================
! Tie Beam parameters set by the RoofMaker add-on:
! "rm_ProjectedLength"		Structural Length of Span
! "rm_RelativeHeight"		Distance from Pivot Plane
! "rm_ProfileWidth"			Profile Width
! "rm_ProfileHeight"		Profile Height
! "rm_PitchAngle_1"			Pitch Angle 1
! "rm_PitchAngle_2"			Pitch Angle 2
! "rm_RafterWidth"			Rafter Width
! "rm_RafterHeight_1"		Height of First Rafter
! "rm_RafterHeight_2"		Height of Second Rafter
! "rm_iCollarType"			Collar Type
! =================================================================================


values "rm_PitchAngle_1"	range (0, 90]
values "rm_PitchAngle_2"	range (0, 90]
values "rm_ProfileWidth"	range (0,)
values "rm_ProfileHeight"	range (0,)

values "rm_collarType" stType
values "rm_iCollarType" 1,2,3

if GLOB_MODPAR_NAME = "rm_CollarType" then
	rm_iCollarType = 1
	for i = 2 to vardim1(stType)
		if rm_CollarType = stType[i] then
			rm_iCollarType = i
			i = vardim1(stType)
		endif
	next i
	parameters rm_iCollarType = rm_iCollarType
else
	rm_iCollarType = max(min(rm_iCollarType,vardim1(stType)),1)
	parameters rm_CollarType = stType[rm_iCollarType]
endif

values "rm_RafterWidth"		range (0,)
values "rafterWidthHalf"	range (0,)
if GLOB_MODPAR_NAME = "rafterWidthHalf" then
	rm_RafterWidth = rafterWidthHalf * 2
	parameters rm_RafterWidth = rm_RafterWidth
else
	rafterWidthHalf = rm_RafterWidth / 2
	parameters rafterWidthHalf = rafterWidthHalf
endif

values "rm_RafterHeight_1"		range (0,)
values "rafterHeight_1_Half"	range (0,)
if GLOB_MODPAR_NAME = "rafterHeight_1_Half" then
	rm_RafterHeight_1 = rafterHeight_1_Half * sin(rm_PitchAngle_1)
	parameters rm_RafterHeight_1 = rm_RafterHeight_1
else
	rafterHeight_1_Half = rm_RafterHeight_1 / sin(rm_PitchAngle_1)
	parameters rafterHeight_1_Half = rafterHeight_1_Half
endif

values "rm_RafterHeight_2"		range (0,)
values "rafterHeight_2_Half"	range (0,)
if GLOB_MODPAR_NAME = "rafterHeight_2_Half" then
	rm_RafterHeight_2 = rafterHeight_2_Half * sin(rm_PitchAngle_2)
	parameters rm_RafterHeight_2 = rm_RafterHeight_2
else
	rafterHeight_2_Half = rm_RafterHeight_2 / sin(rm_PitchAngle_2)
	parameters rafterHeight_2_Half = rafterHeight_2_Half
endif

if bValidHeight then
	values "rm_RelativeHeight"	range [0, _sectY]
else
	values "rm_RelativeHeight"	range [0, ]
endif
values "rm_StructuralLength"	range [_rafterX1 + _rafterX2 + _swoopX1 + _swoopX2,]
values "rm_ProjectedLength"		range [0,]		!_swoopX1 + _swoopX2
if GLOB_MODPAR_NAME = "rm_StructuralLength" then
	rm_ProjectedLength = rm_StructuralLength + _startX1 + _startX2 - _rafterX1 - _rafterX2
	parameters rm_ProjectedLength = rm_ProjectedLength
else
	rm_StructuralLength = rm_ProjectedLength - _startX1 + _rafterX1 - _startX2 + _rafterX2
	parameters rm_StructuralLength = rm_StructuralLength
endif


! ==============================================================================
! Lumber Size
! ==============================================================================
lumberSize = rm_StructuralLength
parameters lumberSize = lumberSize

! ==============================================================================
call "RoofMaker_macro"	parameters all	bEnableRafter			= bEnableRafter,
										bEnableSymbol			= bEnableSymbol,
										bEnableResolution		= bEnableResolution,
										gs_iDisplayStandards	= gs_iDisplayStandards,
										iObjectType				= 3


! ==============================================================================
! Bounding Box
! ==============================================================================
parameters A		= rm_StructuralLength																					: lock "A"
parameters B		= rm_ProfileWidth*((rm_iCollarType = TYPE_DOUBLE)+1) + rm_RafterWidth*(rm_iCollarType = TYPE_DOUBLE)	: lock "B"
parameters ZZYZX	= rm_ProfileHeight																						: lock "ZZYZX"


! ==============================================================================
! Levels
! ==============================================================================
parameters ac_toplevel 		= rm_RelativeHeight
parameters ac_bottomlevel	= rm_RelativeHeight - rm_ProfileHeight
]]>
</Script_VL>

<ParamSection SectVersion="26" SectionFlags="0" SubIdent="0">
	<ParamSectHeader>
		<Version>26</Version>
		<AutoHotspots>false</AutoHotspots>
		<StatBits>
			<STBit_UIDefault/>
			<STBit_FixSize/>
			<STBit_UIUseHierarchicalPages/>
		</StatBits>
		<WDLeftFrame>0</WDLeftFrame>
		<WDRightFrame>0</WDRightFrame>
		<WDTopFrame>0</WDTopFrame>
		<WDBotFrame>0</WDBotFrame>
		<LayFlags>65535</LayFlags>
		<WDMirrorThickness>0</WDMirrorThickness>
		<WDWallInset>0</WDWallInset>
		<SymbolColor>0</SymbolColor>
	</ParamSectHeader>
	<Parameters>
		<Length Name="A">
			<Description><![CDATA["Длина"]]></Description>
			<Fix/>
			<Value>3.70101417055</Value>
		</Length>
		<Length Name="B">
			<Description><![CDATA["Общая Ширина"]]></Description>
			<Fix/>
			<Value>0.16</Value>
		</Length>
		<Length Name="ZZYZX">
			<Description><![CDATA["Высота Профиля"]]></Description>
			<Fix/>
			<Value>0.2</Value>
		</Length>
		<Boolean Name="AC_show2DHotspotsIn3D">
			<Description><![CDATA["Показ Узловых 2D Точек в 3D"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="ac_bottomlevel">
			<Description><![CDATA["Отметка Низа"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0.3</Value>
		</Length>
		<Length Name="ac_toplevel">
			<Description><![CDATA["Отметка Верха"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0.5</Value>
		</Length>
		<Length Name="rm_ProfileWidth">
			<Description><![CDATA["Ширина Профиля"]]></Description>
			<Fix/>
			<Value>0.04</Value>
		</Length>
		<Length Name="rm_ProfileHeight">
			<Description><![CDATA["Высота Профиля"]]></Description>
			<Fix/>
			<Value>0.2</Value>
		</Length>
		<Length Name="rm_StructuralLength">
			<Description><![CDATA["Длина Элемента"]]></Description>
			<Fix/>
			<Value>3.70101417055</Value>
		</Length>
		<Length Name="rm_RelativeHeight">
			<Description><![CDATA["Расстояние от Опорной Плоскости"]]></Description>
			<Fix/>
			<Value>0.5</Value>
		</Length>
		<Length Name="rm_ProjectedLength">
			<Description><![CDATA["Конструктивная Длина Пролета"]]></Description>
			<Fix/>
			<Value>4</Value>
		</Length>
		<Angle Name="rm_PitchAngle_1">
			<Description><![CDATA["Угол Наклона 1"]]></Description>
			<Fix/>
			<Value>35</Value>
		</Angle>
		<Angle Name="rm_PitchAngle_2">
			<Description><![CDATA["Угол Наклона 2"]]></Description>
			<Fix/>
			<Value>35</Value>
		</Angle>
		<Length Name="rm_RafterWidth">
			<Description><![CDATA["Ширина Стропила"]]></Description>
			<Fix/>
			<Value>0.08</Value>
		</Length>
		<Length Name="rafterWidthHalf">
			<Description><![CDATA["Ширина Стропила"]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0.04</Value>
		</Length>
		<Length Name="rm_RafterHeight_1">
			<Description><![CDATA["Высота Первого Стропила"]]></Description>
			<Fix/>
			<Value>0.16</Value>
		</Length>
		<Length Name="rafterHeight_1_Half">
			<Description><![CDATA["Высота Первого Стропила"]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0.278951487299</Value>
		</Length>
		<Length Name="rm_RafterHeight_2">
			<Description><![CDATA["Высота Второго Стропила"]]></Description>
			<Fix/>
			<Value>0.16</Value>
		</Length>
		<Length Name="rafterHeight_2_Half">
			<Description><![CDATA["Высота Второго Стропила"]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0.278951487299</Value>
		</Length>
		<String Name="rm_CollarType">
			<Description><![CDATA["Тип Ригеля"]]></Description>
			<Fix/>
			<Value><![CDATA["Двойной"]]></Value>
		</String>
		<Integer Name="rm_iCollarType">
			<Description><![CDATA["Тип Ригеля"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Integer>

		<!-- gs_2D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_2D_representation">
			<Description><![CDATA["2D-отображение"]]></Description>
			<Fix/>
		</Title>
		<Integer Name="AC_symb_display_option">
			<Description><![CDATA["Показ на Плане Этажа"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>3</Value>
		</Integer>
		<Integer Name="AC_symb_show_projection_to">
			<Description><![CDATA["Показать Проекцию"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>3</Value>
		</Integer>
		<String Name="gs_symb_display_option">
			<Description><![CDATA["Показ на Плане Этажа"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Символический Вид"]]></Value>
		</String>
		<Boolean Name="gs_use_3D_view_attributes">
			<Description><![CDATA["Использовать Реквизиты 3D-вида"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<String Name="gs_symb_show_projection_to">
			<Description><![CDATA["Показать Проекцию"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Весь Элемент"]]></Value>
		</String>
		<LineType Name="gs_cont_line">
			<Description><![CDATA["Тип Линии Видимого Контура"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</LineType>
		<PenColor Name="gs_cont_pen">
			<Description><![CDATA["Перо Линии Видимого Контура"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</PenColor>
		<FillPattern Name="gs_fill_type">
			<Description><![CDATA["Тип Штриховки"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>65</Value>
		</FillPattern>
		<PenColor Name="gs_fill_pen">
			<Description><![CDATA["Перо Штриховки"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>
		<PenColor Name="gs_back_pen">
			<Description><![CDATA["Перо Фона Штриховки"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</PenColor>
		<LineType Name="AC_cut_linetype">
			<Description><![CDATA["Линии Сечения"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</LineType>
		<PenColor Name="gs_cut_pen">
			<Description><![CDATA["Перо Линии Сечения"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>24</Value>
		</PenColor>
		<FillPattern Name="gs_cut_fill_type">
			<Description><![CDATA["Тип Штриховки Сечения"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>65</Value>
		</FillPattern>
		<PenColor Name="gs_cut_fill_pen">
			<Description><![CDATA["Перо Штриховки Сечения"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>
		<PenColor Name="gs_cut_back_pen">
			<Description><![CDATA["Перо Фона Штриховки Сечения"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>
		<LineType Name="AC_overhead_linetype">
			<Description><![CDATA["Линии Проекции"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>21</Value>
		</LineType>
		<PenColor Name="AC_overhead_pen">
			<Description><![CDATA["Перо Линии Проекции"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>6</Value>
		</PenColor>
		<Boolean Name="gs_2D_projection">
			<Description><![CDATA["2D-символ"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Integer Name="gs_2D_projection_type">
			<Description><![CDATA["Тип 2D-проекции"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Integer>
		<Length Name="gs_cutplane_height">
			<Description><![CDATA["Высота Плоскости Сечения"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="gs_top_range_height">
			<Description><![CDATA["Высота Верхней Плоскости Сечения"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="gs_bottom_range_height">
			<Description><![CDATA["Высота Нижней Плоскости Сечения"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>

		<!-- gs_3D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_3D_representation">
			<Description><![CDATA["3D-отображение"]]></Description>
			<Fix/>
		</Title>
		<PenColor Name="pen3D">
			<Description><![CDATA["Перо в 3D"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</PenColor>

		<!-- gs_material: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_material">
			<Description><![CDATA["Покрытия"]]></Description>
			<Fix/>
		</Title>
		<Material Name="rm_mat">
			<Description><![CDATA["Балка"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>15</Value>
		</Material>

		<!-- txt_show: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Boolean Name="txt_show">
			<Description><![CDATA["Показать Размер Пиломатериала"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_BoldName/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<String Name="displaySize">
			<Description><![CDATA["Размер для Показа"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Размер Обрезки Пиломатериала"]]></Value>
		</String>
		<Integer Name="iDisplaySize">
			<Description><![CDATA["Размер для Показа"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<PenColor Name="txt_pen">
			<Description><![CDATA["Перо Текста"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</PenColor>
		<String Name="txt">
			<Description><![CDATA["Текст"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="fontType">
			<Description><![CDATA["Тип Шрифта"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Arial"]]></Value>
		</String>
		<RealNum Name="fsz">
			<Description><![CDATA["Размер Шрифта"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>10</Value>
		</RealNum>
		<Boolean Name="gs_text_style_bold">
			<Description><![CDATA["Жирный Шрифт"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Boolean Name="gs_text_style_italic">
			<Description><![CDATA["Курсивный Шрифт"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Boolean Name="gs_text_style_underline">
			<Description><![CDATA["Подчеркнутый Шрифт"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="txt_pos_x">
			<Description><![CDATA["Позиция Текста по X"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="txt_pos_y">
			<Description><![CDATA["Позиция Текста по Y"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<String Name="typeTextRotation">
			<Description><![CDATA["Ориентация Текста в Символе"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Читаемый"]]></Value>
		</String>
		<Integer Name="typeTextRotation_m">
			<Description><![CDATA["Ориентация Текста в Символе"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>2</Value>
		</Integer>
		<Angle Name="gs_readable_angle">
			<Description><![CDATA["Читаемый Угол"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>90</Value>
		</Angle>

		<!-- gs_list: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_list">
			<Description><![CDATA["Параметры Спецификаций"]]></Description>
			<Fix/>
		</Title>
		<Length Name="lumberSize">
			<Description><![CDATA["Размер Обрезки Пиломатериала"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>3.70101417055</Value>
		</Length>
		<String Name="roundingValue">
			<Description><![CDATA["Величина Округления"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["50"]]></Value>
		</String>
		<Integer Name="iRoundingValue">
			<Description><![CDATA["Величина Округления"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>3</Value>
		</Integer>
		<String Name="roundingValueUSA">
			<Description><![CDATA["Величина Округления"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA['2"']]></Value>
		</String>
		<Integer Name="iRoundingValueUSA">
			<Description><![CDATA["Величина Округления"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>5</Value>
		</Integer>
		<Length Name="roundValue">
			<Description><![CDATA["Величина Округления"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="roundedLumberSize">
			<Description><![CDATA["Округленный Размер Пиломатериала"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>3.70101417055</Value>
		</Length>
		<RealNum Name="numBDFT">
			<Description><![CDATA["Объем в BDFT"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<RealNum Name="gs_list_cost">
			<Description><![CDATA["Цена"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<String Name="gs_list_manufacturer">
			<Description><![CDATA["Производитель"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_note">
			<Description><![CDATA["Примечания"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_location">
			<Description><![CDATA["Расположение"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_accessories">
			<Description><![CDATA["Аксессуары"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="FM_Type">
			<Description><![CDATA["Тип Группы"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Другой"]]></Value>
		</String>
		<Integer Name="iFMType">
			<Description><![CDATA["Тип Группы"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>25</Value>
		</Integer>
		<String Name="FM_InventoryNumber">
			<Description><![CDATA["Инвентарный Номер"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="FM_SerialNumber">
			<Description><![CDATA["Серийный Номер"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="FM_ProductionYear">
			<Description><![CDATA["Год Производства"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<RealNum Name="FM_ObjectWeight">
			<Description><![CDATA["Вес Изделия"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</RealNum>
		<String Name="FM_ObjectWeightUnit">
			<Description><![CDATA["Единица Веса"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["кг"]]></Value>
		</String>
		<String Name="gs_list_custom1">
			<Description><![CDATA["Пользовательское Значение 1"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom2">
			<Description><![CDATA["Пользовательское Значение 2"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom3">
			<Description><![CDATA["Пользовательское Значение 3"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom4">
			<Description><![CDATA["Пользовательское Значение 4"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_list_custom5">
			<Description><![CDATA["Пользовательское Значение 5"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<Boolean Name="gs_disable_property">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Integer Name="gs_ui_current_page">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<Integer Name="gs_iDisplayStandards">
			<Description><![CDATA["Стандартное Отображение"]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Integer>
	</Parameters>
</ParamSection>

<Picture MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="0" length_in_bytes="3127" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D49484452000000800000
	008008020000004C5CF69C00000BF449444154785EECD1A10D8030144041F61F
	07CD0A0882276D65417D01A40898014542EE0DF0CC75F7A7E9AF000004008000
	0010000002004000000800000100200000040080000000200000040080000010
	00000200400000080000010020000004008000001000000200400000B42396B1
	CFF350D3146BD963BBDAF976A2871D73FBD5A32AC3F8AC356B66BEC33EEF9250
	5284025682DE08D68A988044438C72A110E285A418A2178610F44E638C87E88D
	FF82FF0312156281446BB087C8A1EC16A83D6237E9DEDDED3E1EBEC3CCACE5F3
	BCEF9AAAF1624B9158A16BD637B3F63ACCF7CDFB9BF779DFB55D7225252C9EFC
	E3DCCC6F97CE9F0ED679E382B136EBB8BC9BE61DD71E2FBA537977B2E84CB076
	27B2D6485E8C64ADEEBFDFE85A31F4827753D6E7DE387FE4E9C5D9A336CDB2BC
	955A63044912BCF775CD4F850B3EC1A400E3BD49B38ECD3B366BE79DC9BC3391
	1523C5C8542184F2F658567440C8DAF41A802D4AB97169FEE86F2E9DDA5F0E07
	833AF32181B51363502D48E26C8D4D6D9AA636090083B3C185D7DAE3083EF8BA
	2A4B40F2C1FAC424DE24AE65B3964D0BB0C9C0A6355A8C6C2B3A6364D3192FDA
	E3AEE8A42EFBB0030875B970FCF90B6F3C0706AE18C5AA04C6E35A5C685E9F24
	151D005753F9106061414BE7B0165350538783800455026632105080852E43DF
	C16A4352584130640330696BA4E84C1623D3ADEE14C1D07546B3A29B662D633E
	E80056665F999B79A677F15462F3C4F2CD16FBFBC4A0A44A02B60CC4C202A21C
	4D534F12C40BDBA2CD13FF6CA80712302690044BE204115191302706CF35C043
	38E0E4A5038300E30AE35A597B1CD5E59DD6D8750C3CEDB156972AE7F296CBDB
	90B5FF6F00FD9577E6679E593A7B1053F0AE058A49686CCC86918324B45BD528
	784EB3D644C42C9CC74A0498AC3E820A36E4453CB54209288208A48DE16D501D
	748D7FB36DE8375C43B4E5100BD180E7104F62E034103EE372D79AC8DA63D0B4
	BC33D51A9D86BB80103202861C04A4D45DD500EAE1C6C25BFB16DEFC7D5D6E18
	D7866160062838CE30A8ACF2625B747A9A444CCAD12050D21413686019613F5A
	BC89092C9EDDEA31F19EE20B4421C31AD13D4F35D8480F8A9CF9110E49CA353E
	45712939092D14B291F56555F252E110BF3159621D08B9F6589A77910BE45DB0
	D906BFC9BB13EDEE749AB7C0C965C5FF18C0D2D903F333BFEE2D9D43DE62F16B
	A26C1869D034F844BD3156DE7B8148EB290C8662151BA30BE32A12200CB1A74A
	59BCA74E4CA449A2A9696E6A745A4DC5F3D2E93DD72B1B22AB83DA5BBCC75B14
	031E144B2071F8030DCB95F8E86B54D76052E35AFA9A70121BA8A21934CDB5C0
	A693B5277226D0937A86AC110C5CA7E8BCBF00362F9E9A9B797A65F688C87B6E
	E477AB88288424BEB36A2B798F6DCAA792690003DB43B3658EF35EBC843991E2
	2380C6AC465D07F3454C74398738165F74AF8C8D8052B4A1C97AA1594671A244
	17419F57368CE49A14AB5E3627E2218FC8C60235A39A8FD21A53E9B2261760AA
	82719E718EBB1CEBDA0E18DAE348D8940DF4AD3D3AEDF26EDE1E813F19F3DE00
	045F1D7FEE271B974EBA62CC78AF3688F652EBAB4A5052E2009E26D0B451E8F5
	DAC409E59BA245242A3A32D93A97D052DEA6A948578D55CA0F77FC87ABC959E3
	4730042FEA269525FA1F27738E1EE41378B0EA17B22912244082D69AF7AB853A
	38EB4331810637971292FC6952E257DFE563680124666B1ECF9B72C0B552B069
	751737CCC4CDF7ECB9F7CB5702A0BFFCCEDCD16796CFBD224673898F0FA66894
	4F540A91012310E26150189FD5212282467FD8D60E1F620CB59CAC06F35589AF
	B3A963C3E079C428D6065AA7B1BF688BDEB0B99921BCC8283421DF003546D4DB
	1A4669A82B7D28553CCB793A1E6533288F9873257560438455439D6057294B02
	D8A0E1C84A07F85C221061766EF18583673EFDC5471FDAFBD4BB0350F696DFFE
	F3AFD62FBC655D8E9F5B0F7B22195E455B14D9060AA8D35D15C53E5131906A82
	46059288E6B0028A16176A0CC8B04EB482D88BB71789578D5254468A88181837
	D13EE50FA0D8273C373EC7B5D1238DD11FEA7D15A8334EA87042F3A3F450DDA4
	D1D92D4058257EA31B4364AFA8D56F846D5D6A469D5095082968CAA0B0E1E3CB
	1B83A9F1CEF6E9EEC2C59567FF746CF2E63D8F3DF9B3D1B1C9FF1440A0E2553C
	97BD616FB942EDAF0D3797CACD45A443556F75D85FF6D5D0977D5FF769E0DAAB
	5C1049EA40405F49F06AC22E7F2C0C4787204892C4A1015C2892872645F26982
	B0D894CBD913A27124488ADCAB052FA75264A6560333D540CE0FBA369A28CA10
	636DE3A68A44C88588BD115563D9AB0F017F8A007505FD409035A91A750C426A
	8F1C9F7BF3CC85FBF7DCBA6BC7D4E6A07CF1C0B185FEF8DE277FBEF3A39FF82F
	6CC40450BF1E6C94FDD57AB856F656CB8D45E0A9FA2BD560BDECAFF86A80091E
	7E4338ACB4169371A7FA24BAA4E22EA3FABE8390AFD4AC318B6A0A0168A7D254
	2B18AB4AA82CD9ACBD4A0366A22DCBC47A0D36357AF0157AA4C1B81DE33F148C
	1ED308DDBF3C700C2EBCA89B4836D17CAFE05472891736F4E16327E70F1D9BBB
	EB8E1BEEFAD8F5A075F8F5D3AF9C58FEEA37BF7FF77D5F792F00B62E1E39C360
	BD1AACC1692065680C372E55FD555401B6810938C70811E2FED92812B54B34BA
	CA86B762684666ED8D69D83F858026BA105ECC7675886156BAAD580F106862C1
	C7544D996A4495216FA2728A9C0918CE68EC2BB02C3A0510A7C4F72612E62193
	D968676E7661EDF943A76FD83672EF277774DBC5C9BF5D78E1E0C9DD5FF8C643
	7BBFBB1580F7A74064C0A31E6E0240B9B93CEC2D41DC041250AD40EE3854F628
	EB5213CDDE13131FAF89A264A6C1C0B01914894A0435D8E94B4ADF12FD8A47B4
	B566704A2DC61F36624ED108917C53132D1A064D7AA6E124A8FA195CD1B0215A
	5F71F09E8533EBBDE1BE03A7AA3A3C70F72DD74F8FCD5F5AF9DD1F8E4CEDFCEC
	DE277E3C3A3E750500DEC7A26C286254B35580819AA10DADC3F61BFE540F3619
	967CA57A420AA2388CE49A4AD55EF03486E6B0252752401166BE624BACA9D882
	1AD4E2A229283337F292E50D23F5424FC6D6697EAB7B84660FD444062F0C9AFD
	A4E6462FBD76EEECDCCAFDBB77EEBA69DB467FF8FCFED717CBA9C79EFAC54DB7
	DEB10580ABA4D4651F4E830A1EC433048F15281B99F52177ABBE2ABD2F1104F4
	C175A320E96C862B931C014635A92BCD8568F4988F7975051C4D40969E660BA2
	19361B2983BFE20CB4B530C5C7079294D4563D9DA4512C4515808ADCBD7E62FE
	E0CCEC9DB75FBFFBE3DBC1EFE0AB7F7DF9C4DA438FFFE0EEFB1EDC02C0555E10
	F0010684E031CC027A00B388765D42E8D6A16C9810EA12391B6C2F91863653E7
	50A3E959F716F1E1E910DAA9DE11E38C924089BEC5904B3F90F9569811B2160A
	549A0AFE608D6D156E767E75DFC153374C77EE434868B9E36F2FBC78F80C42C2
	C30809C65CCD00AE3C1DF0741D666B64D35F1D6E2E4AD45921B33E158F19413D
	A013440430160E2729752ABB8118123467D5249D6186CEC1A28D663768A9510D
	322E6C68A3ABC8D2F5CDC1BE03A7ABDA3FF0995BAE9B68CF5D5A7B76FFB16DB7
	DDF3D8133F1D1D9FFC4001D82A93F697D90009D840CD06EB17EBFEAAF6F87A28
	FC7A31B9C4C9A6A8C4236C3400C3E451D06A1FE50BBD756962E2E46552B89CA9
	6596417BFFABEF9C3DBFFAF93B6FDCF511EC12EA7D2F1D5DF6DB1EFFDE2F6FDC
	B9AB01F0A12EC197836AB80EFF80DFC05D980E804DD9D384CDD7D8E2F431AA41
	83A180D2A41EA35B1C4601F51889324488B95A52133297BE76E2C2E137CE7FEA
	F6ED77DDB1DDD783032FBF35F3F6E0E16FFD68CFBD0F5E03B0059C6A2029D970
	5D12B6452405A00236F49B6A28B23690FF2255BAABD07F50CABE820D15B1769E
	9DBBB0BEEFD089DB6EBDED6B8F3CEA92FE5F0E1FEAE73BBEF4C877AE01B87259
	AB87CA66B3EC2D4902BDCAC043362BB2C5610D5515429D785F14D95AAF42589E
	BEE5735FFFF60FA7A69A6DC1DFDBB5631404A10000C39DAF0B75018F108D8227
	88D682C6688B5611041544D0218A78813D3D8544F0FD57F8D67F5A208DE1F579
	76EFA17CD4B73E3FB7F77D754D9BCBAE3826DBCDFA74C87EB726EA1B628C7F02
	E00D150000020040000008000001002000000400800000100000020040000008
	0000010020000004008000001000000200400000080000010020000004008000
	00D00C13C1D8642544813D0000000049454E44AE426082
	]]>
</Picture>

<GDLPict MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="1" length_in_bytes="153" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D49484452000000180000
	00110103000000FDB6FE7300000006504C5445FF000000000041A31203000000
	0174524E530040E6D8660000003749444154785E2DC6A11180300C00C08F0187
	40A160958C9251322A2354D681A9F8BB074E1CCB5D44B3E36AAA45A74D7ABE89
	C44B8C753FD1C6081B8AE6B0CD0000000049454E44AE426082
	]]>
</GDLPict>

<GDLPict MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="2" length_in_bytes="344" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D49484452000000870000
	00380203000000AA15033900000009504C5445FF0000000000E0E0E09DBA24BF
	0000000174524E530040E6D866000000F349444154785E85D131AE8330104551
	9AB8F0AA28921D4429524716F22A5844AAD4F95FF05619312142E8E219579E61
	648E9FBBA3D577E11AC389F40E47F2108E548518D50893A4089355A790A20823
	558D110518505435459408A3C5A2D1A74CD9C72C9F935C8CFDC4C718758F39EF
	D7C52EEC624E267531C5C277317A19D44926E97F58AF7E6DA6323FD6009FCD54
	FEBE06A91C6336669D1B982DF95C1AC96C91A5BB0D33DD52CAAFB849BD476132
	A4E099D8E633E1703C13BAC080020C9AC080020C7AC080020C5AD493020C3AE0
	93020C1AF493020C6B604021062531A410838A18508841410C29C4604F0C28C4
	604BCC0764DFD494C125BCAA0000000049454E44AE426082
	]]>
</GDLPict>

<GDLPict MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="3" length_in_bytes="395" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D49484452000000FC0000
	002502030000001BF46C130000000C504C5445FF0000000000E0E0E0FFFFFFEB
	A1FD840000000174524E530040E6D8660000012349444154785E9D94314EC430
	104527910029D52FA0A1A126A7D88223904BEC25E0085BBB4A41B1FEA7E1065C
	62DB95915C649AF13893DF3F79DE2B2CDB16671FAD61C387E2EC571AFBDCF8A7
	52EE36FC57CAAD810FCBC6BF156777694CEFFFAA0F19AB679D1C5EF5E30160E8
	4702C0D08F0480A11F0900D53F1400867E240054FF500018FA910050FDCEE0F0
	AA1F0AA0FCCBD29FC79FC98B381B489E1C3E91E26E66FE6EF38F64F6F957F2A7
	CD4F89ABCF8FCC579B57FD6800E599289DCD995600A87E3480F213D3DAE3C74C
	2B00543F1A4079324977EFB40240F58301949FF47C5FE06AF367BD2C10407992
	D8C1CF5600A8FEA100A8FAEB9EF7472B00AAFE65E8F33003A0EACB439F7F162B
	00AAFEAEFFCB0C80AABFEF7D2B00AABEECF1172B00FE014E1D3A445126877E00
	00000049454E44AE426082
	]]>
</GDLPict>

<GDLPict MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="4" length_in_bytes="428" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D49484452000001430000
	002F0203000000041C400100000009504C5445FF0000000000E0E0E09DBA24BF
	0000000174524E530040E6D8660000014749444154785EEDD3314EC3401085E1
	D9C84991EAD1FA083EC536F48EB4BE844FC11142018254464208BF532221B2B3
	1B6D3583BBBCDEBF569F3C72DD0B29860D5CC7DC401938BC72B5147B32B58BC7
	772E96E28EEB5BBB38733E5B8A815F8CCD227911D3860B9F5AC503F9692BF6B3
	7E899291FCB01503F9DD2ACEE4B3B9C8D8289294682A760333242AC6D55AEC99
	2151312E0253113B8544C578B6160B48D48CD2998A51141215A3BDA890A81925
	58824144215131DA8B0A899A5124DA8A0A8992D15AEC4432A4160772F1148F57
	48948C8EA242A264F414857F90B861341D0DA4804471D49EA242A260F4141512
	05A3A7A87F2494D155544828A3AF984F1BCAE82A2A246E18C36438EB490A48DC
	304A323826C990BFF97D5246B3A34226910079FCC73D9C4E63944DD66D97F0EF
	FE46FFEE8E8ECB691782BF38D681FDE45EDAE08D1B3AFE001E76B5A94DC6EEBF
	0000000049454E44AE426082
	]]>
</GDLPict>

<GDLPict MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="5" length_in_bytes="142" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D49484452000000240000
	00180203000000EFD6B7DD00000009504C5445FF0000000000E0E0E09DBA24BF
	0000000174524E530040E6D8660000002949444154785EDDCAA10100200C0431
	5405A3761A46C03653227E0B4E45DC4A088A8936376ACE2FDB032CFE31CFD31F
	68700000000049454E44AE426082
	]]>
</GDLPict>

<GDLPict MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="6" length_in_bytes="188" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D494844520000004D0000
	00180203000000C224986700000009504C5445FF0000000000E0E0E09DBA24BF
	0000000174524E530040E6D8660000005749444154785E65CCA11180300004C1
	280455510FD5500212BE4A6630FB939C5C7123C9983AC6995C0BEEC9BDE096BC
	0B9A369A42D3465368DA680A4D1B4DA169A329346D3485A6139A4253680A4DA1
	E984A6F09F3E851FD67C37CE993C5A8D0000000049454E44AE426082
	]]>
</GDLPict>

<GDLPict MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="7" length_in_bytes="197" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D494844520000002B0000
	002A0403000000D82FBF560000000F504C5445FF00000000000F0F0F161616FF
	FFFFEC6F0E660000000174524E530040E6D8660000005A49444154785EED92D1
	0980300C44AF1BBCDBC0115C41E8FE339922815051BF151F25E41E47BE2A0728
	70C04126D5A579A4DE3754179BB30ED0B7F5AF6D2EFEC9AC576041B790237B2F
	6F331EB36D488EE1E200272453FBE1F60E4BA132C6EC18BC570000000049454E
	44AE426082
	]]>
</GDLPict>

<GDLPict MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="8" length_in_bytes="220" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D494844520000002B0000
	002A0403000000D82FBF5600000018504C5445FF00000000000F0F0F1616161C
	1C1C292929373737FFFFFF68F93FC80000000174524E530040E6D86600000068
	49444154785EED92DD0980301083D30D920D1CC1111CC1115CC1A7AE6F6BAF1C
	F8734F82087EE50A09212F7700B8A302D12590844AB31D53CA796D691FB71DE2
	D3E93F1D6FFEFE4EC06199391EAE2AC22BED7B333D3DD2CDFA4E6E225406B290
	A14E1557E9A07B036A3A2CCA15806AA40000000049454E44AE426082
	]]>
</GDLPict>

<GDLPict MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="9" length_in_bytes="221" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D494844520000002B0000
	002A0403000000D82FBF5600000018504C5445FF00000000000F0F0F1616161C
	1C1C292929373737FFFFFF68F93FC80000000174524E530040E6D86600000069
	49444154785EED92C10980400C04D70E261D588225588225D882AF6BDF1C4708
	E4A10F1F82381C4B58867C2EA223C71C060AA2963399079286DDDA31064B3DEB
	34A9F507ECDF2E3F5FEFA45CD5C2B6CFE81222C27BDF5E9FECA63F6A3B219987
	29012C2028F6CDEE133E822CCACE66D4F50000000049454E44AE426082
	]]>
</GDLPict>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_1D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
EPS = 0.00001

bEnableRafter		= 0
bEnableSymbol		= 0
bEnableResolution	= 0


! ==============================================================================
! Definitions
! ==============================================================================
!gs_iDisplayStandards
	LANGUAGE_INT		= 1
	LANGUAGE_GER		= 2
	LANGUAGE_CHE		= 3
	LANGUAGE_AUT		= 4
	LANGUAGE_USA		= 5

!AC_symb_display_option
	DISPLAY_PROJECTED			= 1
	DISPLAY_OVERHEAD_PROJ		= 2
	DISPLAY_SYMBOLIC			= 3
	DISPLAY_OUTLINES			= 4
	DISPLAY_OVERHEAD_ALL		= 5

!AC_symb_show_projection_to
	PROJECTION_FLOOR_PLAN_RANGE	= 1
	PROJECTION_DISPLAY_LIMIT	= 2
	PROJECTION_ENTIRE_ELEMENT	= 3


dim stType[3]
	stType[1]	= `Двойной`
	stType[2]	= `Справа`
	stType[3]	= `Слева`

TYPE_DOUBLE		= 1
TYPE_RIGHT		= 2
TYPE_LEFT		= 3


! ==============================================================================
! 2D Display Options
! ==============================================================================

dim stDisplayOptions[5]
	stDisplayOptions[1]		= `Сечение и Низ`
	stDisplayOptions[2]		= `Сечение и Верх`
	stDisplayOptions[3]		= `Символический Вид`
	stDisplayOptions[4]		= `Только Контуры`
	stDisplayOptions[5]		= `Вся Проекция`

dim stProjectionTypes[3]
	stProjectionTypes[1]	= `Согласно Диапазону Плана Этажа`
	stProjectionTypes[2]	= `Согласно Абсолютному Диапазону`
	stProjectionTypes[3]	= `Весь Элемент`

if GLOB_MODPAR_NAME = "gs_symb_display_option" | AC_symb_display_option = 0 then
	AC_symb_display_option = DISPLAY_PROJECTED
	if gs_symb_display_option = stDisplayOptions[2] then AC_symb_display_option = DISPLAY_OVERHEAD_PROJ
	if gs_symb_display_option = stDisplayOptions[3] then AC_symb_display_option = DISPLAY_SYMBOLIC
	if gs_symb_display_option = stDisplayOptions[4] then AC_symb_display_option = DISPLAY_OUTLINES
	if gs_symb_display_option = stDisplayOptions[5] then AC_symb_display_option = DISPLAY_OVERHEAD_ALL
	parameters AC_symb_display_option = AC_symb_display_option
else
	gs_symb_display_option = stDisplayOptions[min(max(1, AC_symb_display_option), vardim1(stDisplayOptions))]
	parameters gs_symb_display_option = gs_symb_display_option
endif

if GLOB_MODPAR_NAME = "gs_symb_show_projection_to" | AC_symb_show_projection_to = 0 then
	AC_symb_show_projection_to = PROJECTION_FLOOR_PLAN_RANGE
	if gs_symb_show_projection_to = stProjectionTypes[2] then AC_symb_show_projection_to = PROJECTION_DISPLAY_LIMIT
	if gs_symb_show_projection_to = stProjectionTypes[3] then AC_symb_show_projection_to = PROJECTION_ENTIRE_ELEMENT
	parameters AC_symb_show_projection_to = AC_symb_show_projection_to
else
	gs_symb_show_projection_to = stProjectionTypes[min(max(1, AC_symb_show_projection_to), vardim1(stProjectionTypes))]
	parameters gs_symb_show_projection_to = gs_symb_show_projection_to
endif


! ==============================================================================
! Geometry Calculation
! ==============================================================================
if abs(rm_PitchAngle_1-90) > EPS then
	_startX1	= (rm_RelativeHeight-rm_ProfileHeight) / tan(rm_PitchAngle_1)
else
	_startX1	= 0
endif
if abs(rm_PitchAngle_1-90) > EPS then
	_startX2	= (rm_RelativeHeight-rm_ProfileHeight) / tan(rm_PitchAngle_2)
else
	_startX2	= 0
endif

_rafterX1	= rm_RafterHeight_1 / sin(rm_PitchAngle_1)
_rafterX2	= rm_RafterHeight_2 / sin(rm_PitchAngle_2)

if abs(rm_PitchAngle_1-90) > EPS then
	_swoopX1	= rm_ProfileHeight / tan(rm_PitchAngle_1)
else
	_swoopX1	= 0
endif
if abs(rm_PitchAngle_2-90) > EPS then
	_swoopX2	= rm_ProfileHeight / tan(rm_PitchAngle_2)
else
	_swoopX2	= 0
endif

bValidHeight = 0
if abs(rm_PitchAngle_1-90) > EPS & abs(rm_PitchAngle_2-90) > EPS then
	bValidHeight	= 1
	_sectX1			= (tan(rm_PitchAngle_2) * rm_ProjectedLength) / (tan(rm_PitchAngle_1) + tan(rm_PitchAngle_2))
	_sectY			= tan(rm_PitchAngle_1) * _sectX1
else
	if abs(rm_PitchAngle_1-90) < EPS & abs(rm_PitchAngle_2-90) < EPS then
		_sectY		= 0
	else
		if abs(rm_PitchAngle_1-90) > EPS then
			bValidHeight	= 1
			_sectY			= tan(rm_PitchAngle_1) * rm_ProjectedLength
		else
			if abs(rm_PitchAngle_2-90) > EPS then
				bValidHeight	= 1
				_sectY			= tan(rm_PitchAngle_2) * rm_ProjectedLength
			endif
		endif
	endif
endif

]]>
</Script_1D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_UI SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
! =============================================================================
! Localization
! =============================================================================
dim stGeometry[12]
	stGeometry[1]	= `Расстояние от Опорной Плоскости`
	stGeometry[2]	= `Угол Наклона 1`
	stGeometry[3]	= `Угол Наклона 2`
	stGeometry[4]	= `Ширина Профиля`
	stGeometry[5]	= `Высота Профиля`
	stGeometry[6]	= `Длина Элемента`
	stGeometry[7]	= `Конструктивная Длина Пролета`
	stGeometry[8]	= `Опорная Плоск.`
	stGeometry[9]	= `Высота Первого Стропила`
	stGeometry[10]	= `Высота Второго Стропила`
	stGeometry[11]	= `Толщина Стропила`
	stGeometry[12]	= `Тип Ригеля`



! =============================================================================
! Tabpages
! =============================================================================

TABID_ROOT					= -1
TABID_GEOMETRY				= 1

call "RoofMaker_macro"	parameters all	iObjectType				= 3,
										bEnableRafter			= bEnableRafter,
										bEnableSymbol			= bEnableSymbol,
										bEnableResolution		= bEnableResolution,
										gs_iDisplayStandards	= gs_iDisplayStandards

ui_page TABID_GEOMETRY, TABID_ROOT, `Геометрия`, "uiTab_Dimension_flat(1)"
if gs_ui_current_page = TABID_GEOMETRY then
	gosub "geometryPage"
endif

! ======================================================================
end
! ======================================================================

"geometryPage":
! =============================================================================
! Geometry
! =============================================================================

	pageStartY		= 5
	picX			= 29
	picY			= pageStartY + 41
	xInfieldSmall	= 70
	xInfieldBig		= 90
	yInfield		= 19

	ui_pict 2,	picX+67, picY-2, 135,  56, 1					!collarbeam_pict1.png
	ui_pict 3,	picX+55, picY+54, 252, 37, 1					!collarbeam_pict2.png
	ui_pict 4,	picX-1, picY+115, 323, 47, 1					!collarbeam_pict3.png
	ui_pict 5,	picX+31, picY+91, 36,  24, 1					!collarbeam_pict4.png
	ui_pict 6,	picX+228, picY+91, 77,  24, 1					!collarbeam_pict5.png
	if rm_iCollarType = TYPE_DOUBLE then
		ui_pict 7,	picX+299, picY-18, 43, 42, 1				!collarbeam_pict6.png
	else
		if rm_iCollarType = TYPE_RIGHT then
			ui_pict 9,	picX+299, picY-18, 43, 42, 1			!collarbeam_pict8.png
		else
			ui_pict 8,	picX+299, picY-18, 43, 42, 1			!collarbeam_pict7.png
		endif
	endif


	ui_infield "rm_RelativeHeight", picX+323, picY+90, xInfieldBig, yInfield	ui_tooltip stGeometry[1]
	ui_pict 1, picX-28, picY+168, 24, 17, 1										!ui_rm_angle_1.png
	ui_infield "rm_PitchAngle_1", picX-1, picY+165, xInfieldBig, yInfield		ui_tooltip stGeometry[2]
	ui_pict 1, picX+240, picY+168, 24, 17, 1									!ui_rm_angle_1.png
	ui_infield "rm_PitchAngle_2", picX+267, picY+165, xInfieldBig, yInfield		ui_tooltip stGeometry[3]
	if rm_iCollarType = TYPE_LEFT then
		ui_infield "rm_RafterWidth", picX+343, picY+11, xInfieldSmall, yInfield		ui_tooltip stGeometry[11]
		ui_infield "rm_ProfileWidth", picX+228, picY+11, xInfieldSmall, yInfield	ui_tooltip stGeometry[4]
		ui_infield "rm_ProfileHeight", picX+228, picY-14, xInfieldSmall, yInfield	ui_tooltip stGeometry[5]
	else
		ui_infield "rm_RafterWidth", picX+228, picY+11, xInfieldSmall, yInfield		ui_tooltip stGeometry[11]
		ui_infield "rm_ProfileWidth", picX+343, picY+11, xInfieldSmall, yInfield	ui_tooltip stGeometry[4]
		ui_infield "rm_ProfileHeight", picX+343, picY-14, xInfieldSmall, yInfield	ui_tooltip stGeometry[5]
	endif
	ui_infield "rm_StructuralLength", picX+103, picY+94, xInfieldBig, yInfield	ui_tooltip stGeometry[6]
	ui_infield "rm_ProjectedLength", picX+117, picY+165, xInfieldBig, yInfield	ui_tooltip stGeometry[7]

	ui_infield "rm_RafterHeight_1", picX-26, picY+1, xInfieldBig, yInfield		ui_tooltip stGeometry[9]
	ui_infield "rm_RafterHeight_2", picX-26, picY+24, xInfieldBig, yInfield		ui_tooltip stGeometry[10]

	ui_outfield stGeometry[8], picX+326, picY+131, 444-(picX+326), yInfield
	ui_outfield stGeometry[12], picX+233, picY-40, 88, yInfield

	ui_infield{3} "rm_iCollarType", picX+323, picY-44, xInfieldBig, yInfield,
		8, "", 0, 0,
		0,0,0,0,
		0, stType[1],	1,
		0, stType[2],	2,
		0, stType[3],	3 ui_tooltip stGeometry[12]
return

]]>
</Script_UI>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Comment SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Comment>

<CalledMacros SectVersion="2" SectionFlags="0" SubIdent="0">
	<Macro>
		<MName><![CDATA["RoofMaker_macro"]]></MName>
		<MainGUID>30FD2A4F-F31A-4D2A-88EF-73C19FC6BFB6</MainGUID>
	</Macro>
</CalledMacros>

<Copyright SectVersion="1" SectionFlags="0" SubIdent="0">
	<Author>GRAPHISOFT</Author>
	<License>
		<Type>CC BY-ND</Type>
		<Version>3.0</Version>
	</License>
</Copyright>

<Keywords SectVersion="1" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Keywords>

<MigrationTable SectVersion="1" SectionFlags="0" SubIdent="0">
	<MigrationTableElement>
		<MainGUID>9784176C-E6CA-4995-8BA1-925DD3E92031</MainGUID>
		<Version>19</Version>
		<Name><![CDATA[""]]></Name>
		<AutoMigration>true</AutoMigration>
	</MigrationTableElement>
</MigrationTable>

</Symbol>
